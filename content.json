{"meta":{"title":"å°å…µæ—­æ—­çš„åšå®¢","subtitle":null,"description":"å°å…µæ—­æ—­","author":"summxu","url":"https://summxu.github.io","root":"/"},"pages":[{"title":"å°å…µæ—­æ—­","date":"2023-08-29T09:51:35.293Z","updated":"2023-08-29T09:51:35.293Z","comments":false,"path":"about/index.html","permalink":"https://summxu.github.io/about/index.html","excerpt":"","text":"@card{ æœ«æ‰¹90åï¼Œå¤§å­¦ç½‘ç»œå·¥ç¨‹ã€‚ç°å±…å±±ä¸œï¼Œä¸å…¥æµå‰ç«¯å¼€å‘ ã€‚ ä¼šä¸€ç‚¹å„¿TypeScriptå’ŒReactNativeï¼Œå¬è¯´è¿‡Flutterã€‚ç°ç€è¿·WebGLï¼Œè‡³ä»Šä¸ä¼šä¿®ç”µè„‘ã€‚ å–œæ¬¢æ¸¸æˆï¼Œå°è¯•å»åšå¼€å‘ï¼Œä½†éš¾ä»¥è„±ç¦»Webï¼Œçœ‹å¥½Cocosã€‚ è½»åº¦å¼ºè¿«ç—‡ï¼Œå¸¸å¹´ä»£ç æ´ç™–ï¼Œä¼šå½±å“å¼€å‘è¿›åº¦ï¼Œä¸è¿‡è¿˜æ˜¯æƒ³å†æ…¢ä¸€äº›ã€‚ å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚ 1console.log(\"ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘\") }"},{"title":"æ ‡ç­¾åˆ†ç±»","date":"2019-09-14T08:39:14.000Z","updated":"2023-08-29T09:51:35.293Z","comments":false,"path":"tags/index.html","permalink":"https://summxu.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"ç°ä»£CSSè§£å†³æ–¹æ¡ˆï¼šåŸç”Ÿæ”¯æŒçš„ä¸‰è§’å‡½æ•°","slug":"2023/ç°ä»£CSSè§£å†³æ–¹æ¡ˆï¼šåŸç”Ÿæ”¯æŒçš„ä¸‰è§’å‡½æ•°","date":"2023-08-25T06:11:48.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2023/ç°ä»£CSSè§£å†³æ–¹æ¡ˆï¼šåŸç”Ÿæ”¯æŒçš„ä¸‰è§’å‡½æ•°/","link":"","permalink":"https://summxu.github.io/2023/ç°ä»£CSSè§£å†³æ–¹æ¡ˆï¼šåŸç”Ÿæ”¯æŒçš„ä¸‰è§’å‡½æ•°/","excerpt":"","text":"CSS ä¸‰è§’å‡½æ•°è¯­æ³•ä»‹ç»é¦–å…ˆçœ‹çœ‹ CSS ä¸‰è§’å‡½æ•°çš„ä½¿ç”¨æ–¹å¼ï¼š 12345678910111213.box &#123; /* è®¾ç½®å…ƒç´ çš„å®½åº¦ä¸º sin(30deg) çš„å€¼ */ width: calc(sin(30deg) * 100px); /* åæ­£å¼¦ æ ¹æ®å¼§åº¦å€¼è¿”å›å¯¹åº”çš„è§’åº¦å€¼ */ transform: rotate(asin(-0.2)); /* è®¾ç½®å…ƒç´ çš„é«˜åº¦ä¸º cos(45deg) çš„å€¼ */ height: calc(cos(45deg) * 100%); /* è®¾ç½®å…ƒç´ çš„é€æ˜åº¦ä¸º tan(60deg) çš„å€¼ */ opacity: calc(tan(60deg));&#125; ä¸Šè¿°ä»£ç ä¸­ï¼Œä½¿ç”¨äº† calc() å‡½æ•°è¿›è¡Œäº†è®¡ç®—ï¼Œç„¶åé€šè¿‡ sin()ã€cos() å’Œ tan() å‡½æ•°å¯¹è®¡ç®—ç»“æœè¿›è¡Œäº†è¿›ä¸€æ­¥çš„å¤„ç†ï¼Œä»è€Œå®ç°äº†ä¸åŒçš„æ•ˆæœã€‚ ä¸‰è§’å‡½æ•°åœ¨ CSS3 ä¸­ä»…å¯¹å¼§åº¦ï¼ˆradianï¼‰å•ä½è¿›è¡Œæ”¯æŒã€‚å¦‚æœæƒ³è¦åœ¨å¼€å‘ä¸­ä½¿ç”¨ä¸‰è§’å‡½æ•°ï¼Œå¯ä»¥å€ŸåŠ©è½¬æ¢å‡½æ•° deg() å’Œ rad() å°†è§’åº¦ï¼ˆdegreeï¼‰å’Œå¼§åº¦è¿›è¡Œè½¬æ¢ã€‚ CSS3 çš„è¿™äº›å‡½æ•°ä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´åŠ æ–¹ä¾¿å¤„ç†ä¸€äº›å¤æ‚çš„æ•°å­¦é—®é¢˜ï¼Œå¢å¼ºäº† CSS çš„è¡¨ç°åŠ›ã€‚ ä¸‰è§’å‡½æ•°çš„è¿åŠ¨è½¨è¿¹ä¸‰è§’å‡½æ•°çš„è¿ç”¨ï¼Œå¯ä»¥ä½“ç°åœ¨åŠ¨ç”»å½“ä¸­ã€‚ä»¥æ­£å¼¦ã€ä½™å¼¦å‡½æ•°ä¸ºä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334@property --angle &#123; syntax: '&lt;angle&gt;'; inherits: false; initial-value: 0deg;&#125;@property --dis &#123; syntax: '&lt;length&gt;'; inherits: false; initial-value: 0px;&#125;.g-single &#123; background: #000; margin: auto; width: 20px; height: 20px; border-radius: 50%; animation: move 5s infinite ease-in-out; transform: translate(calc(var(--dis) - 40vw), calc(5 * sin(var(--angle)) * 1em));&#125;@keyframes move &#123; 0% &#123; --dis: 0px; --angle: 0deg; &#125; 100% &#123; --dis: 80vw; --angle: 1080deg; &#125;&#125; ä¸Šè¿°çš„æ ¸å¿ƒåœ¨äºè¿™ä¸€æ®µä»£ç  -- transform: translate(calc(var(--dis) - 40vw), calc(5 * sin(var(--angle)) * 1em))å†…éƒ¨ä½¿ç”¨äº†ä¸¤ä¸ª CSS @property å˜é‡ï¼š x è½´æ–¹å‘æ˜¯ 0px åˆ° 80vw çš„æ°´å¹³ä½ç§»åŠ¨ç”» y è½´æ–¹å‘æ˜¯ 5 * sin(0deg) * 1em åˆ° 5 * sin(1080deg) * 1em çš„ç«–ç›´åŠ¨ç”» é€šè¿‡åŠ¨ç”»ï¼ŒåŠ¨æ€çš„ä¿®æ”¹è¿™ä¸¤ä¸ªå˜é‡çš„å€¼ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªä¸‰è§’å‡½æ•°æ›²çº¿åŠ¨ç”»å›¾å½¢ï¼š CSS é’Ÿè¡¨é’Ÿè¡¨ä¸Š1-12æŠ˜12ä¸ªæ•°å­—æŒ‰ç…§åœ†å½¢ç­‰é—´è·æ’å¸ƒï¼Œä¹Ÿæ˜¯CSSä¸‰è§’å‡½æ•°çš„å…¸å‹åº”ç”¨ã€‚ æ’ç‰ˆå®šä½çš„ç›¸å…³ä»£ç ï¼š 1234567891011121314151617181920212223.clock-face time &#123; --x: calc(var(--radius) + (var(--radius) * cos(var(--index) * 30deg))); --y: calc(var(--radius) + (var(--radius) * sin(var(--index) * 30deg))); display: grid; place-content: center; height: 2em; width: 2em; position: absolute; left: var(--x); top: var(--y);&#125;.clock-face time:nth-child(1) &#123; --index: 9; &#125;.clock-face time:nth-child(2) &#123; --index: 10; &#125;.clock-face time:nth-child(3) &#123; --index: 11; &#125;.clock-face time:nth-child(4) &#123; --index: 0; &#125;.clock-face time:nth-child(5) &#123; --index: 1; &#125;.clock-face time:nth-child(6) &#123; --index: 2; &#125;.clock-face time:nth-child(7) &#123; --index: 3; &#125;.clock-face time:nth-child(8) &#123; --index: 4; &#125;.clock-face time:nth-child(9) &#123; --index: 5; &#125;.clock-face time:nth-child(10) &#123; --index: 6; &#125;.clock-face time:nth-child(11) &#123; --index: 7; &#125;.clock-face time:nth-child(12) &#123; --index: 8; &#125; å®ç°çš„æ•ˆæœï¼ˆå®Œæ•´çš„ä»£ç å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹iframeçš„æºä»£ç ä¿¡æ¯ï¼‰ï¼š CSS æ•°å­¦å‡½æ•° sqrt() æ±‚å¹³æ–¹æ ¹ pow() å¹‚æŒ‡æ•° exp() è‡ªç„¶å¸¸æ•°eä¸ºåº•çš„æŒ‡æ•°å‡½æ•° log() å¯¹æ•°å‡½æ•° abs() ç»å¯¹å€¼ round() å››èˆäº”å…¥ sign() æ­£è´Ÿé›¶åˆ¤æ–­ â€¦. æ€»ç»“CSS åŸç”Ÿæ”¯æŒçš„ä¸‰è§’å‡½æ•°ï¼Œç»™ CSS æ‰“å¼€äº†æ›´å¤šçš„å¯èƒ½æ€§ï¼Œè¿™ä¹Ÿå¯¼è‡´ CSS çš„å¤æ‚åº¦ä¹Ÿæ˜¯æ„ˆæ¥æ„ˆé«˜ï¼ŒCSS å·²ç»ä¸å†æ˜¯éå¸¸çº¯ç²¹çš„è´Ÿè´£æ ·å¼äº†ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œå¾ˆå¤šè®¡ç®—ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ CSS å½“ä¸­å®Œæˆã€‚è‡³äºå¥½åï¼Œæˆ–è®¸å·²ç»æˆäº†ä¸€ä¸ªå“²å­¦é—®é¢˜ã€‚ è®°å½•ä¸¤ä¸ªcssé¡¹ç›®ï¼Œç¬¬äºŒä¸ªç›¸å½“ç‚¸è£‚ï¼š css-doodle css-fps-demo","categories":[],"tags":[{"name":"CSS","slug":"CSS","permalink":"https://summxu.github.io/tags/CSS/"}]},{"title":"Piniaä½¿ç”¨å’Œæºç è§£æ","slug":"2023/Piniaä½¿ç”¨å’Œæºç è§£æ","date":"2023-06-26T01:36:37.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2023/Piniaä½¿ç”¨å’Œæºç è§£æ/","link":"","permalink":"https://summxu.github.io/2023/Piniaä½¿ç”¨å’Œæºç è§£æ/","excerpt":"","text":"åˆ›å»ºpiniaåŸºæœ¬ä½¿ç”¨ 123456789101112131415const pinia = createPinia()const app = createApp(App)app.use(pinia)app.mount('#app')//vue2 ä½¿ç”¨import &#123; createPinia, PiniaVuePlugin &#125; from 'pinia'Vue.use(PiniaVuePlugin)const pinia = createPinia()new Vue(&#123; el: '#app', pinia,&#125;) createPinia å°†piniaç»‘å®šåˆ°å®ä¾‹ä¸Š åˆ›å»ºä¸€ä¸ªscopeç”¨æ¥ä¿å­˜ä¹‹ååˆ›å»ºçš„æ¯ä¸€ä¸ªstoreçš„stateï¼Œä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡pinia.state.value[storeId]ç›´æ¥è®¾ç½®state 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455//ceatePinia.tsexport function createPinia(): Pinia &#123; // åˆ›å»ºä¸ªscope effctæ¥å•ç‹¬ç®¡ç†state const scope = effectScope(true) // é€šè¿‡pinia.state.value[storeId]ä¼šä¿å­˜ä¹‹ååˆ›å»ºçš„storeçš„state const state = scope.run&lt;Ref&lt;Record&lt;string, StateTree&gt;&gt;&gt;(() =&gt; ref&lt;Record&lt;string, StateTree&gt;&gt;(&#123;&#125;) )! // æ’ä»¶ç›¸å…³ let _p: Pinia['_p'] = [] // plugins added before calling app.use(pinia) let toBeInstalled: PiniaPlugin[] = [] // markRawæ ‡è®°piniaä¸å¯è¢«ä»£ç†,é¿å…å­˜åœ¨ç”¨æˆ·å°†å…¶å“åº”å¼åŒ–å½±å“æ€§èƒ½çš„æƒ…å†µ const pinia: Pinia = markRaw(&#123; install(app: App) &#123; // è®¾ç½®å½“å‰æ´»è·ƒçš„piniaï¼Œæ–¹ä¾¿å…¶ä»–åœ°æ–¹è·å– setActivePinia(pinia) if (!isVue2) &#123; pinia._a = app // å†…éƒ¨é€šè¿‡injectè·å–pinia,å› ä¸ºpiniaSymbolæ²¡æœ‰å¯¼å‡ºï¼Œæ‰€ä»¥å¼€å‘è€…æ— æ³•é€šè¿‡injectè·å–pinia app.provide(piniaSymbol, pinia) // é€šè¿‡app.config.globalPropertieså°†piniaæŒ‚è½½åˆ°ç»„ä»¶å®ä¾‹ä¸Š app.config.globalProperties.$pinia = pinia if (USE_DEVTOOLS) &#123; registerPiniaDevtools(app, pinia) &#125; toBeInstalled.forEach((plugin) =&gt; _p.push(plugin)) toBeInstalled = [] &#125; &#125;, // piniaæ’ä»¶ç›¸å…³ï¼Œæš‚ä¸åˆ†æ use(plugin) &#123; if (!this._a &amp;&amp; !isVue2) &#123; toBeInstalled.push(plugin) &#125; else &#123; _p.push(plugin) &#125; return this &#125;, _p, // it's actually undefined here // @ts-expect-error _a: null, _e: scope, // æ¯ä¸ªåˆ›å»ºçš„storeéƒ½ä¼šæ”¾åœ¨è¿™ä¸ªMapé‡Œ _s: new Map&lt;string, StoreGeneric&gt;(), state, &#125;) //... return pinia&#125; è®¾ç½®ã€è·å–pinia piniaä¼šè¢«ä¿å­˜åˆ°ä¸€ä¸ªå…¨å±€å˜é‡ä¸Šï¼Œå†…éƒ¨å¯ä»¥é€šè¿‡setActivePiniaã€getActivePiniaå¿«é€Ÿè·å–åˆ°piniaï¼Œç„¶åä½¿ç”¨ä¸Šä¸€æ­¥æŒ‚åœ¨piniaä¸Šçš„å±æ€§æˆ–æ–¹æ³• 12345678910//rootStore.tsexport let activePinia: Pinia | undefinedexport const setActivePinia = (pinia: Pinia | undefined) =&gt; (activePinia = pinia) // å¦‚æœåœ¨vueç»„ä»¶ä¸­ï¼Œé€šè¿‡injectè·å–ï¼ˆåœ¨createPiniaä¸­å¯¼å‡ºï¼‰ã€å¦åˆ™ç›´æ¥å–å…¨å±€å˜é‡ export const getActivePinia = () =&gt; (getCurrentInstance() &amp;&amp; inject(piniaSymbol)) || activePinia å…¼å®¹vue2 çœ‹è¿‡vuexçš„è¿™æ®µåº”è¯¥å¾ˆç†Ÿæ‚‰ é€šè¿‡Object.definePropertyä»¿é€ äº†ä¸ªProvideåŠŸèƒ½ é€šè¿‡mixinså°†piniaæ³¨å…¥åˆ°æ¯ä¸€ä¸ªç»„ä»¶ä¸­ PiniaVuePlugin 12345678910111213141516171819202122232425262728293031323334353637383940//vue2-plugin.tsexport const PiniaVuePlugin: Plugin = function (_Vue) &#123; _Vue.mixin(&#123; beforeCreate() &#123; const options = this.$options if (options.pinia) &#123; // è·å–æ³¨å†Œåˆ°æ ¹ç»„ä»¶ä¸Šçš„pinia const pinia = options.pinia as Pinia // é€šè¿‡Object.definePropertyå®ç°çš„hackç‰ˆprovidã€inject... if (!(this as any)._provided) &#123; const provideCache = &#123;&#125; Object.defineProperty(this, '_provided', &#123; get: () =&gt; provideCache, set: (v) =&gt; Object.assign(provideCache, v), &#125;) &#125; ;(this as any)._provided[piniaSymbol as any] = pinia if (!this.$pinia) &#123; this.$pinia = pinia &#125; pinia._a = this as any if (IS_CLIENT) &#123; // this allows calling useStore() outside of a component setup after // installing pinia's plugin setActivePinia(pinia) &#125; if (USE_DEVTOOLS) &#123; registerPiniaDevtools(pinia._a, pinia) &#125; &#125; else if (!this.$pinia &amp;&amp; options.parent &amp;&amp; options.parent.$pinia) &#123; this.$pinia = options.parent.$pinia &#125; &#125;, destroyed() &#123; delete this._pStores &#125;, &#125;)&#125; åˆ›å»ºstoreåˆ›å»ºstoreçš„ä¸‰ç§æ–¹å¼ 123456789101112131415161718192021222324252627282930313233const useUserStore = defineStore('counter', &#123; state: () =&gt; (&#123; count: 0 &#125;), actions: &#123; increment() &#123; this.count++ &#125; &#125;&#125;)// orconst useUserStore = defineStore(&#123; id: 'counter', state: () =&gt; (&#123; count: 0 &#125;), actions: &#123; increment() &#123; this.count++ &#125; &#125;&#125;)// orconst useUserStore = defineStore('counter', () =&gt; &#123; const count = ref(0) function increment() &#123; count.value++ &#125; return &#123; count, increment &#125;&#125;) defineStore ä¸»è¦æ ¹æ®defineStoreçš„ä¸åŒæ–¹å¼é€‰æ‹©è°ƒç”¨å‡½æ•°å¼createSetupStoreè¿˜æ˜¯é€‰é¡¹å¼createOptionsStore åˆ›å»ºå¥½çš„storeä¼šæ ¹æ®defineStoreæ—¶ä¼ å…¥çš„idï¼ŒæŒ‚è½½åˆ°pinia._sè¿™ä¸ªmapä¸Š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596export function defineStore( // TODO: add proper types from above idOrOptions: any, setup?: any, setupOptions?: any): StoreDefinition &#123; let id: string let options const isSetupStore = typeof setup === 'function' // æŠ¹å¹³ä¸åŒæ ¼å¼å‚æ•° if (typeof idOrOptions === 'string') &#123; id = idOrOptions options = isSetupStore ? setupOptions : setup &#125; else &#123; options = idOrOptions id = idOrOptions.id &#125; // æœ€ç»ˆäº¤ç»™å¼€å‘è€…è·å–storeçš„æ–¹æ³• function useStore(pinia?: Pinia | null, hot?: StoreGeneric): StoreGeneric &#123; const currentInstance = getCurrentInstance() // å¦‚æœå­˜åœ¨currentInstanceè¯´æ˜åœ¨vueç»„ä»¶ä¸­ï¼Œé€šè¿‡injectè·å–åˆ°pinia pinia = (__TEST__ &amp;&amp; activePinia &amp;&amp; activePinia._testing ? null : pinia) || (currentInstance &amp;&amp; inject(piniaSymbol, null)) //è®¾ç½®å½“å‰æ´»è·ƒçš„piniaå¯¹è±¡ï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªpiniaå¯¹è±¡ï¼Œæ–¹ä¾¿å¿«é€Ÿè·å–å½“å‰piniaå¯¹è±¡ if (pinia) setActivePinia(pinia) if (__DEV__ &amp;&amp; !activePinia) &#123; throw new Error( `[ğŸ]: getActivePinia was called with no active Pinia. Did you forget to install pinia?\\n` + `\\tconst pinia = createPinia()\\n` + `\\tapp.use(pinia)\\n` + `This will fail in production.` ) &#125; // ä»rootStoreæ–‡ä»¶ä¸­å–çš„å…¨å±€å˜é‡ pinia = activePinia! // å¦‚æœæ²¡æœ‰åˆ›å»ºè¿‡idå¯¹åº”çš„store,åˆ™ä¼šè°ƒç”¨createSetupStoreæˆ–createOptionsStoreè¿›è¡Œåˆ›å»º if (!pinia._s.has(id)) &#123; // åŒºåˆ†ç¬¬äºŒä¸ªå‚æ•°æ˜¯å‡½æ•°è¿˜æ˜¯optionså¯¹è±¡ if (isSetupStore) &#123; createSetupStore(id, setup, options, pinia) &#125; else &#123; createOptionsStore(id, options as any, pinia) &#125; /* istanbul ignore else */ if (__DEV__) &#123; // @ts-expect-error: not the right inferred type useStore._pinia = pinia &#125; &#125; // è·å–ä¸Šé¢åˆ›å»ºå¥½çš„storeï¼Œpinia._sæ˜¯ä¸€ä¸ªMapç»“æ„ const store: StoreGeneric = pinia._s.get(id)! // çƒ­æ›´æ–°ç›¸å…³,é‡æ–°åˆ›å»ºæ›´æ–°store if (__DEV__ &amp;&amp; hot) &#123; const hotId = '__hot:' + id const newStore = isSetupStore ? createSetupStore(hotId, setup, options, pinia, true) : createOptionsStore(hotId, assign(&#123;&#125;, options) as any, pinia, true) hot._hotUpdate(newStore) // cleanup the state properties and the store from the cache delete pinia.state.value[hotId] pinia._s.delete(hotId) &#125; // å¾€å½“å‰ç»„ä»¶å®ä¾‹ä¸Šç¼“å­˜storeï¼Œä¸»è¦æ˜¯ç»™devtoolsä½¿ç”¨ if ( __DEV__ &amp;&amp; IS_CLIENT &amp;&amp; currentInstance &amp;&amp; currentInstance.proxy &amp;&amp; // avoid adding stores that are just built for hot module replacement !hot ) &#123; const vm = currentInstance.proxy const cache = '_pStores' in vm ? vm._pStores! : (vm._pStores = &#123;&#125;) cache[id] = store &#125; // StoreGeneric cannot be casted towards Store return store as any &#125; useStore.$id = id return useStore&#125; createSetupStoreå¦‚æœdefineStoreä¼ å…¥çš„æ˜¯ä¸€ä¸ªsetupå‡½æ•°ï¼Œåˆ™ä¼šè°ƒç”¨æ­¤æ–¹æ³•åˆ›å»ºstore å“åº”å¼å¤„ç†store store -&gt; reactive(store) pinia.state.value[storeId]åˆå§‹åŒ–ï¼Œstateä¼šå¾€piniaä¸Šå­˜ä¸€ä»½å’Œåœ¨storeä¸Šå­˜ä¸€ä»½ å°†storeæ³¨å†Œåˆ°pinia._sè¿™ä¸ªMapä¸Š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687function createSetupStore( $id: Id, setup: () =&gt; SS, options: | DefineSetupStoreOptions&lt;Id, S, G, A&gt; | DefineStoreOptions&lt;Id, S, G, A&gt; = &#123;&#125;, pinia: Pinia, hot?: boolean, isOptionsStore?: boolean)&#123;let scope!: EffectScope //ä¸ºsetupå‡½æ•°è¿”å›çš„å†…å®¹å•ç‹¬å»ºç«‹ä¸€ä¸ªscopeif (__DEV__ &amp;&amp; !pinia._e.active) &#123; //pinia._eä¸ºåˆ›å»ºpiniaæ—¶å»ºç«‹çš„scope throw new Error('Pinia destroyed') &#125;const initialState = pinia.state.value[$id] as UnwrapRef&lt;S&gt; | undefined// å¦‚æœpinia.state.value[storeId]æœªåˆå§‹åŒ–ï¼Œè¿›è¡Œåˆå§‹åŒ–if (!isOptionsStore &amp;&amp; !initialState &amp;&amp; (!__DEV__ || !hot)) &#123; if (isVue2) &#123; set(pinia.state.value, $id, &#123;&#125;) &#125; else &#123; pinia.state.value[$id] = &#123;&#125; &#125;&#125;//...// å¯¹å¤–æš´éœ²çš„storeå†…å®¹const partialStore = &#123; _p: pinia, // _s: scope, $id, // è°ƒç”¨$onActionä¼šå°†å›è°ƒåŠ å…¥åˆ°actionSubscriptionsä¸­,wrapActionå†…ä¼šè§¦å‘å›è°ƒ $onAction: addSubscription.bind(null, actionSubscriptions), $patch, $reset, $subscribe(callback, options = &#123;&#125;) &#123; const removeSubscription = addSubscription( subscriptions, callback, options.detached, () =&gt; stopWatcher() ) // ç›‘å¬stateç›´æ¥ä¿®æ”¹ const stopWatcher = scope.run(() =&gt; watch( () =&gt; pinia.state.value[$id] as UnwrapRef&lt;S&gt;, (state) =&gt; &#123; // flushé»˜è®¤ä¸º'pre',è€Œåœ¨è°ƒç”¨$patchæ—¶isListeningä¼šè¢«è®¾ç½®ä¸ºfalse,æ‰€ä»¥ä¸ä¼šè§¦å‘$patchä¿®æ”¹stateçš„ç›‘å¬å›è°ƒ if (options.flush === 'sync' ? isSyncListening : isListening) &#123; callback( &#123; storeId: $id, type: MutationType.direct, events: debuggerEvents as DebuggerEvent, &#125;, state ) &#125; &#125;, assign(&#123;&#125;, $subscribeOptions, options) ) )! return removeSubscription &#125;, $dispose,&#125; as _StoreWithState&lt;Id, S, G, A&gt;// è¿”å›çš„storeæ˜¯ä¸ªreactiveå¯¹è±¡const store: Store&lt;Id, S, G, A&gt; = reactive( __DEV__ || USE_DEVTOOLS ? assign( &#123; _hmrPayload, _customProperties: markRaw(new Set&lt;string&gt;()), // devtools custom properties &#125;, partialStore // must be added later // setupStore ) : partialStore) as unknown as Store&lt;Id, S, G, A&gt;// å°†storeæ³¨å†Œåˆ°piniaä¸Špinia._s.set($id, store)&#125; å¤„ç†setupè¿”å›çš„å†…å®¹ 12345678910111213141516171819 function createSetupStore( $id: Id, setup: () =&gt; SS, options: | DefineSetupStoreOptions&lt;Id, S, G, A&gt; | DefineStoreOptions&lt;Id, S, G, A&gt; = &#123;&#125;, pinia: Pinia, hot?: boolean, isOptionsStore?: boolean)&#123; // ... // å°†defineStoreä½¿ç”¨è€…å®šä¹‰çš„è¿”å›å†…å®¹æ”¾è¿›scopeä¸­,åœ¨ç»„ä»¶å¸è½½æ—¶å›æ”¶effect const setupStore = pinia._e.run(() =&gt; &#123; scope = effectScope() return scope.run(() =&gt; setup()) &#125;)! // ...&#125; åŒæ­¥setupè¿”å›å†…å®¹å’Œpinia.state å› ä¸ºstateä¼šåœ¨storeä¸Šå­˜ä¸€ä»½ï¼Œä¹Ÿä¼šåœ¨pinia.state.value[storeId]ä¸Šå­˜ä¸€ä»½ï¼Œæ‰€ä»¥ä¸ºäº†ä¿è¯ä¸¤è¾¹éƒ½æ˜¯åŒä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œéœ€è¦è¿›è¡ŒåŒæ­¥ ä½¿ç”¨è€…å¯ä»¥ç›´æ¥é€šè¿‡pinia.state.valueè®¾ç½®storeå†…å®¹ï¼Œæ‰€ä»¥ç›´æ¥è®¾ç½®çš„å†…å®¹ä¹Ÿéœ€è¦åŒæ­¥ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485 function createSetupStore( $id: Id, setup: () =&gt; SS, options: | DefineSetupStoreOptions&lt;Id, S, G, A&gt; | DefineStoreOptions&lt;Id, S, G, A&gt; = &#123;&#125;, pinia: Pinia, hot?: boolean, isOptionsStore?: boolean)&#123; // ... // å°†defineStoreä½¿ç”¨è€…å®šä¹‰çš„è¿”å›å†…å®¹æ”¾è¿›scopeä¸­,åœ¨ç»„ä»¶å¸è½½æ—¶å›æ”¶effectconst setupStore = pinia._e.run(() =&gt; &#123; scope = effectScope() return scope.run(() =&gt; setup())&#125;)!for (const key in setupStore) &#123; const prop = setupStore[key] // åªå¤„ç†refã€reactiveå¯¹è±¡ï¼Œcomputedç­‰ä¸å¤„ç† if ((isRef(prop) &amp;&amp; !isComputed(prop)) || isReactive(prop)) &#123; // mark it as a piece of state to be serialized if (__DEV__ &amp;&amp; hot) &#123; // çƒ­æ›´æ–°ç›¸å…³ï¼Œå¿½ç•¥ set(hotState.value, key, toRef(setupStore as any, key)) // optionç»“æ„å·²ç»åœ¨createOptionsStoreå°†å…¶åŠ å…¥pinia &#125; else if (!isOptionsStore) &#123;// åŒæ­¥pinia.state -&gt; store // å°†ç”¨æˆ·å¯èƒ½ç›´æ¥è°ƒç”¨pinia.state.value[$id]è®¾ç½®çš„refã€reactiveå¯¹è±¡è®¾ç½®åˆ°setupè¿”å›çš„ç»“æœä¸Š,è®©äºŒè€…çš„å“åº”å¼éƒ½ä»£ç†ä¸€ä¸ªå¯¹è±¡ // ä½¿å¾—storeã€piniaèƒ½åŒæ­¥æ›´æ”¹ if (initialState &amp;&amp; shouldHydrate(prop)) &#123; if (isRef(prop)) &#123; prop.value = initialState[key] &#125; else &#123; // probably a reactive object, lets recursively assign // åŒæ­¥å…¶ä»–ç±»å‹ mergeReactiveObjects(prop, initialState[key]) &#125; &#125; // transfer the ref to the pinia state to keep everything in sync // å°†setupè¿”å›çš„refã€reactiveå¯¹è±¡åŒæ­¥åˆ°pinia.stateä¸Šï¼Œä½¿å¾—storeã€piniaèƒ½åŒæ­¥æ›´æ”¹ if (isVue2) &#123; //åŒæ­¥ store -&gt; pinia.state set(pinia.state.value[$id], key, prop) &#125; else &#123; pinia.state.value[$id][key] = prop &#125; &#125; &#125;&#125;// åˆå¹¶æ–¹æ³•function mergeReactiveObjects&lt; T extends Record&lt;any, unknown&gt; | Map&lt;unknown, unknown&gt; | Set&lt;unknown&gt;&gt;(target: T, patchToApply: _DeepPartial&lt;T&gt;): T &#123; // åˆå¹¶Mapç±»å‹ if (target instanceof Map &amp;&amp; patchToApply instanceof Map) &#123; patchToApply.forEach((value, key) =&gt; target.set(key, value)) &#125; // åˆå¹¶Setç±»å‹ if (target instanceof Set &amp;&amp; patchToApply instanceof Set) &#123; patchToApply.forEach(target.add, target) &#125; for (const key in patchToApply) &#123; if (!patchToApply.hasOwnProperty(key)) continue const subPatch = patchToApply[key] const targetValue = target[key] // åªæœ‰æ™®é€šå¯¹è±¡æ‰ä¼šè¿›å…¥é€’å½’ if ( isPlainObject(targetValue) &amp;&amp; isPlainObject(subPatch) &amp;&amp; target.hasOwnProperty(key) &amp;&amp; !isRef(subPatch) &amp;&amp; !isReactive(subPatch) ) &#123; target[key] = mergeReactiveObjects(targetValue, subPatch) &#125; else &#123; target[key] = subPatch &#125; &#125; return target&#125; å¤„ç†action å°†actionæ›¿æ¢æˆwrapActionï¼ŒwrapActionæ·»åŠ äº†è®¢é˜…å‘å¸ƒç›¸å…³çš„åŠŸèƒ½ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748 function createSetupStore( $id: Id, setup: () =&gt; SS, options: | DefineSetupStoreOptions&lt;Id, S, G, A&gt; | DefineStoreOptions&lt;Id, S, G, A&gt; = &#123;&#125;, pinia: Pinia, hot?: boolean, isOptionsStore?: boolean)&#123; // ... // å°†defineStoreä½¿ç”¨è€…å®šä¹‰çš„è¿”å›å†…å®¹æ”¾è¿›scopeä¸­,åœ¨ç»„ä»¶å¸è½½æ—¶å›æ”¶effectconst setupStore = pinia._e.run(() =&gt; &#123; scope = effectScope() return scope.run(() =&gt; setup())&#125;)!for (const key in setupStore) &#123; const prop = setupStore[key] // åªå¤„ç†refã€reactiveå¯¹è±¡ï¼Œcomputedç­‰ä¸å¤„ç† if ((isRef(prop) &amp;&amp; !isComputed(prop)) || isReactive(prop)) &#123; // ... &#125; else if (typeof prop === 'function') &#123; // å°†setupä¸­çš„æ–¹æ³•æ›¿æ¢æˆwrapActionåŒ…è£…çš„æ–¹æ³•ï¼ŒwrapActionåœ¨è®¢é˜…å‘å¸ƒç« èŠ‚è§£æ const actionValue = __DEV__ &amp;&amp; hot ? prop : wrapAction(key, prop) if (isVue2) &#123; set(setupStore, key, actionValue) &#125; else &#123; // @ts-expect-error setupStore[key] = actionValue &#125; /* istanbul ignore else */ if (__DEV__) &#123; _hmrPayload.actions[key] = prop &#125; // list actions so they can be used in plugins // @ts-expect-error optionsForPlugin.actions[key] = prop &#125; &#125;&#125; å¤„ç†storeåˆå¹¶setup 12345678910111213141516171819202122232425262728293031323334353637383940 function createSetupStore( $id: Id, setup: () =&gt; SS, options: | DefineSetupStoreOptions&lt;Id, S, G, A&gt; | DefineStoreOptions&lt;Id, S, G, A&gt; = &#123;&#125;, pinia: Pinia, hot?: boolean, isOptionsStore?: boolean)&#123;// ...// å¯¹å¤–æš´éœ²çš„store APIconst partialStore = &#123;//...&#125;const store: Store&lt;Id, S, G, A&gt; = reactive(//...partialStore)// å°†defineStoreä½¿ç”¨è€…å®šä¹‰çš„è¿”å›å†…å®¹æ”¾è¿›scopeä¸­,åœ¨ç»„ä»¶å¸è½½æ—¶å›æ”¶effectconst setupStore = pinia._e.run(() =&gt; &#123;scope = effectScope()return scope.run(() =&gt; setup())&#125;)!for (const key in setupStore) &#123;// ...&#125; // å°†æœ€åŒæ­¥åçš„ç»“æœï¼Œåˆå¹¶è¿›storeä¸Š if (isVue2) &#123; Object.keys(setupStore).forEach((key) =&gt; &#123; set(store, key, setupStore[key]) &#125;) &#125; else &#123; // å°†storeçš„reactiveå¯¹è±¡ã€åŸå§‹å¯¹è±¡éƒ½è¿›è¡Œåˆå¹¶ assign(store, setupStore) assign(toRaw(store), setupStore) &#125;&#125; createOptionsStoreå½“ä¼ å…¥çš„æ˜¯optioné…ç½®æ—¶ï¼Œåˆ™ä¼šè°ƒç”¨æ­¤æ–¹æ³•åˆ›å»ºstore createSetupStoreå†…éƒ¨ä¼šå°†optionè½¬æ¢æˆsetupæ–¹æ³•ï¼Œç„¶åå®é™…è°ƒç”¨createSetupStoreè¿›è¡Œåˆ›å»º 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081function createOptionsStore&lt; Id extends string, S extends StateTree, G extends _GettersTree&lt;S&gt;, A extends _ActionsTree&gt;( id: Id, options: DefineStoreOptions&lt;Id, S, G, A&gt;, pinia: Pinia, hot?: boolean): Store&lt;Id, S, G, A&gt; &#123; const &#123; state, actions, getters &#125; = options const initialState: StateTree | undefined = pinia.state.value[id] let store: Store&lt;Id, S, G, A&gt; // å°†optionsè½¬åŒ–æˆsetupå‡½æ•° function setup() &#123; // åˆå§‹åŒ–pinia.state if (!initialState &amp;&amp; (!__DEV__ || !hot)) &#123; if (isVue2) &#123; set(pinia.state.value, id, state ? state() : &#123;&#125;) &#125; else &#123; pinia.state.value[id] = state ? state() : &#123;&#125; &#125; &#125; // å°†pinia.stateå…¨éƒ¨è½¬æ¢æˆrefï¼Œå’Œsetupä¸­è¿”å›refæ•ˆæœä¸€è‡´ const localState = __DEV__ &amp;&amp; hot ? // use ref() to unwrap refs inside state TODO: check if this is still necessary toRefs(ref(state ? state() : &#123;&#125;).value) : toRefs(pinia.state.value[id]) // æœ€ç»ˆoptions storeè¿”å›çš„å†…å®¹æ ¼å¼å’Œsetup storeè¿”å›çš„å†…å®¹æ ¼å¼ä¸€è‡´ return assign( localState, actions, // å°† getter è½¬æ¢æˆ computed Object.keys(getters || &#123;&#125;).reduce((computedGetters, name) =&gt; &#123; if (__DEV__ &amp;&amp; name in localState) &#123; console.warn( `[ğŸ]: A getter cannot have the same name as another state property. Rename one of them. Found with \"$&#123;name&#125;\" in store \"$&#123;id&#125;\".` ) &#125;// getterå‡½æ•°ä¸å¯ä»£ç†ï¼ŒåŠä¸å¯¹computedåšé¢å¤–å¤„ç†ï¼Œå’Œsetupä¸­ä¸€è‡´ computedGetters[name] = markRaw( computed(() =&gt; &#123; setActivePinia(pinia) // it was created just before const store = pinia._s.get(id)! // allow cross using stores if (isVue2 &amp;&amp; !store._r) return // @ts-expect-error // return getters![name].call(context, context) return getters![name].call(store, store) &#125;) ) return computedGetters &#125;, &#123;&#125; as Record&lt;string, ComputedRef&gt;) ) &#125; // optioné€‰é¡¹æ³¨å†Œçš„piniaä¼šè¢«è½¬æ¢æˆsetupå‡½æ•°å½¢å¼ store = createSetupStore(id, setup, options, pinia, hot, true) store.$reset = function $reset() &#123; const newState = state ? state() : &#123;&#125; // we use a patch to group all changes into one single subscription this.$patch(($state) =&gt; &#123; assign($state, newState) &#125;) &#125; return store as any&#125; è®¢é˜…å‘å¸ƒpiniaèƒ½å¤Ÿå¯¹ä¿®æ”¹stateã€actionè¿›è¡Œç›‘å¬ï¼Œå†…éƒ¨é€šè¿‡å‘å¸ƒè®¢é˜…æ¨¡å¼ã€watch APIå®ç° å‘å¸ƒè®¢é˜…æ¨¡å¼ å°†å­˜å‚¨è®¢é˜…å™¨çš„åŠŸèƒ½å’Œæ•´ä¸ªè®¾è®¡è§£è—•ï¼Œäº¤ç»™å¤–éƒ¨æ¥ä¼ å…¥ï¼Œå¥½å¤„æ˜¯èƒ½å¤Ÿå¤„ç†ä¸åŒç±»å‹çš„å‘å¸ƒè®¢é˜… 1234567891011121314151617181920212223242526272829303132//subscriptions.tsexport function addSubscription&lt;T extends _Method&gt;( subscriptions: T[], //å¤–éƒ¨ä¼ å…¥å­˜å‚¨å™¨ callback: T, detached?: boolean, // æ˜¯å¦åœ¨ç»„ä»¶å¸è½½æ—¶æ¸…é™¤è®¢é˜… onCleanup: () =&gt; void = noop) &#123; subscriptions.push(callback) // æ¸…é™¤è®¢é˜… const removeSubscription = () =&gt; &#123; const idx = subscriptions.indexOf(callback) if (idx &gt; -1) &#123; subscriptions.splice(idx, 1) onCleanup() &#125; &#125; // å¦‚æœæ²¡ä¼ detached,åˆ™ä¼šè‡ªåŠ¨åœ¨ç»„ä»¶å¸è½½æ—¶æ¸…é™¤è®¢é˜… if (!detached &amp;&amp; getCurrentScope()) &#123; onScopeDispose(removeSubscription) &#125; return removeSubscription&#125;export function triggerSubscriptions&lt;T extends _Method&gt;( subscriptions: T[], ...args: Parameters&lt;T&gt;) &#123; subscriptions.slice().forEach((callback) =&gt; &#123; callback(...args) &#125;)&#125; ç›‘å¬action åŸºæœ¬ä½¿ç”¨ 12345678910111213141516171819202122232425262728293031const unsubscribe = someStore.$onAction( (&#123; name, // action åç§° store, // store å®ä¾‹ï¼Œç±»ä¼¼ `someStore` args, // ä¼ é€’ç»™ action çš„å‚æ•°æ•°ç»„ after, // åœ¨ action è¿”å›æˆ–è§£å†³åçš„é’©å­ onError, // action æŠ›å‡ºæˆ–æ‹’ç»çš„é’©å­ &#125;) =&gt; &#123; // è¿™å°†åœ¨æ‰§è¡Œ \"store \"çš„ action ä¹‹å‰è§¦å‘ã€‚ console.log(`xx`) // è¿™å°†åœ¨ action æˆåŠŸå¹¶å®Œå…¨è¿è¡Œåè§¦å‘ã€‚å®ƒç­‰å¾…ç€ä»»ä½•è¿”å›çš„ promise after((result) =&gt; &#123; console.log( `Finished \"$&#123;name&#125;\" after $&#123; Date.now() - startTime &#125;ms.\\nResult: $&#123;result&#125;.` ) &#125;) // å¦‚æœ action æŠ›å‡ºæˆ–è¿”å›ä¸€ä¸ªæ‹’ç»çš„ promiseï¼Œè¿™å°†è§¦å‘ onError((error) =&gt; &#123; console.warn( `Failed \"$&#123;name&#125;\" after $&#123;Date.now() - startTime&#125;ms.\\nError: $&#123;error&#125;.` ) &#125;) &#125;)// æ‰‹åŠ¨åˆ é™¤ç›‘å¬å™¨unsubscribe() é€šè¿‡$onActionæ·»åŠ è®¢é˜…123456789101112131415161718192021222324252627282930313233function createSetupStore&lt; Id extends string, SS extends Record&lt;any, unknown&gt;, S extends StateTree, G extends Record&lt;string, _Method&gt;, A extends _ActionsTree&gt;( $id: Id, setup: () =&gt; SS, options: | DefineSetupStoreOptions&lt;Id, S, G, A&gt; | DefineStoreOptions&lt;Id, S, G, A&gt; = &#123;&#125;, pinia: Pinia, hot?: boolean, isOptionsStore?: boolean): Store&lt;Id, S, G, A&gt; &#123;// ...// å¯¹å¤–æš´éœ²çš„storeå†…å®¹const partialStore = &#123; _p: pinia, // _s: scope, $id, // è°ƒç”¨$onActionä¼šå°†å›è°ƒåŠ å…¥åˆ°actionSubscriptionsä¸­,è°ƒç”¨wrapActionå†…ä¼šè§¦å‘å›è°ƒ $onAction: addSubscription.bind(null, actionSubscriptions), $patch, $reset, $subscribe(callback, options = &#123;&#125;) &#123; // ... &#125;, $dispose,&#125; as _StoreWithState&lt;Id, S, G, A&gt;// ...&#125; é€šè¿‡wrapActionè¿›è¡Œå‘å¸ƒ setupã€optionä¸­çš„æ–¹æ³•ï¼Œä¼šè¢«æ›¿æ¢æˆwrapAction å½“è°ƒç”¨wrapActionæ—¶ï¼Œä¼šè§¦å‘actionSubscriptionsã€afterCallbackListæˆ–onErrorCallbackListä¸­çš„å›è°ƒ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283function createSetupStore&lt; Id extends string, SS extends Record&lt;any, unknown&gt;, S extends StateTree, G extends Record&lt;string, _Method&gt;, A extends _ActionsTree&gt;( $id: Id, setup: () =&gt; SS, options: | DefineSetupStoreOptions&lt;Id, S, G, A&gt; | DefineStoreOptions&lt;Id, S, G, A&gt; = &#123;&#125;, pinia: Pinia, hot?: boolean, isOptionsStore?: boolean): Store&lt;Id, S, G, A&gt; &#123;// ...// internal statelet isListening: boolean // å¼‚æ­¥ç›‘å¬let isSyncListening: boolean // åŒæ­¥ç›‘å¬let subscriptions: SubscriptionCallback&lt;S&gt;[] = markRaw([]) // ç›‘å¬stateçš„è®¢é˜…é›†åˆlet actionSubscriptions: StoreOnActionListener&lt;Id, S, G, A&gt;[] = markRaw([]) // ç›‘å¬actionçš„è®¢é˜…é›†åˆ// ...// åŒ…è£…actionè°ƒç”¨ï¼Œè¿½åŠ å‘å¸ƒè®¢é˜…åŠŸèƒ½function wrapAction(name: string, action: _Method) &#123; return function (this: any) &#123; // æ ¹æ®é—­åŒ…ä¸Šä¸‹æ–‡ï¼Œè°ƒç”¨æ—¶è®¾ç½®å½“å‰æ´»è·ƒçš„pinia setActivePinia(pinia) const args = Array.from(arguments) // è°ƒç”¨actionåå›è°ƒé›†åˆ const afterCallbackList: Array&lt;(resolvedReturn: any) =&gt; any&gt; = [] const onErrorCallbackList: Array&lt;(error: unknown) =&gt; unknown&gt; = [] function after(callback: _ArrayType&lt;typeof afterCallbackList&gt;) &#123; afterCallbackList.push(callback) &#125; function onError(callback: _ArrayType&lt;typeof onErrorCallbackList&gt;) &#123; onErrorCallbackList.push(callback) &#125; // è§¦å‘actionæ—¶çš„å›è°ƒï¼ŒåŒæ—¶å°†afterç­‰æ–¹æ³•é€šè¿‡å‚æ•°ä¼ å…¥ triggerSubscriptions(actionSubscriptions, &#123; args, name, store, after, onError, &#125;) let ret: any try &#123; ret = action.apply(this &amp;&amp; this.$id === $id ? this : store, args) &#125; catch (error) &#123; // å¤„ç†åŒæ­¥é”™è¯¯ triggerSubscriptions(onErrorCallbackList, error) throw error &#125; // å¦‚æœæ˜¯å¼‚æ­¥æ–¹æ³• if (ret instanceof Promise) &#123; return ret .then((value) =&gt; &#123; // è·å–åˆ°actionè°ƒç”¨ç»“æœåè§¦å‘ triggerSubscriptions(afterCallbackList, value) return value &#125;) .catch((error) =&gt; &#123; triggerSubscriptions(onErrorCallbackList, error) return Promise.reject(error) &#125;) &#125; // allow the afterCallback to override the return value triggerSubscriptions(afterCallbackList, ret) return ret &#125;&#125;&#125; ç›‘å¬ä¿®æ”¹stateä¿®æ”¹stateæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§é€šè¿‡store.stateç›´æ¥ä¿®æ”¹ç„¶åé€šè¿‡watch APIè¿›è¡Œç›‘å¬ï¼Œå¦ä¸€ç§é€šè¿‡$patchè¿›è¡Œæ‰¹é‡ä¿®æ”¹ï¼Œé€šè¿‡$patchè¿›è¡Œæ‰¹é‡ä¿®æ”¹æ—¶ï¼Œä¸ºäº†åªè§¦å‘ä¸€æ¬¡å›è°ƒéœ€è¦æ‰‹åŠ¨è§¦å‘ åŸºæœ¬ä½¿ç”¨ 12345678910cartStore.$subscribe((mutation, state) =&gt; &#123; // import &#123; MutationType &#125; from 'pinia' mutation.type // 'direct' | 'patch object' | 'patch function' // å’Œ cartStore.$id ä¸€æ · mutation.storeId // 'cart' // åªæœ‰ mutation.type === 'patch object'çš„æƒ…å†µä¸‹æ‰å¯ç”¨ mutation.payload // ä¼ é€’ç»™ cartStore.$patch() çš„è¡¥ä¸å¯¹è±¡ã€‚ // ...&#125;) ç›´æ¥ä¿®æ”¹state $subscribeç›‘å¬stateç›´æ¥ä¿®æ”¹ï¼Œå†…éƒ¨é€šè¿‡watch APIå®ç° 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071function createSetupStore&lt; Id extends string, SS extends Record&lt;any, unknown&gt;, S extends StateTree, G extends Record&lt;string, _Method&gt;, A extends _ActionsTree&gt;( $id: Id, setup: () =&gt; SS, options: | DefineSetupStoreOptions&lt;Id, S, G, A&gt; | DefineStoreOptions&lt;Id, S, G, A&gt; = &#123;&#125;, pinia: Pinia, hot?: boolean, isOptionsStore?: boolean): Store&lt;Id, S, G, A&gt; &#123;// internal statelet isListening: boolean // set to true at the endlet isSyncListening: boolean // set to true at the end// ...// å¯¹å¤–æš´éœ²çš„storeå†…å®¹const partialStore = &#123; _p: pinia, // _s: scope, $id, // è°ƒç”¨$onActionä¼šå°†å›è°ƒåŠ å…¥åˆ°actionSubscriptionsä¸­,è°ƒç”¨wrapActionå†…ä¼šè§¦å‘å›è°ƒ $onAction: addSubscription.bind(null, actionSubscriptions), $patch, $reset, $subscribe(callback, options = &#123;&#125;) &#123; // ä½¿ç”¨è€…è°ƒç”¨åå°†è®¢é˜…å›è°ƒæ·»åŠ è¿›subscriptionsconst removeSubscription = addSubscription( subscriptions, callback, options.detached, () =&gt; stopWatcher()) // é€šè¿‡watchç›‘å¬store.stateç›´æ¥ä¿®æ”¹const stopWatcher = scope.run(() =&gt; watch( () =&gt; pinia.state.value[$id] as UnwrapRef&lt;S&gt;, (state) =&gt; &#123; // flushé»˜è®¤ä¸º'pre',è€Œåœ¨è°ƒç”¨$patchæ—¶isListeningä¼šè¢«è®¾ç½®ä¸ºfalse,æ‰€ä»¥ä¸ä¼šè§¦å‘$patchä¿®æ”¹stateçš„ç›‘å¬å›è°ƒ // ä½†å¯¹äºstore.stateç›´æ¥ä¿®æ”¹çš„æƒ…å†µï¼Œstoreåœ¨åˆ›å»ºå®ŒæˆåisSyncListeningå’ŒisListeningéƒ½ä¼šå˜æˆtrueï¼Œæ‰€ä»¥èƒ½å¤Ÿç›‘å¬ if (options.flush === 'sync' ? isSyncListening : isListening) &#123; callback( &#123; storeId: $id, type: MutationType.direct, // typeä¸ºdirectç›´æ¥ä¿®æ”¹ events: debuggerEvents as DebuggerEvent, &#125;, state ) &#125; &#125;, assign(&#123;&#125;, $subscribeOptions, options) ))!return removeSubscription &#125;, $dispose,&#125; as _StoreWithState&lt;Id, S, G, A&gt;// ...// æ•´ä¸ªstoreåˆ›å»ºç»“æŸåå°†ä¸¤ä¸ªç›‘å¬æ ‡è¯†ä¸ºtrue,æ„å‘³ç€storeåˆ›å»ºå®Œæˆ,å¯ä»¥è¿›è¡Œç›‘å¬è®¢é˜…æ“ä½œisListening = trueisSyncListening = truereturn store&#125; $patchä¿®æ”¹ $patchç”¨äºæ‰¹é‡ä¿®æ”¹stateï¼Œå†…éƒ¨ä¸»è¦é€šè¿‡ä¸¤ä¸ªæ ‡è¯†ä½çš„ä¿®æ”¹ï¼Œä¸è§¦å‘watchç›‘å¬å›è°ƒ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576function createSetupStore&lt; Id extends string, SS extends Record&lt;any, unknown&gt;, S extends StateTree, G extends Record&lt;string, _Method&gt;, A extends _ActionsTree&gt;( $id: Id, setup: () =&gt; SS, options: | DefineSetupStoreOptions&lt;Id, S, G, A&gt; | DefineStoreOptions&lt;Id, S, G, A&gt; = &#123;&#125;, pinia: Pinia, hot?: boolean, isOptionsStore?: boolean): Store&lt;Id, S, G, A&gt; &#123;// internal statelet isListening: boolean // set to true at the endlet isSyncListening: boolean // set to true at the end// ...function $patch( partialStateOrMutator: | _DeepPartial&lt;UnwrapRef&lt;S&gt;&gt; | ((state: UnwrapRef&lt;S&gt;) =&gt; void)): void &#123; // è®¢é˜…$patchæ“ä½œtype let subscriptionMutation: SubscriptionCallbackMutation&lt;S&gt; // é¿å…æ‰¹é‡ä¿®æ”¹è§¦å‘$subscribe isListening = isSyncListening = false if (__DEV__) &#123; debuggerEvents = [] &#125; // å…¼å®¹$patchä¼ é€’å‡½æ•°ã€å¯¹è±¡è°ƒç”¨çš„ä¸¤ç§è°ƒç”¨æ–¹å¼ if (typeof partialStateOrMutator === 'function') &#123; partialStateOrMutator(pinia.state.value[$id] as UnwrapRef&lt;S&gt;) subscriptionMutation = &#123; type: MutationType.patchFunction, // typeç±»å‹ storeId: $id, events: debuggerEvents as DebuggerEvent[], &#125; &#125; else &#123; // $patchä¼ é€’å¯¹è±¡èµ°åˆå¹¶æµç¨‹ mergeReactiveObjects(pinia.state.value[$id], partialStateOrMutator) subscriptionMutation = &#123; type: MutationType.patchObject, // typeç±»å‹ payload: partialStateOrMutator, storeId: $id, events: debuggerEvents as DebuggerEvent[], &#125; &#125; const myListenerId = (activeListener = Symbol()) // å¯¹äºå¼‚æ­¥ä¿®æ”¹æƒ…å†µï¼Œå¼‚æ­¥è¿˜åŸisListening,è®©$subscribeä¸ä¼šç›‘å¬é€šè¿‡$patchä¿®æ”¹state nextTick().then(() =&gt; &#123; if (activeListener === myListenerId) &#123; isListening = true &#125; &#125;) isSyncListening = true // æ‰‹åŠ¨è§¦å‘è®¢é˜…,å®ç°é€šè¿‡$patchæ‰¹é‡ä¿®æ”¹stateåªè§¦å‘ä¸€æ¬¡è®¢é˜…å›è°ƒ triggerSubscriptions( subscriptions, subscriptionMutation, pinia.state.value[$id] as UnwrapRef&lt;S&gt; )&#125;// ...// æ•´ä¸ªstoreåˆ›å»ºç»“æŸåå°†ä¸¤ä¸ªç›‘å¬æ ‡è¯†ä¸ºtrue,æ„å‘³ç€storeåˆ›å»ºå®Œæˆ,å¯ä»¥è¿›è¡Œç›‘å¬è®¢é˜…æ“ä½œisListening = trueisSyncListening = truereturn store&#125; store API $reset å¯¹äºoptions storeæä¾›çš„è¿˜åŸåˆå§‹çŠ¶æ€çš„API 1234567891011121314151617// options storestore.$reset = function $reset() &#123; const newState = state ? state() : &#123;&#125; // stateä¸ºoptionsä¸­çš„state // é€šè¿‡$patchæ‰¹é‡ä¿®æ”¹ this.$patch(($state) =&gt; &#123; assign($state, newState) &#125;)&#125;// setup storeconst $reset = __DEV__ // å¼€å‘ç¯å¢ƒä¸‹ä¼šæŠ¥é”™ ? () =&gt; &#123; throw new Error( `ğŸ: Store \"$&#123;$id&#125;\" is built using the setup syntax and does not implement $reset().` ) &#125; : noop $dispose å¸è½½storeçš„API 1234567// å¸è½½storefunction $dispose() &#123; scope.stop() //å¸è½½storeçš„scope effect subscriptions = [] actionSubscriptions = [] pinia._s.delete($id) // ä»piniaä¸Šåˆ é™¤æ‰å¯¹åº”çš„store&#125; storeToRefsè§£æ„storeé€šè¿‡storeToRefsä½¿å¾—è§£æ„storeä¹Ÿä¸ä¼šä¸¢å¤±å“åº”å¼ åŸºæœ¬ä½¿ç”¨ 1234567891011121314151617181920212223242526272829303132333435363738394041export default defineComponent(&#123; setup() &#123; const store = useCounterStore() // âŒ è¿™å°†æ— æ³•ç”Ÿæ•ˆï¼Œå› ä¸ºå®ƒç ´åäº†å“åº”æ€§ // è¿™ä¸ä» `props` ä¸­è§£æ„æ˜¯ä¸€æ ·çš„ã€‚ const &#123; name, doubleCount &#125; = store name // \"eduardo\" doubleCount // 2 return &#123; // å§‹ç»ˆæ˜¯ \"eduardo\" name, // å§‹ç»ˆæ˜¯ 2 doubleCount, // è¿™ä¸ªå°†æ˜¯å“åº”å¼çš„ doubleValue: computed(() =&gt; store.doubleCount), &#125; &#125;,&#125;)// é€šè¿‡storeToRefsè°ƒç”¨import &#123; storeToRefs &#125; from 'pinia'export default defineComponent(&#123; setup() &#123; const store = useCounterStore() // `name` and `doubleCount` éƒ½æ˜¯å“åº”å¼ refs // è¿™ä¹Ÿå°†ä¸ºç”±æ’ä»¶æ·»åŠ çš„å±æ€§åˆ›å»º refs // åŒæ—¶ä¼šè·³è¿‡ä»»ä½• action æˆ–éå“åº”å¼(é ref/å“åº”å¼)å±æ€§ const &#123; name, doubleCount &#125; = storeToRefs(store) // åä¸º increment çš„ action å¯ä»¥ç›´æ¥æå– const &#123; increment &#125; = store return &#123; name, doubleCount, increment, &#125; &#125;,&#125;) storeToRefs ç±»ä¼¼toRefsï¼Œä½†ä¼šè·³è¿‡æ–¹æ³•å’Œéå“åº”å¼å±æ€§ 1234567891011121314151617181920212223242526272829303132// storeToRefs.tsexport function storeToRefs&lt;SS extends StoreGeneric&gt;( store: SS): ToRefs&lt; StoreState&lt;SS&gt; &amp; StoreGetters&lt;SS&gt; &amp; PiniaCustomStateProperties&lt;StoreState&lt;SS&gt;&gt;&gt; &#123; if (isVue2) &#123; // @ts-expect-error: toRefs include methods and others return toRefs(store) // vue2 ç‰ˆæœ¬ç›´æ¥all in ref &#125; else &#123; store = toRaw(store) // æ‹¿åˆ°storeåŸå§‹å¯¹è±¡ const refs = &#123;&#125; as ToRefs&lt; StoreState&lt;SS&gt; &amp; StoreGetters&lt;SS&gt; &amp; PiniaCustomStateProperties&lt;StoreState&lt;SS&gt;&gt; &gt; for (const key in store) &#123; const value = store[key] // åªè½¬æ¢refã€reactiveå±æ€§ if (isRef(value) || isReactive(value)) &#123; // @ts-expect-error: the key is state or getter refs[key] = // --- toRef(store, key) &#125; &#125; return refs &#125;&#125; mapç³»åˆ—è¾…åŠ©å‡½æ•° mapState åŸºæœ¬ä½¿ç”¨ 1234567891011121314151617export default &#123; computed: &#123; // å¯ä»¥è®¿é—®ç»„ä»¶ä¸­çš„ this.count // ä¸ä» store.count ä¸­è¯»å–çš„æ•°æ®ç›¸åŒ ...mapState(useCounterStore, ['count']) // ä¸ä¸Šè¿°ç›¸åŒï¼Œä½†å°†å…¶æ³¨å†Œä¸º this.myOwnName ...mapState(useCounterStore, &#123; myOwnName: 'count', // ä½ ä¹Ÿå¯ä»¥å†™ä¸€ä¸ªå‡½æ•°æ¥è·å¾—å¯¹ store çš„è®¿é—®æƒ double: store =&gt; store.count * 2, // å®ƒå¯ä»¥è®¿é—® `this`ï¼Œä½†å®ƒæ²¡æœ‰æ ‡æ³¨ç±»å‹... magicValue(store) &#123; return store.someGetter + this.count + this.double &#125;, &#125;), &#125;,&#125; mapState 123456789101112131415161718192021222324252627282930313233// mapHelpers.tsexport function mapState&lt; Id extends string, S extends StateTree, G extends _GettersTree&lt;S&gt;, A&gt;( useStore: StoreDefinition&lt;Id, S, G, A&gt;, keysOrMapper: any): _MapStateReturn&lt;S, G&gt; | _MapStateObjectReturn&lt;Id, S, G, A&gt; &#123; // è¿”å›ä¸€ä¸ªå¯¹è±¡ä½¿å¾—èƒ½å¤Ÿæ”¾åˆ°ç»„ä»¶çš„computedå±æ€§ä¸Š return Array.isArray(keysOrMapper) ? keysOrMapper.reduce((reduced, key) =&gt; &#123; reduced[key] = function (this: ComponentPublicInstance) &#123; // é€šè¿‡useStoreï¼Œå› ä¸ºstoreå·²ç»åˆ›å»ºï¼Œæ‰€ä»¥å†…éƒ¨ä¼šç›´æ¥é€šè¿‡pinia._s.get(id)ç›´æ¥è¿”å›storeè€Œä¸ä¼šé‡æ–°åˆ›å»º return useStore(this.$pinia)[key] &#125; as () =&gt; any return reduced &#125;, &#123;&#125; as _MapStateReturn&lt;S, G&gt;) : Object.keys(keysOrMapper).reduce((reduced, key: string) =&gt; &#123; // @ts-expect-error reduced[key] = function (this: ComponentPublicInstance) &#123; const store = useStore(this.$pinia) const storeKey = keysOrMapper[key] // for some reason TS is unable to infer the type of storeKey to be a // function return typeof storeKey === 'function' ? (storeKey as (store: Store&lt;Id, S, G, A&gt;) =&gt; any).call(this, store) : store[storeKey] &#125; return reduced &#125;, &#123;&#125; as _MapStateObjectReturn&lt;Id, S, G, A&gt;)&#125; mapGetters 1export const mapGetters = mapState //ğŸ‘ mapActions 123456789101112131415161718192021222324252627282930313233export function mapActions&lt; Id extends string, S extends StateTree, G extends _GettersTree&lt;S&gt;, A, KeyMapper extends Record&lt;string, keyof A&gt;&gt;( useStore: StoreDefinition&lt;Id, S, G, A&gt;, keysOrMapper: Array&lt;keyof A&gt; | KeyMapper): _MapActionsReturn&lt;A&gt; | _MapActionsObjectReturn&lt;A, KeyMapper&gt; &#123; return Array.isArray(keysOrMapper) ? keysOrMapper.reduce((reduced, key) =&gt; &#123; // å’ŒmapStateç±»ä¼¼,é—­åŒ…å­˜äº†ä¸‹thiså’Œå…¶ä»–å‚æ•° reduced[key] = function ( this: ComponentPublicInstance, ...args: any[] ) &#123; return useStore(this.$pinia)[key](...args) &#125; return reduced &#125;, &#123;&#125; as _MapActionsReturn&lt;A&gt;) : Object.keys(keysOrMapper).reduce((reduced, key: keyof KeyMapper) =&gt; &#123; // @ts-expect-error reduced[key] = function ( this: ComponentPublicInstance, ...args: any[] ) &#123; return useStore(this.$pinia)[keysOrMapper[key]](...args) &#125; return reduced &#125;, &#123;&#125; as _MapActionsObjectReturn&lt;A, KeyMapper&gt;)&#125; å’ŒvuexåŒºåˆ« ä¸å†æœ‰åµŒå¥—ç»“æ„çš„æ¨¡å— çœ‹è¿‡vuexçš„åº”è¯¥çŸ¥é“ï¼Œæ•´ä¸ªvuexå°±æ˜¯ä¸ªåµŒå¥—çš„å¤§å¯¹è±¡ï¼Œä¼šæ ¹æ®å‘½åç©ºé—´ä¸€æ­¥ä¸€æ­¥ä»å¯¹è±¡ä¸­å–å‡ºå†…å®¹ï¼Œä¸è¿‡å†…éƒ¨ä¼šå¸®ä½ æ‹¼æ¥å‘½åç©ºé—´è·¯å¾„ï¼Œå®é™…è°ƒç”¨æ—¶ä¹Ÿè¿˜å¥½ è€Œpiniaä¸å†é€šè¿‡å‘½åç©ºé—´æ¥åµŒå¥—å¯¹è±¡ï¼Œé€šè¿‡pinia._sè¿™ä¸ªMapç»“æ„æ¥å­˜å‚¨åˆ›å»ºçš„storeï¼Œé€šè¿‡pinia.state.value[storeId]æ¥å­˜å‚¨stateï¼Œæ•´ä¸ªå°±æ˜¯ä¸€å¹³çº§çš„ç»“æ„ åˆ›å»ºéå¸¸æ–¹ä¾¿ï¼Œå’Œå†™ä¸€ä¸ªhookå‡½æ•°ä¸€æ ·è½»æ¾ è™½ç„¶ä½†æ˜¯ï¼Œæ€»è§‰å¾—vueè¶Šæ¥è¶ŠåƒReactï¼Œç”¨è¿‡hoxçš„åº”è¯¥çŸ¥é“ï¼ŒPiniaçš„ä½¿ç”¨æ–¹å¼å‡ ä¹å’Œhoxä¸€æ¨¡ä¸€æ ·ã€‚ã€‚ã€‚ æ— éœ€mutation è§ä»è§æ™ºå§ï¼Œæœ‰ä¸ªmutationè°ƒç”¨æµç¨‹æ›´è§„èŒƒï¼Œæ²¡æœ‰å°±æ˜¯å‡½æ•°è°ƒç”¨ï¼Œæ— å­¦ä¹ æˆæœ¬ æ€»ç»“ä¸€ä¸‹ï¼Œè™½ç„¶å•é¡¹æ•°æ®æµç±»å‹çš„çŠ¶æ€ç®¡ç†åº“ï¼ˆreduxã€vuexï¼‰å…·æœ‰ååˆ†ä¸¥è°¨çš„è°ƒç”¨æ­¥éª¤ï¼Œä½†è¿™ç§å‡½æ•°å¼çš„æ–¹å¼æ‰æ˜¯æœªæ¥ï¼ˆä¸»è¦æ˜¯å¼€å‘çˆ½äº†ã€‚ã€‚ã€‚ï¼‰","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://summxu.github.io/tags/JavaScript/"},{"name":"Vue","slug":"Vue","permalink":"https://summxu.github.io/tags/Vue/"}]},{"title":"Vue3å“åº”å¼å±æ€§Reactiveå’ŒRef","slug":"2023/Vue3å“åº”å¼å±æ€§Reactiveå’ŒRef","date":"2023-02-27T00:49:38.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2023/Vue3å“åº”å¼å±æ€§Reactiveå’ŒRef/","link":"","permalink":"https://summxu.github.io/2023/Vue3å“åº”å¼å±æ€§Reactiveå’ŒRef/","excerpt":"","text":"ref çš„åŸºæœ¬ä½¿ç”¨1.ref:æ¥å—ä¸€ä¸ªå†…éƒ¨å€¼å¹¶è¿”å›ä¸€ä¸ªå“åº”å¼ä¸”å¯å˜çš„ ref å¯¹è±¡ã€‚ref å¯¹è±¡ä»…æœ‰ä¸€ä¸ª .value propertyï¼ŒæŒ‡å‘è¯¥å†…éƒ¨å€¼ã€‚ æ³¨æ„ï¼šè¢«refåŒ…è£…ä¹‹åéœ€è¦.value æ¥è¿›è¡Œèµ‹å€¼ï¼Œå› ä¸ºä½¿ç”¨refåŒ…è£…ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒRef TSå¯¹åº”çš„æ¥å£ 12345678910111213&lt;template&gt; &lt;button @click=\"onChangeMsg\"&gt;ä¿®æ”¹æ•°æ®&lt;/button&gt; &lt;div&gt;&#123;&#123; message &#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script setup lang=\"ts\"&gt;import &#123; ref, Ref &#125; from 'vue';const message: Ref&lt;string&gt; = ref('refå“åº”å¼æ•°æ®');const onChangeMsg = () =&gt; &#123; message.value = 'ä¿®æ”¹åçš„æ•°æ®';&#125;;&lt;/script&gt; tsçš„å¦å¤–ä¸€ç§æ–¹å¼ï¼š 12345678910111213&lt;template&gt; &lt;button @click=\"onChangeMsg\"&gt;ä¿®æ”¹æ•°æ®&lt;/button&gt; &lt;div&gt;&#123;&#123; message &#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script setup lang=\"ts\"&gt;import &#123; ref &#125; from 'vue';const message = ref&lt;string | number&gt;('refå“åº”å¼æ•°æ®');const onChangeMsg = () =&gt; &#123; message.value = 'ä¿®æ”¹åçš„æ•°æ®';&#125;;&lt;/script&gt; 3.shallowRefåˆ›å»ºä¸€ä¸ªè·Ÿè¸ªè‡ªèº« .value å˜åŒ–çš„ refï¼Œä½†ä¸ä¼šä½¿å…¶å€¼ä¹Ÿå˜æˆå“åº”å¼çš„ã€‚&lt;template&gt; 1234567891011121314151617181920212223242526&lt;template&gt; &lt;button @click=\"onChangeMsg\"&gt;ä¿®æ”¹æ•°æ®&lt;/button&gt; &lt;div&gt;&#123;&#123; message &#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script setup lang=\"ts\"&gt;import &#123; ref, shallowRef &#125; from 'vue';type Obj = &#123; name: string; num: number;&#125;;const message = shallowRef&lt;Obj&gt;(&#123; name: 'vue3', num: 100&#125;);const onChangeMsg = () =&gt; &#123; //ä¿®æ”¹çš„å€¼æ— æ³•æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š message.value.name = 'ä¿®æ”¹äº†name'; //ä¿®æ”¹çš„å€¼å¯ä»¥æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š //message.value = &#123; name: 'ä¿®æ”¹äº†name', num: 123 &#125;; //triggerRefå¼ºåˆ¶ä¿®æ”¹ï¼Œä¿®æ”¹çš„å€¼å¯ä»¥åœ¨é¡µé¢æ˜¾ç¤º triggerRef(message); console.log(message, 'message');&#125;;&lt;/script&gt; 4.customRef æ˜¯ä¸ªå·¥å‚å‡½æ•°è¦æ±‚æˆ‘ä»¬è¿”å›ä¸€ä¸ªå¯¹è±¡ å¹¶ä¸”å®ç° get å’Œ setï¼š åº”ç”¨åœºæ™¯ï¼šå®ç°é˜²æŠ–å‡½æ•° 12345678910111213141516171819202122232425262728&lt;template&gt; &lt;button @click=\"onChangeMsg\"&gt;ä¿®æ”¹æ•°æ®&lt;/button&gt; &lt;div&gt;&#123;&#123; message &#125;&#125;&lt;/div&gt;&lt;/template&gt; &lt;script setup lang=\"ts\"&gt;import &#123; ref, shallowRef, triggerRef, customRef &#125; from 'vue'; let message = MycustomRef('æˆ‘æ˜¯åŸå§‹æ•°æ®');const onChangeMsg = () =&gt; &#123; message.value = 'ä¿®æ”¹äº†æ•°æ®';&#125;; function MycustomRef&lt;T&gt;(value: T) &#123; return customRef((track, trigger) =&gt; &#123; return &#123; get: () =&gt; &#123; track();//é€šçŸ¥vueï¼Œè·Ÿè¸ªæ•°æ®çš„å˜åŒ– return value; &#125;, set: (newVal: T) =&gt; &#123; value = newVal; trigger();//é€šçŸ¥vueé‡æ–°è§£ææ¨¡ç‰ˆï¼ŒæŒ‚è½½æ•°æ® &#125; &#125;; &#125;);&#125;&lt;/script&gt; ref ä¸ºä½•è¦ç”¨.value åœ¨Vue2ä¸­ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½é€šè¿‡ä¸€ä¸ªDataè¿›è¡Œç»Ÿä¸€çš„è¿”å›ï¼Œå¹¶ä¸”åœ¨dataä¸­å¯¹æŸä¸ªç»„ä»¶è¦ç”¨çš„æ•°æ®è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†ï¼Œå¸¸è§çš„ä½¿ç”¨å½¢å¼æ˜¯è¿™æ ·çš„ï¼š 12345678910111213141516171819202122232425262728293031323334&lt;template&gt; &lt;div class=\"div\"&gt; &lt;todos :Obj=\"tos\" :removeObj=\"removeObj\"&gt;&lt;/todos&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import search from '@/components/search'import todos from '@/components/todos'import all from '@/components/all'export default &#123; name: 'App', data () &#123; return &#123; tos: [ &#123; id: '001', value: 'ç¬¬ä¸€ä¸ª', done: true &#125;, &#123; id: '002', value: 'ç¬¬äºŒä¸ª', done: true &#125;, &#123; id: '003', value: 'ç¬¬ä¸‰ä¸ª', done: false &#125;, &#123; id: '004', value: 'ç¬¬å››ä¸ª', done: true &#125;, ], &#125; &#125;, computed: &#123; &#125;, components: &#123; search, todos, all, &#125;, methods: &#123; removeObj (obj) &#123; console.log(obj.id) this.tos = this.tos.filter(item =&gt; item.id !== obj.id) console.log(this.tos) &#125;, &#125;,&#125;&lt;/script&gt; å¯ä»¥çœ‹å‡ºæ¥è¿™é‡Œå®šä¹‰çš„å†…å®¹éƒ½åœ¨ä¸€ä¸ªæ•°ç»„ä¸­è¿›è¡Œï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå°†è¦ä½¿ç”¨çš„æ•°æ®è¿”å›å‡ºæ¥ï¼Œè¿™é‡Œæ— è®ºæ€ä¹ˆè¿›è¡Œæ“ä½œå¤„ç†ï¼Œæœ€ç»ˆè¿›è¡Œæ•°æ®ä»£ç†çš„æ—¶å€™å¾—åˆ°çš„éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒVue2ä¸­ç›´æ¥é€šè¿‡definePropertyè¿›è¡Œå¤„ç†ï¼Œå¹¶ç»‘å®šå¯¹åº”çš„ç›‘å¬äº‹ä»¶è¿›è¡Œå“åº”å¼çš„å¤„ç†ã€‚ è€ŒVue3ä¸­ï¼Œæ•°æ®çš„å®šä¹‰å¯ä»¥æ˜¯å•ç‹¬çš„ï¼ŒVueå¯ä»¥è®©éšæ—¶éœ€è¦éšæ—¶å®šä¹‰ï¼Œè¿™ä¹Ÿå°±å¸¦æ¥äº†å¦ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘éœ€è¦çš„ä¸€ä¸ªæ•°æ®å¯èƒ½ä¸æ˜¯å¯¹è±¡ å¦‚æœè¦å®šä¹‰çš„æ•°æ®ä¸æ˜¯å¯¹è±¡ï¼Œè¿˜éœ€è¦ä»£ç†ä¼šæ€ä¹ˆæ ·ï¼Ÿ Object.defineProperty() æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œå¹¶è¿”å›æ­¤å¯¹è±¡ã€‚ é€šè¿‡è¿™ä¸ªå¯ä»¥æ˜ç¡®çœ‹å‡ºï¼Œåªèƒ½è¿›è¡Œå¯¹è±¡çš„ä»£ç†ï¼Œä¸èƒ½è¿›è¡Œæ™®é€šæ•°æ®çš„ä»£ç† åœ¨Vue3ä¸­æ•°æ®ä»£ç†å¯ä»¥ä½¿ç”¨å•ä¸€æ•°æ®äº†ï¼Œå¹¶ä¸”ä¹Ÿæ”¹è¿›äº†æ•°æ®ä»£ç†çš„æ–¹å¼ï¼Œä½¿ç”¨çš„æ˜¯Proxyå®Œæˆäº†æ•°æ®ä»£ç†ï¼Œè€ŒMDNä¸­å¯¹Proxyä¹Ÿè¿›è¡Œäº†å®šä¹‰ï¼š Proxy å¯¹è±¡ç”¨äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„ä»£ç†ï¼Œä»è€Œå®ç°åŸºæœ¬æ“ä½œçš„æ‹¦æˆªå’Œè‡ªå®šä¹‰ï¼ˆå¦‚å±æ€§æŸ¥æ‰¾ã€èµ‹å€¼ã€æšä¸¾ã€å‡½æ•°è°ƒç”¨ç­‰ï¼‰ã€‚ å³ä½¿æ˜¯Vue3ä¸­ä½¿ç”¨çš„Proxyçš„ä»£ç†æ–¹å¼ä¹Ÿä¸èƒ½è¿›è¡Œæ™®é€šæ•°æ®çš„ä»£ç†ï¼Œæ‰€ä»¥å½“è°ƒç”¨Refçš„æ—¶å€™å…¶å®ä»ç„¶åˆ›å»ºäº†ä¸€ä¸ªProxyå¯¹è±¡ï¼Œå¹¶ä¸”Vueå¸®ä½ ç»™è¿™ä¸ªå¯¹è±¡äº†ä¸€ä¸ªvalueå±æ€§ï¼Œå±æ€§å€¼å°±æ˜¯ä½ å®šä¹‰çš„å†…å®¹ï¼Œæ”¹å˜çš„æ—¶å€™ç›‘è§†çš„æ”¹å˜ä¾ç„¶æ˜¯é€šè¿‡Proxyçš„æ•°æ®åŠ«æŒæ¥è¿›è¡Œå“åº”å¼çš„å¤„ç†ï¼Œè€Œæ¨¡æ¿ä¸­ä½¿ç”¨çš„æ—¶å€™Vueä¼šé»˜è®¤è°ƒç”¨å¯¹åº”çš„valueå±æ€§ï¼Œä»è€Œå®Œæˆæ¨¡æ¿ä¸­çš„å†…å®¹çš„ç›´æ¥è°ƒç”¨ Reactive çš„åŸºæœ¬ä½¿ç”¨1.reactive:ç”¨æ¥ç»‘å®šå¤æ‚çš„æ•°æ®ç±»å‹ï¼šæ•°ç»„ï¼Œå¯¹è±¡ç­‰ã€‚ æ³¨æ„:reactiveå¦‚æœç»‘å®šçš„æ˜¯åŸºç¡€ç±»å‹æ•°æ®ä¼šæŠ¥é”™ã€‚ 123456789101112131415161718192021&lt;template&gt; &lt;button @click=\"onChangeMsg\"&gt;ä¿®æ”¹æ•°æ®&lt;/button&gt; &lt;div&gt;&#123;&#123; obj.name &#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script setup lang=\"ts\"&gt;import &#123; reactive &#125; from 'vue';let obj = reactive(&#123; name: 'å¼ ä¸‰', age: 18, boj: &#123; namespaced: true &#125;&#125;);setTimeout(() =&gt; &#123; obj.name = 'å¼‚æ­¥èµ‹å€¼æ— æ•ˆ';&#125;, 2000);const onChangeMsg = () =&gt; &#123; obj.name = 'æå››';&#125;;&lt;/script&gt; 2.readonly:æ‹·è´ä¸€ä»½proxyå¯¹è±¡å¹¶è®¾ç½®ä¸ºåªè¯»å±æ€§ 12345678910111213141516171819202122&lt;template&gt; &lt;button @click=\"onChangeMsg\"&gt;ä¿®æ”¹æ•°æ®&lt;/button&gt; &lt;div&gt;&#123;&#123; obj.name &#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script setup lang=\"ts\"&gt;import &#123; reactive, readonly &#125; from 'vue';let obj = reactive(&#123; name: 'å¼ ä¸‰', age: 18, boj: &#123; namespaced: true &#125;&#125;);let CopyObj = readonly(obj);setTimeout(() =&gt; &#123; CopyObj.name = 'å¼‚æ­¥èµ‹å€¼æ— æ•ˆ';&#125;, 2000);const onChangeMsg = () =&gt; &#123; CopyObj.name = 'æå››';&#125;;&lt;/script&gt; 3.shallowReactive:æ‹·è´ä¸€ä»½å¯¹è±¡ï¼Œå¯ä»¥ä¿®æ”¹æµ…å±‚æ•°æ®ï¼Œæ— æ³•ä¿®æ”¹æ·±å±‚æ•°æ® 1234567891011121314151617181920212223242526&lt;template&gt; &lt;button @click=\"onChangeMsg\"&gt;ä¿®æ”¹æ•°æ®&lt;/button&gt; &lt;div&gt;&#123;&#123; obj.name &#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script setup lang=\"ts\"&gt;import &#123; reactive, shallowReactive &#125; from 'vue';let obj = reactive(&#123; name: 'å¼ ä¸‰', age: 18, boj: &#123; namespaced: true &#125;&#125;);let CopyObj = shallowReactive(obj);setTimeout(() =&gt; &#123; //å¯ä»¥ä¿®æ”¹ CopyObj.name = 'å¼‚æ­¥èµ‹å€¼'; //æ— æ³•ä¿®æ”¹ CopyObj.boj.namespaced = false;&#125;, 2000);console.log(CopyObj.boj.namespaced);const onChangeMsg = () =&gt; &#123; CopyObj.name = 'æå››';&#125;;&lt;/script&gt;","categories":[],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://summxu.github.io/tags/Vue/"}]},{"title":"Vue3ä¸­watchå’ŒwatchEffectçš„ç”¨æ³•å’ŒåŒºåˆ«","slug":"2022/Vue3ä¸­watchå’ŒwatchEffectçš„ç”¨æ³•å’ŒåŒºåˆ«","date":"2022-10-12T09:13:34.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2022/Vue3ä¸­watchå’ŒwatchEffectçš„ç”¨æ³•å’ŒåŒºåˆ«/","link":"","permalink":"https://summxu.github.io/2022/Vue3ä¸­watchå’ŒwatchEffectçš„ç”¨æ³•å’ŒåŒºåˆ«/","excerpt":"","text":"1.1 watch åŸºæœ¬ä½¿ç”¨åœ¨ Vue3 ä¸­çš„ç»„åˆå¼ API ä¸­ï¼Œwatch çš„ä½œç”¨å’Œ Vue2 ä¸­çš„ watch ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œä»–ä»¬éƒ½æ˜¯ç”¨æ¥ç›‘å¬å“åº”å¼çŠ¶æ€å‘ç”Ÿå˜åŒ–çš„ï¼Œå½“å“åº”å¼çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéƒ½ä¼šè§¦å‘ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚ ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718&lt;template&gt; &lt;img alt=\"Vue logo\" src=\"./assets/logo.png\" /&gt; &lt;p&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt; &lt;button @click=\"changeMsg\"&gt;æ›´æ”¹ message&lt;/button&gt;&lt;/template&gt;&lt;script setup lang=\"ts\"&gt;import &#123; ref, watch &#125; from \"vue\";const message = ref(\"æå››\");watch(message, (newValue, oldValue) =&gt; &#123; console.log(\"æ–°çš„å€¼:\", newValue); console.log(\"æ—§çš„å€¼:\", oldValue);&#125;);const changeMsg = () =&gt; &#123; message.value = \"å¼ ä¸‰\";&#125;;&lt;/script&gt; ä¸Šæ®µä»£ç ä¸­ç‚¹å‡»æŒ‰é’®å°±ä¼šæ›´æ”¹å“åº”å¼å˜é‡ message çš„å€¼ã€‚åˆä½¿ç”¨ watch ç›‘å¬å™¨ç›‘å¬äº† message å˜é‡ï¼Œå½“å®ƒå‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±ä¼šè§¦å‘ watch ç›‘å¬å‡½æ•°ä¸­çš„å›è°ƒå‡½æ•°ï¼Œå¹¶ä¸”å›è°ƒå‡½æ•°é»˜è®¤æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šæ–°å€¼å’Œæ—§å€¼ã€‚ æ³¨æ„ï¼šå½“ç¬¬ä¸€è¿›å…¥é¡µé¢æ—¶ï¼Œwatch ç›‘å¬å‡½æ•°çš„å›è°ƒå‡½æ•°æ˜¯ä¸ä¼šæ‰§è¡Œçš„ã€‚ 1.2 watch ç›‘å¬ç±»å‹å‰é¢ä¸€ç›´å¼ºè°ƒ watch ç›‘å¬çš„æ˜¯å“åº”å¼æ•°æ®ï¼Œå¦‚æœç›‘å¬çš„æ•°æ®ä¸æ˜¯å“åº”å¼çš„ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šæŠ›å‡ºè­¦å‘Šã€‚ ï¼ˆ1ï¼‰ref å’Œè®¡ç®—å±æ€§ ref å®šä¹‰çš„æ•°æ®æ˜¯å¯ä»¥ç›‘å¬åˆ°çš„ï¼Œå› ä¸ºå‰é¢çš„ä»£ç ä»¥åŠè¯æ˜äº†ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè®¡ç®—å±æ€§ä¹Ÿæ˜¯å¯ä»¥ç›‘å¬åˆ°çš„ï¼Œæ¯”å¦‚ä¸‹åˆ—ä»£ç ï¼š 12345678const message = ref(\"æå››\");const newMessage = computed(() =&gt; &#123; return message.value;&#125;);watch(newMessage, (newValue, oldValue) =&gt; &#123; console.log(\"æ–°çš„å€¼:\", newValue); console.log(\"æ—§çš„å€¼:\", oldValue);&#125;); å½“ message å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè®¡ç®—å±æ€§ newMessage ä¹Ÿä¼šé‡æ–°è®¡ç®—å¾—å‡ºæ–°çš„ç»“æœï¼Œ watch ç›‘å¬å‡½æ•°æ˜¯å¯ä»¥ç›‘å¬åˆ°è®¡ç®—å±æ€§å˜åŒ–çš„ã€‚ ï¼ˆ2ï¼‰getter å‡½æ•° è¿™é‡Œçš„ getter å‡½æ•°å¯ä»¥ç®€å•çš„ç†è§£ä¸ºè·å–æ•°æ®çš„ä¸€ä¸ªå‡½æ•°ï¼Œè¯´ç™½äº†è¯¥å‡½æ•°å°±æ˜¯ä¸€ä¸ªè¿”å›å€¼çš„æ“ä½œï¼Œæœ‰ç‚¹ç±»ä¼¼ä¸è®¡ç®—å±æ€§ã€‚ ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526&lt;template&gt; &lt;img alt=\"Vue logo\" src=\"./assets/logo.png\" /&gt; &lt;p&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt; &lt;p&gt;&#123;&#123; x1 + x2 &#125;&#125;&lt;/p&gt; &lt;button @click=\"changeMsg\"&gt;æ›´æ”¹ message&lt;/button&gt;&lt;/template&gt;&lt;script setup lang=\"ts\"&gt;import &#123; ref, watch &#125; from \"vue\";const message = ref(\"æå››\");const x1 = ref(12);const x2 = ref(13);watch( () =&gt; x1.value + x2.value, (newValue, oldValue) =&gt; &#123; console.log(\"æ–°çš„å€¼:\", newValue); console.log(\"æ—§çš„å€¼:\", oldValue); &#125;);const changeMsg = () =&gt; &#123; message.value = \"å¼ ä¸‰\"; x1.value = 14; x2.value = 23;&#125;;&lt;/script&gt; ä¸Šæ®µä»£ç ä¸­ watch ç›‘å¬å™¨ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ getter å‡½æ•°ï¼Œgetter å‡½æ•°è¿”å›çš„æ˜¯å“åº”å¼æ•°æ® x1 å’Œ x2 ç›¸åŠ çš„å€¼ï¼Œå½“è¿™ä¸¤ä¸ªä¸­ä¸­æœ‰ä¸€ä¸ªå˜åŒ–ï¼Œéƒ½ä¼šæ‰§è¡Œ watch ä¸­çš„å›è°ƒå‡½æ•°ã€‚æœ‰ç‚¹åƒæ˜¯ç›´æ¥æŠŠè®¡ç®—å±æ€§å†™åˆ°ç›‘å¬å™¨é‡Œé¢å»äº†ã€‚ ï¼ˆ3ï¼‰ç›‘å¬å“åº”å¼å¯¹è±¡ å‰é¢ç›‘å¬çš„éƒ½æ˜¯å€¼ç±»å‹çš„å“åº”å¼æ•°æ®ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥ç›‘å¬å“åº”å¼çš„å¯¹è±¡ã€‚ ä»£ç å¦‚ä¸‹ï¼š 12345678const number = reactive(&#123; count: 0 &#125;);const countAdd = () =&gt; &#123; number.count++;&#125;;watch(number, (newValue, oldValue) =&gt; &#123; console.log(\"æ–°çš„å€¼:\", newValue); console.log(\"æ—§çš„å€¼:\", oldValue);&#125;); å½“ watch ç›‘å¬çš„æ˜¯ä¸€ä¸ªå“åº”å¼å¯¹è±¡æ—¶ï¼Œä¼šéšå¼åœ°åˆ›å»ºä¸€ä¸ªæ·±å±‚ä¾¦å¬å™¨ï¼Œå³è¯¥å“åº”å¼å¯¹è±¡é‡Œé¢çš„ä»»ä½•å±æ€§å‘ç”Ÿå˜åŒ–ï¼Œéƒ½ä¼šè§¦å‘ç›‘å¬å‡½æ•°ä¸­çš„å›è°ƒå‡½æ•°ã€‚ éœ€è¦æ³¨æ„çš„ï¼Œwatch ä¸èƒ½ç›´æ¥ç›‘å¬å“åº”å¼å¯¹è±¡çš„å±æ€§ï¼Œå³ä¸‹é¢çš„å†™æ³•æ˜¯é”™è¯¯çš„ï¼š 12345678const number = reactive(&#123; count: 0 &#125;);const countAdd = () =&gt; &#123; number.count++;&#125;;watch(number.count, (newValue, oldValue) =&gt; &#123; console.log(\"æ–°çš„å€¼:\", newValue); console.log(\"æ—§çš„å€¼:\", oldValue);&#125;); ä¸Šæ®µä»£ç ä¸­ç›¸å½“äºä½ ç›´æ¥å‘ watch ä¼ é€’äº†ä¸€ä¸ªéå“åº”å¼çš„æ•°å­—ï¼Œç„¶è€Œ watch åªèƒ½ç›‘å¬å“åº”å¼æ•°æ®ã€‚ ä½†æ˜¯ï¼š å¦‚æœéè¦ç›‘å¬å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œå¯ä»¥ä½¿ç”¨ getter å‡½æ•°çš„å½¢å¼ï¼Œä»£ç å¦‚ä¸‹ï¼š 1234567watch( () =&gt; number.count, (newValue, oldValue) =&gt; &#123; console.log(\"æ–°çš„å€¼:\", newValue); console.log(\"æ—§çš„å€¼:\", oldValue); &#125;); ä¸Šæ®µä»£ç ä¹Ÿæ˜¯å¯ä»¥ç›‘å¬åˆ° count å˜åŒ–çš„ã€‚ ï¼ˆ4ï¼‰ç›‘å¬å¤šä¸ªæ¥æºçš„æ•°ç»„ watch è¿˜å¯ä»¥ç›‘å¬æ•°ç»„ï¼Œå‰ææ˜¯è¿™ä¸ªæ•°ç»„å†…éƒ¨å«æœ‰å“åº”å¼æ•°æ®ã€‚ ä»£ç å¦‚ä¸‹ï¼š 123456789const x1 = ref(12);const number = reactive(&#123; count: 0 &#125;);const countAdd = () =&gt; &#123; number.count++;&#125;;watch([x1, () =&gt; number.count], (newValue, oldValue) =&gt; &#123; console.log(\"æ–°çš„å€¼:\", newValue); console.log(\"æ—§çš„å€¼:\", oldValue);&#125;); 1.3 æ·±åº¦ç›‘å¬åœ¨å‰é¢çš„ä»£ç ä¸­ï¼Œå¦‚æœå°†ä¸€ä¸ªå“åº”å¼å¯¹è±¡ä¼ é€’ç»™ watch ç›‘å¬å™¨æ—¶ï¼Œåªè¦å¯¹è±¡é‡Œé¢çš„æŸä¸ªå±æ€§å‘ç”Ÿäº†å˜åŒ–ï¼Œé‚£ä¹ˆå°±ä¼šæ‰§è¡Œç›‘å¬å™¨å›è°ƒå‡½æ•°ã€‚ ç©¶å…¶åŸå› ï¼Œå› ä¸ºä¼ å…¥å“åº”å¯¹è±¡ç»™ watch æ—¶ï¼Œéšå¼çš„æ·»åŠ ä¸€ä¸ªæ·±åº¦ç›‘å¬å™¨ï¼Œè¿™å°±è®©é€ æˆäº†ç‰µä¸€å‘è€Œè‡³å…¨èº«çš„æ•ˆæœã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ˜¯ä½¿ç”¨çš„ getter å‡½æ•°è¿”å›å“åº”å¼å¯¹è±¡çš„å½¢å¼ï¼Œé‚£ä¹ˆå“åº”å¼å¯¹è±¡çš„å±æ€§å€¼å‘ç”Ÿå˜åŒ–ï¼Œæ˜¯ä¸ä¼šè§¦å‘ watch çš„å›è°ƒå‡½æ•°çš„ã€‚ ä»£ç å¦‚ä¸‹ï¼š 1234567891011const number = reactive(&#123; count: 0 &#125;);const countAdd = () =&gt; &#123; number.count++;&#125;;watch( () =&gt; number, (newValue, oldValue) =&gt; &#123; console.log(\"æ–°çš„å€¼:\", newValue); console.log(\"æ—§çš„å€¼:\", oldValue); &#125;,); ä¸Šæ®µä»£ç ä¸­ä½¿ç”¨ getter å‡½æ•°è¿”å›äº†å“åº”å¼å¯¹è±¡ï¼Œå½“æ›´æ”¹ number ä¸­ count çš„å€¼æ—¶ï¼Œwatch çš„å›è°ƒå‡½æ•°æ˜¯ä¸ä¼šæ‰§è¡Œçš„ã€‚ ä¸ºäº†å®ç°ä¸Šè¿°ä»£ç çš„ç›‘å¬ï¼Œå¯ä»¥æ‰‹åŠ¨ç»™ç›‘å¬å™¨åŠ ä¸Šæ·±åº¦ç›‘å¬çš„æ•ˆæœã€‚ ä»£ç å¦‚ä¸‹ï¼š 123456789101112const number = reactive(&#123; count: 0 &#125;);const countAdd = () =&gt; &#123; number.count++;&#125;;watch( () =&gt; number, (newValue, oldValue) =&gt; &#123; console.log(\"æ–°çš„å€¼:\", newValue); console.log(\"æ—§çš„å€¼:\", oldValue); &#125;, &#123; deep: true &#125;); æ·»åŠ æ·±åº¦ç›‘å¬å¾ˆç®€å•ï¼Œåªéœ€è¦ç»™ watch æ·»åŠ ç¬¬ä¸‰ä¸ªå‚æ•°å³å¯ï¼š{ deep: true }ã€‚ æ³¨æ„ï¼šä¸Šæ®µä»£ç ä¸­çš„ newValue å’Œ oldValue çš„å€¼æ˜¯ä¸€æ ·çš„ï¼Œé™¤éæŠŠå“åº”å¼å¯¹è±¡å³ number æ•´ä¸ªæ›¿æ¢æ‰ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå€¼æ‰ä¼šå˜å¾—ä¸ä¸€æ ·ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ·±åº¦ç›‘å¬ä¼šéå†å“åº”å¼å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œå¼€é”€è¾ƒå¤§ï¼Œå½“å¯¹è±¡ä½“å¾ˆå¤§æ—¶ï¼Œéœ€è¦æ…ç”¨ã€‚ æ‰€ä»¥æ¨è getter å‡½æ•°åªè¿”å›ç›¸åº”æ˜¯å¯¹è±¡ä¸­çš„æŸä¸€ä¸ªå±æ€§ï¼ï¼ 2.watchEffectå‰é¢ä½¿ç”¨ watch ç›‘å¬æ•°æ®çŠ¶æ€æ—¶ï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰å‘ç°è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šåªæœ‰å½“ç›‘å¬çš„æ•°æ®æºå‘ç”Ÿäº†å˜åŒ–ï¼Œç›‘å¬å‡½æ•°çš„å›è°ƒå‡½æ•°æ‰ä¼šæ‰§è¡Œã€‚ä½†æ˜¯éœ€æ±‚æ€»æ˜¯å¤šå˜çš„ï¼Œæœ‰äº›åœºæ™¯ä¸‹å¯èƒ½éœ€è¦åˆšè¿›é¡µé¢ï¼Œæˆ–è€…è¯´ç¬¬ä¸€æ¬¡æ¸²æŸ“é¡µé¢çš„æ—¶å€™ï¼Œwatch ç›‘å¬å™¨é‡Œé¢çš„å›è°ƒå‡½æ•°å°±æ‰§è¡Œä¸€éã€‚ é¢å¯¹è¿™ç§éœ€æ±‚æ€æ ·å¤„ç†å‘¢ï¼Ÿä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼š æ–¹å¼ä¸€ï¼š è¿™ç§æ–¹å¼ä¹Ÿæ˜¯é€šè¿‡ watch å®ç°çš„ï¼Œç¡®åˆ‡çš„è¯´æ˜¯å·§å¦™çš„å®ç°ï¼Œè€Œä¸æ˜¯ä¾èµ–äº watch ç›‘å¬å™¨ã€‚ ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415const number = reactive(&#123; count: 0 &#125;);// è¿›å…¥é¡µé¢å…ˆæ‰§è¡Œä¸€éconst callback = () =&gt; &#123; console.log(\"æ–°çš„å€¼:\", number.count); console.log(\"æ—§çš„å€¼:\", number.count);&#125;;callback();watch( () =&gt; number.count, (newValue, oldValue) =&gt; &#123; console.log(\"æ–°çš„å€¼:\", newValue); console.log(\"æ—§çš„å€¼:\", oldValue); &#125;, &#123; deep: true &#125;); æ—¢ç„¶æƒ³è¦ç¬¬ä¸€æ¬¡è¿›å…¥é¡µé¢çš„æ—¶å€™å°±æ‰§è¡Œä¸€éå›è°ƒå‡½æ•°ï¼Œé‚£ä¹ˆä¸å¦¨æŠŠå›è°ƒå‡½æ•°ç›´æ¥æå–å‡ºæ¥ï¼Œè¿›å…¥é¡µé¢æ‰§è¡Œä¸€éå³å¯ï¼Œè¿™ä¹Ÿç®—æ˜¯å·§å¦™çš„å®ç°äº†çš„éœ€æ±‚ã€‚ ä½†æ˜¯è¿™ç§æ–¹å¼ä¼¼ä¹ä¸å¤ªä¼˜é›…ï¼Œè€Œä¸”æœ‰äº›ç¹çã€‚æ‰€ä»¥ Vue æ¨å‡ºäº†æ›´åŠ ä¼˜é›…çš„æ–¹æ³•ï¼šwatchEffect ç›‘å¬å™¨ã€‚ æ–¹å¼äºŒï¼š watchEffect ä¹Ÿæ˜¯ä¸€ä¸ªç›‘å¬å™¨ï¼Œåªä¸è¿‡å®ƒä¸ä¼šåƒ watch é‚£æ ·æ¥æ”¶ä¸€ä¸ªæ˜ç¡®çš„æ•°æ®æºï¼Œå®ƒåªæ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚è€Œåœ¨è¿™ä¸ªå›è°ƒå‡½æ•°å½“ä¸­ï¼Œå®ƒä¼šè‡ªåŠ¨ç›‘å¬å“åº”æ•°æ®ï¼Œå½“å›è°ƒå‡½æ•°é‡Œé¢çš„å“åº”æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œå›è°ƒå‡½æ•°å°±ä¼šç«‹å³æ‰§è¡Œã€‚ æ‰€ä»¥å¯ä»¥å°†æ–¹å¼ä¸€ä¸­çš„ä»£ç ä½¿ç”¨ watchEffect ä¼˜é›…çš„å®ç°ã€‚ ä»£ç å¦‚ä¸‹ï¼š 1234567const number = reactive(&#123; count: 0 &#125;);const countAdd = () =&gt; &#123; number.count++;&#125;;watchEffect(()=&gt;&#123; console.log(\"æ–°çš„å€¼:\", number.count);&#125;) ä¸Šæ®µä»£ç ä¸­ï¼Œå½“ç¬¬ä¸€æ¬¡è¿›å…¥é¡µé¢æ—¶ï¼Œnumber å“åº”æ•°æ®ä»æ— åˆ°æœ‰ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šè§¦å‘ watchEffect çš„å›è°ƒå‡½æ•°ï¼Œå› ä¸ºåœ¨ watchEffect å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨äº† number å“åº”æ•°æ®ï¼Œæ‰€ä»¥å®ƒä¼šè‡ªåŠ¨è·Ÿè¸ª number æ•°æ®çš„å˜åŒ–ã€‚å½“ç‚¹å‡»æŒ‰é’®æ›´æ”¹ count çš„å€¼æ—¶ï¼ŒwatchEffect ä¸­çš„å›è°ƒå‡½æ•°ä¾¿ä¼šå†æ¬¡æ‰§è¡Œã€‚ è¿™æ ·ä»£ç æ˜¯ä¸æ˜¯ç®€å•å¾ˆå¤šå‘€ï¼ 3.watch å’Œ watchEffect åŒºåˆ«å·²ç»å¤§æ¦‚çŸ¥é“äº† watch å’Œ watchEffect çš„ç”¨æ³•ï¼Œé‚£ä¹ˆå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ç›¸ä¿¡ä¹Ÿäº†è§£äº†ä¸€äº›ï¼Œè¿™é‡Œæ€»ç»“ä¸€ä¸‹å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚ watch å’Œ watchEffect éƒ½èƒ½ç›‘å¬å“åº”å¼æ•°æ®çš„å˜åŒ–ï¼Œä¸åŒçš„æ˜¯å®ƒä»¬ç›‘å¬æ•°æ®å˜åŒ–çš„æ–¹å¼ä¸åŒã€‚ watch ä¼šæ˜ç¡®ç›‘å¬æŸä¸€ä¸ªå“åº”æ•°æ®ï¼Œè€Œ watchEffect åˆ™æ˜¯éšå¼çš„ç›‘å¬å›è°ƒå‡½æ•°ä¸­å“åº”æ•°æ®ã€‚ watch åœ¨å“åº”æ•°æ®åˆå§‹åŒ–æ—¶æ˜¯ä¸ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°çš„ï¼ŒwatchEffect åœ¨å“åº”æ•°æ®åˆå§‹åŒ–æ—¶å°±ä¼šç«‹å³æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚ 4.å›è°ƒä¸­çš„ DOMå¦‚æœåœ¨ç›‘å¬å™¨çš„å›è°ƒå‡½æ•°ä¸­æˆ–å– DOMï¼Œè¿™ä¸ªæ—¶å€™çš„ DOM æ˜¯æ›´æ–°å‰çš„è¿˜æ˜¯æ›´æ–°åçš„ï¼Ÿ ä¸å¦¨å®éªŒä¸€ä¸‹ã€‚ ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920&lt;template&gt; &lt;img alt=\"Vue logo\" src=\"./assets/logo.png\" /&gt; &lt;p ref=\"msgRef\"&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt; &lt;button @click=\"changeMsg\"&gt;æ›´æ”¹ message&lt;/button&gt;&lt;/template&gt;&lt;script setup lang=\"ts\"&gt;import &#123; computed, reactive, ref, watch, watchEffect &#125; from \"vue\";const message = ref(\"æå››\");const msgRef = ref&lt;any&gt;(null);const changeMsg = () =&gt; &#123; message.value = \"å¼ ä¸‰\";&#125;;watch(message, (newValue, oldValue) =&gt; &#123; console.log(\"DOM èŠ‚ç‚¹\", msgRef.value.innerHTML); console.log(\"æ–°çš„å€¼:\", newValue); console.log(\"æ—§çš„å€¼:\", oldValue);&#125;);&lt;/script&gt; é€šè¿‡ç‚¹å‡»æŒ‰é’®æ›´æ”¹ message çš„å€¼ï¼Œä»â€œæå››â€å˜ä¸ºâ€œå¼ ä¸‰â€ã€‚ä½†æ˜¯å‘ç°åœ¨ç›‘å¬å™¨çš„å›è°ƒå‡½æ•°é‡Œé¢è·å–åˆ°çš„ DOM å…ƒç´ è¿˜æ˜¯â€œæå››â€ï¼Œè¯´æ˜ DOM è¿˜æ²¡æœ‰æ›´æ–°ã€‚ è§£å†³æ–¹æ³•ï¼š å¦‚æœæƒ³è¦åœ¨å›è°ƒå‡½æ•°é‡Œé¢è·å–æ›´æ–°åçš„ DOMï¼Œéå¸¸ç®€å•ï¼Œåªéœ€è¦å†ç»™ç›‘å¬å™¨å¤šä¼ é€’ä¸€ä¸ªå‚æ•°é€‰é¡¹å³å¯ï¼šflush: â€˜postâ€™ã€‚watch å’Œ watchEffect åŒç†ã€‚ ä»£ç å¦‚ä¸‹ï¼š 123456watch(source, callback, &#123; flush: 'post'&#125;)watchEffect(callback, &#123; flush: 'post'&#125;) ä¿®æ”¹åçš„ä»£ç ï¼š 1234567891011watch( message, (newValue, oldValue) =&gt; &#123; console.log(\"DOM èŠ‚ç‚¹\", msgRef.value.innerHTML); console.log(\"æ–°çš„å€¼:\", newValue); console.log(\"æ—§çš„å€¼:\", oldValue); &#125;, &#123; flush: \"post\", &#125;); è¿™ä¸ªæ—¶å€™åœ¨å›è°ƒå‡½æ•°ä¸­è·å–åˆ°çš„å·²ç»æ˜¯æ›´æ–°åçš„ DOM èŠ‚ç‚¹äº†ã€‚ è¡¥å……ï¼š è™½ç„¶ watch å’Œ watchEffect éƒ½å¯ä»¥ç”¨ä¸Šè¿°æ–¹æ³•è§£å†³ DOM é—®é¢˜ï¼Œä½†æ˜¯ Vue3 å•ç‹¬ç»™ watchEffect æä¾›äº†ä¸€ä¸ªæ›´æ–¹ä¾¿çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å«åš watchEffect çš„åˆ«åï¼Œä»£ç å¦‚ä¸‹ï¼š 123watchPostEffect(() =&gt; &#123; /* åœ¨ Vue æ›´æ–°åæ‰§è¡Œ */&#125;) 5.æ‰‹åŠ¨åœæ­¢ç›‘å¬å™¨é€šå¸¸æ¥è¯´ï¼Œçš„ä¸€ä¸ªç»„ä»¶è¢«é”€æ¯æˆ–è€…å¸è½½åï¼Œç›‘å¬å™¨ä¹Ÿä¼šè·Ÿç€è¢«åœæ­¢ï¼Œå¹¶ä¸éœ€è¦æ‰‹åŠ¨å»å…³é—­ç›‘å¬å™¨ã€‚ä½†æ˜¯æ€»æ˜¯æœ‰ä¸€äº›ç‰¹æ®Šæƒ…å†µï¼Œå³ä½¿ç»„ä»¶å¸è½½äº†ï¼Œä½†æ˜¯ç›‘å¬å™¨ä¾ç„¶å­˜åœ¨ï¼Œè¿™ä¸ªæ—¶å€™å…¶å®å¼éœ€è¦æ‰‹åŠ¨å…³é—­å®ƒçš„ï¼Œå¦åˆ™å®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ã€‚ æ¯”å¦‚ä¸‹é¢è¿™ä¸­å†™æ³•ï¼Œå°±éœ€è¦æ‰‹åŠ¨åœæ­¢ç›‘å¬å™¨ï¼š 123456789&lt;script setup&gt;import &#123; watchEffect &#125; from 'vue'// å®ƒä¼šè‡ªåŠ¨åœæ­¢watchEffect(() =&gt; &#123;&#125;)// ...è¿™ä¸ªåˆ™ä¸ä¼šï¼setTimeout(() =&gt; &#123; watchEffect(() =&gt; &#123;&#125;)&#125;, 100)&lt;/script&gt; ä¸Šæ®µä»£ç ä¸­é‡‡ç”¨å¼‚æ­¥çš„æ–¹å¼åˆ›å»ºäº†ä¸€ä¸ªç›‘å¬å™¨ï¼Œè¿™ä¸ªæ—¶å€™ç›‘å¬å™¨æ²¡æœ‰ä¸å½“å‰ç»„ä»¶ç»‘å®šï¼Œæ‰€ä»¥å³ä½¿ç»„ä»¶é”€æ¯äº†ï¼Œç›‘å¬å™¨ä¾ç„¶å­˜åœ¨ã€‚ å…³é—­æ–¹æ³•å¾ˆç®€å•ï¼Œä»£ç å¦‚ä¸‹ï¼š 123const unwatch = watchEffect(() =&gt; &#123;&#125;)// ...å½“è¯¥ä¾¦å¬å™¨ä¸å†éœ€è¦æ—¶unwatch() éœ€è¦ç”¨ä¸€ä¸ªå˜é‡æ¥æ”¶ç›‘å¬å™¨å‡½æ•°çš„è¿”å›å€¼ï¼Œå…¶å®å°±æ˜¯è¿”å›çš„ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åè°ƒç”¨è¯¥å‡½æ•°ï¼Œå³å¯å…³é—­å½“å‰ç›‘å¬å™¨ã€‚","categories":[],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://summxu.github.io/tags/Vue/"}]},{"title":"Reactå®ç°åŸç†åŠFiberæ¶æ„","slug":"2022/Reactå®ç°åŸç†åŠFiberæ¶æ„","date":"2022-05-12T01:36:14.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2022/Reactå®ç°åŸç†åŠFiberæ¶æ„/","link":"","permalink":"https://summxu.github.io/2022/Reactå®ç°åŸç†åŠFiberæ¶æ„/","excerpt":"","text":"vdomå®šä¹‰ï¼švdom å°±æ˜¯æ ¹æ®çœŸå®domçš„å±æ€§ä½¿ç”¨jsé‡æ–°æŒ‰ç…§åŸæœ‰ç»“æ„æ¨¡æ‹Ÿå‡ºä¸€ä»½domå¯¹è±¡ï¼Œdom api å¯¹çœŸå® dom åšå¢åˆ æ”¹ã€‚ 123456789&#123; type: 'div', props: &#123; id: 'aaa', className: ['bbb', 'ccc'], onClick: function() &#123;&#125; &#125;, children: []&#125; æœ‰äº† vdom çš„å¥½å¤„ï¼Œå°±æ²¡æœ‰å’Œ dom å¼ºç»‘å®šäº†ï¼Œå¯ä»¥è·¨å¹³å°æ¸²æŸ“ï¼Œæ¯”å¦‚ nativeã€canvas ç­‰ç­‰ã€‚ ä½†æ˜¯è¦è®©å¼€å‘å»å†™è¿™æ ·çš„ vdom ä¹ˆï¼Ÿ é‚£è‚¯å®šä¸è¡Œï¼Œè¿™æ ·å¤ªéº»çƒ¦äº†ï¼Œå¤§å®¶ç†Ÿæ‚‰çš„æ˜¯ html é‚£ç§æ–¹å¼ï¼Œæ‰€ä»¥è¦å¼•å…¥ä¸€äº›ç¼–è¯‘çš„æ‰‹æ®µã€‚ dsl çš„ç¼–è¯‘dsl æ˜¯ domain specific languageï¼Œé¢†åŸŸç‰¹å®šè¯­è¨€çš„æ„æ€ï¼Œhtmlã€css éƒ½æ˜¯ web é¢†åŸŸçš„ dslã€‚ ç›´æ¥å†™ vdom å¤ªéº»çƒ¦äº†ï¼Œæ‰€ä»¥å‰ç«¯æ¡†æ¶éƒ½ä¼šè®¾è®¡ä¸€å¥— dslï¼Œç„¶åç¼–è¯‘æˆ render functionï¼Œæ‰§è¡Œåäº§ç”Ÿ vdomã€‚ vue å’Œ react éƒ½æ˜¯è¿™æ ·ï¼š jsx -&gt; render function -&gt; vdom è¿™å¥— dsl æ€ä¹ˆè®¾è®¡å‘¢ï¼Ÿ å‰ç«¯é¢†åŸŸå¤§å®¶ç†Ÿæ‚‰çš„æè¿° dom çš„æ–¹å¼æ˜¯ htmlï¼Œæœ€å¥½çš„æ–¹å¼è‡ªç„¶æ˜¯ä¹Ÿè®¾è®¡æˆé‚£æ ·ã€‚ æ‰€ä»¥ vue çš„ templateï¼Œreact çš„ jsx å°±éƒ½æ˜¯è¿™ä¹ˆè®¾è®¡çš„ã€‚ vue çš„ template compiler æ˜¯è‡ªå·±å®ç°çš„ï¼Œè€Œ react çš„ jsx çš„ç¼–è¯‘å™¨æ˜¯ babel å®ç°çš„ï¼Œæ˜¯ä¸¤ä¸ªå›¢é˜Ÿåˆä½œçš„ç»“æœã€‚ æ¸²æŸ“ vdomæ¸²æŸ“ vdom ä¹Ÿå°±æ˜¯é€šè¿‡ dom api å¢åˆ æ”¹ domã€‚ æ¯”å¦‚ä¸€ä¸ª divï¼Œé‚£å°±è¦ document.createElement åˆ›å»ºå…ƒç´ ï¼Œç„¶å setAttribute è®¾ç½®å±æ€§ï¼ŒaddEventListener è®¾ç½®äº‹ä»¶ç›‘å¬å™¨ã€‚ å¦‚æœæ˜¯æ–‡æœ¬ï¼Œé‚£å°±è¦ document.createTextNode æ¥åˆ›å»ºã€‚ æ‰€ä»¥è¯´æ ¹æ® vdom ç±»å‹çš„ä¸åŒï¼Œå†™ä¸ª if elseï¼Œåˆ†åˆ«åšä¸åŒçš„å¤„ç†å°±è¡Œäº†ã€‚ æ²¡é”™ï¼Œä¸ç®¡ vue è¿˜æ˜¯ reactï¼Œæ¸²æŸ“å™¨é‡Œè¿™æ®µ if else æ˜¯å°‘ä¸äº†çš„ï¼š 12345678910switch (vdom.tag) &#123; case HostComponent: // åˆ›å»ºæˆ–æ›´æ–° dom case HostText: // åˆ›å»ºæˆ–æ›´æ–° dom case FunctionComponent: // åˆ›å»ºæˆ–æ›´æ–° dom case ClassComponent: // åˆ›å»ºæˆ–æ›´æ–° dom&#125; react é‡Œæ˜¯é€šè¿‡ tag æ¥åŒºåˆ† vdom ç±»å‹çš„ï¼Œæ¯”å¦‚ HostComponent å°±æ˜¯å…ƒç´ ï¼ŒHostText å°±æ˜¯æ–‡æœ¬ï¼ŒFunctionComponentã€ClassComponent å°±åˆ†åˆ«æ˜¯å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶ã€‚ çŠ¶æ€ç®¡ç†react æ²¡æœ‰å“åº”å¼ç³»ç»Ÿï¼Œæ˜¯é€šè¿‡ setState çš„ api è§¦å‘çŠ¶æ€æ›´æ–°çš„ï¼Œæ›´æ–°ä»¥åå°±é‡æ–°æ¸²æŸ“æ•´ä¸ª vdomã€‚ vue æ˜¯é€šè¿‡å¯¹çŠ¶æ€åšä»£ç†ï¼Œget çš„æ—¶å€™æ”¶é›†ä»¥æ¥ï¼Œç„¶åä¿®æ”¹çŠ¶æ€çš„æ—¶å€™å°±å¯ä»¥è§¦å‘å¯¹åº”ç»„ä»¶çš„ render äº†ï¼Œä¸ç®¡æ˜¯å­ç»„ä»¶ã€çˆ¶ç»„ä»¶ã€è¿˜æ˜¯å…¶ä»–ä½ç½®çš„ç»„ä»¶ï¼Œåªè¦ç”¨åˆ°äº†å¯¹åº”çš„çŠ¶æ€ï¼Œé‚£å°±ä¼šè¢«ä½œä¸ºä¾èµ–æ”¶é›†èµ·æ¥ï¼ŒçŠ¶æ€å˜åŒ–çš„æ—¶å€™å°±å¯ä»¥è§¦å‘å®ƒä»¬çš„ renderï¼Œä¸ç®¡æ˜¯ç»„ä»¶æ˜¯åœ¨å“ªé‡Œçš„ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ react éœ€è¦é‡æ–°æ¸²æŸ“æ•´ä¸ª vdomï¼Œè€Œ vue ä¸ç”¨ã€‚ react çš„ setState ä¼šæ¸²æŸ“æ•´ä¸ª vdomï¼Œè€Œä¸€ä¸ªåº”ç”¨çš„æ‰€æœ‰ vdom å¯èƒ½æ˜¯å¾ˆåºå¤§çš„ï¼Œè®¡ç®—é‡å°±å¯èƒ½å¾ˆå¤§ã€‚ æµè§ˆå™¨é‡Œ js è®¡ç®—æ—¶é—´å¤ªé•¿æ˜¯ä¼šé˜»å¡æ¸²æŸ“çš„ï¼Œä¼šå ç”¨æ¯ä¸€å¸§çš„åŠ¨ç”»ã€é‡ç»˜é‡æ’çš„æ—¶é—´ï¼Œè¿™æ ·åŠ¨ç”»å°±ä¼šå¡é¡¿ã€‚ ä½œä¸ºä¸€ä¸ªæœ‰è¿½æ±‚çš„å‰ç«¯æ¡†æ¶ï¼ŒåŠ¨ç”»å¡é¡¿è‚¯å®šæ˜¯ä¸è¡Œçš„ã€‚ä½†æ˜¯å› ä¸º setState çš„æ–¹å¼åªèƒ½æ¸²æŸ“æ•´ä¸ª vdomï¼Œæ‰€ä»¥è®¡ç®—é‡å¤§æ˜¯ä¸å¯é¿å…çš„ã€‚ é‚£èƒ½ä¸èƒ½æŠŠè®¡ç®—é‡æ‹†åˆ†ä¸€ä¸‹ï¼Œæ¯ä¸€å¸§è®¡ç®—ä¸€éƒ¨åˆ†ï¼Œä¸è¦é˜»å¡åŠ¨ç”»çš„æ¸²æŸ“å‘¢ï¼Ÿ é¡ºç€è¿™ä¸ªæ€è·¯ï¼Œreact å°±æ”¹é€ ä¸ºäº† fiber æ¶æ„ã€‚ Fiberä¸€ï¼šFiberçš„æ¦‚å¿µReact Fiberæ˜¯reactæ‰§è¡Œæ¸²æŸ“æ—¶çš„ä¸€ç§æ–°çš„è°ƒåº¦ç­–ç•¥ï¼ŒJavaScriptæ˜¯å•çº¿ç¨‹çš„ï¼Œä¸€æ—¦ç»„ä»¶å¼€å§‹æ›´æ–°ï¼Œä¸»çº¿ç¨‹å°±ä¸€ç›´è¢«Reactæ§åˆ¶ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœå†æ¬¡æ‰§è¡Œäº¤äº’æ“ä½œï¼Œå°±ä¼šå¡é¡¿ã€‚ React Fiberå°±æ˜¯é€šè¿‡å¯¹è±¡è®°å½•ç»„ä»¶ä¸Šéœ€è¦åšæˆ–è€…å·²ç»å®Œæˆçš„æ›´æ–°ï¼Œä¸€ä¸ªç»„ä»¶å¯ä»¥å¯¹åº”å¤šä¸ªFiberã€‚ åœ¨renderå‡½æ•°ä¸­åˆ›å»ºçš„React Elementæ ‘åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™ä¼šåˆ›å»ºä¸€é¢—ç»“æ„ä¸€æ¨¡ä¸€æ ·çš„çš„FiberèŠ‚ç‚¹æ ‘ã€‚ä¸åŒçš„React Elementç±»å‹å¯¹åº”ä¸åŒçš„FiberèŠ‚ç‚¹ç±»å‹ã€‚ä¸€ä¸ªReact Elementçš„å·¥ä½œå°±ç”±å®ƒå¯¹åº”çš„FiberèŠ‚ç‚¹æ¥è´Ÿè´£ã€‚ ä¸€ä¸ªReact Elementå¯ä»¥å¯¹åº”ä¸æ­¢ä¸€ä¸ªFiberï¼Œå› ä¸ºFiberåœ¨updateçš„æ—¶å€™ï¼Œä¼šä»åŸæ¥çš„Fiber(æˆ‘ä»¬ç§°ä¸ºcurrent)cloneå‡ºä¸€ä¸ªæ–°çš„Fiber(æˆ‘ä»¬ç§°ä¹‹ä¸ºalternate)ã€‚ä¿©ä¸ªFiber diffå‡ºçš„å˜åŒ–(side effect)è®°å½•åœ¨alternateä¸Šã€‚æ‰€ä»¥ä¸€ä¸ªç»„ä»¶åœ¨æ›´æ–°æ—¶æœ€å¤šä¼šæœ‰ä¿©ä¸ªFiberä¸å…¶å¯¹åº”ï¼Œåœ¨æ›´æ–°ç»“æŸåalternateä¼šå–ä»£ä¹‹å‰çš„currentç§°ä¸ºæ–°çš„currentèŠ‚ç‚¹ã€‚ React Fiberé‡æ„è¿™ç§æ–¹å¼ï¼Œæ¸²æŸ“è¿‡ç¨‹é‡‡ç”¨åˆ‡ç‰‡çš„æ–¹å¼ï¼Œæ¯æ‰§è¡Œä¸€ä¼šå„¿ï¼Œå°±æ­‡ä¸€ä¼šå„¿ã€‚å¦‚æœæœ‰ä¼˜å…ˆçº§æ›´é«˜çš„ä»»åŠ¡åˆ°æ¥ä»¥åå‘¢ï¼Œå°±ä¼šå…ˆå»æ‰§è¡Œï¼Œé™ä½é¡µé¢å‘ç”Ÿå¡é¡¿çš„å¯èƒ½æ€§ï¼Œä½¿å¾—Reactå¯¹åŠ¨ç”»ç­‰å®æ—¶æ€§è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ä½“éªŒæ›´å¥½ã€‚ äºŒï¼šä»€ä¹ˆæ˜¯Fiberï¼Ÿ å½“jsåœ¨å¤„ç†å¤§å‹è®¡ç®—çš„æ—¶å€™ä¼šå¯¼è‡´é¡µé¢å‡ºç°å¡å¸§çš„ç°è±¡ï¼Œæ›´ä¸¥é‡çš„ä¼šå‡ºç°é¡µé¢â€œå‡æ­»â€ã€‚æ‰€ä»¥åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå¿…ç„¶ä¼šå¯¼è‡´åŠ¨ç”»ä¸¢å¸§ã€ä¸è¿è´¯ï¼Œç”¨æˆ·ä½“éªŒå°±ç‰¹åˆ«å·®ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¤§å‹çš„è®¡ç®—æ‹†åˆ†æˆä¸€ä¸ªä¸ªå°å‹è®¡ç®—ï¼Œç„¶åæŒ‰ç…§æ‰§è¡Œé¡ºåºå¼‚æ­¥è°ƒç”¨ï¼Œè¿™æ ·å°±ä¸ä¼šé•¿æ—¶é—´éœ¸å çº¿ç¨‹ï¼ŒUIä¹Ÿèƒ½åœ¨ä¿©æ¬¡å°å‹è®¡ç®—çš„æ‰§è¡Œé—´éš™è¿›è¡Œæ›´æ–°ï¼Œä»è€Œç»™ä¸ç”¨æˆ·åŠæ—¶çš„åé¦ˆï¼ŒFiberå°±æ˜¯è¿™æ ·åšçš„ï¼Œå¹¶ä¸”ä»¥ä¸€ç§æ›´é«˜é€¼æ ¼çš„æ–¹å¼å®ç°äº†ã€‚Driving Idea å¦‚æœè¯´v16.0ä¹‹å‰çš„Reactè§£å†³äº†HOW(å¦‚ä½•ç”¨æœ€å°‘çš„DOMæ“ä½œæˆæœ¬æ¥updateè§†å›¾)çš„é—®é¢˜ï¼Œé‚£ä¹ˆè¿™ä¸€æ¬¡Fiberçš„å‡ºç°ï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šè¿˜è§£å†³äº†WHEN(ä½•æ—¶updateè§†å›¾çš„å“ªä¸€éƒ¨åˆ†)çš„é—®é¢˜ã€‚ åˆ†ç‰‡ä¼˜å…ˆçº§ï¼ï¼ï¼ åŸºäºä¸Šè¿°è¿™äº›åŸå› ï¼ŒFiberå®ç°äº†ä¸€ä¸ªè™šæ‹Ÿè°ƒç”¨æ ˆï¼Œå¹¶ç»™æ‰€æœ‰çš„updateè¿›è¡Œä¼˜å…ˆçº§æ’åºï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516171819&apos;use strict&apos;;export type PriorityLevel = 0 | 1 | 2 | 3 | 4 | 5;module.exports = &#123; NoWork: 0, // No work is pending. SynchronousPriority: 1, // ç”¨äºæ§åˆ¶æ–‡æœ¬è¾“å…¥ã€‚åŒæ­¥çš„å‰¯ä½œç”¨.AnimationPriority: 2, //éœ€è¦åœ¨ä¸‹ä¸€å¸§ä¹‹å‰å®Œæˆ. HighPriority: 3, // éœ€è¦å¾ˆå¿«å®Œæˆçš„äº’åŠ¨æ‰èƒ½äº§ç”Ÿååº”. LowPriority: 4, // æ•°æ®è·å–ï¼Œæˆ–æ›´æ–°å­˜å‚¨çš„ç»“æœ. OffscreenPriority: 5, // å°†ä¸å¯è§ï¼Œä½†åšçš„å·¥ä½œï¼Œä»¥é˜²å®ƒæˆä¸ºå¯è§.&#125;; ç„¶åæ ¹æ®è¿™äº›updateçš„ä¼˜å…ˆçº§ï¼Œæ¥å†³å®šæ‰§è¡Œçš„é¡ºåºã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åŠ¨ç”»å’Œé¡µé¢äº¤äº’éƒ½æ˜¯ä¼˜å…ˆçº§æ¯”è¾ƒé«˜çš„ï¼Œè¿™ä¹Ÿæ˜¯Fiberèƒ½å¤Ÿä½¿å¾—åŠ¨ç”»ã€å¸ƒå±€å’Œé¡µé¢äº¤äº’å˜å¾—æ›´åŠ çš„æµç•…çš„åŸå› ä¹‹ä¸€ã€‚ å¯ä»¥æŠŠPriorityåˆ†ä¸ºåŒæ­¥å’Œå¼‚æ­¥ä¸¤ä¸ªç±»åˆ«ï¼ŒåŒæ­¥ä¼˜å…ˆçº§çš„ä»»åŠ¡ä¼šåœ¨å½“å‰å¸§å®Œæˆï¼ŒåŒ…æ‹¬SynchronousPriorityå’ŒTaskPriorityã€‚å¼‚æ­¥ä¼˜å…ˆçº§çš„ä»»åŠ¡åˆ™å¯èƒ½åœ¨æ¥ä¸‹æ¥çš„å‡ ä¸ªå¸§ä¸­è¢«å®Œæˆï¼ŒåŒ…æ‹¬HighPriorityã€LowPriorityä»¥åŠOffscreenPriorityã€‚ React v16.3.2çš„ä¼˜å…ˆçº§ï¼Œä¸å†è¿™ä¹ˆåˆ’åˆ†ï¼Œåˆ†ä¸ºä¸‰ç±»ï¼šNoWorkã€syncã€asyncï¼Œå‰ä¸¤ç±»å¯ä»¥è®¤ä¸ºæ˜¯åŒæ­¥ä»»åŠ¡ï¼Œéœ€è¦åœ¨å½“å‰tickå®Œæˆï¼Œè¿‡æœŸæ—¶é—´ä¸ºnullï¼Œæœ€åä¸€ç±»å¼‚æ­¥ä»»åŠ¡ä¼šè®¡ç®—ä¸€ä¸ªã€‚ expirationTimeï¼Œåœ¨workLoopä¸­ï¼Œæ ¹æ®è¿‡æœŸæ—¶é—´æ¥åˆ¤æ–­æ˜¯å¦è¿›è¡Œä¸‹ä¸€ä¸ªåˆ†ç‰‡ä»»åŠ¡ï¼ŒscheduleWorkä¸­æ›´æ–°ä»»åŠ¡ä¼˜å…ˆçº§ï¼Œä¹Ÿå°±æ˜¯æ›´æ–°è¿™ä¸ªexpirationTimeã€‚è‡³äºè¿™ä¸ªæ—¶é—´æ€ä¹ˆè®¡ç®—ï¼Œå¯ä»¥æŸ¥çœ‹æºç ã€‚ ä¸‰ï¼šFiberçš„åŸºæœ¬åŸåˆ™ï¼š æ›´æ–°ä»»åŠ¡åˆ†æˆä¿©ä¸ªé˜¶æ®µï¼ŒReconcilition Phase(è°ƒå’Œé˜¶æ®µ)å’ŒCommit Phase(äº¤ä»˜é˜¶æ®µ)ã€‚Reconciliation Phaseçš„ä»»åŠ¡å¹²çš„äº‹æƒ…æ˜¯ï¼Œæ‰¾å‡ºè¦åšçš„æ›´æ–°å·¥ä½œ(Diff Fiber Tree),å°±æ˜¯ä¸€ä¸ªè®¡ç®—é˜¶æ®µï¼Œè®¡ç®—ç»“æœå¯ä»¥è¢«ç¼“å­˜ï¼Œä¹Ÿå°±å¯ä»¥è¢«æ‰“æ–­ï¼›Commit Phaseéœ€è¦æäº¤æ‰€æœ‰æ›´æ–°å¹¶æ¸²æŸ“ï¼Œä¸ºäº†é˜²æ­¢é¡µé¢æŠ–åŠ¨ï¼Œè¢«è®¾ç½®ä¸ºä¸èƒ½æ‰“æ–­ã€‚ PSï¼šcomponentWillMount omponentWillReceiveProps componentWillUpdate å‡ ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œåœ¨Reconciliation Phaseè¢«è°ƒç”¨ï¼Œæœ‰è¢«æ‰“æ–­çš„å¯èƒ½ï¼ˆæ—¶é—´ç”¨å°½ç­‰æƒ…å†µï¼‰ï¼Œæ‰€ä»¥å¯èƒ½è¢«å¤šæ¬¡è°ƒç”¨ã€‚å…¶å®shouldComponentUpdate ä¹Ÿå¯èƒ½è¢«å¤šæ¬¡è°ƒç”¨ï¼Œåªæ˜¯å®ƒåªè¿”å›trueæˆ–è€…falseï¼Œæ²¡æœ‰å‰¯ä½œç”¨ï¼Œå¯ä»¥æš‚æ—¶å¿½ç•¥ã€‚ å››ï¼šFiberçš„æ•°æ®ç»“æ„ fiberæ˜¯ä¸ªé“¾è¡¨ï¼Œæœ‰childå’Œsibingå±æ€§ï¼ŒæŒ‡å‘ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹å’Œç›¸é‚»çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œä»è€Œæ„æˆfiber treeã€‚return å±æ€§æŒ‡å‘å…¶çˆ¶èŠ‚ç‚¹ã€‚ æ›´æ–°é˜Ÿåˆ—ï¼ŒupdateQueueï¼Œæ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œæœ‰firstå’Œlastä¿©ä¸ªå±æ€§ï¼ŒæŒ‡å‘ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªupdateå¯¹è±¡ã€‚ æ¯ä¸ªfiberæœ‰ä¸€ä¸ªå±æ€§updateQueueæŒ‡å‘å…¶å¯¹åº”çš„æ›´æ–°é˜Ÿåˆ—ã€‚ æ¯ä¸ªfiber(å½“å‰fiberå¯ä»¥ç§°ä¸ºcurrent)æœ‰ä¸€ä¸ªå±æ€§alternateï¼Œå¼€å§‹æ—¶æŒ‡å‘ä¸€ä¸ªè‡ªå·±çš„cloneä½“ï¼Œupdateçš„å˜åŒ–ä¼šå…ˆæ›´æ–°åˆ°alternateä¸Šï¼Œå½“æ›´æ–°å®Œæ¯•ï¼Œalternateæ›¿æ¢currentã€‚ äº”ï¼šFiberçš„æ‰§è¡Œæµç¨‹ ç”¨æˆ·æ“ä½œå¼•èµ·setStateè¢«è°ƒç”¨ä»¥åï¼Œå…ˆè°ƒç”¨enqueueSetStateæ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥åˆ’åˆ†æˆä¿©ä¸ªé˜¶æ®µï¼ˆä¸ªäººç†è§£ï¼‰ï¼Œç¬¬ä¸€é˜¶æ®µData Preparationï¼Œæ˜¯åˆå§‹åŒ–ä¸€äº›æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚fiberï¼ŒupdateQueueï¼Œupdateã€‚ æ–°çš„updateä¼šé€šè¿‡insertUpdateIntoQueueæ–¹æ³•ï¼Œæ ¹æ®ä¼˜å…ˆçº§æ’å…¥åˆ°é˜Ÿåˆ—çš„å¯¹åº”ä½ç½®ï¼ŒensureUpdateQueuesæ–¹æ³•åˆå§‹åŒ–ä¿©ä¸ªæ›´æ–°é˜Ÿåˆ—ï¼Œqueue1å’Œcurrent.updateQueueå¯¹åº”ï¼Œqueue2å’Œcurrent.alternate.updateQueueå¯¹åº”ã€‚ ç¬¬äºŒé˜¶æ®µï¼ŒFiber Reconcilerï¼Œå°±å¼€å§‹è¿›è¡Œä»»åŠ¡åˆ†ç‰‡è°ƒåº¦ï¼ŒscheduleWorké¦–å…ˆæ›´æ–°æ¯ä¸ªfiberçš„ä¼˜å…ˆçº§ï¼Œè¿™é‡Œå¹¶æ²¡æœ‰updatePriorityè¿™ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯å¹²äº†è¿™ä»¶äº‹ã€‚å½“fiber.return === nullï¼Œæ‰¾åˆ°çˆ¶èŠ‚ç‚¹ï¼ŒæŠŠæ‰€æœ‰diffå‡ºçš„å˜åŒ–(side effect)å½’ç»“åˆ°rootä¸Šã€‚ requestWorkï¼Œé¦–å…ˆæŠŠå½“å‰çš„æ›´æ–°æ·»åŠ åˆ°schedule listä¸­(addRootToSchedule),ç„¶åæ ¹æ®å½“å‰æ˜¯å¦ä¸ºå¼‚æ­¥æ¸²æŸ“(isAsyncå‚æ•°)ï¼Œå¼‚æ­¥æ¸²æŸ“è°ƒç”¨ã€‚scheduleCallbackWithExpriationæ–¹æ³•ï¼Œä¸‹ä¸€æ­¥é«˜èƒ½ï¼ï¼ scheduleCallbackWithExpriationè¿™ä¸ªæ–¹æ³•åœ¨ä¸åŒç¯å¢ƒï¼Œå®ç°ä¸ä¸€æ ·ï¼Œchromeç­‰æµè§ˆå™¨ä¸­ä½¿ç”¨requestIdleCallback APIï¼Œæ²¡æœ‰è¿™ä¸ªAPIçš„æµè§ˆå™¨ä¸­ï¼Œé€šè¿‡requestAnimationFrameæ¨¡æ‹Ÿä¸€ä¸ªrequestIdCallbackï¼Œæ¥åœ¨æµè§ˆå™¨ç©ºé—²æ—¶ï¼Œå®Œæˆä¸‹ä¸€ä¸ªåˆ†ç‰‡çš„å·¥ä½œï¼Œæ³¨æ„ï¼Œè¿™ä¸ªå‡½æ•°ä¼šä¼ å…¥ä¸€ä¸ªexpirationTimeï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´æ´»æ²¡å¹²å®Œï¼Œå°±æ”¾å¼ƒäº†ã€‚ æ‰§è¡Œåˆ°performWorkOnRootï¼Œå°±æ˜¯fiberæ–‡æ¡£ä¸­æåˆ°çš„Commit Phaseå’ŒReconciliation Phaseä¿©é˜¶æ®µã€‚ ç¬¬ä¸€é˜¶æ®µReconciliation Phase,åœ¨workLoopä¸­ï¼Œé€šè¿‡ä¸€ä¸ªwhileå¾ªç¯ï¼Œå®Œæˆæ¯ä¸ªåˆ†ç‰‡ä»»åŠ¡ã€‚ performUnitOfWorkä¹Ÿå¯ä»¥åˆ†æˆä¿©é˜¶æ®µï¼Œè“è‰²æ¡†è¡¨ç¤ºã€‚beginWorkæ˜¯ä¸€ä¸ªå…¥å£å‡½æ•°ï¼Œæ ¹æ®workInProgressçš„ç±»å‹å»å®ä¾‹åŒ–ä¸åŒçš„react element classã€‚workInProgressæ˜¯é€šè¿‡alternateæŒ‚è½½ä¸€äº›æ–°å±æ€§è·å¾—çš„ã€‚ å®ä¾‹åŒ–ä¸åŒçš„react element classæ—¶å€™ä¼šè°ƒç”¨å’Œwillæœ‰å…³çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ completeUnitOfWorkæ˜¯è¿›è¡Œä¸€äº›æ”¶å°¾å·¥ä½œï¼Œdiffå®Œä¸€ä¸ªèŠ‚ç‚¹ä»¥åï¼Œæ›´æ–°propså’Œè°ƒç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ç­‰ã€‚ ç„¶åè¿›å…¥Commit Phaseé˜¶æ®µï¼Œè¿™ä¸ªé˜¶æ®µä¸èƒ½è¢«æ‰“æ–­ã€‚ å…­ï¼šFiberå¯¹å¼€å‘è€…æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ componentWillMount,componentWillReceiveProps,componentWillUpdateå‡ ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸å†å®‰å…¨ï¼Œç”±äºä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹å¯ä»¥è¢«æ‰“æ–­ï¼Œè¿™å‡ ä¸ªç”Ÿå‘½å‘¨æœŸå¯èƒ½ä¼šæ‰§è¡Œå¤šæ¬¡ï¼Œå¦‚æœå®ƒä»¬åŒ…å«å‰¯ä½œç”¨(æ¯”å¦‚Ajax)ï¼Œä¼šæœ‰æ„æƒ³ä¸åˆ°çš„bugã€‚Reactå›¢é˜Ÿæä¾›äº†æ›¿æ¢çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚å»ºè®®å¦‚æœä½¿ç”¨ä»¥ä¸Šæ–¹æ³•ï¼Œå°½é‡ä½¿ç”¨çº¯å‡½æ•°ï¼Œé¿å…ä»¥åè¸©å‘ã€‚ éœ€è¦å…³æ³¨reactä¸ºä»»åŠ¡ç‰‡è®¾ç½®çš„ä¼˜å…ˆçº§ï¼Œç‰¹åˆ«æ˜¯é¡µé¢ç”¨åŠ¨ç”»çš„æƒ…å†µã€‚ å¦‚æœä¸€ç›´æœ‰æ›´é«˜çš„çº§åˆ«ä»»åŠ¡ï¼Œé‚£ä¹ˆfiberç®—æ³•ä¼šå…ˆæ‰§è¡Œçº§åˆ«æ›´é«˜çš„ä»»åŠ¡ï¼Œæ‰§è¡Œå®Œæ¯•åå†é€šè¿‡callbackå›åˆ°ä¹‹å‰æ¸²æŸ“åˆ°ä¸€åŠçš„ç»„ä»¶ï¼Œä»å¤´å¼€å§‹æ¸²æŸ“ã€‚ï¼ˆçœ‹èµ·æ¥æ”¾å¼ƒå·²ç»æ¸²æŸ“å®Œçš„ç”Ÿå‘½å‘¨æœŸï¼Œä¼šæœ‰ç‚¹ä¸åˆç†ï¼Œåè€Œä¼šå¢åŠ æ¸²æŸ“æ—¶é•¿ï¼Œä½†æ˜¯reactç¡®å®æ˜¯è¿™ä¹ˆå¹²çš„ï¼‰","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://summxu.github.io/tags/JavaScript/"},{"name":"React","slug":"React","permalink":"https://summxu.github.io/tags/React/"}]},{"title":"Reduxæºç å…¨é¢è§£æ","slug":"2022/Reduxæºç å…¨é¢è§£æ","date":"2022-02-26T01:36:37.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2022/Reduxæºç å…¨é¢è§£æ/","link":"","permalink":"https://summxu.github.io/2022/Reduxæºç å…¨é¢è§£æ/","excerpt":"","text":"Reduxä½¿ç”¨ä¸­çš„å‡ ä¸ªç‚¹ï¼š Reduxä¸‰å¤§è®¾è®¡åŸåˆ™ Create Store Redux middleware combineReducer Providerä¸Connect Reduxæµç¨‹æ¢³ç† Reduxè®¾è®¡ç‰¹ç‚¹ 1. å•ä¸€æ•°æ®æºåœ¨ä¼ ç»Ÿçš„ MVC æ¶æ„ä¸­ï¼Œå¯ä»¥æ ¹æ®éœ€è¦åˆ›å»ºæ— æ•°ä¸ª Modelï¼Œè€Œ Model ä¹‹é—´å¯ä»¥äº’ç›¸ç›‘å¬ã€è§¦å‘äº‹ä»¶ç”šè‡³å¾ªç¯æˆ–åµŒå¥—è§¦å‘äº‹ä»¶ï¼Œè¿™äº›åœ¨ Redux ä¸­éƒ½æ˜¯ä¸å…è®¸çš„ã€‚å› ä¸ºåœ¨ Redux çš„æ€æƒ³é‡Œï¼Œä¸€ä¸ªåº”ç”¨æ°¸è¿œåªæœ‰å”¯ä¸€çš„æ•°æ®æºã€‚å®é™…ä¸Šï¼Œä½¿ç”¨å•ä¸€æ•°æ®æºçš„å¥½å¤„åœ¨äºæ•´ä¸ªåº”ç”¨çŠ¶æ€éƒ½ä¿å­˜åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œè¿™æ ·éšæ—¶å¯ä»¥æå–å‡ºæ•´ä¸ªåº”ç”¨çš„çŠ¶æ€è¿›è¡ŒæŒä¹…åŒ–ï¼ˆæ¯”å¦‚å®ç°ä¸€ä¸ªé’ˆå¯¹æ•´ä¸ªåº”ç”¨çš„å³æ—¶ä¿å­˜åŠŸèƒ½ï¼‰ã€‚æ­¤å¤–ï¼Œè¿™æ ·çš„è®¾è®¡ä¹Ÿä¸ºæœåŠ¡ç«¯æ¸²æŸ“æä¾›äº†å¯èƒ½ã€‚ 2. çŠ¶æ€æ˜¯åªè¯»çš„åœ¨ Redux ä¸­ï¼Œå¹¶ä¸ä¼šè‡ªå·±ç”¨ä»£ç æ¥å®šä¹‰ä¸€ä¸ª storeã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œå®šä¹‰ä¸€ä¸ª reducerï¼Œå®ƒçš„åŠŸèƒ½æ˜¯æ ¹æ®å½“å‰è§¦å‘çš„ action å¯¹å½“å‰åº”ç”¨çš„çŠ¶æ€ï¼ˆstateï¼‰è¿›è¡Œè¿­ä»£ï¼Œè¿™é‡Œå¹¶æ²¡æœ‰ç›´æ¥ä¿®æ”¹åº”ç”¨çš„çŠ¶æ€ï¼Œè€Œæ˜¯è¿”å›äº†ä¸€ä»½å…¨æ–°çš„çŠ¶æ€ã€‚ Redux æä¾›çš„ createStore æ–¹æ³•ä¼šæ ¹æ® reducer ç”Ÿæˆ storeã€‚æœ€åï¼Œå¯ä»¥åˆ©ç”¨ store. dispatchæ–¹æ³•æ¥è¾¾åˆ°ä¿®æ”¹çŠ¶æ€çš„ç›®çš„ã€‚ 3.çŠ¶æ€ä¿®æ”¹å‡ç”±çº¯å‡½æ•°å®Œæˆåœ¨ Redux é‡Œï¼Œé€šè¿‡å®šä¹‰ reducer æ¥ç¡®å®šçŠ¶æ€çš„ä¿®æ”¹ï¼Œè€Œæ¯ä¸€ä¸ª reducer éƒ½æ˜¯çº¯å‡½æ•°ï¼Œè¿™æ„å‘³ç€å®ƒæ²¡æœ‰å‰¯ä½œç”¨ï¼Œå³æ¥å—ä¸€å®šçš„è¾“å…¥ï¼Œå¿…å®šä¼šå¾—åˆ°ä¸€å®šçš„è¾“å‡ºã€‚ è¿™æ ·è®¾è®¡çš„å¥½å¤„ä¸ä»…åœ¨äº reducer é‡Œå¯¹çŠ¶æ€çš„ä¿®æ”¹å˜å¾—ç®€å•ã€çº¯ç²¹ã€å¯æµ‹è¯•ï¼Œæ›´æœ‰æ„æ€çš„æ˜¯ï¼ŒRedux åˆ©ç”¨æ¯æ¬¡æ–°è¿”å›çš„çŠ¶æ€ç”Ÿæˆé…·ç‚«çš„æ—¶é—´æ—…è¡Œï¼ˆtime travelï¼‰è°ƒè¯•æ–¹å¼ï¼Œè®©è·Ÿè¸ªæ¯ä¸€æ¬¡å› ä¸ºè§¦å‘ action è€Œæ”¹å˜çŠ¶æ€çš„ç»“æœæˆä¸ºäº†å¯èƒ½ã€‚ 2.Create Storeä»storeçš„è¯ç”Ÿå¼€å§‹è¯´èµ·ã€‚create storeå‡½æ•°APIæ–‡æ¡£å¦‚ä¸‹ï¼š 1createStore(reducer, [initialState], enhancer) å¯ä»¥çœ‹å‡ºï¼Œå®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ï¼šreducerã€initialState å’Œ enhancer ã€‚Store enhancer æ˜¯ä¸€ä¸ªç»„åˆ store creator çš„é«˜é˜¶å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å¼ºåŒ–è¿‡çš„ store creatorã€‚è¿™ä¸ middleware ç›¸ä¼¼ï¼Œå®ƒä¹Ÿå…è®¸ä½ é€šè¿‡å¤åˆå‡½æ•°æ”¹å˜ store æ¥å£ã€‚ å†æ¥çœ‹çœ‹ä»–çš„è¿”å›å€¼ï¼š 1234567&#123; dispatch: f (action), getState: f (), replaceReducer: f (nextReducer), subscribe: f (listener), Symbol(observable): f () &#125; storeçš„è¿”å›å€¼å°±æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œé‡Œé¢æœ‰å‡ ä¸ªå¸¸ç”¨çš„æ–¹æ³•ï¼š dispatchï¼šå°±æ˜¯æœ€å¸¸ç”¨çš„dispatchæ–¹æ³•ï¼Œæ´¾å‘actionã€‚ getStateï¼šé€šè¿‡è¯¥æ–¹æ³•ï¼Œå¯ä»¥æ‹¿åˆ°å½“å‰çŠ¶æ€æ ‘stateã€‚ replaceReducerï¼šè¿™ä¸ªæ–¹æ³•ä¸»è¦ç”¨äº reducer çš„çƒ­æ›¿æ¢ï¼Œä¸‹é¢ä»‹ç»è¯¥æ–¹æ³•ã€‚ subscribeï¼šæ·»åŠ ä¸€ä¸ªå˜åŒ–ç›‘å¬å™¨ã€‚æ¯å½“ dispatchï¼ˆactionï¼‰çš„æ—¶å€™å°±ä¼šæ‰§è¡Œï¼Œstate æ ‘ä¸­çš„ä¸€éƒ¨åˆ†å¯èƒ½å·²ç»å˜åŒ–ã€‚ observableï¼šè§‚å¯Ÿè€…æ¨¡å¼ï¼Œç”¨äºå¤„ç†è®¢é˜…å…³ç³»ã€‚ è¿™é‡ŒæŒ‘å‡ ä¸ªæ–¹æ³•ä»‹ç»ï¼š getStateåœ¨å®ŒæˆåŸºæœ¬çš„å‚æ•°æ ¡éªŒä¹‹åï¼Œåœ¨ createStore ä¸­å£°æ˜å¦‚ä¸‹å˜é‡åŠ getState æ–¹æ³•ï¼š 123456789101112var currentReducer = reducervar currentState = initialStatevar listeners = [] // å½“å‰ç›‘å¬ store å˜åŒ–çš„ç›‘å¬å™¨var isDispatching = false // æŸä¸ª action æ˜¯å¦å¤„äºåˆ†å‘çš„å¤„ç†è¿‡ç¨‹ä¸­/*** Reads the state tree managed by the store. ** @returns &#123;any&#125; The current state tree of your application. */function getState() &#123; return currentState&#125; getStateæ–¹æ³•å°±æ˜¯ç®€å•è¿”å›å½“å‰stateï¼Œå¦‚æœstateæ²¡æœ‰è¢«reducerå¤„ç†è¿‡ï¼Œä»–å°±æ˜¯initialStateã€‚ subscribeåœ¨ getState ä¹‹åï¼Œå®šä¹‰äº† store çš„å¦ä¸€ä¸ªæ–¹æ³• subscribeï¼š 123456789101112function subscribe(listener) &#123; listeners.push(listener) var isSubscribed = true return function unsubscribe() &#123; if (!isSubscribed) &#123; return &#125; isSubscribed = false var index = listeners.indexOf(listener) listeners.splice(index, 1) &#125;&#125; Store å…è®¸ä½¿ç”¨store.subscribeæ–¹æ³•è®¾ç½®ç›‘å¬å‡½æ•°ï¼Œä¸€æ—¦ State å‘ç”Ÿå˜åŒ–ï¼Œå°±è‡ªåŠ¨æ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚ æ˜¾ç„¶ï¼Œåªè¦æŠŠ View çš„æ›´æ–°å‡½æ•°ï¼ˆå¯¹äº React é¡¹ç›®ï¼Œå°±æ˜¯ç»„ä»¶çš„renderæ–¹æ³•æˆ–setStateæ–¹æ³•ï¼‰æ”¾å…¥listenï¼Œå°±ä¼šå®ç° View çš„è‡ªåŠ¨æ¸²æŸ“ã€‚ä½ å¯èƒ½ä¼šæ„Ÿåˆ°å¥‡æ€ªï¼Œå¥½åƒåœ¨ Redux åº”ç”¨ä¸­å¹¶æ²¡æœ‰ä½¿ç”¨ store.subscribe æ–¹æ³•ï¼Ÿäº‹å®ä¸Šï¼Œ React Redux ä¸­çš„ connect æ–¹æ³•éšå¼åœ°å¸®å®Œæˆäº†è¿™ä¸ªå·¥ä½œã€‚ store.subscribeæ–¹æ³•è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°å°±å¯ä»¥è§£é™¤ç›‘å¬ã€‚ dispatchdispatchæ˜¯reduxçš„æ ¸å¿ƒæ–¹æ³•ï¼š 12345678910111213141516171819202122232425function dispatch(action) &#123; if (!isPlainObject(action)) &#123; throw new Error( 'Actions must be plain objects. ' + 'Use custom middleware for async actions.' ) &#125; if (typeof action.type === 'undefined') &#123; throw new Error( 'Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?' ) &#125; if (isDispatching) &#123; throw new Error('Reducers may not dispatch actions.') &#125; try &#123; isDispatching = true currentState = currentReducer(currentState, action) &#125; finally &#123; isDispatching = false &#125; listeners.slice().forEach(listener =&gt; listener()) return action&#125; åˆ¤æ–­å½“å‰æ˜¯å¦å¤„äºæŸä¸ª action çš„åˆ†å‘è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªæ£€æŸ¥ä¸»è¦æ˜¯ä¸ºäº†é¿å…åœ¨ reducer ä¸­åˆ†å‘ action çš„æƒ…å†µï¼Œå› ä¸ºè¿™æ ·åšå¯èƒ½å¯¼è‡´åˆ†å‘æ­»å¾ªç¯ï¼ŒåŒæ—¶ä¹Ÿå¢åŠ äº†æ•°æ®æµåŠ¨çš„å¤æ‚åº¦ã€‚ ç¡®è®¤å½“å‰ä¸å±äºåˆ†å‘è¿‡ç¨‹ä¸­åï¼Œå…ˆè®¾å®šæ ‡å¿—ä½ï¼Œç„¶åå°†å½“å‰çš„çŠ¶æ€å’Œ action ä¼ ç»™å½“å‰çš„reducerï¼Œç”¨äºç”Ÿæˆæœ€æ–°çš„ stateã€‚è¿™çœ‹èµ·æ¥ä¸€ç‚¹éƒ½ä¸å¤æ‚ï¼Œè¿™ä¹Ÿæ˜¯åå¤å¼ºè°ƒçš„ reducer å·¥ä½œè¿‡ç¨‹â€”â€”çº¯å‡½æ•°ã€æ¥å—çŠ¶æ€å’Œ action ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„çŠ¶æ€ã€‚ åœ¨å¾—åˆ°æ–°çš„çŠ¶æ€åï¼Œä¾æ¬¡è°ƒç”¨æ‰€æœ‰çš„ç›‘å¬å™¨ï¼Œé€šçŸ¥çŠ¶æ€çš„å˜æ›´ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨é€šçŸ¥ç›‘å¬å™¨å˜æ›´å‘ç”Ÿæ—¶ï¼Œå¹¶æ²¡æœ‰å°†æœ€æ–°çš„çŠ¶æ€ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¿™äº›ç›‘å¬å™¨ã€‚è¿™æ˜¯å› ä¸ºåœ¨ç›‘å¬å™¨ä¸­ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ store.getState() æ–¹æ³•æ‹¿åˆ°æœ€æ–°çš„çŠ¶æ€ã€‚ æœ€ç»ˆï¼Œå¤„ç†ä¹‹åçš„ action ä¼šè¢« dispatch æ–¹æ³•è¿”å›ã€‚ replaceReducer1234567function replaceReducer(nextReducer) &#123; if (typeof nextReducer !== 'function') &#123; throw new Error('Expected the nextReducer to be a function.'); &#125; currentReducer = nextReducer; dispatch(&#123; type: ActionTypes.INIT &#125;); &#125; è¿™æ˜¯ä¸ºäº†æ‹¿åˆ°æ‰€æœ‰ reducer ä¸­çš„åˆå§‹çŠ¶æ€ï¼ˆä½ æ˜¯å¦è¿˜è®°å¾—åœ¨å®šä¹‰ reducer æ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºpreviousStateï¼Œå¦‚æœè¯¥å‚æ•°ä¸ºç©ºï¼Œæä¾›é»˜è®¤çš„ initialStateï¼‰ã€‚åªæœ‰æ‰€æœ‰çš„åˆå§‹çŠ¶æ€éƒ½æˆåŠŸè·å–åï¼ŒRedux åº”ç”¨æ‰èƒ½æœ‰æ¡ä¸ç´Šåœ°å¼€å§‹è¿ä½œã€‚ 3.Redux middleware It provides a third-party extension point between dispatching an action, and the moment it reachesthe reducer å®ƒæä¾›äº†ä¸€ä¸ªåˆ†ç±»å¤„ç† action çš„æœºä¼šã€‚åœ¨middleware ä¸­ï¼Œä½ å¯ä»¥æ£€é˜…æ¯ä¸€ä¸ªæµè¿‡çš„ actionï¼ŒæŒ‘é€‰å‡ºç‰¹å®šç±»å‹çš„action è¿›è¡Œç›¸åº”æ“ä½œï¼Œç»™ä½ ä¸€æ¬¡æ”¹å˜ action çš„æœºä¼šã€‚ å¸¸è§„çš„åŒæ­¥æ•°æ®æµæ¨¡å¼çš„æµç¨‹å›¾å¦‚ä¸‹ï¼š f2BVgyd4bOqmbmPx.png](https://sslstatic.ktanx.com/images/release/201811/f2BVgyd4bOqmbmPx.png)ä¸åŒä¸šåŠ¡éœ€æ±‚ä¸‹ï¼Œæ¯”å¦‚æ‰§è¡Œactionä¹‹å‰å’Œä¹‹åéƒ½è¦æ‰“logï¼›actionè§¦å‘ä¸€ä¸ªå¼‚æ­¥çš„è¯·æ±‚ï¼Œè¯·æ±‚å›æ¥ä¹‹åæ¸²æŸ“viewç­‰ã€‚éœ€è¦ä¸ºè¿™ä¸€ç±»çš„actionæ·»åŠ å…¬å…±çš„æ–¹æ³•æˆ–è€…å¤„ç†ï¼Œä½¿ç”¨redux middlewareæµç¨‹å›¾å¦‚ä¸‹ï¼š![Tr2gHBdB9tYoeS97.png æ¯ä¸€ä¸ª middleware å¤„ç†ä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„ä¸šåŠ¡éœ€æ±‚ï¼Œé€šè¿‡ä¸²è”ä¸åŒçš„ middleware å®ç°å˜åŒ–å¤šæ ·çš„åŠŸèƒ½ã€‚æ¯”å¦‚ä¸Šé¢çš„ä¸šåŠ¡ï¼ŒæŠŠå¤„ç†logçš„ä»£ç å°è£…æˆä¸€ä¸ªmiddlewareï¼Œå¤„ç†å¼‚æ­¥çš„ä¹Ÿæ˜¯ä¸€ä¸ªmiddlewareï¼Œä¸¤è€…ä¸²è”ï¼Œå´åˆç›¸äº’ç‹¬ç«‹ã€‚ ä½¿ç”¨middlewareä¹‹åï¼Œactionè§¦å‘çš„dispatchå¹¶ä¸æ˜¯åŸæ¥çš„dispatchï¼Œè€Œæ˜¯ç»è¿‡å°è£…çš„new dispatchï¼Œåœ¨è¿™ä¸ªnew dispatchä¸­ï¼ŒæŒ‰ç…§é¡ºåºä¾æ¬¡æ‰§è¡Œæ¯ä¸ªmiddlewareï¼Œæœ€åè°ƒç”¨åŸç”Ÿçš„dispatchã€‚ æ¥çœ‹ä¸‹logger middlewareå¦‚ä½•å®ç°çš„ï¼š 12345export default store =&gt; next =&gt; action =&gt; &#123; console.log('dispatch:', action); next(action); console.log('finish:', action); &#125; è¿™é‡Œä»£ç ååˆ†ç®€æ´ï¼Œå°±æ˜¯åœ¨nextè°ƒç”¨ä¸‹ä¸€ä¸ªmiddlewareä¹‹å‰å’Œä¹‹åï¼Œåˆ†åˆ«æ‰“å°ä¸¤æ¬¡ã€‚ Redux æä¾›äº† applyMiddleware æ–¹æ³•æ¥åŠ è½½ middlewareï¼Œè¯¥æ–¹æ³•çš„æºç å¦‚ä¸‹ï¼š 1234567891011121314151617181920import compose from './compose';export default function applyMiddleware(...middlewares) &#123; return function (next) &#123; return function (reducer, initialState) &#123; let store = next(reducer, initialState); let dispatch = store.dispatch; let chain = []; var middlewareAPI = &#123; getState: store.getState, dispatch: (action) =&gt; dispatch(action), &#125;; chain = middlewares.map(middleware =&gt; middleware(middlewareAPI)); dispatch = compose(...chain)(store.dispatch); return &#123; ...store, dispatch, &#125;; &#125; &#125;&#125; å…¶ä¸­composeæºç å¦‚ä¸‹ï¼š 123function compose(...funcs) &#123; return arg =&gt; funcs.reduceRight((composed, f) =&gt; f(composed), arg);&#125; ä½¿ç”¨çš„æ—¶å€™ï¼Œå¦‚ä¸‹ï¼š 1const newStore = applyMiddleware([mid1, mid2, mid3, ...])(createStore)(reducer, initialState); okï¼Œç›¸å…³æºç å·²å°±ä½ï¼Œæ¥è¯¦ç»†è§£æä¸€æ³¢ã€‚ å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³è®¾è®¡ ï¼šmiddleware çš„è®¾è®¡æœ‰ç‚¹ç‰¹æ®Šï¼Œæ˜¯ä¸€ä¸ªå±‚å±‚åŒ…è£¹çš„åŒ¿åå‡½æ•°ï¼Œè¿™å…¶å®æ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„curryingï¼Œå®ƒæ˜¯ä¸€ç§ä½¿ç”¨åŒ¿åå•å‚æ•°å‡½æ•°æ¥å®ç°å¤šå‚æ•°å‡½æ•°çš„æ–¹æ³•ã€‚applyMiddleware ä¼šå¯¹ logger è¿™ä¸ªmiddleware è¿›è¡Œå±‚å±‚è°ƒç”¨ï¼ŒåŠ¨æ€åœ°å°† store å’Œ next å‚æ•°èµ‹å€¼ã€‚currying çš„ middleware ç»“æ„çš„å¥½å¤„ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç‚¹ã€‚ æ˜“ä¸²è”ï¼šcurrying å‡½æ•°å…·æœ‰å»¶è¿Ÿæ‰§è¡Œçš„ç‰¹æ€§ï¼Œé€šè¿‡ä¸æ–­ currying å½¢æˆçš„ middleware å¯ä»¥ç´¯ç§¯å‚æ•°ï¼Œå†é…åˆç»„åˆï¼ˆcomposeï¼‰çš„æ–¹å¼ï¼Œå¾ˆå®¹æ˜“å½¢æˆ pipeline æ¥å¤„ç†æ•°æ®æµã€‚ ï± å…±äº« store: åœ¨ applyMiddleware æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œstore è¿˜æ˜¯æ—§çš„ï¼Œä½†æ˜¯å› ä¸ºé—­åŒ…çš„å­˜åœ¨ï¼ŒapplyMiddleware å®Œæˆåï¼Œæ‰€æœ‰çš„ middleware å†…éƒ¨æ‹¿åˆ°çš„ store æ˜¯æœ€æ–°ä¸”ç›¸åŒçš„ã€‚ ç»™ middleware åˆ†å‘ storeï¼šnewStoreåˆ›å»ºå®Œæˆä¹‹åï¼ŒapplyMiddleware æ–¹æ³•é™†ç»­è·å¾—äº†3ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ middlewares æ•°ç»„[mid1, mid2, mid3, â€¦]ï¼Œç¬¬äºŒä¸ªæ˜¯ Redux åŸç”Ÿçš„ createStore ï¼Œæœ€åä¸€ä¸ªæ˜¯ reducerã€‚ç„¶åï¼Œå¯ä»¥çœ‹åˆ° applyMiddleware åˆ©ç”¨ createStore å’Œ reducer åˆ›å»ºäº†ä¸€ä¸ª storeã€‚è€Œ store çš„ getStateæ–¹æ³•å’Œ dispatch æ–¹æ³•åˆåˆ†åˆ«è¢«ç›´æ¥å’Œé—´æ¥åœ°èµ‹å€¼ç»™ middlewareAPI å˜é‡ storeï¼š 12345const middlewareAPI = &#123; getState: store.getState, dispatch: (action) =&gt; dispatch(action),&#125;;chain = middlewares.map(middleware =&gt; middleware(middlewareAPI)); ç„¶åï¼Œè®©æ¯ä¸ª middleware å¸¦ç€ middlewareAPI è¿™ä¸ªå‚æ•°åˆ†åˆ«æ‰§è¡Œä¸€éã€‚æ‰§è¡Œå®Œåï¼Œè·å¾— chainæ•°ç»„ [f1, f2, â€¦ , fx, â€¦, fn]ï¼Œå®ƒä¿å­˜çš„å¯¹è±¡æ˜¯ç¬¬äºŒä¸ªç®­å¤´å‡½æ•°è¿”å›çš„åŒ¿åå‡½æ•°ã€‚å› ä¸ºæ˜¯é—­åŒ…ï¼Œæ¯ä¸ªåŒ¿åå‡½æ•°éƒ½å¯ä»¥è®¿é—®ç›¸åŒçš„ storeï¼Œå³ middlewareAPIã€‚ middlewareAPI ä¸­çš„ dispatch ä¸ºä»€ä¹ˆè¦ç”¨åŒ¿åå‡½æ•°åŒ…è£¹å‘¢ï¼Ÿ ç”¨ applyMiddleware æ˜¯ä¸ºäº†æ”¹é€  dispatchï¼Œæ‰€ä»¥ applyMiddleware æ‰§è¡Œå®Œåï¼Œdispatch æ˜¯å˜åŒ–äº†çš„ï¼Œè€Œ middlewareAPI æ˜¯ applyMiddleware æ‰§è¡Œä¸­åˆ†å‘åˆ°å„ä¸ª middleware çš„ï¼Œæ‰€ä»¥å¿…é¡»ç”¨åŒ¿åå‡½æ•°åŒ…è£¹ dispatchï¼Œè¿™æ ·åªè¦ dispatch æ›´æ–°äº†ï¼ŒmiddlewareAPI ä¸­çš„ dispatch åº”ç”¨ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚ ç»„åˆä¸²è” middlewareï¼šè¿™ä¸€å±‚åªæœ‰ä¸€è¡Œä»£ç ï¼Œå´æ˜¯ applyMiddleware ç²¾åä¹‹æ‰€åœ¨dispatch = compose(...chain)(store.dispatch);ï¼Œå…¶ä¸­ compose æ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„ç»„åˆï¼Œå®ƒå°† chain ä¸­çš„æ‰€æœ‰åŒ¿åå‡½æ•° [f1, f2, â€¦ , fx, â€¦, fn]ç»„è£…æˆä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå³æ–°çš„ dispatchã€‚å½“æ–° dispatch æ‰§è¡Œæ—¶ï¼Œ[f1, f2, â€¦ , fx, â€¦, fn]ï¼Œä»å³åˆ°å·¦ä¾æ¬¡æ‰§è¡Œã€‚ compose(â€¦funcs) è¿”å›çš„æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå…¶ä¸­ funcs å°±æ˜¯ chain æ•°ç»„ã€‚å½“è°ƒç”¨ reduceRightæ—¶ï¼Œä¾æ¬¡ä» funcs æ•°ç»„çš„å³ç«¯å–ä¸€ä¸ªå‡½æ•° fx æ‹¿æ¥æ‰§è¡Œï¼Œfx çš„å‚æ•° composed å°±æ˜¯å‰ä¸€æ¬¡ fx+1 æ‰§è¡Œçš„ç»“æœï¼Œè€Œç¬¬ä¸€æ¬¡æ‰§è¡Œçš„ fnï¼ˆn ä»£è¡¨ chain çš„é•¿åº¦ï¼‰çš„å‚æ•° arg å°±æ˜¯ store.dispatchã€‚æ‰€ä»¥ï¼Œå½“ compose æ‰§è¡Œå®Œåï¼Œå¾—åˆ°çš„ dispatch æ˜¯è¿™æ ·çš„ï¼Œå‡è®¾ n = 3ï¼š 1dispatch = f1(f2(f3(store.dispatch)))); è¿™æ—¶è°ƒç”¨æ–° dispatchï¼Œæ¯ä¸€ä¸ª middleware å°±ä¾æ¬¡æ‰§è¡Œäº†ã€‚ åœ¨ middleware ä¸­è°ƒç”¨ dispatch ä¼šå‘ç”Ÿä»€ä¹ˆï¼šç»è¿‡ compose åï¼Œæ‰€æœ‰çš„ middleware ç®—æ˜¯ä¸²è”èµ·æ¥äº†ã€‚å¯æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨åˆ†å‘ store æ—¶ï¼Œæåˆ°è¿‡æ¯ä¸ª middleware éƒ½å¯ä»¥è®¿é—® storeï¼Œå³ middlewareAPI è¿™ä¸ªå˜é‡ï¼Œä¹Ÿå¯ä»¥æ‹¿åˆ° store çš„dispatch å±æ€§ã€‚é‚£ä¹ˆï¼Œåœ¨ middleware ä¸­è°ƒç”¨ store.dispatch() ä¼šå‘ç”Ÿä»€ä¹ˆï¼Œå’Œè°ƒç”¨ next() æœ‰åŒºåˆ«å—ï¼Ÿç°åœ¨æ¥è¯´æ˜ä¸¤è€…çš„ä¸åŒï¼š 12345678910const logger = store =&gt; next =&gt; action =&gt; &#123; console.log('dispatch:', action); next(action); console.log('finish:', action);&#125;;const logger = store =&gt; next =&gt; action =&gt; &#123; console.log('dispatch:', action); store.dispatch(action); console.log('finish:', action);&#125;; åœ¨åˆ†å‘ store æ—¶è§£é‡Šè¿‡ï¼Œmiddleware ä¸­ store çš„ dispatch é€šè¿‡åŒ¿åå‡½æ•°çš„æ–¹å¼å’Œæœ€ç»ˆcompose ç»“æŸåçš„æ–° dispatch ä¿æŒä¸€è‡´ï¼Œæ‰€ä»¥ï¼Œåœ¨ middleware ä¸­è°ƒç”¨ store.dispatch() å’Œåœ¨å…¶ä»–ä»»ä½•åœ°æ–¹è°ƒç”¨çš„æ•ˆæœä¸€æ ·ã€‚è€Œåœ¨ middleware ä¸­è°ƒç”¨ next()ï¼Œæ•ˆæœæ˜¯è¿›å…¥ä¸‹ä¸€ä¸ª middlewareï¼Œä¸‹å›¾å°±æ˜¯redux middlewareæœ€è‘—åçš„æ´‹è‘±æ¨¡å‹å›¾ã€‚ IArjf9kjKecPhnFF.png 4.combineReducerå¦‚æœä¸€ä¸ªé¡¹ç›®è¿‡å¤§ï¼Œé€šå¸¸æŒ‰æ¨¡å—æ¥å†™reducerï¼Œä½†æ˜¯redux create storeåªæ¥å—ä¸€ä¸ªreducerå‚æ•°ï¼Œæ‰€ä»¥éœ€è¦åˆå¹¶reducerã€‚è¿™é‡Œå°±ç”¨åˆ°äº†reduxæä¾›çš„combineReducerè¾…åŠ©å‡½æ•°ï¼š 12345combineReducers(&#123; layout, home, ...asyncReducers &#125;) è¿™ä¸ªå‡½æ•°ç”¨èµ·æ¥å¾ˆç®€å•ï¼Œå°±æ˜¯ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œkeyæ˜¯æ¨¡å—reducerå¯¹åº”çš„åå­—ï¼Œ å€¼æ˜¯å¯¹åº”reducerã€‚å€¼æ˜¯ä¸€ä¸ªfunctionï¼Œç›¸å½“äºæ˜¯ä¸€ä¸ªæ–°çš„reducerï¼Œæºç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051export default function combineReducers(reducers) &#123; var reducerKeys = Object.keys(reducers) var finalReducers = &#123;&#125; for (var i = 0; i &lt; reducerKeys.length; i++) &#123; var key = reducerKeys[i] if (process.env.NODE_ENV !== 'production') &#123; if (typeof reducers[key] === 'undefined') &#123; warning(`No reducer provided for key \"$&#123;key&#125;\"`) &#125; &#125; if (typeof reducers[key] === 'function') &#123; finalReducers[key] = reducers[key] &#125; &#125; var finalReducerKeys = Object.keys(finalReducers) if (process.env.NODE_ENV !== 'production') &#123; var unexpectedKeyCache = &#123;&#125; &#125; var sanityError try &#123; assertReducerSanity(finalReducers) &#125; catch (e) &#123; sanityError = e &#125; return function combination(state = &#123;&#125;, action) &#123; if (sanityError) &#123; throw sanityError &#125; if (process.env.NODE_ENV !== 'production') &#123; var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache) if (warningMessage) &#123; warning(warningMessage) &#125; &#125; var hasChanged = false var nextState = &#123;&#125; for (var i = 0; i &lt; finalReducerKeys.length; i++) &#123; var key = finalReducerKeys[i] var reducer = finalReducers[key] var previousStateForKey = state[key] var nextStateForKey = reducer(previousStateForKey, action) if (typeof nextStateForKey === 'undefined') &#123; var errorMessage = getUndefinedStateErrorMessage(key, action) throw new Error(errorMessage) &#125; nextState[key] = nextStateForKey hasChanged = hasChanged || nextStateForKey !== previousStateForKey &#125; return hasChanged ? nextState : state &#125;&#125; æºç ä¸æ˜¯å¾ˆå¤šï¼Œé™¤å»ä¸€äº›éªŒè¯ä»£ç ï¼Œå‰©ä¸‹çš„å°±æ˜¯è¯´ï¼šreturnä¸€ä¸ªfunctionï¼Œæš‚æ—¶ç§°å‘¼ä»–combinationï¼Œå°±ç›¸å½“äºæ˜¯ä¸ä¸€ä¸ªæ€»çš„reducerï¼Œæ¯æ¬¡actionéƒ½ä¼šèµ°åˆ°combinationä¸­ï¼Œcombinationä¼šéå†è¾“å…¥çš„reducerï¼Œå°†actionæ”¾åˆ°æ¯ä¸ªreducerä¸­æ‰§è¡Œä¸€ä¸‹ï¼Œè®¡ç®—å‡ºè¿”å›ç»“æœå°±æ˜¯nextStateï¼ŒnextStateäºpreviousStateå¦‚æœ!==è¯´æ˜æ”¹å˜äº†ï¼Œè¿”å›nextStateï¼Œå¦åˆ™è¿”å›æ‰§è¡Œä¹‹å‰çš„stateã€‚ è¿™ä¹Ÿè§£é‡Šäº†ä¸åŒæ¨¡å—actionTypeå¦‚æœç›¸åŒçš„è¯ï¼Œä¸¤ä¸ªæ¨¡å—çš„reduceréƒ½ä¼šèµ°ä¸€éçš„é—®é¢˜ï¼Œåœ¨actionTypeåç§°å‰é¢åŠ ä¸Šæ¨¡å—å‰ç¼€å³å¯è§£å†³é—®é¢˜ã€‚ 5. Providerä¸ConnectProviderä¸Connetç»„ä»¶éƒ½æ˜¯React-Reduxæä¾›çš„æ ¸å¿ƒç»„ä»¶ï¼Œä¸¤è€…çœ‹èµ·æ¥åŠŸèƒ½ä¸€æ ·ï¼Œéƒ½æ˜¯å¸®åŠ©å®¹å™¨ç»„ä»¶è·å–storeä¸­çš„æ•°æ®ï¼Œä½†æ˜¯åŸç†ä¸åŠŸèƒ½å´ä¸åŒã€‚ ProviderProviderç»„ä»¶åœ¨æ‰€æœ‰ç»„ä»¶çš„æœ€å¤–å±‚ï¼Œå…¶æ¥å—storeä½œä¸ºå‚æ•°ï¼Œå°†storeé‡Œçš„stateä½¿ç”¨contextå±æ€§å‘ä¸‹ä¼ é€’ã€‚éƒ¨åˆ†æºç ï¼š 12345678910111213export default class Provider extends Component &#123; getChildContext() &#123; return &#123; store: this.store &#125; &#125; constructor(props, context) &#123; super(props, context) this.store = props.store &#125; render() &#123; const &#123; children &#125; = this.props return Children.only(children) &#125;&#125; åˆ©ç”¨contextè¿™ä¸ªå±æ€§ï¼ŒProvideræ‰€æœ‰å­ç»„ä»¶å‡å¯ä»¥æ‹¿åˆ°è¿™ä¸ªå±æ€§ã€‚ Connectconnectå®ç°çš„åŠŸèƒ½æ˜¯å°†éœ€è¦å…³è”storeçš„ç»„ä»¶å’Œstoreçš„dispatchç­‰æ•°æ®æ··åˆåˆ°ä¸€å—ï¼Œè¿™å—å°±æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶å…¸å‹çš„åº”ç”¨ï¼š 1234567891011121314151617181920212223242526import hoistStatics from 'hoist-non-react-statics'export default function connect(mapStateToProps, mapDispatchToProps, mergeProps, options = &#123;&#125;) &#123; // ... return function wrapWithConnect(WrappedComponent) &#123; // ... class Connect extends Component &#123; // ... render() &#123; // ... if (withRef) &#123; this.renderedElement = createElement(WrappedComponent, &#123; ...this.mergedProps, ref: 'wrappedInstance' &#125;) &#125; else &#123; this.renderedElement = createElement(WrappedComponent, this.mergedProps ) &#125; return this.renderedElement &#125; &#125; // ... return hoistStatcis(Connect, WrappedComponent); &#125;&#125; è¿˜æ˜¯å…ˆä»ä»–çš„å››ä¸ªå‚æ•°è¯´èµ·ï¼š 1.mapStateToPropsconnect çš„ç¬¬ä¸€ä¸ªå‚æ•°å®šä¹‰äº†éœ€è¦ä» Redux çŠ¶æ€æ ‘ä¸­æå–å“ªäº›éƒ¨åˆ†å½“ä½œ props ä¼ ç»™å½“å‰ç»„ä»¶ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¹Ÿæ˜¯ä½¿ç”¨ connect æ—¶ç»å¸¸ä¼ å…¥çš„å‚æ•°ã€‚äº‹å®ä¸Šï¼Œå¦‚æœä¸ä¼ å…¥è¿™ä¸ªå‚æ•°ï¼ŒReact ç»„ä»¶å°†æ°¸è¿œä¸ä¼šå’Œ Redux çš„çŠ¶æ€æ ‘äº§ç”Ÿä»»ä½•å…³ç³»ã€‚å…·ä½“åœ¨æºä»£ç ä¸­çš„è¡¨ç°ä¸ºï¼š 1234567891011121314export default function connect(mapStateToProps, mapDispatchToProps, mergeProps, options = &#123;&#125;) &#123; const shouldSubscribe = Boolean(mapStateToProps) // ... class Connect extends Component &#123; // ... trySubscribe() &#123; if (shouldSubscribe &amp;&amp; !this.unsubscribe) &#123; this.unsubscribe = this.store.subscribe(this.handleChange.bind(this)) this.handleChange() &#125; &#125; // ... &#125;&#125; mapStateToPropsä¼šè®¢é˜… Storeï¼Œæ¯å½“stateæ›´æ–°çš„æ—¶å€™ï¼Œå°±ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œé‡æ–°è®¡ç®— UI ç»„ä»¶çš„å‚æ•°ï¼Œä»è€Œè§¦å‘ UI ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚ mapStateToPropsçš„ç¬¬ä¸€ä¸ªå‚æ•°æ€»æ˜¯stateå¯¹è±¡ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°ï¼Œä»£è¡¨å®¹å™¨ç»„ä»¶çš„propså¯¹è±¡ã€‚ è¿™å—çš„æºç ç›¸å¯¹è¾ƒç®€å•ï¼š 1234567891011121314151617181920212223242526272829const mapState = mapStateToProps || defaultMapStateToProps class Connect extends Component &#123; computeStateProps(store, props) &#123; if (!this.finalMapStateToProps) &#123; return this.configureFinalMapState(store, props) &#125; const state = store.getState() const stateProps = this.doStatePropsDependOnOwnProps ? this.finalMapStateToProps(state, props) : this.finalMapStateToProps(state) if (process.env.NODE_ENV !== 'production') &#123; checkStateShape(stateProps, 'mapStateToProps') &#125; return stateProps &#125; configureFinalMapState(store, props) &#123; const mappedState = mapState(store.getState(), props) const isFactory = typeof mappedState === 'function' this.finalMapStateToProps = isFactory ? mappedState : mapState this.doStatePropsDependOnOwnProps = this.finalMapStateToProps.length !== 1 if (isFactory) &#123; return this.computeStateProps(store, props) &#125; if (process.env.NODE_ENV !== 'production') &#123; checkStateShape(mappedState, 'mapStateToProps') &#125; return mappedState &#125;&#125; è¿™å—åŸç†å¾ˆç®€å•ï¼Œè¿›è¡Œä¸€äº›å‚æ•°æ ¡éªŒï¼Œåˆ¤æ–­ç¬¬ä¸€ä¸ªå‚æ•°mapStateToPropsè¿”å›å€¼æ˜¯å¦ä¸ºfunctionï¼Œå¦‚æœæ˜¯é€’å½’è°ƒç”¨ï¼Œä¸æ˜¯çš„è¯ç®—å‡ºè¿”å›å€¼ã€‚å¦‚æœæ²¡ä¼ è¿™ä¸ªå‚æ•°ï¼Œé»˜è®¤ç»™{}ã€‚ å¯èƒ½ä¼šç–‘æƒ‘ä¸ºä»€ä¹ˆä¼ ç»™ connect çš„ç¬¬ä¸€ä¸ªå‚æ•°æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œreact-redux è¿˜å…è®¸è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°å‘¢ï¼Ÿç®€å•åœ°è¯´ï¼Œè¿™æ ·è®¾è®¡å¯ä»¥å…è®¸åœ¨ connect çš„ç¬¬ä¸€ä¸ªå‚æ•°é‡Œåˆ©ç”¨å‡½æ•°é—­åŒ…è¿›è¡Œä¸€äº›å¤æ‚è®¡ç®—çš„ç¼“å­˜ï¼Œä»è€Œå®ç°æ•ˆç‡ä¼˜åŒ–çš„ç›®çš„ å½“ä½¿ç”¨çš„æ—¶å€™ï¼š 1234const mapStateToProps = (state, props) =&gt; (&#123; home: state.home, layout: state.layout&#125;); ä½¿ç”¨ownPropsä½œä¸ºå‚æ•°åï¼Œå¦‚æœå®¹å™¨ç»„ä»¶çš„å‚æ•°å‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿä¼šå¼•å‘ UI ç»„ä»¶é‡æ–°æ¸²æŸ“ 2.mapDispatchToPropsäººå¦‚å…¶åï¼Œå®ƒæ¥å— store çš„ dispatch ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼ŒåŒæ—¶æ¥å— this.props ä½œä¸ºå¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚åˆ©ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥åœ¨ connect ä¸­æ–¹ä¾¿åœ°å°† actionCreator ä¸ dispatch ç»‘å®šåœ¨ä¸€èµ·ï¼ˆåˆ©ç”¨ bindActionCreators æ–¹æ³•ï¼‰ï¼Œæœ€ç»ˆç»‘å®šå¥½çš„æ–¹æ³•ä¹Ÿä¼šä½œä¸º props ä¼ ç»™å½“å‰ç»„ä»¶ã€‚è¿™å—çš„æºç ä¸mapStateToPropsä¸€æ ·ï¼Œå°±ä¸è´´äº†ã€‚ bindActionCreator 123function bindActionCreator(actionCreator, dispatch) &#123; return (...args) =&gt; dispatch(actionCreator(...args))&#125; 3.mergePropså‰ä¸¤ä¸ªå‚æ•°è¿”å›çš„å¯¹è±¡ï¼Œéƒ½è¦è·Ÿç»„ä»¶è‡ªèº«çš„props mergeä¸€ä¸‹ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„å¯¹è±¡èµ‹å€¼ç»™å¯¹åº”ç»„ä»¶ï¼Œå¯ä»¥åœ¨è¿™ä¸€æ­¥åšä¸€äº›å¤„ç†ï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¯å¹²è¿™ä¸ªçš„ï¼Œè¯¥å‚æ•°ç­¾åï¼š 1mergeProps(stateProps, dispatchProps, ownProps): props é»˜è®¤æƒ…å†µå¦‚æœæ²¡ä¼ è¯¥å‚æ•°ï¼Œè¿”å›Object.assign(ownProps, stateProps, dispatchProps)ã€‚ 4.optionså¦‚æœæŒ‡å®šè¿™ä¸ªå‚æ•°ï¼Œå¯ä»¥å®šåˆ¶ connector çš„è¡Œä¸ºã€‚ [pure = true] (Boolean): å¦‚æœä¸º trueï¼Œconnector å°†æ‰§è¡Œ shouldComponentUpdate å¹¶ä¸”æµ…å¯¹æ¯” mergeProps çš„ç»“æœï¼Œé¿å…ä¸å¿…è¦çš„æ›´æ–°ï¼Œå‰ææ˜¯å½“å‰ç»„ä»¶æ˜¯ä¸€ä¸ªâ€œçº¯â€ç»„ä»¶ï¼Œå®ƒä¸ä¾èµ–äºä»»ä½•çš„è¾“å…¥æˆ– state è€Œåªä¾èµ–äº props å’Œ Redux store çš„ stateã€‚*é»˜è®¤å€¼ä¸º trueã€‚* [withRef = false] (Boolean): å¦‚æœä¸º trueï¼Œconnector ä¼šä¿å­˜ä¸€ä¸ªå¯¹è¢«åŒ…è£…ç»„ä»¶å®ä¾‹çš„å¼•ç”¨ï¼Œè¯¥å¼•ç”¨é€šè¿‡ getWrappedInstance() æ–¹æ³•è·å¾—ã€‚*é»˜è®¤å€¼ä¸º falseã€‚* è¿™ä¸ªconnectç»„ä»¶è¿˜å¹²äº†ä¸€ä»¶äº‹ï¼ŒçŠ¶æ€ç¼“å­˜åˆ¤æ–­ã€‚å½“storeå˜äº†çš„æ—¶å€™ï¼Œå‰åçŠ¶æ€åˆ¤æ–­ï¼Œå¦‚æœçŠ¶æ€ä¸ç­‰ï¼Œæ›´æ–°ç»„ä»¶ï¼Œå¹¶ä¸”å®Œæˆäº‹ä»¶åˆ†å‘ã€‚ 6. Reduxæµç¨‹æ¢³ç†ä¸Šé¢è®²äº†å¤§é‡çš„å‡½æ•°æºç ï¼Œè¿™ä¹ˆäº›å‡½æ•°ä¹‹é—´çš„å…³ç³»ï¼š 4g40yEqEfjeRqxs6.png åˆå§‹åŒ–é˜¶æ®µï¼š createStoreåˆ›å»ºä¸€ä¸ªstoreå¯¹è±¡ å°†storeå¯¹è±¡é€šè¿‡å‚æ•°ç»™Providerç»„ä»¶ Providerç»„ä»¶å°†storeé€šè¿‡contextå‘å­ç»„ä»¶ä¼ é€’ Connectç»„ä»¶é€šè¿‡contextè·å–åˆ°storeï¼Œå­˜å…¥è‡ªå·±çš„state componentDidMounté‡Œé¢è®¢é˜…store.subscribeäº‹ä»¶ æ›´æ–°æ•°æ®é˜¶æ®µï¼š ç”¨æˆ·äº‹ä»¶è§¦å‘ actionCreatorç”Ÿæˆactionäº¤ç»™dispatch å®é™…ä¸Šäº¤ç»™äº†å°è£…åçš„ä¸­é—´å±‚ï¼ˆcompose(applyMiddleware(â€¦))ï¼‰ è¯·æ±‚ä¾æ¬¡é€šè¿‡æ¯ä¸ªä¸­é—´ä»¶ï¼Œä¸­é—´ä»¶é€šè¿‡nextè¿›è¡Œä¸‹ä¸€æ­¥ æœ€åä¸€ä¸ªä¸­é—´ä»¶å°†actionäº¤ç»™store.dispatch dispatchå†…éƒ¨å°†actionäº¤ç»™reduceræ‰§è¡Œ combineReducerå°†æ¯ä¸ªå­reduceræ‰§è¡Œä¸€éç®—å‡ºæ–°çš„state dispatchå†…éƒ¨è°ƒç”¨æ‰€æœ‰è®¢é˜…äº‹ä»¶ Connectç»„ä»¶handleChangeäº‹ä»¶è§¦å‘åˆ¤æ–­æ–°stateå’Œæ—§stateæ˜¯å¦=== å¹¶ä¸”åˆ¤æ–­æ–°çš„stateæ˜¯å¦ä¸mapStateToProps shallowEqual ä¸ç­‰åˆ™setStateè§¦å‘æ›´æ–° 7.Reduxè®¾è®¡æŠ€å·§ åŒ¿åå‡½æ•°&amp;&amp;é—­åŒ…ä½¿ç”¨ reduxæ ¸å¿ƒå‡½æ•°å¤§é‡ä½¿ç”¨äº†åŒ¿åå‡½æ•°å’Œé—­åŒ…æ¥å®ç°æ•°æ®å…±äº«å’ŒçŠ¶æ€åŒæ­¥ã€‚ å‡½æ•°æŸ¯é‡ŒåŒ–ä½¿ç”¨ ä½¿ç”¨å‡½æ•°æŸ¯é‡ŒåŒ–så®ç°å‚æ•°å¤ç”¨ï¼Œæœ¬è´¨ä¸Šæ˜¯é™ä½é€šç”¨æ€§ï¼Œæé«˜é€‚ç”¨æ€§ã€‚ æ ¸å¿ƒçŠ¶æ€è¯»å–æ˜¯æ‹·è´è€Œä¸æ˜¯åœ°å€ å¯¹äºstateè¿™ç§æ ¸å¿ƒçŠ¶æ€ä½¿ç”¨getState()è®¡ç®—å‡ºæ–°çš„stateï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›ä¸€ä¸ªstateå¯¹è±¡ã€‚ è§‚å¯Ÿè€…è®¢é˜…è€…æ˜¯æ ¸å¿ƒå®ç° ä½¿ç”¨è§‚å¯Ÿè€…è®¢é˜…è€…æ¨¡å¼å®ç°æ•°æ®å“åº”ã€‚ contextè¿™ä¸ªapiçš„ä½¿ç”¨ å¹³æ—¶å¼€å‘ä¸å¸¸æ¥è§¦çš„apiå®ç°Providerä¸Connecté€šä¿¡ã€‚","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://summxu.github.io/tags/JavaScript/"}]},{"title":"æ·±å…¥äº†è§£useMemoå’ŒuseCallback","slug":"2021/æ·±å…¥äº†è§£useMemoå’ŒuseCallback","date":"2021-10-31T01:06:38.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2021/æ·±å…¥äº†è§£useMemoå’ŒuseCallback/","link":"","permalink":"https://summxu.github.io/2021/æ·±å…¥äº†è§£useMemoå’ŒuseCallback/","excerpt":"","text":"ä» useMemo å¼€å§‹ã€‚useMemo çš„åŸºæœ¬æ€æƒ³æ˜¯å®ƒå…è®¸åœ¨æ¸²æŸ“ä¹‹é—´â€œè®°ä½â€è®¡ç®—å€¼ã€‚è¿™ä¸ªå®šä¹‰éœ€è¦ä¸€äº›è§£é‡Šï¼Œå…ˆæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ React åšçš„ä¸»è¦äº‹æƒ…æ˜¯ä¿æŒUIä¸åº”ç”¨ç¨‹åºçŠ¶æ€åŒæ­¥ã€‚å®ƒç”¨æ¥åšè¿™ä»¶äº‹çš„å·¥å…·å«åšâ€œre-renderâ€ã€‚åŸºäºå½“å‰åº”ç”¨ç¨‹åºçŠ¶æ€ï¼Œæ¯æ¬¡é‡æ–°å‘ˆç°éƒ½æ˜¯åº”ç”¨ç¨‹åºUIåœ¨ç»™å®šæ—¶åˆ»åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­çš„å¿«ç…§ã€‚å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€å †ç…§ç‰‡ï¼Œæ¯ä¸€å¼ ç…§ç‰‡éƒ½è®°å½•äº†ç»™å®šæ¯ä¸ªçŠ¶æ€å˜é‡çš„ç‰¹å®šå€¼æ—¶äº‹ç‰©çš„æ ·å­ã€‚ æ¯æ¬¡â€œre-renderâ€éƒ½ä¼šæ ¹æ®å½“å‰çŠ¶æ€åœ¨è„‘æµ·ä¸­ç”Ÿæˆ DOM åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­çš„å›¾åƒã€‚ä½†å®é™…ä¸Šå®ƒæ˜¯ä¸€å †JSå¯¹è±¡ï¼Œè¢«ç§°ä¸ºâ€œvirtual DOMâ€ã€‚ ä¸ç›´æ¥å‘Šè¯‰ React éœ€è¦æ›´æ”¹å“ªäº› DOM èŠ‚ç‚¹ã€‚ç›¸åï¼Œæ ¹æ®å½“å‰çŠ¶æ€å‘Šè¯‰React UIåº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­ã€‚é€šè¿‡é‡æ–°æ¸²æŸ“ï¼ŒReact åˆ›å»ºä¸€ä¸ªæ–°çš„å¿«ç…§ï¼Œå®ƒå¯ä»¥é€šè¿‡æ¯”è¾ƒå¿«ç…§æ‰¾å‡ºéœ€è¦æ›´æ”¹çš„å†…å®¹ï¼Œå°±åƒç©â€œå¯»æ‰¾å·®å¼‚â€æ¸¸æˆä¸€æ ·ã€‚ React åœ¨å¼€ç®±å³ç”¨æ—¶è¿›è¡Œäº†å¤§é‡ä¼˜åŒ–ï¼Œæ‰€ä»¥é€šå¸¸æƒ…å†µä¸‹ï¼Œé‡æ–°æ¸²æŸ“ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ã€‚ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œåˆ›å»ºè¿™äº›å¿«ç…§ç¡®å®éœ€è¦ä¸€äº›æ—¶é—´ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œæ¯”å¦‚ UI åœ¨ç”¨æˆ·æ‰§è¡Œæ“ä½œåæ›´æ–°ä¸å¤Ÿå¿«ã€‚ è€Œ useMemo å’Œ useCallback æ˜¯ç”¨æ¥å¸®åŠ©ä¼˜åŒ–é‡æ¸²æŸ“çš„å·¥å…·ã€‚ä»–ä»¬é€šè¿‡ä¸¤ç§æ–¹å¼åšåˆ°è¿™ä¸€ç‚¹ï¼š å‡å°‘åœ¨ç»™å®šæ¸²æŸ“ä¸­éœ€è¦å®Œæˆçš„å·¥ä½œé‡ã€‚ å‡å°‘ç»„ä»¶éœ€è¦é‡æ–°å‘ˆç°çš„æ¬¡æ•°ã€‚ è®©é€šè¿‡ä¸‹é¢çš„æ —å­æ¥ç†è§£å®ƒä»¬å§ã€‚ 2. ç¤ºä¾‹1ï¼šå¤§é‡çš„è®¡ç®—å‡è®¾æ­£åœ¨æ„å»ºä¸€ä¸ªå·¥å…·æ¥å¸®åŠ©ç”¨æˆ·æŸ¥æ‰¾ 0 åˆ° selectedNum ä¹‹é—´çš„æ‰€æœ‰ç´ æ•°ï¼Œå…¶ä¸­ selectedNum æ˜¯ç”¨æˆ·æä¾›çš„å€¼ã€‚**è´¨æ•°æ˜¯åªèƒ½è¢«1å’Œè‡ªèº«æ•´é™¤çš„æ•°ï¼Œæ¯”å¦‚17ã€‚**ä¸‹é¢æ˜¯ä¸€ä¸ªå¯èƒ½çš„å®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152import React from 'react';function App() &#123; // å­˜å‚¨ç”¨æˆ·æ‰€é€‰å·ç çš„çŠ¶æ€ã€‚ const [selectedNum, setSelectedNum] = React.useState(100); // è®¡ç®—ä» 0 åˆ°ç”¨æˆ·é€‰æ‹©çš„æ•°å­— selectedNum ä¹‹é—´çš„æ‰€æœ‰ç´ æ•° const allPrimes = []; for (let counter = 2; counter &lt; selectedNum; counter++) &#123; if (isPrime(counter)) &#123; allPrimes.push(counter); &#125; &#125; return ( &lt;&gt; &lt;form&gt; &lt;label htmlFor=\"num\"&gt;Your number:&lt;/label&gt; &lt;input type=\"number\" value=&#123;selectedNum&#125; onChange=&#123;(event) =&gt; &#123; // ä¸ºäº†é˜²æ­¢å¤ªå¤§ï¼Œå°†æœ€å¤§å€¼è®¾å®šåœ¨10ä¸‡ let num = Math.min(100_000, Number(event.target.value)); setSelectedNum(num); &#125;&#125; /&gt; &lt;/form&gt; &lt;p&gt; There are &#123;allPrimes.length&#125; prime(s) between 1 and &#123;selectedNum&#125;:&#123;' '&#125; &lt;span className=\"prime-list\"&gt;&#123;allPrimes.join(', ')&#125;&lt;/span&gt; &lt;/p&gt; &lt;/&gt; );&#125;// è®¡ç®—ç»™å®šæ•°å­—æ˜¯å¦æ˜¯ç´ æ•°çš„ Helper å‡½æ•°function isPrime(n) &#123; const max = Math.ceil(Math.sqrt(n)); if (n === 2) &#123; return true; &#125; for (let counter = 2; counter &lt;= max; counter++) &#123; if (n % counter === 0) &#123; return false; &#125; &#125; return true;&#125;export default App; æœ‰ä¸€ä¸ªçŠ¶æ€ï¼Œä¸€ä¸ªå«åš selectedNum çš„æ•°å­—ã€‚ä½¿ç”¨ for å¾ªç¯ï¼Œæ‰‹åŠ¨è®¡ç®— 0 åˆ° selectedNum ä¹‹é—´çš„æ‰€æœ‰ç´ æ•°ã€‚å‘ˆç°ä¸€ä¸ªå—æ§åˆ¶çš„æ•°å­—è¾“å…¥ï¼Œå› æ­¤ç”¨æˆ·å¯ä»¥æ›´æ”¹ selectedNum ã€‚å‘ç”¨æˆ·æ˜¾ç¤ºè®¡ç®—çš„æ‰€æœ‰è´¨æ•°ã€‚ è¿™æ®µä»£ç éœ€è¦å¤§é‡çš„è®¡ç®—ã€‚å¦‚æœç”¨æˆ·é€‰æ‹©ä¸€ä¸ªè¾ƒå¤§çš„ selectedNumï¼Œå°†éœ€è¦éå†æˆåƒä¸Šä¸‡ä¸ªæ•°å­—ï¼Œæ£€æŸ¥æ˜¯å¦æ¯ä¸ªæ•°å­—éƒ½æ˜¯ç´ æ•°ã€‚è€Œä¸”ï¼Œè™½ç„¶æœ‰æ¯”æˆ‘ä¸Šé¢ä½¿ç”¨çš„æ›´æœ‰æ•ˆçš„è´¨æ•°æ£€æŸ¥ç®—æ³•ï¼Œä½†å®ƒæ€»æ˜¯éœ€è¦å¤§é‡çš„è®¡ç®—ã€‚ æœ‰æ—¶ç¡®å®éœ€è¦æ‰§è¡Œè¿™ä¸ªè®¡ç®—ï¼Œæ¯”å¦‚å½“ç”¨æˆ·é€‰æ‹©ä¸€ä¸ªæ–°çš„ selectedNum æ—¶ã€‚ä½†æ˜¯å¯èƒ½ä¼šé‡åˆ°ä¸€äº›æ€§èƒ½é—®é¢˜ï¼Œå¦‚æœåœ¨ä¸éœ€è¦åšçš„æ—¶å€™æ— å¿åœ°åšè¿™é¡¹å·¥ä½œã€‚ ä¾‹å¦‚ï¼Œè®©å‡è®¾çš„ä¾‹å­è¿˜åŒ…å«ä¸€ä¸ªæ•°å­—æ—¶é’Ÿ: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475import React from 'react';import format from 'date-fns/format';function App() &#123; const [selectedNum, setSelectedNum] = React.useState(100); // time æ˜¯ä¸€ä¸ªæ¯ç§’æ”¹å˜ä¸€æ¬¡çš„çŠ¶æ€å˜é‡ï¼Œå› æ­¤å®ƒæ€»æ˜¯ä¸å½“å‰æ—¶é—´åŒæ­¥ã€‚ const time = useTime(); // è®¡ç®—æ‰€æœ‰è´¨æ•°ï¼ˆä¸å‰é¢çš„ç¤ºä¾‹ç›¸åŒï¼‰ const allPrimes = []; for (let counter = 2; counter &lt; selectedNum; counter++) &#123; if (isPrime(counter)) &#123; allPrimes.push(counter); &#125; &#125; return ( &lt;&gt; &lt;p className=\"clock\"&gt; &#123;format(time, 'hh:mm:ss a')&#125; &lt;/p&gt; &lt;form&gt; &lt;label htmlFor=\"num\"&gt;Your number:&lt;/label&gt; &lt;input type=\"number\" value=&#123;selectedNum&#125; onChange=&#123;(event) =&gt; &#123; // ä¸ºäº†é˜²æ­¢å¤ªå¤§ï¼Œå°†æœ€å¤§å€¼è®¾å®šåœ¨10ä¸‡ let num = Math.min(100_000, Number(event.target.value)); setSelectedNum(num); &#125;&#125; /&gt; &lt;/form&gt; &lt;p&gt; There are &#123;allPrimes.length&#125; prime(s) between 1 and &#123;selectedNum&#125;: &#123;' '&#125; &lt;span className=\"prime-list\"&gt; &#123;allPrimes.join(', ')&#125; &lt;/span&gt; &lt;/p&gt; &lt;/&gt; );&#125;function useTime() &#123; const [time, setTime] = React.useState(new Date()); React.useEffect(() =&gt; &#123; const intervalId = window.setInterval(() =&gt; &#123; setTime(new Date()); &#125;, 1000); return () =&gt; &#123; window.clearInterval(intervalId); &#125; &#125;, []); return time;&#125;function isPrime(n)&#123; const max = Math.ceil(Math.sqrt(n)); if (n === 2) &#123; return true; &#125; for (let counter = 2; counter &lt;= max; counter++) &#123; if (n % counter === 0) &#123; return false; &#125; &#125; return true;&#125;export default App; çš„åº”ç”¨ç¨‹åºç°åœ¨æœ‰ä¸¤ä¸ªçŠ¶æ€ï¼ŒselectedNum å’Œ timeã€‚æ—¶é—´å˜é‡æ¯ç§’æ›´æ–°ä¸€æ¬¡ï¼Œä»¥åæ˜ å½“å‰æ—¶é—´ï¼Œè¯¥å€¼ç”¨äºå‘ˆç°å³ä¸Šè§’çš„æ•°å­—æ—¶é’Ÿã€‚ é—®é¢˜åœ¨äºï¼šæ¯å½“è¿™äº›çŠ¶æ€å˜é‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±ä¼šé‡æ–°è¿è¡Œé‚£äº›æ˜‚è´µçš„è´¨æ•°è®¡ç®—ã€‚å› ä¸ºæ—¶é—´æ¯ç§’æ”¹å˜ä¸€æ¬¡ï¼Œè¿™æ„å‘³ç€ä¸æ–­åœ°é‡æ–°ç”Ÿæˆè´¨æ•°åˆ—è¡¨ï¼Œå³ä½¿ç”¨æˆ·é€‰æ‹©çš„æ•°å­—æ²¡æœ‰æ”¹å˜ï¼ï¼ï¼ åœ¨ JavaScript ä¸­ï¼Œåªæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œé€šè¿‡ä¸€éåˆä¸€éåœ°è¿è¡Œè¿™æ®µä»£ç è®©å®ƒéå¸¸ç¹å¿™ï¼Œæ¯ä¸€ç§’ã€‚è¿™æ„å‘³ç€å½“ç”¨æˆ·å°è¯•åšå…¶ä»–äº‹æƒ…æ—¶ï¼Œåº”ç”¨ç¨‹åºå¯èƒ½ä¼šæ„Ÿåˆ°è¿Ÿç¼“ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½ç«¯è®¾å¤‡ä¸Šã€‚ ä½†å¦‚æœå¯ä»¥â€œè·³è¿‡â€è¿™äº›è®¡ç®—å‘¢ï¼Ÿå¦‚æœå·²ç»æœ‰äº†ä¸€ä¸ªç»™å®šæ•°å­—çš„è´¨æ•°åˆ—è¡¨ï¼Œä¸ºä»€ä¹ˆä¸é‡ç”¨è¿™ä¸ªå€¼è€Œä¸æ˜¯æ¯æ¬¡éƒ½ä»å¤´è®¡ç®—å‘¢ï¼Ÿè¿™æ­£æ˜¯ useMemo å…è®¸åšçš„ã€‚å®ƒçœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š 123456789const allPrimes = React.useMemo(() =&gt; &#123; const result = []; for (let counter = 2; counter &lt; selectedNum; counter++) &#123; if (isPrime(counter)) &#123; result.push(counter); &#125; &#125; return result;&#125;, [selectedNum]); useMemo æœ‰ä¸¤ä¸ªå‚æ•°ï¼š è¦æ‰§è¡Œçš„å·¥ä½œå—ï¼Œå°è£…åœ¨å‡½æ•°ä¸­ ä¾èµ–é¡¹åˆ—è¡¨ åœ¨æŒ‚è½½æœŸé—´ï¼Œå½“è¿™ä¸ªç»„ä»¶ç¬¬ä¸€æ¬¡å‘ˆç°æ—¶ï¼ŒReact å°†è°ƒç”¨è¿™ä¸ªå‡½æ•°æ¥è¿è¡Œæ‰€æœ‰çš„é€»è¾‘ï¼Œè®¡ç®—æ‰€æœ‰çš„è´¨æ•°ã€‚æ— è®ºä»è¿™ä¸ªå‡½æ•°è¿”å›ä»€ä¹ˆï¼Œéƒ½è¢«èµ‹å€¼ç»™ allPrimes å˜é‡ã€‚ ç„¶è€Œï¼Œå¯¹äºæ¯ä¸€ä¸ªåç»­æ¸²æŸ“ï¼ŒReact éƒ½è¦åšå‡ºé€‰æ‹©ã€‚ å†æ¬¡è°ƒç”¨å‡½æ•°ï¼Œé‡æ–°è®¡ç®—å€¼ é‡ç”¨å®ƒä¸Šæ¬¡æ‰§è¡Œæ­¤å·¥ä½œæ—¶å·²ç»æ‹¥æœ‰çš„æ•°æ®ã€‚ ä¸ºäº†åšå‡ºé€‰æ‹©ï¼ŒReact æŸ¥çœ‹æä¾›çš„ä¾èµ–é¡¹åˆ—è¡¨ã€‚å¯¹äºä¹‹å‰çš„æ¸²æŸ“æœ‰ä»»ä½•æ”¹å˜å—ï¼Ÿå¦‚æœæ˜¯ï¼ŒReact å°†é‡æ–°è¿è¡Œæä¾›çš„å‡½æ•°ï¼Œä»¥è®¡ç®—ä¸€ä¸ªæ–°çš„å€¼ã€‚å¦åˆ™ï¼Œå®ƒå°†è·³è¿‡æ‰€æœ‰è¿™äº›å·¥ä½œå¹¶é‡ç”¨ä¹‹å‰è®¡ç®—çš„å€¼ã€‚ useMemo æœ¬è´¨ä¸Šç±»ä¼¼äºç¼“å­˜ï¼Œä¾èµ–é¡¹æ˜¯ç¼“å­˜å¤±æ•ˆç­–ç•¥ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå®é™…ä¸Šæ˜¯åœ¨è¯´â€œåªæœ‰å½“ selectedNum å‘ç”Ÿå˜åŒ–æ—¶æ‰é‡æ–°è®¡ç®—è´¨æ•°åˆ—è¡¨â€ã€‚å½“ç»„ä»¶ç”±äºå…¶ä»–åŸå› é‡æ–°å‘ˆç°æ—¶ï¼ˆä¾‹å¦‚ã€‚å½“æ—¶é—´çŠ¶æ€å˜é‡å‘ç”Ÿå˜åŒ–æ—¶ï¼‰ï¼ŒuseMemo å¿½ç•¥å‡½æ•°å¹¶ä¼ é€’ç¼“å­˜çš„å€¼ã€‚ è¿™é€šå¸¸è¢«ç§°ä¸ºè®°å¿†ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™ä¸ªé’©å­è¢«ç§°ä¸º useMemoã€‚ä¸‹é¢æ˜¯è¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„å®æ—¶ç‰ˆæœ¬ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576import React from 'react';import format from 'date-fns/format';function App() &#123; const [selectedNum, setSelectedNum] = React.useState(100); const time = useTime(); const allPrimes = React.useMemo(() =&gt; &#123; const result = []; for (let counter = 2; counter &lt; selectedNum; counter++) &#123; if (isPrime(counter)) &#123; result.push(counter); &#125; &#125; return result; &#125;, [selectedNum]); return ( &lt;&gt; &lt;p className=\"clock\"&gt; &#123;format(time, 'hh:mm:ss a')&#125; &lt;/p&gt; &lt;form&gt; &lt;label htmlFor=\"num\"&gt;Your number:&lt;/label&gt; &lt;input type=\"number\" value=&#123;selectedNum&#125; onChange=&#123;(event) =&gt; &#123; // ä¸ºäº†é˜²æ­¢å¤ªå¤§ï¼Œå°†æœ€å¤§å€¼è®¾å®šåœ¨10ä¸‡ let num = Math.min(100_000, Number(event.target.value)); setSelectedNum(num); &#125;&#125; /&gt; &lt;/form&gt; &lt;p&gt; There are &#123;allPrimes.length&#125; prime(s) between 1 and &#123;selectedNum&#125;: &#123;' '&#125; &lt;span className=\"prime-list\"&gt; &#123;allPrimes.join(', ')&#125; &lt;/span&gt; &lt;/p&gt; &lt;/&gt; );&#125;function useTime() &#123; const [time, setTime] = React.useState(new Date()); React.useEffect(() =&gt; &#123; const intervalId = window.setInterval(() =&gt; &#123; setTime(new Date()); &#125;, 1000); return () =&gt; &#123; window.clearInterval(intervalId); &#125; &#125;, []); return time;&#125;function isPrime(n)&#123; const max = Math.ceil(Math.sqrt(n)); if (n === 2) &#123; return true; &#125; for (let counter = 2; counter &lt;= max; counter++) &#123; if (n % counter === 0) &#123; return false; &#125; &#125; return true;&#125; å› æ­¤ï¼ŒuseMemo é’©å­ç¡®å®å¯ä»¥å¸®åŠ©é¿å…è¿™é‡Œä¸å¿…è¦çš„è®¡ç®—ã€‚ä½†å®ƒçœŸçš„æ˜¯è¿™é‡Œçš„æœ€ä½³è§£å†³æ–¹æ¡ˆå—ï¼Ÿé€šå¸¸ï¼Œå¯ä»¥é€šè¿‡é‡ç»„åº”ç”¨ç¨‹åºä¸­çš„å†…å®¹æ¥é¿å…å¯¹ useMemo çš„éœ€æ±‚ã€‚å¯ä»¥è¿™æ ·åšï¼š PrimeCalculator.js 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152import React from 'react';function PrimeCalculator() &#123; const [selectedNum, setSelectedNum] = React.useState(100); const allPrimes = []; for (let counter = 2; counter &lt; selectedNum; counter++) &#123; if (isPrime(counter)) &#123; allPrimes.push(counter); &#125; &#125; return ( &lt;&gt; &lt;form&gt; &lt;label htmlFor=\"num\"&gt;Your number:&lt;/label&gt; &lt;input type=\"number\" value=&#123;selectedNum&#125; onChange=&#123;(event) =&gt; &#123; // ä¸ºäº†é˜²æ­¢å¤ªå¤§ï¼Œå°†æœ€å¤§å€¼è®¾å®šåœ¨10ä¸‡ let num = Math.min(100_000, Number(event.target.value)); setSelectedNum(num); &#125;&#125; /&gt; &lt;/form&gt; &lt;p&gt; There are &#123;allPrimes.length&#125; prime(s) between 1 and &#123;selectedNum&#125;: &#123;' '&#125; &lt;span className=\"prime-list\"&gt; &#123;allPrimes.join(', ')&#125; &lt;/span&gt; &lt;/p&gt; &lt;/&gt; );&#125;function isPrime(n)&#123; const max = Math.ceil(Math.sqrt(n)); if (n === 2) &#123; return true; &#125; for (let counter = 2; counter &lt;= max; counter++) &#123; if (n % counter === 0) &#123; return false; &#125; &#125; return true;&#125;export default PrimeCalculator; Clock.js 123456789101112131415161718192021222324252627282930import React from 'react';import format from 'date-fns/format';function Clock() &#123; const time = useTime(); return ( &lt;p className=\"clock\"&gt; &#123;format(time, 'hh:mm:ss a')&#125; &lt;/p&gt; );&#125;function useTime() &#123; const [time, setTime] = React.useState(new Date()); React.useEffect(() =&gt; &#123; const intervalId = window.setInterval(() =&gt; &#123; setTime(new Date()); &#125;, 1000); return () =&gt; &#123; window.clearInterval(intervalId); &#125; &#125;, []); return time;&#125;export default Clock; App.js 123456789101112131415import React from 'react';import Clock from './Clock';import PrimeCalculator from './PrimeCalculator';function App() &#123; return ( &lt;&gt; &lt;Clock /&gt; &lt;PrimeCalculator /&gt; &lt;/&gt; );&#125;export default App; æˆ‘æå–äº†ä¸¤ä¸ªæ–°ç»„ä»¶ï¼ŒClock å’Œ PrimeCalculatorã€‚é€šè¿‡ä» App åˆ†æ”¯ï¼Œè¿™ä¸¤ä¸ªç»„ä»¶å„è‡ªç®¡ç†è‡ªå·±çš„çŠ¶æ€ã€‚ä¸€ä¸ªç»„ä»¶ä¸­çš„é‡æ–°æ¸²æŸ“ä¸ä¼šå½±å“å¦ä¸€ä¸ªç»„ä»¶ã€‚ æˆ–è®¸ä½ å¬åˆ°å¾ˆå¤šå…³äºæå‡çŠ¶æ€çš„è¯´æ³•ï¼Œä½†æœ‰æ—¶ï¼Œæ›´å¥½çš„æ–¹æ³•æ˜¯å°†çŠ¶æ€å‘ä¸‹æ¨ã€‚æ¯ä¸ªç»„ä»¶åº”è¯¥æœ‰ä¸€ä¸ªå•ç‹¬çš„èŒè´£ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒApp æ­£åœ¨åšä¸¤ä»¶å®Œå…¨ä¸ç›¸å…³çš„äº‹æƒ…ã€‚ ç°åœ¨ï¼Œè¿™å¹¶ä¸æ€»æ˜¯ä¸€ä¸ªé€‰æ‹©ã€‚åœ¨ä¸€ä¸ªå¤§å‹çš„ç°å®åº”ç”¨ä¸­ï¼Œæœ‰è®¸å¤šçŠ¶æ€éœ€è¦å‘ä¸Šæå‡ï¼Œè€Œä¸èƒ½å‘ä¸‹æ¨ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘è¿˜æœ‰å¦ä¸€ä¸ªå¦™è®¡ã€‚è®©çœ‹ä¸€ä¸ªä¾‹å­ã€‚å‡è®¾éœ€è¦å°† time å˜é‡æå‡åˆ° PrimeCalculator ä¹‹ä¸Šï¼š PrimeCalculator.js 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152import React from 'react';function PrimeCalculator() &#123; const [selectedNum, setSelectedNum] = React.useState(100); const allPrimes = []; for (let counter = 2; counter &lt; selectedNum; counter++) &#123; if (isPrime(counter)) &#123; allPrimes.push(counter); &#125; &#125; return ( &lt;&gt; &lt;form&gt; &lt;label htmlFor=\"num\"&gt;Your number:&lt;/label&gt; &lt;input type=\"number\" value=&#123;selectedNum&#125; onChange=&#123;(event) =&gt; &#123; // ä¸ºäº†é˜²æ­¢å¤ªå¤§ï¼Œå°†æœ€å¤§å€¼è®¾å®šåœ¨10ä¸‡ let num = Math.min(100_000, Number(event.target.value)); setSelectedNum(num); &#125;&#125; /&gt; &lt;/form&gt; &lt;p&gt; There are &#123;allPrimes.length&#125; prime(s) between 1 and &#123;selectedNum&#125;: &#123;' '&#125; &lt;span className=\"prime-list\"&gt; &#123;allPrimes.join(', ')&#125; &lt;/span&gt; &lt;/p&gt; &lt;/&gt; );&#125;function isPrime(n)&#123; const max = Math.ceil(Math.sqrt(n)); if (n === 2) &#123; return true; &#125; for (let counter = 2; counter &lt;= max; counter++) &#123; if (n % counter === 0) &#123; return false; &#125; &#125; return true;&#125;export default PrimeCalculator; Clock.js 123456789101112import React from 'react';import format from 'date-fns/format';function Clock(&#123; time &#125;) &#123; return ( &lt;p className=\"clock\"&gt; &#123;format(time, 'hh:mm:ss a')&#125; &lt;/p&gt; );&#125;export default Clock; App.js 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455import React from 'react';import &#123; getHours &#125; from 'date-fns';import Clock from './Clock';import PrimeCalculator from './PrimeCalculator';// å°†çš„PrimeCalculatorè½¬æ¢ä¸ºä¸€ä¸ªçº¯ç»„ä»¶const PurePrimeCalculator = React.memo(PrimeCalculator);function App() &#123; const time = useTime(); // æ ¹æ®ä¸€å¤©ä¸­çš„æ—¶é—´é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„èƒŒæ™¯è‰² const backgroundColor = getBackgroundColorFromTime(time); return ( &lt;div style=&#123;&#123; backgroundColor &#125;&#125;&gt; &lt;Clock time=&#123;time&#125; /&gt; &lt;PurePrimeCalculator /&gt; &lt;/div&gt; );&#125;const getBackgroundColorFromTime = (time) =&gt; &#123; const hours = getHours(time); if (hours &lt; 12) &#123; // æ—©æ™¨ç”¨çš„æ·¡é»„è‰² return 'hsl(50deg 100% 90%)'; &#125; else if (hours &lt; 18) &#123; // ä¸‹åˆæš—æ·¡çš„è“è‰² return 'hsl(220deg 60% 92%)' &#125; else &#123; // å¤œæ™šçš„æ·±è“è‰² return 'hsl(220deg 100% 80%)'; &#125;&#125;function useTime() &#123; const [time, setTime] = React.useState(new Date()); React.useEffect(() =&gt; &#123; const intervalId = window.setInterval(() =&gt; &#123; setTime(new Date()); &#125;, 1000); return () =&gt; &#123; window.clearInterval(intervalId); &#125; &#125;, []); return time;&#125;export default App; React.memo åŒ…åœ¨ç»„ä»¶å‘¨å›´ï¼Œä¿æŠ¤å®ƒå…å—ä¸ç›¸å…³çš„æ›´æ–°ã€‚PurePrimeCalculator åªæœ‰åœ¨æ¥æ”¶åˆ°æ–°æ•°æ®æˆ–å†…éƒ¨çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šé‡æ–°å‘ˆç°ã€‚è¿™å°±æ˜¯æ‰€è°“çš„çº¯ç»„ä»¶ã€‚æœ¬è´¨ä¸Šï¼Œå‘Šè¯‰ React è¿™ä¸ªç»„ä»¶å°†æ€»æ˜¯åœ¨ç›¸åŒçš„è¾“å…¥æ¡ä»¶ä¸‹äº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼Œå¯ä»¥è·³è¿‡æ²¡æœ‰ä»»ä½•æ”¹å˜çš„é‡æ–°å‘ˆç°ã€‚ åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘åº”ç”¨äº† React.memo åˆ°å¯¼å…¥çš„ PrimeCalculator ç»„ä»¶ã€‚äº‹å®ä¸Š,æˆ‘é€‰æ‹©äº†è¿™æ ·çš„ç»“æ„ï¼Œä»¥ä¾¿æ‰€æœ‰å†…å®¹éƒ½åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­å¯è§ï¼Œä»¥ä¾¿æ›´å®¹æ˜“ç†è§£ã€‚åœ¨å®è·µä¸­ï¼Œä½¿ç”¨ React.memo ç»„ä»¶å¯¼å‡ºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12345// PrimeCalculator.jsfunction PrimeCalculator() &#123; /* è¿™é‡Œçš„ç»„ä»¶å†…å®¹ */&#125;export default React.memo(PrimeCalculator); çš„ PrimeCalculator ç»„ä»¶ç°åœ¨å°†å§‹ç»ˆæ˜¯çº¯çš„ï¼Œå½“è¦ä½¿ç”¨å®ƒæ—¶ï¼Œä¸éœ€è¦å¯¹å®ƒè¿›è¡Œä¿®è¡¥ã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªè§†è§’è½¬æ¢ï¼šä¹‹å‰ï¼Œåœ¨è®°å¿†ä¸€ä¸ªç‰¹å®šè®¡ç®—çš„ç»“æœï¼Œè®¡ç®—è´¨æ•°ã€‚ç„¶è€Œï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘è®°ä½äº†æ•´ä¸ªç»„ä»¶ã€‚æ— è®ºå“ªç§æ–¹å¼ï¼Œåªæœ‰å½“ç”¨æˆ·é€‰æ‹©ä¸€ä¸ªæ–°çš„ selectedNum æ—¶ï¼Œæ˜‚è´µçš„è®¡ç®—æ‰ä¼šé‡æ–°è¿è¡Œã€‚ä½†ä¼˜åŒ–çš„æ˜¯çˆ¶ç»„ä»¶ï¼Œè€Œä¸æ˜¯ç‰¹å®šçš„æ…¢ä»£ç è¡Œã€‚ æˆ‘å¹¶ä¸æ˜¯è¯´ä¸€ç§æ–¹æ³•æ¯”å¦ä¸€ç§æ›´å¥½ï¼›æ¯ç§å·¥å…·åœ¨å·¥å…·ç®±ä¸­éƒ½æœ‰è‡ªå·±çš„ä½ç½®ã€‚ä½†åœ¨è¿™ä¸ªç‰¹å®šçš„æƒ…å†µä¸‹ï¼Œæˆ‘æ›´å–œæ¬¢è¿™ç§æ–¹æ³•ã€‚ç°åœ¨ï¼Œå¦‚æœæ‚¨æ›¾ç»å°è¯•åœ¨ç°å®ä¸–ç•Œçš„è®¾ç½®ä¸­ä½¿ç”¨çº¯ç»„ä»¶ï¼Œæ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°ä¸€äº›ç‰¹æ®Šçš„ä¸œè¥¿ï¼šçº¯ç»„ä»¶ç»å¸¸é‡æ–°æ¸²æŸ“ç›¸å½“å¤šï¼Œå³ä½¿çœ‹èµ·æ¥æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼è¿™å¾ˆå¥½åœ°å°†å¼•å…¥äº† useMemo è§£å†³çš„ç¬¬äºŒä¸ªé—®é¢˜ã€‚ 3. ç¤ºä¾‹2ï¼šä¿ç•™å¼•ç”¨åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ª Boxes ç»„ä»¶ã€‚å®ƒå±•ç¤ºäº†ä¸€ç»„å½©è‰²çš„ç›’å­ï¼Œç”¨äºæŸç§è£…é¥°ç›®çš„ã€‚æˆ‘è¿˜æœ‰ä¸€ä¸ªä¸ç›¸å…³çš„çŠ¶æ€ï¼šç”¨æˆ·åã€‚ Boxes.js 1234567891011121314151617import React from 'react';function Boxes(&#123; boxes &#125;) &#123; return ( &lt;div className=\"boxes-wrapper\"&gt; &#123;boxes.map((boxStyles, index) =&gt; ( &lt;div key=&#123;index&#125; className=\"box\" style=&#123;boxStyles&#125; /&gt; ))&#125; &lt;/div&gt; );&#125;export default React.memo(Boxes); App.js 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253import React from 'react';import Boxes from './Boxes';function App() &#123; const [name, setName] = React.useState(''); const [boxWidth, setBoxWidth] = React.useState(1); const id = React.useId(); // å°è¯•æ”¹å˜è¿™äº›å€¼ const boxes = [ &#123; flex: boxWidth, background: 'hsl(345deg 100% 50%)' &#125;, &#123; flex: 3, background: 'hsl(260deg 100% 40%)' &#125;, &#123; flex: 1, background: 'hsl(50deg 100% 60%)' &#125;, ]; return ( &lt;&gt; &lt;Boxes boxes=&#123;boxes&#125; /&gt; &lt;section&gt; &lt;label htmlFor=&#123;`$&#123;id&#125;-name`&#125;&gt; Name: &lt;/label&gt; &lt;input id=&#123;`$&#123;id&#125;-name`&#125; type=\"text\" value=&#123;name&#125; onChange=&#123;(event) =&gt; &#123; setName(event.target.value); &#125;&#125; /&gt; &lt;label htmlFor=&#123;`$&#123;id&#125;-box-width`&#125;&gt; First box width: &lt;/label&gt; &lt;input id=&#123;`$&#123;id&#125;-box-width`&#125; type=\"range\" min=&#123;1&#125; max=&#123;5&#125; step=&#123;0.01&#125; value=&#123;boxWidth&#125; onChange=&#123;(event) =&gt; &#123; setBoxWidth(Number(event.target.value)); &#125;&#125; /&gt; &lt;/section&gt; &lt;/&gt; );&#125;export default App; ç”±äºåœ¨ boxes.js ä¸­ä½¿ç”¨äº†React.memo() å°è£…é»˜è®¤å¯¼å‡ºï¼ŒBoxes æ˜¯ä¸€ä¸ªçº¯ç»„ä»¶ã€‚è¿™æ„å‘³ç€å®ƒåº”è¯¥åªåœ¨å®ƒçš„propsæ”¹å˜æ—¶é‡æ–°æ¸²æŸ“ã€‚ç„¶è€Œï¼Œæ¯å½“ç”¨æˆ·æ›´æ”¹å…¶åç§°æ—¶ï¼ŒBoxes ä¹Ÿä¼šé‡æ–°å‘ˆç°ã€‚ ä¸ºä»€ä¹ˆçš„ React.memo() æ²¡æœ‰ä¿æŠ¤ï¼Ÿç›’å­ç»„ä»¶åªæœ‰1ä¸ªpropï¼Œç›’å­ï¼Œå®ƒçœ‹èµ·æ¥å¥½åƒç»™å®ƒåœ¨æ¯æ¬¡æ¸²æŸ“å®Œå…¨ç›¸åŒçš„æ•°æ®ã€‚æ€»æ˜¯ä¸€æ ·çš„ä¸œè¥¿ï¼šä¸€ä¸ªçº¢ç›’å­ï¼Œä¸€ä¸ªç´«è‰²çš„å®½ç›’å­ï¼Œä¸€ä¸ªé»„è‰²çš„ç›’å­ã€‚ç¡®å®æœ‰ä¸€ä¸ªå½±å“boxes æ•°ç»„çš„ boxWidth çŠ¶æ€å˜é‡ï¼Œä½†æ²¡æœ‰æ›´æ”¹å®ƒï¼ é—®é¢˜åœ¨äºï¼šæ¯æ¬¡ React é‡æ–°æ¸²æŸ“æ—¶ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªå…¨æ–°çš„æ•°ç»„ã€‚å®ƒä»¬åœ¨å€¼ä¸Šæ˜¯ç›¸ç­‰çš„ï¼Œä½†åœ¨å‚ç…§ç‰©ä¸Šæ˜¯ä¸åŒçš„ã€‚æˆ‘æƒ³å¦‚æœå…ˆä¸è°ˆ Reactï¼Œåªè°ˆæ™®é€šçš„ JavaScriptï¼Œä¼šå¾ˆæœ‰å¸®åŠ©ã€‚è®©æ¥çœ‹ä¸€ä¸ªç±»ä¼¼çš„æƒ…å†µï¼š 123456function getNumbers() &#123; return [1, 2, 3];&#125;const firstResult = getNumbers();const secondResult = getNumbers();console.log(firstResult === secondResult); ä½ æ€ä¹ˆçœ‹ï¼ŸfirstResult æ˜¯å¦ç­‰äº secondResultï¼Ÿä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œçš„ç¡®å¦‚æ­¤ã€‚ä¸¤ä¸ªå˜é‡éƒ½å…·æœ‰ç›¸åŒçš„ç»“æ„[1,2,3]ã€‚ä½†è¿™ä¸æ˜¯ === è¿ç®—ç¬¦å®é™…æ£€æŸ¥çš„å†…å®¹ã€‚ç›¸åï¼Œ=== æ£€æŸ¥ä¸¤ä¸ªè¡¨è¾¾å¼æ˜¯å¦ç›¸åŒã€‚å·²ç»åˆ›å»ºäº†ä¸¤ä¸ªä¸åŒçš„æ•°ç»„ã€‚å®ƒä»¬å¯èƒ½åŒ…å«ç›¸åŒçš„å†…å®¹ï¼Œä½†å®ƒä»¬ä¸æ˜¯åŒä¸€ä¸ªæ•°ç»„ã€‚ æ¯æ¬¡è°ƒç”¨ getNumbers å‡½æ•°æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„æ•°ç»„ï¼Œå®ƒæ˜¯ä¿å­˜åœ¨è®¡ç®—æœºå†…å­˜ä¸­çš„ä¸€ä¸ªä¸åŒçš„ä¸œè¥¿ã€‚å¦‚æœå¤šæ¬¡è°ƒç”¨å®ƒï¼Œå°†åœ¨å†…å­˜ä¸­å­˜å‚¨è¯¥æ•°ç»„çš„å¤šä¸ªå‰¯æœ¬ã€‚æ³¨æ„ï¼Œç®€å•çš„æ•°æ®ç±»å‹â€”â€”æ¯”å¦‚å­—ç¬¦ä¸²ã€æ•°å­—å’Œå¸ƒå°”å€¼â€”â€”å¯ä»¥æŒ‰å€¼è¿›è¡Œæ¯”è¾ƒã€‚ä½†æ˜¯å½“æ¶‰åŠåˆ°æ•°ç»„å’Œå¯¹è±¡æ—¶ï¼Œå®ƒä»¬åªèƒ½é€šè¿‡å¼•ç”¨è¿›è¡Œæ¯”è¾ƒã€‚ è®©å›åˆ° Reactï¼šçš„ Boxes Reactç»„ä»¶ä¹Ÿæ˜¯ä¸€ä¸ª JavaScript å‡½æ•°ã€‚å½“æ¸²æŸ“å®ƒæ—¶ï¼Œè°ƒç”¨é‚£ä¸ªå‡½æ•°ï¼š 12345678910111213// æ¯æ¬¡æ¸²æŸ“è¿™ä¸ªç»„ä»¶æ—¶ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°â€¦function App() &#123; // æœ€ååˆ›é€ äº†ä¸€ä¸ªå…¨æ–°çš„æ•°ç»„ const boxes = [ &#123; flex: boxWidth, background: 'hsl(345deg 100% 50%)' &#125;, &#123; flex: 3, background: 'hsl(260deg 100% 40%)' &#125;, &#123; flex: 1, background: 'hsl(50deg 100% 60%)' &#125;, ]; // .ç„¶åå°†å…¶ä½œä¸º prop ä¼ é€’ç»™è¯¥ç»„ä»¶! return ( &lt;Boxes boxes=&#123;boxes&#125; /&gt; );&#125; å½“åç§°çŠ¶æ€æ”¹å˜æ—¶ï¼Œçš„ App ç»„ä»¶å°†é‡æ–°å‘ˆç°ï¼Œè¿™å°†é‡æ–°è¿è¡Œæ‰€æœ‰çš„ä»£ç ã€‚æ„é€ ä¸€ä¸ªå…¨æ–°çš„ boxes æ•°ç»„ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™çš„ Boxes ç»„ä»¶ã€‚ä»è€Œå¯¼è‡´ç›’å­é‡æ–°æ¸²æŸ“ï¼Œå› ä¸ºç»™äº†å®ƒä¸€ä¸ªå…¨æ–°çš„æ•°ç»„ã€‚ç›’å­æ•°ç»„çš„ç»“æ„åœ¨æ¸²æŸ“ä¹‹é—´æ²¡æœ‰æ”¹å˜ï¼Œä½†è¿™æ— å…³ç´§è¦ã€‚React æ‰€çŸ¥é“çš„æ˜¯ï¼Œç®±å­ prop å·²ç»æ”¶åˆ°äº†ä¸€ä¸ªæ–°åˆ›å»ºçš„ï¼Œä»æœªè§è¿‡çš„æ•°ç»„ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ useMemo hookï¼š 1234567const boxes = React.useMemo(() =&gt; &#123; return [ &#123; flex: boxWidth, background: 'hsl(345deg 100% 50%)' &#125;, &#123; flex: 3, background: 'hsl(260deg 100% 40%)' &#125;, &#123; flex: 1, background: 'hsl(50deg 100% 60%)' &#125;, ];&#125;, [boxWidth]); ä¸ä¹‹å‰çœ‹åˆ°çš„è´¨æ•°ä¾‹å­ä¸åŒï¼Œè¿™é‡Œä¸æ‹…å¿ƒè®¡ç®—æˆæœ¬å¾ˆé«˜çš„è®¡ç®—ã€‚çš„å”¯ä¸€ç›®æ ‡æ˜¯ä¿ç•™å¯¹ç‰¹å®šæ•°ç»„çš„å¼•ç”¨ã€‚å°† boxWidth åˆ—ä¸ºä¸€ä¸ªä¾èµ–é¡¹ï¼Œå› ä¸ºç¡®å®å¸Œæœ›åœ¨ç”¨æˆ·è°ƒæ•´çº¢è‰²æ¡†çš„å®½åº¦æ—¶é‡æ–°å‘ˆç° Boxes ç»„ä»¶ã€‚ç„¶è€Œï¼Œåœ¨ useMemo ä¸­ï¼Œé‡ç”¨äº†ä¹‹å‰åˆ›å»ºçš„ boxes æ•°ç»„ã€‚ é€šè¿‡åœ¨å¤šä¸ªæ¸²æŸ“ä¸­ä¿ç•™ç›¸åŒçš„å¼•ç”¨ï¼Œå…è®¸çº¯ç»„ä»¶æŒ‰å¸Œæœ›çš„æ–¹å¼å·¥ä½œï¼Œå¿½ç•¥ä¸å½±å“ UI çš„æ¸²æŸ“ã€‚ 4. useCallbackå‰é¢äº†è§£äº† useMemoã€‚é‚£ useCallback å‘¢ï¼Ÿè¿™æ˜¯ä¸€ä¸ªç®€çŸ­çš„ç‰ˆæœ¬ï¼šè¿™æ˜¯å®Œå…¨ç›¸åŒçš„äº‹æƒ…ï¼Œä½†ç”¨äºå‡½æ•°è€Œä¸æ˜¯æ•°ç»„/å¯¹è±¡ã€‚ä¸æ•°ç»„å’Œå¯¹è±¡ç±»ä¼¼ï¼Œå‡½æ•°æ˜¯æ ¹æ®å¼•ç”¨æ¯”è¾ƒçš„ï¼Œè€Œä¸æ˜¯æ ¹æ®å€¼ï¼š 1234567const functionOne = function() &#123; return 5;&#125;;const functionTwo = function() &#123; return 5;&#125;;console.log(functionOne === functionTwo); // false è¿™æ„å‘³ç€ï¼Œå¦‚æœåœ¨ç»„ä»¶ä¸­å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå°†åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶é‡æ–°ç”Ÿæˆï¼Œæ¯æ¬¡ç”Ÿæˆä¸€ä¸ªç›¸åŒä½†å”¯ä¸€çš„å‡½æ•°ã€‚è®©çœ‹ä¸€ä¸ªä¾‹å­ï¼š MegaBoost.js 12345678910111213141516import React from 'react';function MegaBoost(&#123; handleClick &#125;) &#123; console.log('Render MegaBoost'); return ( &lt;button className=\"mega-boost-button\" onClick=&#123;handleClick&#125; &gt; MEGA BOOST! &lt;/button&gt; );&#125;export default React.memo(MegaBoost); App.js 123456789101112131415161718192021222324252627import React from 'react';import MegaBoost from './MegaBoost';function App() &#123; const [count, setCount] = React.useState(0); function handleMegaBoost() &#123; setCount((currentValue) =&gt; currentValue + 1234); &#125; return ( &lt;&gt; Count: &#123;count&#125; &lt;button onClick=&#123;() =&gt; &#123; setCount(count + 1) &#125;&#125; &gt; Click me! &lt;/button&gt; &lt;MegaBoost handleClick=&#123;handleMegaBoost&#125; /&gt; &lt;/&gt; );&#125;export default App; è¿™ä¸ªæ —å­æè¿°äº†ä¸€ä¸ªå…¸å‹çš„è®¡æ•°å™¨åº”ç”¨ç¨‹åºï¼Œä½†æœ‰ä¸€ä¸ªç‰¹æ®Šçš„â€œMega Boostâ€æŒ‰é’®ã€‚è¿™ä¸ªæŒ‰é’®å¤§å¤§å¢åŠ äº†è®¡æ•°ï¼Œä»¥é˜²ä½ å¾ˆåŒ†å¿™ï¼Œä¸æƒ³å¤šæ¬¡ç‚¹å‡»æ ‡å‡†æŒ‰é’®ã€‚ å¤šäºäº† React.memo, MegaBoost ç»„ä»¶æ˜¯ä¸€ä¸ªçº¯ç»„ä»¶ã€‚å®ƒä¸ä¾èµ–äºè®¡æ•°ï¼Œä½†æ¯å½“è®¡æ•°æ”¹å˜æ—¶å®ƒå°±ä¼šé‡æ–°å‘ˆç°ï¼å°±åƒçœ‹åˆ°çš„ç›’å­æ•°ç»„ï¼Œè¿™é‡Œçš„é—®é¢˜æ˜¯åœ¨æ¯ä¸ªæ¸²æŸ“ä¸Šç”Ÿæˆä¸€ä¸ªå…¨æ–°çš„å‡½æ•°ã€‚å¦‚æœæ¸²æŸ“ 3 æ¬¡ï¼Œå°†åˆ›å»º 3 ä¸ªå•ç‹¬çš„ handleMegaBoost å‡½æ•°ï¼Œçªç ´ React.memoçš„ä¿æŠ¤ã€‚åˆ©ç”¨å¯¹ useMemo çš„äº†è§£ï¼Œå¯ä»¥åƒè¿™æ ·è§£å†³é—®é¢˜ï¼š 12345const handleMegaBoost = React.useMemo(() =&gt; &#123; return function() &#123; setCount((currentValue) =&gt; currentValue + 1234); &#125;&#125;, []); è¿”å›çš„ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè€Œæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ç„¶åå°†æ­¤å‡½æ•°å­˜å‚¨åœ¨ handleMegaBoost å˜é‡ä¸­ã€‚è¿™å¾ˆæœ‰æ•ˆï¼Œä½†è¿˜æœ‰æ›´å¥½çš„æ–¹æ³•ï¼š 123const handleMegaBoost = React.useCallback(() =&gt; &#123; setCount((currentValue) =&gt; currentValue + 1234);&#125;, []); useCallback çš„ä½œç”¨ä¸ useMemo ç›¸åŒï¼Œä½†å®ƒæ˜¯ä¸“é—¨ä¸ºå‡½æ•°æ„å»ºçš„ã€‚ç›´æ¥ç»™å®ƒä¸€ä¸ªå‡½æ•°ï¼Œå®ƒè®°ä½é‚£ä¸ªå‡½æ•°ï¼Œåœ¨æ¸²æŸ“ä¹‹é—´è¿›è¡Œçº¿ç¨‹å¤„ç†ã€‚æ¢å¥è¯è¯´ï¼Œè¿™ä¸¤ä¸ªè¡¨è¾¾æœ‰ç›¸åŒçš„æ•ˆæœï¼š 123React.useCallback(function helloWorld()&#123;&#125;, []);// åœ¨åŠŸèƒ½ä¸Šç­‰ä»·äºReact.useMemo(() =&gt; function helloWorld()&#123;&#125;, []); useCallback æ˜¯è¯­æ³•ç³–ã€‚å®ƒçš„å­˜åœ¨çº¯ç²¹æ˜¯ä¸ºäº†è®©åœ¨è®°å¿†å›è°ƒå‡½æ•°æ—¶æ›´åŠ æ–¹ä¾¿ã€‚ 5. ä»€ä¹ˆæ—¶å€™ä½¿ç”¨è¿™äº› hookå¥½äº†ï¼Œå·²ç»çœ‹åˆ°äº† useMemo å’Œ useCallback å¦‚ä½•å…è®¸è·¨å¤šä¸ªæ¸²æŸ“çº¿ç¨‹å¼•ç”¨é‡ç”¨å¤æ‚çš„è®¡ç®—æˆ–é¿å…ç ´åçº¯ç»„ä»¶ã€‚é—®é¢˜æ˜¯ï¼šåº”è¯¥å¤šç»å¸¸ä½¿ç”¨å®ƒï¼Ÿ åœ¨æˆ‘ä¸ªäººçœ‹æ¥ï¼Œå°†æ¯ä¸ªå¯¹è±¡/æ•°ç»„/å‡½æ•°åŒ…è£…åœ¨è¿™äº›é’©å­ä¸­æ˜¯æµªè´¹æ—¶é—´ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¥½å¤„æ˜¯å¯ä»¥å¿½ç•¥ä¸è®¡çš„ï¼›React æ˜¯é«˜åº¦ä¼˜åŒ–çš„ï¼Œé‡æ–°æ¸²æŸ“é€šå¸¸ä¸åƒé€šå¸¸è®¤ä¸ºçš„é‚£æ ·ç¼“æ…¢æˆ–æ˜‚è´µï¼ ä½¿ç”¨è¿™äº›é’©å­çš„æœ€ä½³æ–¹å¼æ˜¯å“åº”é—®é¢˜ã€‚å¦‚æœä½ æ³¨æ„åˆ°ä½ çš„åº”ç”¨ç¨‹åºå˜å¾—æœ‰ç‚¹è¿Ÿç¼“ï¼Œä½ å¯ä»¥ä½¿ç”¨ React Profiler æ¥æŸ¥æ‰¾ç¼“æ…¢çš„æ¸²æŸ“ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡é‡æ„åº”ç”¨ç¨‹åºæ¥æé«˜æ€§èƒ½ã€‚åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼ŒuseMemo å’ŒuseCallback å¯ä»¥å¸®åŠ©åŠ å¿«é€Ÿåº¦ã€‚ 5.1 ç”¨äºè‡ªå®šä¹‰ hook å†…éƒ¨ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªè‡ªå®šä¹‰ hook useToggleï¼Œå®ƒçš„å·¥ä½œæ–¹å¼å‡ ä¹å’Œ useState å®Œå…¨ä¸€æ ·ï¼Œä½†åªèƒ½åœ¨ true å’Œ false ä¹‹é—´åˆ‡æ¢çŠ¶æ€å˜é‡ï¼š 123456789function App() &#123; const [isDarkMode, toggleDarkMode] = useToggle(false); return ( &lt;button onClick=&#123;toggleDarkMode&#125;&gt; Toggle color theme &lt;/button&gt; );&#125; ä¸‹é¢æ˜¯å¦‚ä½•å®šä¹‰è¿™ä¸ªè‡ªå®šä¹‰ hook çš„ï¼š 123456789function useToggle(initialValue) &#123; const [value, setValue] = React.useState(initialValue); const toggle = React.useCallback(() =&gt; &#123; setValue(v =&gt; !v); &#125;, []); return [value, toggle];&#125; æ³¨æ„ï¼Œtoggle å‡½æ•°æ˜¯ç”¨ useCallback è®°å¿†çš„ã€‚å½“æˆ‘æ„å»ºè¿™æ ·çš„è‡ªå®šä¹‰å¯é‡ç”¨é’©å­æ—¶ï¼Œæˆ‘å¸Œæœ›ä½¿å®ƒä»¬å°½å¯èƒ½é«˜æ•ˆï¼Œå› ä¸ºæˆ‘ä¸çŸ¥é“å°†æ¥ä¼šåœ¨å“ªé‡Œä½¿ç”¨å®ƒä»¬ã€‚åœ¨95%çš„æƒ…å†µä¸‹ï¼Œè¿™å¯èƒ½æ˜¯å¤šä½™çš„ï¼Œä½†å¦‚æœæˆ‘ä½¿ç”¨è¿™ä¸ªé’©å­30æˆ–40æ¬¡ï¼Œè¿™å¾ˆæœ‰å¯èƒ½æœ‰åŠ©äºæé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚ 5.2 åœ¨ context æä¾›è€…å½“åœ¨å…·æœ‰ context çš„åº”ç”¨ç¨‹åºä¹‹é—´å…±äº«æ•°æ®æ—¶ï¼Œé€šå¸¸ä¼šä¼ é€’ä¸€ä¸ªå¤§å¯¹è±¡ä½œä¸º value å±æ€§ã€‚è®°ä½è¿™ä¸ªå¯¹è±¡é€šå¸¸æ˜¯ä¸ªå¥½ä¸»æ„ï¼š 1234567891011121314151617const AuthContext = React.createContext(&#123;&#125;);function AuthProvider(&#123; user, status, forgotPwLink, children &#125;)&#123; const memoizedValue = React.useMemo(() =&gt; &#123; return &#123; user, status, forgotPwLink, &#125;; &#125;, [user, status, forgotPwLink]); return ( &lt;AuthContext.Provider value=&#123;memoizedValue&#125;&gt; &#123;children&#125; &lt;/AuthContext.Provider&gt; );&#125; ä¸ºä»€ä¹ˆè¿™æ˜¯æœ‰ç›Šçš„ï¼Ÿå¯èƒ½æœ‰å‡ åä¸ªçº¯ç»„ä»¶ä½¿ç”¨è¿™ä¸ªä¸Šä¸‹æ–‡ã€‚å¦‚æœæ²¡æœ‰ useMemoï¼Œå¦‚æœ AuthProvider çš„çˆ¶ç»„ä»¶ç¢°å·§é‡æ–°æ¸²æŸ“ï¼Œé‚£ä¹ˆæ‰€æœ‰è¿™äº›ç»„ä»¶éƒ½å°†è¢«è¿«é‡æ–°æ¸²æŸ“ã€‚","categories":[],"tags":[]},{"title":"Vueçš„å“åº”å¼åŸç†","slug":"2021/Vueçš„å“åº”å¼åŸç†","date":"2021-05-07T01:07:32.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2021/Vueçš„å“åº”å¼åŸç†/","link":"","permalink":"https://summxu.github.io/2021/Vueçš„å“åº”å¼åŸç†/","excerpt":"","text":"vue2ä½¿ç”¨Object.definePropertyå®ç°å“åº”å¼ éå†å±æ€§ï¼Œå¯¹æ¯ä¸€ä¸ªå±æ€§çš„å€¼ç”¨Object.definePropertyè¿›è¡Œgetterå’Œsetterçš„æ”¹é€ ï¼› 123456789101112131415161718192021222324252627282930313233343536373839404142//getfunction track(data, key)&#123; console.log('get data:', key)&#125;// setfunction trigger(data, key, value)&#123; console.log('set data:', key,'-', value)&#125;function observe(data)&#123; if(!data || typeof data !== 'object') return for(let key in data)&#123; let value = data[key] Object.defineProperty(data, key, &#123; enumerable: true, configurable: true, get()&#123; track(data, key) return value &#125;, set(newVal)&#123; trigger(data, key, newVal) value = newVal &#125; &#125;) if(typeof value === 'object')&#123; observe(value) &#125; &#125;&#125;var obj = &#123; name: 'win', family: [2,5,8]&#125;observe(obj)obj.name = 'ten'obj.family[3] = 6 //ä¸æ˜¯å“åº”å¼ï¼Œæ²¡æœ‰è¢«Object.definePropertyåŒ…è£…ä¸€ä¸‹obj.age = 18 //ä¸æ˜¯å“åº”å¼ï¼Œæ²¡æœ‰è¢«Object.definePropertyåŒ…è£…ä¸€ä¸‹console.log(obj, 'obj') Vue3ç›¸å¯¹äºVue2å“åº”å¼åŸç†ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ï¼Œç”±åŸå…ˆçš„ Object.defineproperty æ”¹æˆäº†ä½¿ç”¨ Proxy æ›¿ä»£ã€‚Proxy ç›¸å¯¹äº Object.defineproperty æœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜åŒ–ç‚¹ï¼š å¯¹è±¡æ–°å¢å±æ€§ä¸å†éœ€è¦æ‰‹åŠ¨ $set æ·»åŠ å“åº”å¼ï¼ŒProxy é»˜è®¤ä¼šç›‘å¬åŠ¨æ€æ·»åŠ å±æ€§å’Œå±æ€§çš„åˆ é™¤ç­‰æ“ä½œã€‚ æ¶ˆé™¤æ— æ³•ç›‘å¬æ•°ç»„ç´¢å¼•ï¼Œlength å±æ€§ç­‰ç­‰ï¼Œä¸å†éœ€è¦åœ¨æ•°ç»„åŸå‹å¯¹è±¡ä¸Šé‡å†™æ•°ç»„çš„æ–¹æ³•ã€‚ Object.defineproperty æ˜¯åŠ«æŒæ‰€æœ‰å¯¹è±¡å±æ€§çš„ get/set æ–¹æ³•,éœ€è¦éå†é€’å½’å»å®ç°ï¼ŒProxy æ˜¯ä»£ç†æ•´ä¸ªå¯¹è±¡ã€‚ Vue2 åªèƒ½æ‹¦æˆªå¯¹è±¡å±æ€§çš„ get å’Œ set æ“ä½œ,è€Œ Proxy æ‹¥æœ‰ 13 ç§æ‹¦æˆªæ–¹æ³•ã€‚ Vue3ä¸­çš„å“åº”å¼åŸç†å®ç°åŸç†ï¼š é€šè¿‡Proxyï¼ˆä»£ç†ï¼‰ï¼š æ‹¦æˆªå¯¹è±¡ä¸­ä»»æ„å±æ€§çš„å˜åŒ–ï¼ŒåŒ…æ‹¬ï¼šå±æ€§å€¼çš„è¯»å†™ï¼Œå±æ€§çš„å¢åŠ ï¼Œå±æ€§çš„åˆ é™¤ç­‰ã€‚ é€šè¿‡Reffectï¼ˆåå°„ï¼‰ï¼š å¯¹æºå¯¹è±¡çš„å±æ€§è¿›è¡Œæ“ä½œ Proxy Proxyå¯¹è±¡å¯¹äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„ä»£ç†ï¼Œä¹Ÿå¯ä»¥ç†è§£æˆåœ¨å¯¹è±¡å‰é¢è®¾äº†ä¸€å±‚æ‹¦æˆªï¼Œå¯ä»¥å®ç°åŸºæœ¬æ“ä½œçš„æ‹¦æˆªå’Œä¸€äº›è‡ªå®šä¹‰æ“ä½œï¼ˆæ¯”å¦‚ä¸€äº›èµ‹å€¼ã€å±æ€§æŸ¥æ‰¾ã€å‡½æ•°è°ƒç”¨ç­‰ï¼‰ï¼› ç”¨æ³•ï¼švar proxy = new Proxy(target, handler);targetï¼šç›®æ ‡å‡½æ•°ï¼ˆå³è¿›è¡Œæ”¹é€ çš„å‡½æ•°ï¼‰ï¼›handlerï¼šä¸€äº›è‡ªå®šä¹‰æ“ä½œï¼ˆæ¯”å¦‚vueä¸­getterå’Œsetterçš„æ“ä½œï¼‰ï¼› Reflect Reflectæ˜¯es6ä¸ºæ“ä½œå¯¹è±¡è€Œæä¾›çš„æ–°APIï¼Œè®¾è®¡å®ƒçš„ç›®çš„æœ‰ï¼šâ‘  æŠŠObjectå¯¹è±¡ä¸Šä¸€äº›æ˜æ˜¾å±äºè¯­è¨€å†…éƒ¨çš„æ–¹æ³•æ”¾åˆ°Reflectå¯¹è±¡èº«ä¸Šï¼Œæ¯”å¦‚Object.definePropertyï¼›â‘¡ ä¿®æ”¹äº†æŸäº›objectæ–¹æ³•è¿”å›çš„ç»“æœï¼›â‘¢ è®©Objectæ“ä½œéƒ½å˜æˆå‡½æ•°è¡Œä¸ºï¼›â‘£ Reflectå¯¹è±¡ä¸Šçš„æ–¹æ³•å’ŒProxyå¯¹è±¡ä¸Šçš„æ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼Œè¿™æ ·å°±å¯ä»¥è®©Proxyå¯¹è±¡æ–¹ä¾¿åœ°è°ƒç”¨å¯¹åº”çš„Reflectæ–¹æ³•ï¼› Reflect.get(target, propertyKey, receiver)ï¼šç­‰ä»·äºtarget[propertyKey]ï¼ŒReflect.getæ–¹æ³•æŸ¥æ‰¾å¹¶è¿”å›targetå¯¹è±¡çš„propertyKeyå±æ€§ï¼Œå¦‚æœæ²¡æœ‰è¯¥å±æ€§ï¼Œåˆ™è¿”å›undefinedã€‚ Reflect.set(target, propertyKey, value, receiver)ï¼šç­‰ä»·äºtarget[propertyKey] = valueï¼ŒReflect.setæ–¹æ³•è®¾ç½®targetå¯¹è±¡çš„propertyKeyå±æ€§ç­‰äºvalueã€‚ Proxyå’ŒReflectçš„ä½¿ç”¨123456789101112131415161718const obj = &#123; name: 'win'&#125;const handler = &#123; get: function(target, key)&#123; console.log('get--', key) return Reflect.get(...arguments) &#125;, set: function(target, key, value)&#123; console.log('set--', key, '=', value) return Reflect.set(...arguments) &#125;&#125;const data = new Proxy(obj, handler)data.name = 'ten'console.log(data.name,'data.name22') ä½¿ç”¨Proxyå’ŒReflectå®Œæˆå“åº”å¼12345678910111213141516171819202122232425262728293031323334353637function track(target, key)&#123; console.log('get--', key)&#125;function trigger(target, key, value)&#123; console.log('set--', key, '=', value)&#125;function reactive(obj)&#123; const handler = &#123; get(target, key, receiver)&#123; track(target, key) const value = Reflect.get(...arguments) if(typeof value === 'object')&#123; return reactive(value) &#125;else&#123; return value &#125; &#125;, set(target, key, val, receiver)&#123; trigger(target, key, val) return Reflect.set(...arguments) &#125; &#125; return new Proxy(obj, handler)&#125;const obj = &#123; name: 'win'&#125;const data = reactive(obj)data.list = [5] //å“åº”å¼ è¿™ä¸¤å¥è¯æ˜¯æ‰§è¡ŒReflect.set()data.age = 18 //å“åº”å¼console.log(data, 'data111')","categories":[],"tags":[]},{"title":"ReactNativeè¸©å‘è®°","slug":"2020/ReactNativeè¸©å‘è®°","date":"2020-07-21T04:16:24.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2020/ReactNativeè¸©å‘è®°/","link":"","permalink":"https://summxu.github.io/2020/ReactNativeè¸©å‘è®°/","excerpt":"","text":"æœ€è¿‘åœ¨ä½¿ç”¨react-nativeçš„æ—¶å€™é‡åˆ°äº†å¾ˆå¤šå‘,è¿™é‡Œè®°å½•ä¸€ä¸‹æ ·å¼react-native è™½ç„¶æ”¯æŒflexå¸ƒå±€ï¼Œä½†æ˜¯æ‰€æœ‰çš„æ ·å¼å‡æ˜¯cssæ ·å¼çš„ä¸€ä¸ªå¾ˆå°çš„é›†åˆï¼Œå°¤å…¶æ˜¯åœ¨å®‰å“æœºä¸‹é—®é¢˜å°¤ä¸ºå‡¸æ˜¾ï¼š Viewå†…éƒ¨çš„å…ƒç´ åƒä¸‡ä¸è¦è¶…å‡ºçˆ¶çº§çš„èŒƒå›´ï¼Œisoä¸Šé—®é¢˜å€’æ˜¯ä¸å¤§ï¼Œå®‰å“ä¸Šå°±ä»€ä¹ˆè¶…å‡ºçš„éƒ½çœ‹ä¸åˆ°äº† lineHeight å¯ä»¥ç”¨ï¼Œä¸è¿‡åƒä¸‡ä¸è¦å†™æˆå°æ•°ï¼Œå¦åˆ™å®‰å“ä¸Šä¼šç›´æ¥å´©æºƒ rnçš„æ ·å¼ä¸å­˜åœ¨ç»§æ‰¿çš„æƒ…å†µï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šæ¯ä¸ªèŠ‚ç‚¹éƒ½è¦å†™styleï¼ŒçœŸçš„æ˜¯ä½“åŠ›æ´» å¦‚æœTextçš„çˆ¶çº§å…ƒç´ è®¾ç½®äº†èƒŒæ™¯é¢œè‰²ï¼Œé‚£ä¹ˆiosä¸‹Textçš„èƒŒæ™¯é¢œè‰²ä¹Ÿæ˜¯çˆ¶çº§çš„èƒŒæ™¯é¢œè‰²ï¼Œè¦ä¹ˆè‡ªå·±å†™ä¸ªTexté‡ç½®ä¸‹æ ·å¼ï¼Œè¦ä¹ˆå°±é‡åˆ°äº†å†æ”¹ react-nativeçš„å­—å·æ˜¯æ²¡æœ‰è®¾ç½®å•ä½çš„ï¼Œæ‰€ä»¥ä¼šéšç€ç³»ç»Ÿè®¾ç½®çš„å­—ä½“å¤§å°è€Œå˜åŒ–ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“è¿™æ˜¯ä¸æ˜¯å‘ï¼Œä¸è¿‡è²Œä¼¼æœ‰çš„appä¹Ÿæ²¡æœ‰ç®¡è¿™ä¸ªï¼Œå¦‚æœç¡¬è¦å»è®¾ç½®Textçš„æ–‡å­—ä¸éšç³»ç»Ÿæ”¹å˜ï¼Œå®‰å“æ˜¯å¯ä»¥ç»Ÿä¸€è®¾ç½®çš„ï¼Œiosä¸ŠTextè®¾ç½®allowFontScaling ={false}å°±å¯ä»¥è§£å†³ å¼‚å¸¸react-native åœ¨å‘ç”Ÿjså¼‚å¸¸çš„æ—¶å€™ï¼Œdebugçš„æ—¶å€™ä¼šç›´æ¥çº¢å±å¹•ï¼Œä½†æ˜¯å†releaseçš„æ—¶å€™ç›´æ¥ä¼šå´©æºƒé€€å‡ºï¼Œè§£å†³åŠæ³• 1234import ErrorUtils from \"ErrorUtils\" &lt;br&gt;//è¿™é‡Œåº”è¯¥åšä¸ªåˆ¤æ–­ï¼Œå¦‚æœä¸æ˜¯debugçš„æ‰åšè¿™æ ·çš„å¼‚å¸¸å…¨å±€å¤„ç†ErrorUtils.setGlobalHandler((e)=&gt;&#123;&lt;br&gt; //å‘ç”Ÿå¼‚å¸¸çš„å¤„ç†æ–¹æ³•,å½“ç„¶å¦‚æœæ˜¯æ‰“åŒ…å¥½çš„è¯å¯èƒ½ä½ æ‰¾éƒ½æ‰¾ä¸åˆ°æ˜¯å“ªæ®µä»£ç å‡ºé—®é¢˜äº† Alert.alert(\"å¼‚å¸¸\",JSON.stringify(e))&#125;); fetchreact-nativeè™½ç„¶è‡ªå¸¦æœ‰fetchï¼Œä¸è¿‡åœ¨ä½¿ç”¨çš„æ—¶å€™å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœéœ€è¦è·å–httpçš„headerå¤´çš„æ—¶å€™é—®é¢˜å°±æ¥äº†ï¼Œå¯èƒ½å¾—åˆ°çš„æ˜¯ä¸€äº›åƒå¥‡ç™¾æ€ªçš„æ ·å¼ï¼Œè¿™å¹¶ä¸æ˜¯react-nativeçš„é”™ï¼Œè€Œæ˜¯ç¬¬ä¸‰æ–¹çš„ whatwg-fetch ç•™ä¸‹çš„å‘ï¼Œå½“ç„¶ä¹Ÿæœ‰äººå†githubä¸Šè·Ÿreact-nativeåæ˜ è¿‡è¿™ä¸ªé—®é¢˜ï¼Œä¸è¿‡å¾—åˆ°çš„è§£å†³æ–¹æ¡ˆéƒ½å¾ˆå‘ï¼Œå”¯æœ‰ä¸€ä¸ªåŠæ³•ï¼Œå°±æ˜¯æ‹·è´è‡ªå·±ä¿®æ”¹ï¼Œä¿®æ”¹å¦‚ä¸‹: æ³¨é‡Šè¯¥æ³¨é‡Šçš„ 123456(function(self) &#123; 'use strict'; //æ³¨é‡Šè¿™é‡Œï¼Œä¸ç„¶æ€»æ˜¯ç”¨çš„æ˜¯å…¨å±€çš„fetch // if (self.fetch) &#123; // return // &#125; ä¿®æ”¹è¯¥ä¿®æ”¹çš„ 1234567891011121314function parseHeaders(rawHeaders) &#123; var headers = new Headers()&lt;br&gt; //æŠŠ\\t\\næ”¹æˆ\\tï¼Œå› ä¸ºä¸€èˆ¬headeréƒ½æ˜¯ç”¨\\næ¥åˆ†å‰²çš„ rawHeaders.split('\\n').forEach(function(line) &#123; //rawHeaders.split('\\t\\n').forEach(function(line) &#123; var parts = line.split(':') var key = parts.shift().trim() if (key) &#123; var value = parts.join(':').trim() headers.append(key, value) &#125; &#125;) &#125; return headers&#125; ç›´æ¥importä½ æ”¹å¥½çš„æ–‡ä»¶ï¼Œfetchå°±å¯ä»¥ç”¨äº† ModalModeæ§ä»¶åœ¨ä½¿ç”¨çš„æ—¶å€™è¦æ³¨æ„äº†ï¼Œå› ä¸ºè¿™ä¸ªæ˜¯rnæä¾›çš„ï¼Œå¹¶ä¸”ä¹Ÿå†™çš„å¾ˆæ¸…æ¥šæ˜¯æœ€é«˜å±‚çº§çš„ä¸€ä¸ªå¼¹å‡ºå±‚ï¼Œæ‰€ä»¥ä½ æƒ³è¦åˆæ‰“å¼€Modelåˆè¦è·³è½¬åŸºæœ¬æ˜¯æ— æœ›çš„äº†ï¼Œæ‰€ä»¥å»ºè®®ä¸è¦ä½¿ç”¨è¿™ä¸ªï¼Œæœ€å¥½æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æ§ä»¶ï¼Œæˆ‘ä»¬ç”¨çš„æ˜¯ react-native-modalbox + é«˜é˜¶æ§ä»¶ å®ç°çš„å…¨é®ç›–çš„å¼¹å‡ºå±‚ ç‚¹å‡»å±å¹•å…¶ä»–ä½ç½®å…³é—­çš„èœå•è¿™ç±»èœå•æœ‰ä¸ªå…±åŒçš„ç‰¹ç‚¹å°±æ˜¯ç‚¹å‡»å±å¹•å…¶ä»–åœ°æ–¹ç„¶åèœå•å°±å…³é—­ï¼Œæˆ‘ä»¬çš„è§£å†³åŠæ³•å°±æ˜¯ç”¨è‡ªå·±å†™çš„ react-native-modalbox + é«˜é˜¶æ§ä»¶ ä¹Ÿå°±æ˜¯è¯´æ”¾åœ¨ä¸€ä¸ªå¼¹å‡ºå±‚é‡Œé¢ï¼Œå½“ç„¶å¯ä»¥è¯•è¯•æŠŠå½“å‰é¡µé¢å¥—è¿›ä¸€ä¸ªå¤§çš„ TouchableWithoutFeedback é‡Œé¢ æ¥å£è¯·æ±‚éç‰¹æ®Šæƒ…å†µä¸‹éƒ½åº”è¯¥è¿™æ ·åš 123456import &#123;InteractionManager&#125; from \"react-native\"componentDidMount()&#123; InteractionManager.runAfterInteractions(() =&gt; &#123; fetch(\"xxx.xxx.xxx\",&#123;&#125;) &#125;); &#125; é”®ç›˜å®˜æ–¹æä¾›çš„è‡ªå®šä¹‰éšè—é”®ç›˜çš„æ–¹æ³•æ˜¯ 12import &#123; Keyboard &#125; from 'react-native'Keyboard.dismiss() ä½†æ˜¯æˆ‘è¯•äº†å¾ˆå¤šæ¬¡ä¹‹åå‘ç°æ ¹æœ¬ä¸èƒ½ï¼Œè€Œä¸”è¿˜æŠ¥é”™ï¼Œæ¥¼ä¸»çš„react-nativeç‰ˆæœ¬æ˜¯0.35.0 çœ‹äº†å®˜æ–¹çš„issueæ‰çŸ¥é“è¿™ä¸ªä¸è¡Œï¼Œæ¨èä¸‹é¢æ–¹æ³• 1import dismissKeyboard from 'dismissKeyboard'dismissKeyboard() è¿™æ ·å°±å¯ä»¥éšè—äº†ï¼Œå¤ªå‘äº† è¿˜æœ‰ä¸ªå¾ˆå‘çš„åœ°æ–¹ï¼Œå®˜æ–¹æä¾›çš„ç§»é™¤é”®ç›˜äº‹ä»¶çš„æ–¹æ³•ä¸å¯ç”¨ 1234componentDidMount () &#123; Keyboard.addListener('keyboardDidShow', this.keyboardDidShow.bind(this)) Keyboard.addListener('keyboardDidHide', this.keyboardDidHide.bind(this))&#125;componentWillUnmount () &#123; Keyboard.removeAllListeners('keyboardDidShow') Keyboard.removeAllListeners('keyboardDidHide')&#125; è¿™æ ·çš„æ–¹å¼ç‰¹ä¹ˆçš„å¦‚æœæ“ä½œå¿«äº†ï¼Œæˆ–è€…æœ‰æ—¶å€™è«åå…¶å¦™çš„å°±ä¼šå‡ºé”™,ä¸‹é¢çš„æ‰æ˜¯æ­£ç¡®çš„æ‰“å¼€æ–¹å¼ï¼š 12345678componentDidMount () &#123; this.keyboardDidShowListener = Keyboard.addListener('keyboardDidShow', this.keyboardDidShow.bind(this)) this.keyboardDidHideListener = Keyboard.addListener('keyboardDidHide', this.keyboardDidHide.bind(this))&#125;componentWillUnmount () &#123; this.keyboardDidShowListener.remove() this.keyboardDidHideListener.remove()&#125; httpshttpsè¿™ä¸ªé—®é¢˜ä¸Šiosè¿˜å¥½ï¼Œå®‰å“é—®é¢˜å°±æ¥äº†ï¼Œå‰æœŸæˆ‘ä»¬å‡†å¤‡å°†ajaxè¯·æ±‚çš„åº“ä¸¢ç»™åŸç”Ÿå®‰å“å’Œiosæ¥åšæˆ‘ä»¬ç›´æ¥è°ƒç”¨å°±æ˜¯äº†ï¼Œä½†æ˜¯åæ¥å‘ç°é—®é¢˜è¿™æ ·é‚£æ ·çš„é—®é¢˜å¤ªå¤šäº†ï¼Œ æ‰€ä»¥åœ¨çƒ­æ›´æ–°æœåŠ¡å™¨å¯åŠ¨æˆ–è€…æ‰“åŒ…çš„æ—¶å€™å°±æŠŠæºä»£ç å…ˆæ”¹äº†åœ¨è¿›è¡Œæ‰“åŒ…æˆ–è€…å¯åŠ¨æœåŠ¡å™¨ æ–‡ä»¶ä½ç½®ï¼š 1node_modules/react-native/ReactAndroid/src/main/java/com/facebook/react/modules/network/OkHttpClientProvider.java è¿™ä¸ªæ–‡ä»¶çš„æœ€åä¸€ä¸ªæ–¹æ³•ä¿®æ”¹å¦‚ä¸‹ï¼š 12345678910111213141516private static OkHttpClient createClient() &#123; // No timeouts by default return new OkHttpClient.Builder() .sslSocketFactory(sslContext.getSocketFactory()) .hostnameVerifier(new HostnameVerifier() &#123; @Override public boolean verify(String hostname, SSLSession session) &#123; return true; //å¿½ç•¥æ‰€æœ‰çš„è®¤è¯ï¼Œç›´æ¥è¿”å›äº†true &#125; &#125;) .connectTimeout(0, TimeUnit.MILLISECONDS) .readTimeout(0, TimeUnit.MILLISECONDS) .writeTimeout(0, TimeUnit.MILLISECONDS) .cookieJar(new ReactCookieJarContainer()) .build();&#125; ä¿®æ”¹æºä»£ç çš„æ–¹å¼æœ‰ç‚¹ç•¥å‘ï¼Œä¸è¿‡å¯ä»¥è§£å†³å¾ˆå¤šé—®é¢˜ï¼Œè¿˜èŠ‚çº¦æ—¶é—´ï¼ï¼ï¼ BackAndroidå®‰å“æœºæœ‰ç‹¬ç‰¹çš„ç‚¹å‡»æŒ‰é”®è¿”å›ï¼Œæ‰€ä»¥åœ¨æœ€å¤–å±‚ä¼šæ³¨å†Œä¸€ä¸ªç›‘å¬æ–¹æ³• 123456789101112131415161718192021222324252627282930313233bindHardwareBackPress()&#123; if (Platform.OS === 'android') &#123; BackAndroid.addEventListener('hardwareBackPress', this._onHomeBackPress); &#125;&#125; onHomeBackPress()&#123; let routeList = this.getRouteList(); if (routeList.length !== 1) &#123; this.navigator.pop(); return true; &#125; this.handleHomeBackPress(); return true;&#125; handleHomeBackPress()&#123; if (Platform.OS === \"android\") &#123; ToastAndroid.show(\"å†æŒ‰ä¸€æ¬¡é€€å‡ºåº”ç”¨\", ToastAndroid.SHORT); BackAndroid.removeEventListener(\"hardwareBackPress\", this._onHomeBackPress); BackAndroid.addEventListener(\"hardwareBackPress\", this._onExitApp); this.timer = TimerMixin.setInterval(() =&gt; &#123; TimerMixin.clearInterval(this.timer); BackAndroid.removeEventListener(\"hardwareBackPress\", this._onExitApp); BackAndroid.addEventListener(\"hardwareBackPress\", this._onHomeBackPress); &#125;, 2000); &#125;&#125; exitApp()&#123; BackAndroid.exitApp();&#125; ä¸Šé¢çš„ä»£ç æ˜¯ç›‘å¬è¿”å›é”®ï¼Œå¦‚æœä¸æ˜¯åœ¨æœ€å¤–å±‚çš„è·¯ç”±å°±è¿”å›ä¸Šä¸€ä¸ª,å¦‚æœåœ¨æœ€å¤–å±‚å°±ç›´æ¥å…³é—­appï¼Œä½†æ˜¯æœ‰å¾ˆå¤šè¿™æ ·é‚£æ ·çš„éœ€æ±‚è¦å»å¯¹å®‰å“çš„è¿”å›é”®è¿›è¡Œæ“ä½œï¼Œå‘å°±æ¥äº†ï¼Œä½ ä»¥ä¸ºæä¾›çš„removeEventListeneræ–¹æ³•æ˜¯æ²¡é—®é¢˜çš„ï¼Ÿno ï¼ï¼ï¼ ä»–ä¼šç§»é™¤æ‰€æœ‰çš„ç›‘å¬ï¼Œè¿™æ˜¯ä¸æ˜¯å¾ˆå‘ï¼ï¼ï¼ï¼ æ‰€ä»¥ï¼šåœ¨éœ€è¦å¯¹å®‰å“è¿”å›é”®è¿›è¡Œç‰¹æ®Šå¤„ç†çš„æ—¶å€™è®°å¾—å…¶ä»–åœ°æ–¹åšäº†ç›‘å¬çš„å†é‡æ–°ç›‘å¬ä¸€æ¬¡ï¼ï¼ï¼ï¼","categories":[],"tags":[{"name":"ReactNative","slug":"ReactNative","permalink":"https://summxu.github.io/tags/ReactNative/"}]},{"title":"HTTPç¼“å­˜-ETag","slug":"2019/http-cache-etag","date":"2019-08-10T12:44:11.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2019/http-cache-etag/","link":"","permalink":"https://summxu.github.io/2019/http-cache-etag/","excerpt":"","text":"æœ€è¿‘åœ¨å­¦ä¹ ç½‘ç«™æ€§èƒ½ä¼˜åŒ–ç›¸å…³çš„å†…å®¹ï¼Œå…³äºç½‘ç«™ä¼˜åŒ–ç‚¹ç‰¹åˆ«å¤šè€ŒHTTPç¼“å­˜ä¹Ÿæ˜¯æ¯”è¾ƒé‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œäºæ˜¯ä»Šå¤©å°±ç€é‡çœ‹ä¸‹HTTPç¼“å­˜ç›¸å…³çš„å†…å®¹åŠ æ·±ä¸‹å¯¹æ­¤ç›¸å…³çŸ¥è¯†çš„ç†è§£å’Œè®¤è¯†ã€‚è‡ªå·±åŠ¨æ‰‹é€šè¿‡ç®€å•çš„æœåŠ¡ï¼Œçœ‹çœ‹å…¶ä¸­çš„è¿‡ç¨‹ã€‚ ETagéªŒè¯ç¼“å­˜çš„å“åº”åœ¨æœ¬åœ°é€šè¿‡ express å¯äº†ä¸€ä¸ªéå¸¸ç®€å•çš„ä¸ªæœåŠ¡ï¼Œå…·ä½“å¦‚ä¸‹ 1234567891011// app.jsconst express = require('express');const app = express();app.get('/', (req, res) =&gt; &#123; res.send('hello http')&#125;)app.listen(3000, () =&gt; &#123; console.log('The server is running at http://127.0.0.1:3000/')&#125;) ä½†æ˜¯ä»”ç»†çœ‹å´å‘ç°ï¼Œç¬¬ä¸€æ¬¡è¿›å…¥é¡µé¢http://127.0.0.1:3000/æ—¶ï¼ŒStatusä¸º200è€Œå†æ¬¡åˆ·æ–°å‘ç°Statuså´æ˜¯304 ä»”ç»†å¯¹æ¯”å‘ç° ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶å€™è¯·æ±‚å‚æ•°ä¸­å¹¶æ²¡æœ‰ If-None-Match å­—æ®µä½†æ˜¯å´æœ‰ä¸ªPragmaï¼›åŒæ—¶åœ¨è¯·æ±‚çš„Responseä¸­æœ‰ä¸€ä¸ª ETag: W/â€œa-QFZ79AprHeNlMfPMKXyEUV+lyOgâ€å­—æ®µã€‚ åˆ·æ–°é¡µé¢åå†æ¬¡è¯·æ±‚åœ¨è¯·æ±‚å¤´ä¸­å´æœ‰ä¸ª *If-None-Match: W/â€œa-QFZ79AprHeNlMfPMKXyEUV+lyOgâ€ *ï¼ŒIf-None-Match çš„å€¼å’Œç¬¬ä¸€æ¬¡è¯·æ±‚çš„ETagçš„å€¼ç›¸åŒã€‚ ç»è¿‡æŸ¥è¯¢æ‰äº†è§£åŸç†æµè§ˆå™¨ä¼šæ ¹æ®HTTPè¯·æ±‚çš„ETagéªŒè¯è¯·æ±‚çš„èµ„æºæ˜¯å¦å‘ç”Ÿäº†æ”¹å˜ï¼Œå¦‚æœå®ƒæœªå‘ç”Ÿå˜åŒ–ï¼ŒæœåŠ¡å™¨å°†è¿”å›â€œ304 Not Modifiedâ€å“åº”ï¼Œå¹¶ä¸”èµ„æºä»æµè§ˆå™¨ç¼“å­˜ä¸­è¯»å–ï¼Œè¿™æ ·å°±ä¸å¿…å†æ¬¡ä¸‹è½½è¯·æ±‚ã€‚ ç”±æ­¤çœ‹æ¥æ•´ä¸ªçš„è¿‡ç¨‹å°±æ˜¯ä¸‹é¢è¿™æ ·ï¼š å¦‚æœç¼“å­˜ä¸­æœ‰ETag ä»¤ç‰Œï¼Œå®¢æˆ·ç«¯è¯·æ±‚æ—¶ä¼šè‡ªåŠ¨åœ¨â€œIf-None-Matchâ€ HTTP è¯·æ±‚æ ‡å¤´å†…æä¾› ETag ä»¤ç‰Œã€‚ æœåŠ¡å™¨æ ¹æ®å½“å‰èµ„æºæ ¸å¯¹ä»¤ç‰Œï¼ŒéªŒè¯æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œå°†éªŒè¯ç»“æœé€šçŸ¥ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯æ ¹æ®ç»“æœçœ‹çœ‹æ˜¯å¦éœ€è¦ä»ç¼“å­˜ä¸­è¯»å–è¿˜æ˜¯å‘é€èµ„æºè¯·æ±‚ã€‚ è¡¥å……ä¸€ä¸ªå¾ˆç›´ç™½çš„ TCPåè®®çš„ä¸‰æ¬¡æ¡æ‰‹ çš„ç†è§£ã€‚ ä¸ºäº†éªŒè¯æŸ¥è¯çš„ç»“æœï¼Œæˆ‘åˆæ·»åŠ ä¸€ä¸ªè¯·æ±‚å¤„ç†ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯ï¼Œå®¢æˆ·ç«¯æ˜ç¡®è¿”å›ä¸€ä¸ªETag, ä½†æ˜¯è¿™é‡Œæ¯æ¬¡è¯·æ±‚çš„çš„è¿”å›å€¼éƒ½ä¸ç›¸åŒï¼Œè¿™é‡Œç®€å•çš„ä½¿ç”¨äº†ä¸ªetag++ã€‚ 1234567891011121314151617181920// app.jsconst express = require('express');const app = express();app.get('/', (req, res) =&gt; &#123; res.send('hello http');&#125;)// éªŒè¯ETaglet etag = 0;app.get('/test', (req, res) =&gt; &#123; etag++; res.set('ETag', etag); res.send('ETag');&#125;)app.listen(3000, () =&gt; &#123; console.log('The server is running at http://127.0.0.1:3000/')&#125;) æŸ¥çœ‹ä¸‹ /test åœ°å€çš„è¯·æ±‚ç»“æœï¼Œä¼šå‘ç°If-None-Match çš„å€¼å’Œ Responseä¸­çš„ ETagå€¼æ¯æ¬¡éƒ½ä¸ç›¸åŒï¼Œå¹¶ä¸”æ˜¯ æµè§ˆå™¨ä¼šå°†æ¯æ¬¡çš„ ETag å€¼éƒ½ç¼“å­˜èµ·æ¥åœ¨ä¸‹æ¬¡è¯·æ±‚çš„æ—¶å€™å‘é€ç»™æœåŠ¡å™¨ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ¯æ¬¡æœåŠ¡å™¨æ¯æ¬¡æ ¡éªŒçš„å€¼éƒ½æ˜¯ä¸ç›¸åŒçš„ï¼Œæ‰€ä»¥è¿™ç§å°±æ²¡æœ‰åšç¼“å­˜ï¼Œå› æ­¤æ¯æ¬¡è¯·æ±‚ /test åœ°å€éƒ½æ˜¯ 200 çš„çŠ¶æ€ã€‚","categories":[],"tags":[{"name":"ç½‘ç»œ","slug":"ç½‘ç»œ","permalink":"https://summxu.github.io/tags/ç½‘ç»œ/"}]},{"title":"fixed å®šä½å¤±æ•ˆ ä¸ CSS å±‚å ä¸Šä¸‹æ–‡","slug":"2019/fixed-stacking-context","date":"2019-05-22T15:38:51.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2019/fixed-stacking-context/","link":"","permalink":"https://summxu.github.io/2019/fixed-stacking-context/","excerpt":"","text":"ç¬¬ä¸€éƒ¨åˆ†ï¼Œposition: fixedå¤±æ•ˆçš„é—®é¢˜ï¼›ç¬¬äºŒéƒ¨åˆ†ï¼Œäº†è§£ä¸€ä¸‹ç”±æ­¤æ‰¯å‡ºçš„ä¸€ä¸ªStacking Contextå±‚å ä¸Šä¸‹æ–‡ã€‚ å…³äº position: fixedposition: fixed åœ¨æ—¥å¸¸å¸ƒå±€ä¸­æ¯”è¾ƒå¸¸ç”¨ï¼Œå¦‚ç§»åŠ¨ç«¯å¤´éƒ¨å’Œåº•éƒ¨å¯¼èˆªå®šä½ã€æ¨¡æ€æ¡†ã€æ‚¬æµ®æŒ‰é’®ç­‰ï¼Œè®¾ç½®äº†è¿™ä¸ªå±æ€§å€¼å¾—å…ƒç´ ä¼šç›¸å¯¹äºå±å¹•è§†å£ï¼ˆviewportï¼‰è¿›è¡Œå®šä½ï¼Œå…¶ä½ç½®åœ¨å±å¹•è¿›è¡Œæ»šåŠ¨æ—¶ä¼šä¿æŒä¸å˜ï¼Œä¸å ç”¨æ–‡æ¡£æµä¸­çš„ä½ç½®ï¼Œè€Œä¸”æ‰“å°æ—¶è¿™ä¸ªå…ƒç´ ä¼šå‡ºç°åœ¨ æ¯ä¸€é¡µ çš„ç›¸åŒä½ç½®ã€‚è®¾ç½®äº† position: fixed çš„å…ƒç´ æœ€ç»ˆçš„ä½ç½®ç”±å®ƒçš„ top, right, bottom, left æ¥å†³å®šï¼Œè¿™ä¸ªå€¼ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ stacking contextä½†æ˜¯ï¼Œæœ‰äº›æƒ…å†µä¸‹ï¼Œè¿™ç§å®šä½æ–¹å¼ä¼šå¤±æ•ˆï¼Œä½¿å¾—å…ƒç´ ç›¸å¯¹äºè§†çª—å®šä½çš„å®šä½ä¸ç¬¦åˆé¢„æœŸï¼ˆå…¶å®æ˜¯ fixed å®šä½çš„å‚è€ƒå…ƒç´ å˜äº†ï¼‰ã€‚å½“è¯¥å…ƒç´ çš„çˆ¶å…ƒç´ ä¸­ï¼ˆå¹¿ä¹‰ï¼ŒåŒ…å«ç¥–å…ˆå…ƒç´ ï¼‰æœ‰å…ƒç´ çš„ transform æˆ– perspective çš„å€¼ä¸æ˜¯ noneï¼Œè¯¥å…ƒç´ å°±ä¼šç›¸å¯¹äºè¿™ä¸ªçˆ¶å…ƒç´ è€Œä¸æ˜¯è§†å£è¿›è¡Œå®šä½ã€‚å…·ä½“çš„åŸå› æ˜¯è¿™æ ·ï¼š Specifying a value other than none for the transform property establishes a new local coordinate system at the element that it is applied to. The mapping from where the element would have rendered into that local coordinate system is given by the elementâ€™s transformation matrix. Transformations are cumulative. That is, elements establish their local coordinate system within the coordinate system of their parent. From the perspective of the user, an element effectively accumulates all the transform properties of its ancestors as well as any local transform applied to it. The accumulation of these transforms defines a current transformation matrix for the element. è§£é‡Šä¸€ä¸‹ï¼Œtransform æˆ– perspective çš„é none å€¼ä¼šå½±å“å…ƒç´ çš„åŒ…å«å—å’Œå±‚å ä¸Šä¸‹æ–‡ï¼Œè¿™äº›å€¼ä¼šåœ¨åº”ç”¨å®ƒçš„å…ƒç´ ä¸Šå»ºç«‹ä¸€ä¸ªå±€éƒ¨çš„åæ ‡ç³»ï¼ˆXè½´å‘å³æ°´å¹³å¢åŠ ; Yè½´å‚ç›´å‘ä¸‹å¢åŠ ï¼‰ï¼Œç”±å˜æ¢çŸ©é˜µï¼ˆtransform çš„å€¼ï¼‰ç»™å‡ºå…ƒç´ åˆ°è¯¥å±€éƒ¨åæ ‡ç³»çš„æ˜ å°„ï¼Œè€Œä¸” transform å¸¦æ¥çš„å±€éƒ¨åæ ‡ç³»çš„æ”¹å˜æ˜¯å¯ä»¥ç´¯ç§¯çš„â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œå­å…ƒç´ ä¼šåœ¨å®ƒçš„çˆ¶å…ƒç´ çš„åæ ‡ç³»å†…å»ºç«‹å­å…ƒç´ è‡ªå·±çš„å±€éƒ¨åæ ‡ç³»ï¼šçˆ¶å…ƒç´ çš„ transform ä»¬ä¸€å±‚å±‚ç§¯ç´¯å®šä¹‰äº†å­å…ƒç´ å½“å‰çš„å˜æ¢çŸ©é˜µï¼ˆä¸€ä¸ªå…ƒç´ çš„å˜æ¢çŸ©é˜µæ˜¯ä» transform å’Œ transform-origin å±æ€§ä¸­è®¡ç®—å‡ºæ¥çš„ï¼‰ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š é€šè¿‡ transform-origin çš„å€¼å¯¹åæ ‡åŸç‚¹ X å’Œ Y çš„ä½ç½®è¿›è¡Œè½¬æ¢ ä»¥å˜æ¢åçš„ Xã€Y ä¸ºåæ ‡åŸç‚¹åŸç‚¹ï¼Œæ ¹æ® transform çš„å±æ€§å€¼è¿›è¡Œå˜æ¢ X å’Œ Y æ ¹æ® transform-origin çš„ç›¸åå€¼å¹³ç§»å›å» å¦‚å›¾ transform ä¼šå½±å“æœ€ç»ˆçš„æ¸²æŸ“æ•ˆæœï¼Œä½†æ˜¯ä¸å½±å“é™¤overflowå¤–çš„CSSå¸ƒå±€ï¼Œå½“é€šè¿‡ getClientRects()ã€getBoundingClientRect() è¿™äº›æ¥å£è·å– client rectangles æ—¶ï¼Œtransform çš„æ•ˆæœä¹Ÿä¼šè¢«è€ƒè™‘è¿›å»ã€‚ å¯ä»¥åº”ç”¨ transform çš„å…ƒç´ ï¼ˆtransformable elementsï¼‰æœ‰ï¼š æ»¡è¶³CSSç›’æ¨¡å‹çš„å—çº§å…ƒç´ æˆ–è¡Œå†…å…ƒç´ ï¼Œæˆ–è€…å®ƒçš„ display å€¼ä¸º table-row, table-row-group, table-header-group, table-footer-group, table-cell, table-caption ä¸­çš„ä¸€ä¸ª SVG å‘½åç©ºé—´ä¸­å…·æœ‰ transform, patternTransform æˆ– gradientTransform å±æ€§çš„å…ƒç´  p.s. å…³äºä¸Šé¢çš„åº”ç”¨transformåå…ƒç´ ä½ç½®çš„è®¡ç®—æ–¹å¼ã€‚åŸæ–‡å¦‚ä¸‹ï¼š Start with the identity matrix. Translate by the computed X and Y of transform-origin Multiply by each of the transform functions in transform property from left to right Translate by the negated computed X and Y values of transform-origin å‚è€ƒæ–‡æ¡£ï¼š The transform Property - W3C Working Draft - 30 November 2017 The Transform Rendering Model - W3C Working Draft - 30 November 2017 å±‚å ä¸Šä¸‹æ–‡ Stacking Contexté€šè¿‡ä¸Šæ–‡æˆ‘ä»¬çŸ¥é“äº†æœ‰å±‚å ä¸Šä¸‹æ–‡è¿™ä¹ˆä¸€ä¸ªä¸œè¥¿ï¼Œå±‚å ä¸Šä¸‹æ–‡æ˜¯HTMLå…ƒç´ çš„ä¸‰ç»´æ¦‚å¿µï¼Œè¿™äº›HTMLå…ƒç´ åœ¨ä¸€æ¡å‡æƒ³çš„ç›¸å¯¹äºé¢å‘ï¼ˆç”µè„‘å±å¹•çš„ï¼‰è§†çª—zè½´ä¸Šå»¶ä¼¸ï¼ŒHTMLå…ƒç´ ä¾æ®å…¶è‡ªèº«å±æ€§æŒ‰ç…§ä¼˜å…ˆçº§é¡ºåºå ç”¨å±‚å ä¸Šä¸‹æ–‡çš„ç©ºé—´ã€‚å’ŒBFCè¿˜æœ‰IFCè¿™äº›xx contextä¸€æ ·ï¼Œåˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ä¹Ÿæ˜¯æœ‰æ¡ä»¶çš„ï¼Œæ–‡æ¡£ä¸­çš„å±‚å ä¸Šä¸‹æ–‡ç”±æ»¡è¶³ä»¥ä¸‹ä»»æ„ä¸€ä¸ªæ¡ä»¶çš„å…ƒç´ å½¢æˆï¼š æ ¹å…ƒç´  (HTML), z-index å€¼ä¸ä¸º auto çš„ ç»å¯¹/ç›¸å¯¹å®šä½å…ƒç´  position ä¸æ˜¯ static çš„å…ƒç´ ï¼ˆsticky ä¹Ÿä¼šåˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ï¼Œè¿™æ˜¯ä¸€ä¸ªç¥å¥‡çš„å®éªŒä¸­çš„å±æ€§å€¼ï¼‰ ä¸€ä¸ª z-index å€¼ä¸ä¸º auto çš„ flex é¡¹ç›® (flex item) opacity å±æ€§å€¼å°äº 1 çš„å…ƒç´ ï¼ˆå‚è€ƒ the specification for opacityï¼‰ transform å±æ€§å€¼ä¸ä¸º none çš„å…ƒç´  mix-blend-mode å±æ€§å€¼ä¸ä¸º normal çš„å…ƒç´  æœ‰ transformã€filterã€perspectiveã€clip-pathã€mask / mask-image / mask-border è¿™äº›å±æ€§ä¸­ä»»æ„ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§çš„å…ƒç´  isolation å±æ€§è¢«è®¾ç½®ä¸º isolateçš„å…ƒç´  åœ¨ will-change ä¸­æŒ‡å®šäº†ä»»æ„CSS` å±æ€§çš„å…ƒç´ ï¼ˆå³ä½¿æ²¡æœ‰ç›´æ¥æŒ‡å®šè¿™äº›å±æ€§çš„å€¼ï¼‰ -webkit-overflow-scrolling å±æ€§è¢«è®¾ç½® touchçš„å…ƒç´  è®¾ç½®äº† transform-style: preserve-3d çš„å…ƒç´  åœ¨å±‚å ä¸Šä¸‹æ–‡ä¸­çš„å­å…ƒç´ ä¹Ÿä¼šæŒ‰ç…§ä¸Šé¢çš„è§„åˆ™è¿›è¡Œå±‚å ï¼Œå­å…ƒç´ çš„ z-index å€¼åªåœ¨çˆ¶çº§å±‚å ä¸Šä¸‹æ–‡ä¸­æœ‰æ„ä¹‰ï¼Œå­çº§å±‚å ä¸Šä¸‹æ–‡è¢«è‡ªåŠ¨è§†ä¸ºçˆ¶çº§å±‚å ä¸Šä¸‹æ–‡çš„ä¸€ä¸ªç‹¬ç«‹å•å…ƒã€‚ ä½†æ˜¯ï¼Œå¹¶ä¸æ˜¯åˆ›å»ºäº†æ–°çš„å±‚å ä¸Šä¸‹æ–‡çš„å…ƒç´ å¹¶ä¸ä¸€å®šéƒ½ä¼šå¯¹å…¶æ‹¥æœ‰position: fixedçš„å­å…ƒç´ çš„æ•ˆæœäº§ç”Ÿå½±å“ï¼Œåœ¨Chromeï¼ˆBlinkå†…æ ¸ï¼‰ä¸­ï¼Œå¯ä»¥æ˜ç¡®çœ‹åˆ°äº§ç”Ÿäº†å½±å“çš„æ˜¯ï¼š transform å±æ€§å€¼ä¸ä¸º none çš„å…ƒç´  è®¾ç½®äº† transform-style: preserve-3d çš„å…ƒç´  perspective å€¼ä¸ä¸º none çš„å…ƒç´  åœ¨ will-change ä¸­æŒ‡å®šäº†ä»»æ„ CSS å±æ€§çš„å…ƒç´  ä½†æ˜¯ï¼Œåœ¨ä¸åŒçš„æµè§ˆå™¨å†…æ ¸ä¸‹ï¼Œä¸Šè¿°ç»“è®ºä¹Ÿä¼šæœ‰æ‰€å·®å¼‚ï¼Œä¾‹å¦‚ï¼Œåœ¨ Safariï¼ˆWebkitå†…æ ¸ï¼‰ ä¸­ï¼Œåªæœ‰transform å±æ€§å€¼ä¸ä¸º none çš„å…ƒç´ ä¼šå¯¹ fixed å®šä½çš„æ•ˆæœäº§ç”Ÿå½±å“. å‚è€ƒæ–‡æ¡£ï¼š the specification for opacity - W3C The stacking context - MDN","categories":[],"tags":[{"name":"CSS","slug":"CSS","permalink":"https://summxu.github.io/tags/CSS/"}]},{"title":"css3 transformå¯¹æ™®é€šå…ƒç´ çš„nå¤šæ¸²æŸ“å½±å“","slug":"2019/transform-element-impact","date":"2019-05-18T15:15:18.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2019/transform-element-impact/","link":"","permalink":"https://summxu.github.io/2019/transform-element-impact/","excerpt":"","text":"é—®é¢˜åŸå› ï¼šé¡¹ç›®ä¸­ç”¨åˆ°äº†vantæ¡†æ¶ï¼Œåœ¨dilogä¸­æƒ³è¦å¼¹å‡ºActionsheetå‘ç°ç»å¯¹å®šä½æ˜¯è·Ÿç€dilogå¤–å±‚å…ƒç´ å®šä½ï¼Œæ­¤æ—¶çš„ position:fixed æ— æ•ˆï¼Œé—®é¢˜æ˜¯å› ä¸ºdilogå®šä½æ—¶ç”¨äº†transformï¼Œæ·±ç©¶ä¸‹é—®é¢˜åŸå› ï¼Œå‘ç°äº‹æƒ…å¹¶ä¸æ˜¯è¿™ä¹ˆç®€å•ï¼ ä¸€ä¸ªæ™®æ™®é€šé€šçš„å…ƒç´ ï¼Œå¦‚æœåº”ç”¨äº†CSS3 transformå˜æ¢ï¼Œå³ä¾¿è¿™ä¸ªtransformå±æ€§å€¼ä¸ä¼šæ”¹å˜å…¶ä»»ä½•è¡¨é¢çš„å˜åŒ–ï¼ˆå¦‚scale(1), translate(0,0)ï¼‰ï¼Œä½†æ˜¯ï¼Œå®é™…ä¸Šï¼Œå¯¹è¿™äº›å…ƒç´ è¿˜æ˜¯é€ æˆäº†å¾ˆæ·±è¿œçš„å½±å“ã€‚ transformæå‡å…ƒç´ çš„å‚ç›´åœ°ä½å½“é­é‡å…ƒç´ marginè´Ÿå€¼é‡å çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰staticä»¥å¤–çš„positionå±æ€§å€¼çš„è¯ï¼Œåé¢çš„å…ƒç´ æ˜¯ä¼šè¦†ç›–å‰é¢çš„å…ƒç´ çš„ã€‚img src=&quot;mm1&quot;&gt;&lt;img src=&quot;mm2&quot; style=&quot;margin-left:-60px;&quot;&gt;åœ¨transformå‡ºç°ä¹‹å‰ï¼Œè¿™ä¸ªè§„åˆ™ä¸€ç›´å¾ˆç¨³å¥ï¼›ä½†æ˜¯ï¼Œè‡ªä»transformé™ä¸´ï¼Œè¿™ä¸ªè§„åˆ™å°±å˜äº†ã€‚å…ƒç´ åº”ç”¨äº†transformå±æ€§ä¹‹åï¼Œå°±ä¼šå˜å¾—åº”ç”¨äº†position:relativeä¸€ä¸ªå°¿æ€§ï¼ŒåŸæœ¬åº”è¯¥è¢«è¦†ç›–çš„å…ƒç´ ä¼šé›„èµ·ï¼Œå˜æˆè¦†ç›–å…¶ä»–å…ƒç´ ï¼Œä¿®æ”¹ä¸ºå¦‚ä¸‹ä»£ç ï¼š 12&lt;img src=\"mm1\" style=\"-ms-transform:scale(1);transform:scale(1);\"&gt;&lt;img src=\"mm2\" style=\"margin-left:-60px;\"&gt; åªè¦æ˜¯æ”¯æŒtransformå…ƒç´ çš„æµè§ˆå™¨ï¼ŒåŒ…æ‹¬IE9(-ms-), éƒ½ä¼šæé«˜æ™®é€šå…ƒç´ çš„å‚ç›´åœ°ä½ï¼Œä½¿å…¶è¦†ç›–å…¶ä»–å…ƒç´ è€Œä¸æ˜¯è¢«è¦†ç›–ã€‚ è¿™ç§ç‰¹æ€§åº•å±‚åŸç†æ˜¯å±‚å ä¸Šä¸‹æ–‡ï¼Œå…·ä½“å¯å‚è§â€œæ·±å…¥ç†è§£CSSä¸­çš„å±‚å ä¸Šä¸‹æ–‡å’Œå±‚å é¡ºåºâ€ä¸€æ–‡ã€‚ transformé™åˆ¶position:fixedçš„è·Ÿéšæ•ˆæœæˆ‘ä»¬åº”è¯¥éƒ½çŸ¥é“ï¼Œposition:fixedå¯ä»¥è®©å…ƒç´ ä¸è·Ÿéšæµè§ˆå™¨çš„æ»šåŠ¨æ¡æ»šåŠ¨ï¼Œè€Œä¸”è¿™ç§è·Ÿéšæ•ˆæœè¿å®ƒçš„å…„å¼Ÿä»¬position:relative/absoluteéƒ½é™åˆ¶ä¸äº†ã€‚ä½†æ˜¯ï¼ŒçœŸæ˜¯ä¸€ç‰©é™ä¸€ç‰©ï¼Œposition:fixedå›ºå®šæ•ˆæœå´è¢«å°å°çš„transformç»™å¹²æ‰äº†ï¼Œç›´æ¥é™çº§å˜æˆposition:absoluteçš„è›‹ç–¼è¡¨ç°ã€‚ ä¾‹å¦‚ä¸‹é¢ç¤ºæ„ä»£ç ï¼š &lt;p style=&quot;transform:scale(1);&quot;&gt;&lt;img src=&quot;mm1.jpg&quot;style=&quot;position:fixed;&quot; /&gt;&lt;/p&gt;ç»“æœï¼Œæœ¬æ¥åº”è¯¥ä¸è·Ÿç€æ»šåŠ¨æ¡æ»šåŠ¨çš„å‚²å¨‡fixedå…ƒç´ ï¼Œå˜æˆabsoluteä¸€æ ·çš„è¡Œä¸ºè¡¨ç°ï¼Œå½’æ ¹ç»“åº•å°±æ˜¯çˆ¶å…ƒç´ åŠ äº†ä¸ªå°å°çš„transformå±æ€§å€¼ã€‚ æ³¨æ„ï¼Œè¿™ä¸ªç‰¹æ€§è¡¨ç°ï¼Œç›®å‰åªåœ¨Chromeæµè§ˆå™¨/FireFoxæµè§ˆå™¨ä¸‹æœ‰ï¼ŒIEæµè§ˆå™¨ï¼ŒåŒ…æ‹¬IE11, fixedè¿˜æ˜¯fixedçš„è¡¨ç°ã€‚ transformæ”¹å˜overflowå¯¹absoluteå…ƒç´ çš„é™åˆ¶åœ¨ä»¥å‰ï¼Œoverflowä¸absoluteä¹‹é—´çš„é™åˆ¶è§„èŒƒå†…å®¹å¤§è‡´æ˜¯è¿™æ ·çš„ï¼š absoluteç»å¯¹å®šä½å…ƒç´ ï¼Œå¦‚æœå«æœ‰overflowä¸ä¸ºvisibleçš„çˆ¶çº§å…ƒç´ ï¼ŒåŒæ—¶ï¼Œè¯¥çˆ¶çº§å…ƒç´ ä»¥åŠåˆ°è¯¥ç»å¯¹å®šä½å…ƒç´ ä¹‹é—´ä»»ä½•åµŒå¥—å…ƒç´ éƒ½æ²¡æœ‰positionä¸ºéstaticå±æ€§çš„å£°æ˜ï¼Œåˆ™overflowå¯¹è¯¥absoluteå…ƒç´ ä¸èµ·ä½œç”¨ã€‚ æ¯”æ–¹è¯´å¦‚ä¸‹ç¤ºæ„ä»£ç ï¼š 123&lt;p style=\"width:96px; height:96px; border:2px solid #beceeb; overflow:hidden;\"&gt; &lt;img src=\"mm1.jpg\"style=\"position:absolute;\" /&gt;&lt;/p&gt; ä½†æ˜¯ï¼Œä¸€æ—¦æˆ‘ä»¬ç»™overflowå®¹å™¨æˆ–è€…ä¸å›¾ç‰‡æœ‰åµŒå¥—å…³ç³»çš„å­å…ƒç´ ä½¿ç”¨transformå£°æ˜ï¼Œä¼°è®¡absoluteå…ƒç´ å°±è¦å»é¢†ä¾¿å½“äº†ï¼ æ— è®ºæ˜¯overflowå®¹å™¨è¿˜æ˜¯åµŒå¥—å­å…ƒç´ ï¼Œåªè¦æœ‰transformå±æ€§ï¼Œå°±ä¼šhiddenæº¢å‡ºçš„absoluteå…ƒç´ ã€‚ transformé™åˆ¶absoluteçš„100%å®½åº¦å¤§å°ä»¥å‰ï¼Œæˆ‘ä»¬è®¾ç½®absoluteå…ƒç´ å®½åº¦100%, åˆ™éƒ½ä¼šå‚ç…§ç¬¬ä¸€ä¸ªéstaticå€¼çš„positionç¥–å…ˆå…ƒç´ è®¡ç®—ï¼Œæ²¡æœ‰å°±window. ç°åœ¨ï¼Œéœ€è¦æŠŠtransformä¹Ÿè€ƒè™‘åœ¨å†…äº†ã€‚ ç»“æœï¼Œæ— è®ºæ˜¯IE9+ï¼Œè¿˜æ˜¯Chromeè¿˜æ˜¯FireFoxæµè§ˆå™¨ï¼Œæ‰€æœ‰ç»å¯¹å®šä½å›¾ç‰‡100%å®½åº¦ï¼Œéƒ½æ˜¯ç›¸å¯¹è®¾ç½®äº†transformçš„å®¹å™¨è®¡ç®—äº†ï¼Œäºæ˜¯ï¼Œä¸Šé¢çš„å›¾ç‰‡æ‹‰é•¿åˆ°äº†è¥¿ä¼¯åˆ©äºšï¼›ä¸‹é¢çš„å›¾ç‰‡è¢«é™åˆ¶æˆäº†å°èƒ–å¢©ã€‚ transformå¯¹absoluteå®½åº¦100%é™åˆ¶~","categories":[],"tags":[{"name":"CSS","slug":"CSS","permalink":"https://summxu.github.io/tags/CSS/"}]},{"title":"åŸºäº document.execCommand çš„å¯Œæ–‡æœ¬","slug":"2019/rich-text-editor-by-execCommand","date":"2019-04-30T13:05:35.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2019/rich-text-editor-by-execCommand/","link":"","permalink":"https://summxu.github.io/2019/rich-text-editor-by-execCommand/","excerpt":"","text":"å‰è¨€æœ€è¿‘åœ¨é¡¹ç›®ä¸­å‡†å¤‡é›†æˆä¸€ä¸ªå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼ŒåŸæ¥ä½¿ç”¨çš„æ˜¯ Quillï¼Œä¹‹åå‘ç°é¡¹ç›®æ‰“åŒ…ä½“ç§¯ç¬å¢äº† 200kbã€‚è™½ç„¶ Quill å®Œå…¨èƒ½å¤Ÿæ»¡è¶³é¡¹ç›®éœ€æ±‚ï¼Œä½†å…¶æä¾›çš„è¯¸å¤šåŠŸèƒ½æ˜¯ç”¨ä¸ä¸Šçš„ï¼Œå¯ä»¥ä½¿ç”¨æ›´è½»é‡çš„å®ç°ä»£æ›¿ã€‚ åœ¨å¯»æ‰¾æ–°çš„æ›¿ä»£å“æ—¶ï¼Œä¹Ÿé¡ºä¾¿ç„äº†ä¸‹å„ç§ç¼–è¾‘å™¨çš„å†…éƒ¨å®ç°ã€‚ä¸€äº›ä½“ç§¯åºå¤§çš„ç¼–è¾‘å™¨ä¸€èˆ¬éƒ½å…¼å®¹ä½ç‰ˆæœ¬æµè§ˆå™¨ï¼Œä¸å¾—ä¸å†™å¾ˆå¤šå…¼å®¹æ€§çš„ä»£ç ã€‚è€Œä¸€äº› MINIã€è½»é‡çš„ç¼–è¾‘å™¨æ˜¯ä¸å¯¹ä½ç«¯æµè§ˆå™¨ä½œå…¼å®¹çš„ï¼Œä½¿ç”¨Selectionã€Rangeæˆ–è€…document.execCommandå®ç°ã€‚ ä¹‹å‰åœ¨ JavaScript è·å–è¾“å…¥æ—¶çš„å…‰æ ‡ä½ç½®åŠåœºæ™¯é—®é¢˜ ä¸­æåˆ°è¿‡Selectionå’ŒRangeï¼Œè¿™æ¬¡å°±è¯´è¯´document.execCommandã€‚ document.execCommandè¯¥æ–¹æ³•å¯ä»¥å¯¹å¯ç¼–è¾‘å™¨åŒºåŸŸè¿›è¡Œæ“ä½œï¼Œæ¯”å¦‚åŠ ç²—æ–‡å­—ã€æ”¹å˜å­—å·ã€æ’å…¥é“¾æ¥ç­‰ã€‚å¯ç¼–è¾‘åŒºåŸŸä¹Ÿå°±æ˜¯è®¾ç½®äº†contentEditableå±æ€§çš„å…ƒç´ ã€‚ 12// è¯­æ³•bool = document.execCommand(commandName, showDefaultUI[, arg]) commandNameï¼šStringï¼Œå‘½ä»¤çš„åç§° showDefaultUIï¼šBooleanï¼Œæ˜¯å¦å±•ç¤ºç”¨æˆ·ç•Œé¢ï¼ˆæš‚æ—¶æ²¡æœ‰å‘ç°â€œç”¨æˆ·ç•Œé¢â€æŒ‡çš„æ˜¯ä»€ä¹ˆï¼‰ï¼Œä¸€èˆ¬ä¸ºfalse argï¼šStringï¼Œè¦ä¼ é€’çš„å‚æ•°ï¼Œæ¯”å¦‚æ’å…¥é“¾æ¥éœ€è¦ä¼ å…¥ä¸€ä¸ª URLï¼Œå¯é€‰ è¿”å›å€¼ï¼šBooleanï¼Œè¡¨ç¤ºæ“ä½œæ˜¯å¦æ”¯æŒæˆ–æ˜¯å¦å¯ç”¨å‡å¦‚è¦æŠŠé€‰ä¸­çš„æ–‡å­—åŠ ç²—ï¼Œåªéœ€è¦è¿™æ ·ï¼š document.execCommand(&#39;bold&#39;, false) å…¼å®¹æ€§[http://static.imys.net/execCommand-support-2017113.jpg] å¯¹äºç°ä»£æµè§ˆå™¨çš„å…¼å®¹åº¦è¾ƒå¥½ï¼Œä¸è¿‡ Android 53 å–æ¶ˆå…¼å®¹çš„ä»€ä¹ˆé¬¼ï¼Ÿ é™¤äº†äº†è§£è¯¥æ–¹æ³•çš„å…¼å®¹æ€§å¤–ï¼Œè¿˜éœ€è¦äº†è§£æ¯ä¸€ç§å¯æ‰§è¡Œå‘½ä»¤çš„å…¼å®¹æ€§ã€‚æ¯”å¦‚decreaseFontSizeï¼Œç»™é€‰ä¸­æ–‡å­—æ·»åŠ smallæ ‡ç­¾ï¼Œä¹Ÿå°±æ˜¯å°å·å­—ä½“ï¼Œè°·æ­Œæ˜¯ä¸æ”¯æŒçš„ã€‚ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•æ£€æµ‹å‘½ä»¤æ˜¯å¦åœ¨æµè§ˆå™¨ä¸­æ”¯æŒï¼š document.queryCommandSupported(commandName) ç®€é™‹çš„å®ç°ä¸åˆ° 50 è¡Œä»£ç ï¼ŒåŸºäºdocument.execCommandå®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€‚ æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ä»¥æ­¤ä¸ºå‡ºå‘ç‚¹ï¼Œå»å¼€å‘ä¸€ä¸ªå…·å¤‡å®Œæ•´åŠŸèƒ½çš„ç¼–è¾‘å™¨ã€‚æ‡’å¾—æŠ˜è…¾çš„å¯ä»¥åƒæˆ‘ä¸€æ ·å¤šæœç´¢å‡ ä¸‹ï¼Œæ‰¾ä¸€ä¸ªåˆé€‚çš„è½®å­ã€‚ğŸ˜… å‚è€ƒMDN: document.execCommand","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://summxu.github.io/tags/JavaScript/"}]},{"title":"WebpackæŒ‰éœ€æ‰“åŒ…Lodashçš„å‡ ç§æ–¹å¼","slug":"2019/webpack-use-lodash","date":"2019-04-16T05:23:06.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2019/webpack-use-lodash/","link":"","permalink":"https://summxu.github.io/2019/webpack-use-lodash/","excerpt":"","text":"åœ¨æ•°æ®æ“ä½œæ—¶ï¼ŒLodash å°±æ˜¯æˆ‘çš„å¼¹è¯åº“ï¼Œä¸ç®¡é‡åˆ°å¤šå¤æ‚çš„æ•°æ®ç»“æ„éƒ½èƒ½ç”¨ä¸€äº›å‡½æ•°è½»æ¾æ‹†è§£ã€‚ ES6 ä¸­ä¹Ÿæ–°å¢äº†è¯¸å¤šæ–°çš„å¯¹è±¡å‡½æ•°ï¼Œä¸€äº›ç®€å•çš„é¡¹ç›®ä¸­ ES6 å°±è¶³å¤Ÿä½¿ç”¨äº†ï¼Œä½†è¿˜æ˜¯ä¼šæœ‰ä¾‹å¤–çš„æƒ…å†µå¼•ç”¨äº†å°‘æ•°çš„ Lodash å‡½æ•°ã€‚ä¸€ä¸ªå®Œæ•´çš„ Lodash åº“ï¼Œå³ä½¿æ˜¯å‹ç¼©åï¼Œç°æœ€æ–°ç‰ˆæœ¬ä¹Ÿæœ‰ 71k çš„ä½“ç§¯ã€‚ä¸èƒ½ä¸ºäº†åƒä¸€å£é¥­è€Œä¹°ä¸‹ä¸€ä¸ªé¥­åº—å•Šã€‚ é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®å·²ç»æœ‰å¾ˆå¤šå¯é€‰æ–¹æ¡ˆäº†ã€‚ å‡½æ•°æ¨¡å—Lodash ä¸­çš„æ¯ä¸ªå‡½æ•°åœ¨ NPM éƒ½æœ‰ä¸€ä¸ªå•ç‹¬çš„å‘å¸ƒæ¨¡å—ã€‚NPM: results for â€˜lodashâ€™å‡å¦‚ä½ åªéœ€è¦ä½¿ç”¨_.isEqualï¼Œé‚£ä¹ˆä½ åªéœ€è¦å®‰è£…lodash.isequalæ¨¡å—ï¼Œç„¶åæŒ‰ä»¥ä¸‹æ–¹å¼å¼•ç”¨ã€‚ 1234var isEqual = require('lodash.isequal')// or ES6import isEqual from 'lodash.isequal'isEqual([1, 2, 3], [1, 2, 3]) // true å…¨è·¯å¾„å¼•ç”¨åœ¨ä½ å®Œæ•´å®‰è£… Lodash åï¼Œå¯ä»¥æŒ‰lodash/å‡½æ•°åçš„æ ¼å¼å•ç‹¬å¼•å…¥éœ€è¦çš„å‡½æ•°æ¨¡å—ã€‚ 1234var difference = require('lodash/difference')// or ES6import difference from 'lodash/difference'difference([1, 2], [1, 3]) // [2] ä½¿ç”¨æ’ä»¶ä¼˜åŒ–åœ¨ç®€å•åœºæ™¯ä¸‹ï¼Œä»¥ä¸Šä¸¤ç§æ–¹å¼è¶³ä»¥è§£å†³é—®é¢˜ã€‚è€Œé‡åˆ°å¤æ‚çš„æ•°æ®å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬ä¸å¾—ä¸åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å¼•å…¥å¤šä¸ª Lodash å‡½æ•°ï¼Œè¿™æ ·å°±éœ€è¦åœ¨æ–‡ä»¶ä¸­å†™å¤šä¸ªrequireæˆ–importç›¸å…³å‡½æ•°ã€‚ 12345import remove from 'lodash/remove'import uniq from 'lodash/uniq'import invokeMap from 'lodash/invokeMap'import sortBy from 'lodash/sortBy'// more... æ­£å†™åˆ°å…³é”®å¤„å´å› ä¸ºå¼•å…¥ä¸€ä¸ªå‡½æ•°è¦æ‹‰åˆ°æ–‡ä»¶å¤´éƒ¨å»å®šä¹‰å¼•ç”¨è€Œæ‰“ä¹±äº†æ€è·¯ï¼Œå¾ˆä¸çˆ½ï¼ äºæ˜¯æˆ‘æœºæ™ºçš„åˆ° Github å»æœç´¢äº†webpackå’Œlodashä¸¤ä¸ªå…³é”®è¯çš„ç»„åˆï¼Œæ’åœ¨é¦–ä½çš„ lodash-webpack-plugin å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œç”Ÿã€‚ ä½¿ç”¨æ—¶éœ€è¦ä»¥ä¸‹æ¨¡å—ï¼Œå…¶å®é™¤äº†å‰ä¸¤ä¸ªå‰©ä¸‹çš„ä¸€èˆ¬éƒ½å·²å®‰è£…äº†ï¼š $ npm i -S lodash-webpack-plugin babel-plugin-lodash babel-core babel-loader babel-preset-es2015 webpacké…ç½®ï¼š 123456789101112131415161718192021webpack.config.jsvar LodashModuleReplacementPlugin = require('lodash-webpack-plugin');var webpack = require('webpack');module.exports = &#123; module: &#123; loaders: [&#123; loader: 'babel', test: /\\.js$/, exclude: /node_modules/, query: &#123; plugins: ['transform-runtime', 'lodash'], presets: ['es2015'] &#125; &#125;] &#125;, plugins: [ new LodashModuleReplacementPlugin, new webpack.optimize.OccurrenceOrderPlugin, new webpack.optimize.UglifyJsPlugin ]&#125; å…¶ä¸­babel-plugin-lodashçš„é…ç½®ï¼Œä¹Ÿå°±æ˜¯plugins: [&#39;lodash&#39;]ï¼Œå¹¶ä¸æ˜¯ä¸€å®šè¦åœ¨loadersä¸­ï¼Œä¹Ÿå¯ä»¥å•ç‹¬å®šä¹‰babelã€‚ 123456789101112131415161718192021webpack.config.jsvar LodashModuleReplacementPlugin = require('lodash-webpack-plugin');var webpack = require('webpack');module.exports = &#123; module: &#123; loaders: [&#123; loader: 'babel', test: /\\.js$/, exclude: /node_modules/ &#125;] &#125;, babel: &#123; presets: ['es2015'], plugins: ['transform-runtime', 'lodash'] &#125;, plugins: [ new LodashModuleReplacementPlugin, new webpack.optimize.OccurrenceOrderPlugin, new webpack.optimize.UglifyJsPlugin ]&#125; åˆæˆ–è€…æ˜¯.babelrcæ–‡ä»¶ä¸­ã€‚ ä»¥ä¸Šå·¥ä½œå®Œæˆäº†ï¼Œåœ¨æ¯ä¸ªä½ éœ€è¦ä½¿ç”¨ lodash å‡½æ•°çš„æ–‡ä»¶ä¸­åªéœ€è¦å¼•ç”¨ä¸€æ¬¡ lodashï¼Œå³å¯è°ƒç”¨ä»»æ„å‡½æ•°è€Œä¸ä¼šé€ æˆå®Œå…¨æ‰“åŒ…ã€‚ 12import _ from 'lodash'_.add(1, 2) // æ‰“åŒ…æ—¶åªä¼šå¼•å…¥è¿™ä¸€ä¸ªå‡½æ•°æ¨¡å— æ³¨æ„ï¼šå¿…é¡»è¦ä½¿ç”¨ ES2015 çš„æ¨¡å—å¼•ç”¨æ–¹å¼æ‰æœ‰æ•ˆã€‚ Endä»¥ä¸Šå³æ˜¯æˆ‘ç›®å‰æ‰€çŸ¥é“çš„å‡ ç§æ–¹å¼ï¼Œå¦‚æœå“ªä½æœ‹å‹æœ‰æ›´å¥½çš„æ–¹å¼ï¼ˆæ¯”å¦‚åªéœ€è¦å…¨å±€å¼•å…¥ä¸€æ¬¡ï¼‰ï¼Œè¯·ä¸€å®šåˆ†äº«ä¸æˆ‘ï¼ğŸ˜‹","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://summxu.github.io/tags/JavaScript/"}]},{"title":"æ­£ç¡®ä½¿ç”¨VueæŒ‡ä»¤çš„é’©å­å‡½æ•°","slug":"2019/vue-directive-hook","date":"2019-03-24T07:28:24.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2019/vue-directive-hook/","link":"","permalink":"https://summxu.github.io/2019/vue-directive-hook/","excerpt":"","text":"åœ¨ Vue ä¸­å¯ä»¥æŠŠä¸€ç³»åˆ—å¤æ‚çš„æ“ä½œåŒ…è£…ä¸ºä¸€ä¸ªæŒ‡ä»¤ã€‚ ä»€ä¹ˆæ˜¯å¤æ‚çš„æ“ä½œï¼Ÿæˆ‘çš„ç†è§£æ˜¯ï¼šå¤æ‚é€»è¾‘åŠŸèƒ½çš„åŒ…è£…ã€è¿èƒŒæ•°æ®é©±åŠ¨çš„ DOM æ“ä½œä»¥åŠå¯¹ä¸€äº› Hack æ‰‹æ®µçš„æ©ç›–ç­‰ã€‚æˆ‘ä»¬æ€»æ˜¯æœŸæœ›ä»¥æ“ä½œæ•°æ®çš„å½¢å¼æ¥å®ç°åŠŸèƒ½é€»è¾‘ã€‚ é’©å­å‡½æ•°å¯¹äºè‡ªå®šä¹‰æŒ‡ä»¤çš„å®šä¹‰ï¼ŒVue2 æœ‰ 5 ä¸ªå¯é€‰çš„é’©å­å‡½æ•°ã€‚ bind: åªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ï¼Œç”¨è¿™ä¸ªé’©å­å‡½æ•°å¯ä»¥å®šä¹‰ä¸€ä¸ªåœ¨ç»‘å®šæ—¶æ‰§è¡Œä¸€æ¬¡çš„åˆå§‹åŒ–åŠ¨ä½œã€‚ inserted: è¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ï¼ˆçˆ¶èŠ‚ç‚¹å­˜åœ¨å³å¯è°ƒç”¨ï¼Œä¸å¿…å­˜åœ¨äº document ä¸­ï¼‰ã€‚ update: è¢«ç»‘å®šå…ƒç´ æ‰€åœ¨çš„æ¨¡æ¿æ›´æ–°æ—¶è°ƒç”¨ï¼Œè€Œä¸è®ºç»‘å®šå€¼æ˜¯å¦å˜åŒ–ã€‚ componentUpdated: è¢«ç»‘å®šå…ƒç´ æ‰€åœ¨æ¨¡æ¿å®Œæˆä¸€æ¬¡æ›´æ–°å‘¨æœŸæ—¶è°ƒç”¨ã€‚ unbind: åªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨ã€‚æ¥ä¸‹æ¥ï¼Œå®šä¹‰ä¸€ä¸ªç®€å•çš„æŒ‡ä»¤ä»¥éªŒè¯è¿™äº›é’©å­å‡½æ•°çš„è§¦å‘æ—¶æœºã€‚123456&lt;div id=\"app\"&gt; &lt;my-comp v-if=\"msg\" :msg=\"msg\"&gt;&lt;/my-comp&gt; &lt;button @click=\"update\"&gt;æ›´æ–°&lt;/button&gt; &lt;button @click=\"uninstall\"&gt;å¸è½½&lt;/button&gt; &lt;button @click=\"install\"&gt;å®‰è£…&lt;/button&gt;&lt;/div&gt; 12345678910111213141516171819202122232425262728293031323334353637383940414243Vue.directive('hello', &#123; bind: function (el) &#123; console.log('bind') &#125;, inserted: function (el) &#123; console.log('inserted') &#125;, update: function (el) &#123; console.log('update') &#125;, componentUpdated: function (el) &#123; console.log('componentUpdated') &#125;, unbind: function (el) &#123; console.log('unbind') &#125;&#125;)var myComp = &#123; template: '&lt;h1 v-hello&gt;&#123;&#123;msg&#125;&#125;&lt;/h1&gt;', props: &#123; msg: String &#125;&#125;new Vue(&#123; el: '#app', data: &#123; msg: 'Hello' &#125;, components: &#123; myComp: myComp &#125;, methods: &#123; update: function () &#123; this.msg = 'Hi' &#125;, uninstall: function () &#123; this.msg = '' &#125;, install: function () &#123; this.msg = 'Hello' &#125; &#125;&#125;) é¡µé¢åŠ è½½æ—¶12bindinserted ç»„ä»¶æ›´æ–°æ—¶ç‚¹å‡»â€œæ›´æ–°â€æŒ‰é’®ï¼Œæ›´æ”¹æ•°æ®è§¦å‘ç»„ä»¶æ›´æ–°ã€‚ 12updatecomponentUpdated å¸è½½ç»„ä»¶æ—¶ç‚¹å‡»â€œå¸è½½â€æŒ‰é’®ï¼Œæ•°æ®ç½®ç©ºå¦å®šåˆ¤æ–­ä»¥è§¦å‘ç»„ä»¶å¸è½½ã€‚ unbind é‡æ–°å®‰è£…ç»„ä»¶æ—¶ç‚¹å‡»â€œå®‰è£…â€æŒ‰é’®ï¼Œæ•°æ®èµ‹å€¼è‚¯å®šåˆ¤æ–­ä»¥è§¦å‘ç»„ä»¶é‡æ–°å®‰è£…ã€‚ 12bindinserted åŒºåˆ«ä»æ¡ˆä¾‹çš„è¿è¡Œä¸­ï¼Œå¯¹ 5 ä¸ªé’©å­å‡½æ•°çš„è§¦å‘æ—¶æœºæœ‰äº†åˆæ­¥çš„è®¤è¯†ã€‚å­˜ç–‘çš„ä¹Ÿå°±æ˜¯bindå’Œinsertedã€updateå’ŒcomponentUpdatedçš„åŒºåˆ«äº†ã€‚ bind å’Œ insertedæ®æ–‡æ¡£æ‰€è¯´ï¼Œæ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ insertedï¼Œæ¥ä¸ªæµ‹è¯•ã€‚ 12345678bind: function (el) &#123; console.log(el.parentNode) // null console.log('bind')&#125;,inserted: function (el) &#123; console.log(el.parentNode) // &lt;div id=\"app\"&gt;...&lt;/div&gt; console.log('inserted')&#125; åˆ†åˆ«åœ¨ä¸¤ä¸ªé’©å­å‡½æ•°ä¸­è¾“å‡ºçˆ¶èŠ‚ç‚¹ï¼šbind æ—¶çˆ¶èŠ‚ç‚¹ä¸º nullï¼Œinserted æ—¶çˆ¶èŠ‚ç‚¹å­˜åœ¨ã€‚ update å’Œ componentUpdatedå…³äºè¿™ä¸¤ä¸ªçš„ä»‹ç»ï¼Œä»å­—çœ¼ä¸Šçœ‹æ„Ÿè§‰æ˜¯ç»„ä»¶æ›´æ–°å‘¨æœŸæœ‰å…³ï¼Œç»§ç»­éªŒè¯ã€‚ 12345678update: function (el) &#123; console.log(el.innerHTML) // Hello console.log('update')&#125;,componentUpdated: function (el) &#123; console.log(el.innerHTML) // Hi console.log('componentUpdated')&#125; æ²¡æ¯›ç—…ï¼Œupdate å’Œ componentUpdated å°±æ˜¯ç»„ä»¶æ›´æ–°å‰å’Œæ›´æ–°åçš„åŒºåˆ«ã€‚ ç»“è®ºæ–‡æ¡£è¯´çš„æ²¡é”™â€¦ğŸ˜’Demo æœ€ä½³å®è·µæ ¹æ®éœ€æ±‚çš„ä¸åŒï¼Œæˆ‘ä»¬è¦é€‰æ‹©æ°å½“çš„æ—¶æœºå»åˆå§‹åŒ–æŒ‡ä»¤ã€æ›´æ–°æŒ‡ä»¤è°ƒç”¨å‚æ•°ä»¥åŠé‡Šæ”¾æŒ‡ä»¤å­˜åœ¨æ—¶çš„å†…å­˜å ç”¨ç­‰ã€‚ æ¯”è¾ƒå¸¸è§çš„åœºæ™¯æ˜¯ï¼šç”¨æŒ‡ä»¤åŒ…è£…ä¸€äº›æ— ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“ä»¥æ‰©å±•ç»„ä»¶åŠŸèƒ½ã€‚è€Œä¸€ä¸ªå¥å£®çš„åº“é€šå¸¸ä¼šåŒ…å«ï¼šåˆå§‹åŒ–å®ä¾‹ã€å‚æ•°æ›´æ–°å’Œé‡Šæ”¾å®ä¾‹èµ„æºå ç”¨ç­‰æ“ä½œã€‚ 12345678910111213141516Vue.directive('hello', &#123; bind: function (el, binding) &#123; // åœ¨ bind é’©å­ä¸­åˆå§‹åŒ–åº“å®ä¾‹ // å¦‚æœéœ€è¦ä½¿ç”¨çˆ¶èŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥åœ¨ inserted é’©å­ä¸­æ‰§è¡Œ el.__library__ = new Library(el, binding.value) &#125;, update: function (el, binding) &#123; // æ¨¡ç‰ˆæ›´æ–°æ„å‘³ç€æŒ‡ä»¤çš„å‚æ•°å¯èƒ½è¢«æ”¹å˜ï¼Œè¿™é‡Œå¯ä»¥å¯¹åº“å®ä¾‹çš„å‚æ•°ä½œæ›´æ–° // é…Œæƒ…ä½¿ç”¨ update æˆ– componentUpdated é’©å­ el.__library__.setOptions(Object.assign(binding.oldValue, binding.value)) &#125;, unbind: function (el) &#123; // é‡Šæ”¾å®ä¾‹ el.__library__.destory() &#125;&#125;)","categories":[],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://summxu.github.io/tags/Vue/"}]},{"title":"ä½¿ç”¨é˜Ÿåˆ—è§£å†³æ’é˜Ÿä¸šåŠ¡åœºæ™¯","slug":"2019/queue-solve-continuous","date":"2019-03-01T01:02:36.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2019/queue-solve-continuous/","link":"","permalink":"https://summxu.github.io/2019/queue-solve-continuous/","excerpt":"","text":"ä¸ºäº†è¾¾åˆ°æ“ä½œå˜åŒ–çš„å®æ—¶æ€§ï¼Œåœ¨å¤šé€‰æ‹©é¡¹çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå¾€å¾€ç‚¹å‡»ä¸€æ¬¡å°±ä¼šå‘é€ä¸€æ¬¡ HTTP è¯·æ±‚ã€‚ä½†åŒæ—¶åˆé¢ä¸´å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨è¿ç»­ç‚¹å‡»åŒä¸€ä¸ªé€‰æ‹©é¡¹æ—¶ï¼Œå°±ä¼šè¿ç»­è§¦å‘é’ˆå¯¹æ­¤é¡¹çš„åˆ é™¤æˆ–æ·»åŠ é€»è¾‘ï¼Œè¿›è€Œè¿ç»­å‘é€ POST æˆ– DELETE è¯·æ±‚ã€‚ç†æƒ³çš„çŠ¶æ€æ˜¯ä¸Šä¸€ä¸ªè¯·æ±‚ç»“æŸåæ‰å¼€å§‹ä¸‹ä¸€ä¸ªè¯·æ±‚ï¼Œä½†æ˜¯ç½‘ç»œè¯·æ±‚æ˜¯å¼‚æ­¥çš„ã€è¯·æ±‚è€—æ—¶æ˜¯ä¸å¯æ§çš„ï¼Œä¹Ÿå°±æœ‰å¯èƒ½åœ¨æ­¤é¡¹çš„æ·»åŠ è¯·æ±‚æœªå®Œæˆå‰ï¼Œåˆ é™¤è¯·æ±‚å…ˆå®Œæˆäº†ã€‚ æˆ‘è§‰å¾—ç”¨â€œæ’é˜Ÿâ€æ¥æè¿°è¿™ä¸ªåœºæ™¯çœŸæ˜¯å†å¥½ä¸è¿‡äº†ã€‚ é˜Ÿåˆ—æ—¢ç„¶æœ‰äººè¦â€œæ’é˜Ÿâ€ï¼Œæˆ‘ä»¬å°±è¦å®šä¹‰ä¸€ä¸ªè§„åˆ™ï¼šå…ˆè¿›å…ˆå‡ºã€‚ä¹Ÿå°±æ˜¯æ•°æ®ç»“æ„ä¸­çš„â€œé˜Ÿåˆ—â€äº†ã€‚ javascript ä¸­é˜Ÿåˆ—çš„å®ç°ï¼š 1234567891011121314151617181920// å®ç°1var queue = []// è¿›é˜Ÿqueue.push(1)queue.push(2)queue.push(3)// å‡ºé˜Ÿqueue.shift() // 1queue.shift() // 2queue.shift() // 3// å®ç°2var queue2 = []// è¿›é˜Ÿqueue2.unshift(1)queue2.unshift(2)queue2.unshift(3)// å‡ºé˜Ÿqueue2.pop() // 1queue2.pop() // 2queue2.pop() // 3 å®è·µå®šä¹‰ä¸€ä¸ªæ•°ç»„å­˜æ”¾æ¯ä¸€æ¬¡ç‚¹å‡»çš„ HTTP è¯·æ±‚ï¼Œæ­¤å¤–ä¸ç®¡ä½ ä½¿ç”¨ä½•ç§å¼€å‘æŠ€æœ¯éƒ½åº”è¯¥æœ‰ä¸ªå‘é€è¯·æ±‚çš„å‡½æ•°æˆ–åº“ï¼Œå¦‚æœæ˜¯åŸºäº promise å°±æ›´å¥½äº†ï¼Œè¿™é‡Œç®€å•ç”¨ XHR ä»£æ›¿ã€‚ 12var requestQueue = []var XHR = function(method, url, param) &#123;&#125; ç‚¹å‡»æ“ä½œçš„å…¥å£å‡½æ•°ï¼Œå…ˆåˆ›å»ºè¯·æ±‚è¿›é˜Ÿã€‚å› ä¸ºç¬¬äºŒæ¬¡è¯·æ±‚å¿…é¡»è¦åœ¨ç¬¬ä¸€æ¬¡è¯·æ±‚å®Œæˆä¹‹åï¼Œæ‰€ä»¥åªæœ‰é˜Ÿåˆ—ä¸­ä»…å­˜åœ¨ä¸€ä¸ªè¯·æ±‚æ—¶æ‰å»è§¦å‘æ›´æ–°ã€‚ 123456function myClick(method, url, param) &#123; var len = requestQueue.push(XHR(method, url, param)) if(len === 1) &#123; update() &#125;&#125; æ‰§è¡Œçš„æ°¸è¿œæ˜¯é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªè¯·æ±‚ã€‚å½“ä¸€ä¸ªè¯·æ±‚å®Œæˆåï¼Œå°±å‡ºé˜Ÿï¼Œé˜Ÿåˆ—ä¸­å‰©ä½™çš„è¯·æ±‚ä¾æ¬¡å‰è¿›ä¸€ä¸ªä½ç½®ã€‚å¦‚æœå­˜åœ¨æœªå®Œæˆçš„è¯·æ±‚ï¼Œç»§ç»­è°ƒç”¨æ›´æ–°æ“ä½œã€‚ 1234567function update() &#123; requestQueue[0].then(function(res)&#123; // request success requestQueue.shift() requestQueue.length &amp;&amp; update() &#125;)&#125;","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://summxu.github.io/tags/JavaScript/"}]},{"title":"å¦‚ä½•ä¸ºCanvasä¸­ç‰¹å®šå›¾å½¢ç»‘å®šäº‹ä»¶ï¼Ÿ","slug":"2019/canvas-event","date":"2019-02-14T10:47:15.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2019/canvas-event/","link":"","permalink":"https://summxu.github.io/2019/canvas-event/","excerpt":"","text":"Canvas æœ¬èº«ä¹Ÿå±äº HTMLElementï¼Œè‡ªç„¶ä¹Ÿæ˜¯æ”¯æŒå„ç§äº‹ä»¶ç»‘å®šçš„ã€‚ä½†ç»˜åˆ¶åœ¨å…¶ä¸­çš„å›¾å½¢å¹¶ä¸ä½œä¸ºå…¶å­å…ƒç´ å­˜åœ¨ï¼Œè¿™å°±ä¸èƒ½æ–¹ä¾¿çš„ä¸º Canvas ä¸­çš„æŸä¸ªç‰¹å®šå›¾å½¢å»ç»‘å®šäº‹ä»¶ã€‚ æˆ‘ä»¬éƒ½çŸ¥é“ js ä¸­çš„äº‹ä»¶å§”æ‰˜ï¼Œå°†äº‹ä»¶ç»‘å®šåˆ°çˆ¶èŠ‚ç‚¹ä¸Šï¼Œå¾…åˆ°çˆ¶èŠ‚ç‚¹å“åº”äº‹ä»¶æ—¶ï¼ŒåŠ¨æ€åˆ¤æ–­å½“å‰å“åº”å…ƒç´ ä¸ºç›®æ ‡å­èŠ‚ç‚¹æ—¶å†æ‰§è¡Œå¯¹åº”çš„æ“ä½œã€‚ è¿™ä¸ªæ€æƒ³åŒæ ·ä¹Ÿå¯ä»¥ç”¨åœ¨ Canvas ä¸Šï¼Œåªéœ€è¦ä¸º canvas å…ƒç´ ç»‘å®šäº‹ä»¶ï¼Œäº‹ä»¶å“åº”æ—¶åˆ¤æ–­å½“å‰é¼ æ ‡ä½ç½®å¤„äºå“ªä¸ªå›¾å½¢ä¹‹ä¸Šï¼Œæ‰§è¡Œå¯¹åº”çš„æ“ä½œã€‚ isPointInPathcontext.isPointInPath(x, y); ç†è®ºä¸Šè®²ï¼Œæƒ³è¦çŸ¥é“ä¸€ä¸ªç‚¹æ˜¯å¦å¤„äºä¸€ä¸ªå›¾å½¢ä¹‹ä¸­ï¼Œç°æˆçš„ç®—æ³•åº”è¯¥æ˜¯æœ‰å¾ˆå¤šäº†ã€‚ä¸è¿‡éš¾å¾— canvas æœ¬èº«å°±æä¾›äº†è¿™æ ·çš„å‡½æ•°ï¼Œç”¨æ¥åˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯å¦å¤„äºå½“å‰è·¯å¾„ä¸­ã€‚ 1234var c = document.getElementById('canvas');var ctx = c.getContext('2d');ctx.rect(0, 0, 200, 200);console.log(ctx.isPointInPath(50, 100)) // true å°±åƒè¿™æ ·ï¼Œå½“ä½ åˆ›å»ºä¸€ä¸ªçŸ©å½¢æ—¶ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªè·¯å¾„ï¼Œæ­¤æ—¶å°±å¯ä»¥è°ƒç”¨è¯¥æ–¹æ³•å»åˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯å¦å­˜åœ¨äºè¯¥è·¯å¾„ã€‚ äº§ç”Ÿè·¯å¾„çš„å‡½æ•°è¿˜æœ‰å…¶ä»–ï¼Œæ¯”å¦‚ï¼šlineTo()ã€clip()ã€arc()ã€arcTo() ç­‰ã€‚ å®ç°å›¾å½¢çš„äº‹ä»¶ç»‘å®šå…ˆæ¥ä¸ªç®€å•çš„é¥¼å›¾å§ã€‚ 1234567891011121314151617181920var canvas = document.getElementById('c');var ctx = canvas.getContext('2d');var r = canvas.width / 2;ctx.beginPath();ctx.arc(r, r, r, 0, Math.PI * 1);ctx.fillStyle = '#2196f3'; //è“è‰²ctx.fill();ctx.beginPath();ctx.arc(r, r, r, Math.PI * 1, Math.PI * 2);ctx.fillStyle = '#f44336'; //çº¢è‰²ctx.fill();function isInPath (x, y)&#123; ctx.arc(r, r, r, 0, Math.PI * 1); return ctx.isPointInPath(x, y);&#125;canvas.addEventListener('click', function(e)&#123; if(isInPath(e.offsetX, e.offsetY)) &#123; console.log('hello') &#125;&#125;) ç°åœ¨åˆ›å»ºä¸€ä¸ªçº¢è“æ‹¼æ¥çš„é¥¼å›¾ï¼ŒisInPath æ–¹æ³•åˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯å¦å¤„äºè“è‰²åŒºã€‚ç†æƒ³çš„ç»“æœæ˜¯åªæœ‰å½“é¼ æ ‡ç‚¹å‡»åŒºåŸŸä¸ºè“è‰²åŒºåŸŸæ—¶æ‰è¾“å‡ºhelloã€‚ ä½†äº‹å®ç¡®ä¸æ˜¯å¦‚æ­¤ï¼Œç¤ºä¾‹Demoã€‚æ— è®ºç‚¹å‡»çº¢è‰²è¿˜æ˜¯è“è‰²åŒºåŸŸå‡ä¼šè¾“å‡º helloï¼Œè¿™æ˜¯æ€ä¹ˆå›äº‹å‘¢ è·¯å¾„æ—¢ç„¶ isPointInPath(x, y) çš„åŸºäºè·¯å¾„åˆ¤æ–­çš„ï¼Œé‚£æˆ‘ä»¬å°±ä»è·¯å¾„å…¥æ‰‹ã€‚ 123456ctx.arc(r, r, r, 0, Math.PI * 1);ctx.fillStyle = '#2196f3';ctx.fill();ctx.arc(r, r, r, Math.PI * 1, Math.PI * 2);ctx.fillStyle = '#f44336';ctx.fill(); å½“æˆ‘ä»¬æŠŠç”»å›¾æ—¶çš„ ctx.beginPath() å»æ‰åï¼Œå‘ç°ç”Ÿæˆçš„å›¾å½¢å˜æˆä¸€ä¸ªçº¢è‰²çš„æ•´åœ†äº†ï¼šç¤ºä¾‹Demoã€‚ beginPath() ç”¨æ¥é‡ç½®è·¯å¾„ï¼Œç”±äºç¬¬ä¸€ä¸ªåŠåœ†ç”»å®Œè·¯å¾„æœªé‡ç½®ï¼Œç¬¬äºŒä¸ªåŠåœ†å°±ç»˜åˆ¶äº†ä¸¤æ¡è·¯å¾„ã€‚è¿™ä¼¼ä¹è§£é‡Šäº†ä¸Šä¸ªé—®é¢˜çš„ç­”æ¡ˆã€‚ åœ¨ isInPath(x, y)å‡½æ•°ä¸­ï¼Œç”±äºè·¯å¾„æ²¡æœ‰é‡ç½®ï¼Œæ‰€ä»¥æœ€ç»ˆæœ€ç»ˆåˆ¤æ–­çš„ä¸æ­¢æ˜¯ ctx.arc(r, r, r, 0, Math.PI * 1) è¿™ä¸ªè·¯å¾„ï¼Œè¿˜æœ‰æ–¹æ³•å¤–çš„ç”»çº¢è‰²åœ†çš„è·¯å¾„ã€‚ä¸¤ä¸ªè·¯å¾„åŠ ä¸€èµ·è‡ªç„¶å°±æ˜¯ä¸ªæ•´åœ†ï¼Œæ‰€ä»¥æ— è®ºè“è‰²åŒºè¿˜æ˜¯çº¢è‰²åŒºéƒ½ä¼šè¾“å‡ºã€‚ æ­£ç¡®ç»“æœ12345function isInPath (x, y)&#123; ctx.beginPath(); ctx.arc(r, r, r, 0, Math.PI * 1); return ctx.isPointInPath(x, y)&#125; ä¿®æ”¹ isInPath å‡½æ•°ï¼ŒåŠ å…¥é‡ç½®è·¯å¾„ï¼Œç»“æœæ­£ç¡®è¾“å‡º","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://summxu.github.io/tags/JavaScript/"}]},{"title":"Vueç»„ä»¶é—´æ ·å¼æ±¡æŸ“å¤§å‘","slug":"2018/vue-scoped-keng","date":"2018-12-03T16:00:00.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2018/vue-scoped-keng/","link":"","permalink":"https://summxu.github.io/2018/vue-scoped-keng/","excerpt":"","text":"æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒVue ç»„ä»¶å†…çš„æ ·å¼å¯ä»¥å†™åœ¨ Style æ ‡ç­¾ä¸‹ï¼Œè€Œå„ç»„ä»¶ä¹‹é—´çš„æ ·å¼å†²çª(æ±¡æŸ“)é—®é¢˜ä¹Ÿååˆ†å¸¸è§ï¼Œå½“ç„¶æˆ‘ä»¬å¯ä»¥å°½é‡é¿å…èµ·ç›¸åŒçš„ç±»åï¼Œä½†é¡¹ç›®è¾ƒå¤§çš„æ—¶å€™ï¼ŒClassç±»åæ—¶è€Œä¼šå†²çªã€‚ å½“ç„¶ Vueå®˜æ–¹ä¹Ÿç»™äº†æˆ‘ä»¬è§£å†³æ–¹æ³•ï¼Œå°±æ˜¯å®šä¹‰äº† scoped è¿™ä¸ªå±æ€§çš„è®¾ç½®ï¼š è¿™ä¸ªå¯é€‰ scoped å±æ€§ä¼šè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªå”¯ä¸€çš„å±æ€§ (æ¯”å¦‚ data-v-21e5b78) ä¸ºç»„ä»¶å†… CSS æŒ‡å®šä½œç”¨åŸŸï¼Œç¼–è¯‘çš„æ—¶å€™ .list-container:hover ä¼šè¢«ç¼–è¯‘æˆç±»ä¼¼ .list-container[data-v-21e5b78]:hoverã€‚ æœ€åï¼ŒVue çš„å•æ–‡ä»¶ç»„ä»¶é‡Œçš„æ ·å¼è®¾ç½®æ˜¯éå¸¸çµæ´»çš„ã€‚é€šè¿‡ vue-loaderï¼Œä½ å¯ä»¥ä½¿ç”¨ä»»æ„é¢„å¤„ç†å™¨ã€åå¤„ç†å™¨ï¼Œç”šè‡³æ·±åº¦é›†æˆ CSS Modulesâ€”â€”å…¨éƒ¨éƒ½åœ¨ æ ‡ç­¾å†…ã€‚ ä½†æ˜¯é—®é¢˜å°±åœ¨äº è™½ç„¶åŠ äº†scoped,ä½†æ˜¯å´ä»çƒ­æ— æ³•é”ä½ç”¨@importå¼•å…¥çš„å¤–éƒ¨cssæ–‡ä»¶ è¿™é‡Œçš„è§£å†³æ–¹æ³•ä¹Ÿæ¯”è¾ƒç¥å¥‡ï¼Œå°±æ˜¯æŠŠå¼•å…¥çš„cssæ–‡ä»¶æ”¹ä¸ºä½¿ç”¨é¢„å¤„ç†å™¨å¤„ç†çš„ less sass æˆ–è€… styl æ–‡ä»¶ï¼Œå…·ä½“åŸç†æš‚æ—¶è¿˜ä¸å¾—è€ŒçŸ¥ ä½¿ç”¨ /deep/ æ¥è§£å†³æ›´æ·±ä¸€çº§çš„æ ‡ç­¾","categories":[],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://summxu.github.io/tags/Vue/"}],"author":"BoomXu"},{"title":"Vue.$emit Promise å›è°ƒåçš„æ·±å‘","slug":"2018/vue-emit-keng","date":"2018-09-24T16:00:00.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2018/vue-emit-keng/","link":"","permalink":"https://summxu.github.io/2018/vue-emit-keng/","excerpt":"","text":"æœ‰ä¸ªç™»å½•éœ€æ±‚ï¼Œæ˜¯ login.vue å±äº App.vue çš„å­ç»„ä»¶ï¼Œé»˜è®¤è·¯ç”±é¡µé¢æ˜¯è¿›å…¥ login.vue å› ä¸ºä½ ä¸€å¼€å§‹éœ€è¦éªŒè¯ç™»å½•ç”¨æˆ·ï¼Œåˆè¦é€šè¿‡ç™»å½•ç”¨æˆ·æ¥è¿›è¡Œ","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://summxu.github.io/tags/JavaScript/"},{"name":"Vue","slug":"Vue","permalink":"https://summxu.github.io/tags/Vue/"}],"author":"BoomXu"},{"title":"Express + æ¨¡æ¿å¼•æ“ + jQuery load å®ç°å±€éƒ¨é¡µé¢çš„å¼‚æ­¥åŠ è½½","slug":"2018/express-jqueryload","date":"2018-09-11T16:00:00.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2018/express-jqueryload/","link":"","permalink":"https://summxu.github.io/2018/express-jqueryload/","excerpt":"","text":"é¡¹ç›®åŒ¿åè¯„è®ºç³»ç»Ÿçš„å±€éƒ¨å¼‚æ­¥åŠ è½½æœåŠ¡çš„å®ç° é—®é¢˜éœ€æ±‚ç›®å‰çš„è®ºå›ç³»ç»Ÿå¸¦æœ‰èŠå¤©å®¤ï¼Œåœ¨æµè§ˆå¸–å­çš„åŒæ—¶å¯ä»¥éšæ—¶èŠå¤©ï¼Œè¿™å°±æ„å‘³ç€é¡µé¢ä¸èƒ½ç»å¸¸åˆ·æ–°ï¼Œä¸€æ˜¯åˆ·æ–°å°±ä¼šé‡è¿æœåŠ¡å™¨ï¼Œå¯¼è‡´ä¸€ç›´æ–­å¼€é‡è¿çš„çŠ¶æ€ï¼ŒäºŒæ˜¯åˆ·æ–°ä¹‹åèŠå¤©è®°å½•æ¶ˆå¤±ï¼Œè¿˜è¦åšæ•°æ®çš„æŒä¹…åŒ–ï¼Œå†è€…å°±æ˜¯å½±å“ç”¨æˆ·ä½“éªŒï¼Œæ‰€ä»¥æœ€å¥½çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯å¼‚æ­¥åŠ è½½å±€éƒ¨é¡µé¢ã€‚å‰åç«¯åˆ†ç¦»æ˜¯æŒºå¥½åšï¼Œç›´æ¥loadåŠ è½½æœ¬åœ°é¡µé¢å°±å¯ä»¥ï¼Œä½†ä¸€å’Œexpressç»“åˆèµ·æ¥å°±ä¸çŸ¥é“è¯¥æ€ä¹ˆåŠäº†ã€‚ è§£å†³æ–¹æ¡ˆå…¶å®ä»”ç»†æ€è€ƒè¿™ä¸ªé—®é¢˜å¹¶ä¸å¤æ‚ï¼Œå’Œå‰åç«¯åˆ†ç¦»çš„æ¨¡å¼æ˜¯å®Œå…¨ä¸€æ¨¡ä¸€æ ·çš„ï¼Œåªæ˜¯æŠŠæœ¬åœ°è¦åŠ è½½çš„å±€éƒ¨é¡µé¢æ¢æˆäº†æœåŠ¡å™¨ä¸Šæ¸²æŸ“å‡ºæ¥çš„å±€éƒ¨é¡µé¢ ã€‚ è¿™æ—¶å°±éœ€è¦é‡æ–°é…ç½®expressçš„è·¯ç”±å’Œ render çš„é¡µé¢åˆ†ç¦»ï¼Œè·¯ç”±å¤šäº†ä¸¤æ¡ï¼š 123456789101112131415161718192021.get('/main',(req,res) =&gt; &#123; mongo.Post.find((err, postdata) =&gt; &#123; if (err) return res.status(500) /* å¯¹è±¡å±æ€§æŠ½ç¦»ï¼Œè§£å†³templateé™·å…¥é€’å½’ */ /* mogonå–å‡ºçš„å¯¹è±¡ä¸æ­£å¸¸ï¼Œè½¬æ¢ä¸€ä¸‹ */ var data = JSON.stringify(postdata) data = JSON.parse(data) var images = [] data.forEach((element, a) =&gt; &#123; images.push(element.images) delete element.images &#125;); res.render('./components/main.html', &#123; post: data, images: images &#125;) &#125;)&#125;).get('/sendpost',(req,res) =&gt; &#123; res.render('./components/sendpost.html')&#125;) æ¸²æŸ“å‡ºç‹¬ç«‹é¡µé¢ï¼Œè¿™æ˜¯å„ä¸ªé¡µé¢çš„è·¯å¾„åˆ†é…ï¼š è¿™æ ·ä¸¤ä¸ªåœ¨æœåŠ¡å™¨è·¯å¾„ä¸­çœŸå®å­˜åœ¨çš„é¡µé¢å‡ºæ¥äº†ï¼Œé€šè¿‡æµè§ˆå™¨ä¹Ÿèƒ½è®¿é—®ï¼Œåªä¸è¿‡æ²¡äº†æ ·å¼ï¼š åœ¨å®¢æˆ·ç«¯ä¸Šå†™ä¸Šè¿™ä¹ˆä¸€å¥ï¼Œå°±å¤§åŠŸå‘Šæˆäº†ï¼ï¼ $(&#39;.center .left&#39;).load(&quot;/main&quot;);$(&#39;.center .left&#39;).load(&quot;/sendpost&quot;);","categories":[],"tags":[{"name":"jQuery","slug":"jQuery","permalink":"https://summxu.github.io/tags/jQuery/"},{"name":"Node.js","slug":"Node-js","permalink":"https://summxu.github.io/tags/Node-js/"}],"author":"BoomXu"},{"title":"MongoDBçš„æŸ¥æ‰¾findæ–¹æ³•å–å‡ºä¸æ­£ç»å¯¹è±¡","slug":"2018/mongo-object-files","date":"2018-09-09T16:00:00.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2018/mongo-object-files/","link":"","permalink":"https://summxu.github.io/2018/mongo-object-files/","excerpt":"","text":"é¡¹ç›®åŒ¿åè¯„è®ºç³»ç»Ÿçš„MongoDBæ“ä½œ èµ·å› ï¼šç”¨art-templateæ¥æ¸²æŸ“å‰ç«¯é¡µé¢çš„æ—¶å€™ï¼Œæ•°ç»„é‡ŒåˆåŒ…å«äº†æ•°ç»„ï¼Œè¿™æ˜¯æ¨¡æ¿å¼•æ“æŠ¥äº†ä¸€ä¸ªé€’å½’é”™è¯¯ï¼Œè²Œä¼¼ æ¨¡æ¿å¼•æ“ä¸æ”¯æŒé€’å½’ï¼Ÿ æƒ³åˆ°çš„è§£å†³åŠæ³•æ˜¯å¯¹è±¡çš„ æ•°ç»„å±æ€§ åˆ†ç¦»æ¸²æŸ“ï¼Œåœ¨åˆ é™¤å¯¹è±¡å±æ€§æ—¶é‡åˆ°äº†é—®é¢˜ã€‚ delete æ–¹æ³•åŸç”Ÿ js ä¸­æ”¯æŒ delete æ–¹æ³•ï¼Œå³åˆ é™¤å¯¹è±¡é‡Œçš„æŸä¸ªå±æ€§ï¼Œå¹¶ä¸”å¸¦æœ‰ä¸€ä¸ªå¸ƒå°”ç±»å‹çš„è¿”å›å€¼ï¼Œæœ¬äº‹ä¸€ä¸ªå¾ˆç®€å•çš„äº‹æƒ…ï¼Œæ”¾åˆ°æ™®é€šä»£ç ä¸­ä¹Ÿå¾ˆå¥½å®ç°ï¼Œä½†æ˜¯å’ŒMongoDBé›†åˆèµ·æ¥çš„æ—¶å€™ï¼Œå°±å‡ºäº†é—®é¢˜ã€‚ åŸå› å°±æ˜¯ mongoDB find å‡ºæ¥çš„å¯¹è±¡ ä¸æ­£ç» è¿™é‡Œçš„idæ²¡æœ‰å¼•å·ï¼ŒåŸæœ¬jsä»£ç æ˜¯ä¸èƒ½æ‰§è¡Œï¼Œæ›´ä¸èƒ½ç›´æ¥åˆ é™¤å¯¹è±¡çš„å±æ€§å€¼ï¼Œä½†æ˜¯è¿™é‡Œå¾ˆå¥‡æ€ªçš„æ˜¯ï¼Œjså±…ç„¶ä¸ä¼šæŠ¥é”™ï¼Ÿï¼Ÿè€ŒæŠŠè¿™ä¸ªå¯¹è±¡æ ¼å¼ç›´æ¥å¤åˆ¶åˆ°æ­£å¸¸ç¨‹åºé‡Œå´æŠ¥é”™ã€‚ æ­£ç¡®çš„è§£å†³åŠæ³•å°±æ˜¯è½¬æ¢ä¸€ä¸‹ å¯¹è±¡çš„ç±»å‹ï¼š 1234/* å¯¹è±¡å±æ€§æŠ½ç¦»ï¼Œè§£å†³templateé™·å…¥é€’å½’ *//* mogonå–å‡ºçš„å¯¹è±¡ä¸æ­£å¸¸ï¼Œè½¬æ¢ä¸€ä¸‹ */var data = JSON.stringify(postdata)data = JSON.parse(data) å¾ªç¯åµŒå¥—çš„å¼‚æ­¥è¿˜é‡åˆ°å°±æ˜¯å¾ªç¯å›¾ç‰‡çš„æ—¶å€™ï¼Œç­‰å¾ªç¯ç»“æŸè¦resã€‚sendï¼ˆï¼‰å›¾ç‰‡æ•°ç»„ï¼Œä½†æ˜¯ fs.rename æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œè¦ç­‰åˆ°å¾ªç¯ç»“æŸï¼Œå¯ä»¥è¿™ä¹ˆæ“ä½œï¼š 12345678910111213141516171819202122if (req.files.pic.length &gt; 1) &#123; var c = req.files.pic.length req.files.pic.forEach(item =&gt; &#123; var target_path = &apos;./upload/&apos; + item.name fs.rename(&apos;./&apos; + item.path, target_path, function (err) &#123; if (err) throw err; postObj.images.push(target_path.replace(&apos;.&apos;,&apos;&apos;)) c--; if (c === 0 )&#123; console.log(postObj.images) postObj.save((err, result) =&gt; &#123; if (err) throw err res.send(&apos;success&apos;) &#125;) &#125; // åˆ é™¤ä¸´æ—¶æ–‡ä»¶å¤¹æ–‡ä»¶, fs.unlink(&apos;./&apos; + item.path, function () &#123; if (err) throw err; &#125;); &#125;); &#125;); ç”¨è®¡æ•°å™¨åˆ¤æ–­å¾ªç¯çš„æ¬¡æ•°ï¼Œä¸º 0 æ—¶æ‰§è¡Œä»£ç ã€‚ å¬è¯´ç”¨é€’å½’ä¹Ÿå¯ä»¥","categories":[],"tags":[{"name":"Node.js","slug":"Node-js","permalink":"https://summxu.github.io/tags/Node-js/"}],"author":"BoomXu"},{"title":"Webæ–‡ä»¶ä¸Šä¼ å®ç°","slug":"2018/upload-files","date":"2018-09-09T16:00:00.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2018/upload-files/","link":"","permalink":"https://summxu.github.io/2018/upload-files/","excerpt":"","text":"é¡¹ç›®åŒ¿åè¯„è®ºç³»ç»Ÿçš„æ–‡ä»¶ä¸Šä¼ æœåŠ¡çš„å®ç° åšäº†ä¸ªåŒ¿åè¯„è®ºè®ºå›çš„å°ç³»ç»Ÿï¼Œé‡Œé¢æ¶‰åŠåˆ°äº†å›¾ç‰‡çš„ä¸Šä¼ ï¼ŒæœŸé—´é‡åˆ°çš„é—®é¢˜æ±‡æ€»ã€‚ HTMLé¦–å…ˆä¸Šä¼ æ–‡ä»¶è¿˜æ˜¯è¦å¥—åˆ°formè¡¨å•é‡Œï¼Œå¹¶ä¸”æ–‡ä»¶ä¸Šä¼ æ˜¯ input type = file çš„ä¸€ä¸ªæ ‡ç­¾â€˜ 12345678&lt;form id=&quot;form1&quot; method=&quot;POST&quot; enctype =&quot;multipart/form-data&quot;&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label class=&quot;color&quot; for=&quot;exampleInputFile&quot;&gt;å›¾ç‰‡å‘è¡¨&lt;/label&gt; &lt;input class=&quot;color&quot; type=&quot;file&quot; id=&quot;exampleInputFile&quot; multiple=&quot;multiple&quot; onchange=&quot;imagechange(this)&quot; value=&quot;&quot;&gt; &lt;/div&gt; &lt;textarea style=&quot;resize:none;&quot; name=&quot;content&quot; class=&quot;form-control&quot; rows=&quot;9&quot;&gt;&lt;/textarea&gt; &lt;button style=&quot;margin-top:10px;&quot; type=&quot;button&quot; onclick=&quot;upload1()&quot; class=&quot;btn btn-primary btn-lg btn-block&quot;&gt;å‘è¡¨å‘è¡¨å‘å‘è¡¨å‘è¡¨å‘è¡¨è¡¨å‘å‘è¡¨å‘è¡¨&lt;/button&gt;&lt;/form&gt; è¿™é‡Œä¸Šè¡¨å•ä¸Šä¼ å¤šäº†ä¸€ä¸ª enctype =&quot;multipart/form-data&quot; å±æ€§ï¼Œè¿™æ˜¯ä»£è¡¨è¡¨å•å¯ä»¥ä¸Šä¼ å¸¦æœ‰æ•°æ®çš„æ–‡ä»¶ã€‚input type = file çš„æ§ä»¶æ˜¯æ–‡ä»¶æ ‡ç­¾ï¼Œå…¶ä¸­ class=&quot;form-control&quot; æ˜¯å¯ä»¥ä¸Šä¼ å¤šä¸ªæ–‡ä»¶ï¼Ÿ ï¼ˆä½†æˆ‘å®è·µä¸Šè¿™ä¸ªå±æ€§å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œæœ€åè¿˜æ˜¯åœ¨jsé‡Œpushäº†å¤šæ–‡ä»¶ä¸Šä¼ ï¼‰ onchange=&quot;imagechange(this)&quot; è¿™ä¸ªæ˜¯åœ¨æ–‡ä»¶é€‰æ‹©è¢«æ”¹å˜çš„äº‹ä»¶ï¼Œè¿™é‡ŒæŠŠæœ¬domå¯¹è±¡ä¼ ç»™jså°±ä¸ç”¨éº»çƒ¦çš„è·å–è¯¥domå¯¹è±¡äº†ã€‚ å…¶ä¸­è¯¥domèŠ‚ç‚¹æœ‰ä¸€ä¸ªfileså¯¹è±¡ï¼Œè¿™æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œé¢æ”¾äº†æ–‡ä»¶çš„å¯¹è±¡ï¼ŒæŒ‰é“ç†æ¥è¯´ enctype =&quot;multipart/form-data&quot;ä¼šåœ¨è¿™é‡Œç”Ÿæ•ˆåœ¨å¤šæ–‡ä»¶çš„æ—¶å€™å¾€filesé‡Œæ·»åŠ å¤šä¸ªæ–‡ä»¶ï¼Œä½†å®é™…å¹¶æ²¡æœ‰ï¼Œæ–°çš„æ–‡ä»¶è¿˜æ˜¯æŠŠæ—§çš„æ–‡ä»¶è¦†ç›–äº†ã€‚æ‰€ä»¥ä¸‹é¢æˆ‘æ‰‹åŠ¨pushåˆ°äº†ä¸€ä¸ªæ–°çš„æ•°ç»„é‡Œã€‚è¿™åœ°æ–¹è¿˜æœ‰å¾…ç ”ç©¶ æ³¨æ„çš„æ˜¯è¿™é‡Œä¸€ä¸ªå‘ï¼Œå½“æˆ‘æŠŠå‡½æ•°åå‘½åä¸º upload çš„æ—¶å€™ï¼Œå±…ç„¶ä¸ä¼šç”Ÿæ•ˆï¼Ÿ éš¾é“æ˜¯å‡½æ•°å‘½åæœ‰å†²çªï¼Ÿ JS12345678910111213141516171819202122232425function imagechange(a) &#123; files.push(a.files);&#125;function upload1() &#123; var fd = new FormData(document.getElementById(&apos;form1&apos;)) files.forEach(item =&gt; &#123; fd.append(&apos;pic&apos;,item[0]) &#125;); fd.append(&apos;postuser&apos;,&apos;å°å…µæ—­æ—­&apos;) $.ajax(&#123; url: &quot;/sendpost&quot;, type: &quot;POST&quot;, data: fd, sync: false, processData: false, // å‘Šè¯‰jQueryä¸è¦å»å¤„ç†å‘é€çš„æ•°æ® contentType: false, // å‘Šè¯‰jQueryä¸è¦å»è®¾ç½®Content-Typeè¯·æ±‚å¤´ success: function(response,status,xhr)&#123; console.log(xhr); if (response === &apos;success&apos;) &#123; $(&apos;#sendpost&apos;).toggle(); location.reload() &#125; &#125; &#125;);&#125; jsé‡Œæ˜¯ç”¨äº†æ–°çš„ FormData å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å¯ä»¥æ¥æ”¶ä¸€ä¸ªformè¡¨å•çš„å¯¹è±¡ï¼Œå¹¶ä¸” FormData å¯ä»¥è‡ªå·±æ·»åŠ å±æ€§çš„ï¼Œä»–ä¼šä¸€å¹¶è·Ÿéšä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šã€‚è¿™é‡ŒæŠŠæ–‡ä»¶æ•°ç»„æ·»åŠ äº†è¿›å»ï¼Œå†é€šè¿‡ajaxå¼‚æ­¥å‘é€åˆ°æœåŠ¡å™¨ï¼Œæ‘†è„±äº†é¡µé¢åœæ­¢å“åº”çš„å¼‚æ­¥è¡¨å•æäº¤ã€‚ ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç›´æ¥console.logï¼ˆFormDataï¼‰çš„å¯¹è±¡çœ‹ä¸Šå»æ˜¯ä¸ªç©ºçš„å¯¹è±¡ï¼Œä»–ä¼ çš„å‚æ•°æ˜¯ä¸ç›´æ¥åœ¨å¯¹è±¡é‡Œçš„ï¼Œè€Œåœ¨å¯¹è±¡çš„æ›´æ·±å¤„ è¿™ç§æƒ…å†µå¯ä»¥åœ¨ network é‡ŒæŸ¥çœ‹åˆ°ä¼ å‡ºçš„å‚æ•° Nodeâ€¦åœ¨Nodeæ¥æ”¶æ–‡ä»¶çš„æ—¶å€™ä¹Ÿæœ‰è®¸å¤šå‘ï¼Œå…¶ä¸­å°±æ˜¯ express æ¥æ”¶postçš„è¯·æ±‚ï¼Œå¹¶ä¸”å«æœ‰æ–‡ä»¶æ•°æ®è¯·æ±‚çš„æ—¶å€™ï¼Œéœ€è¦ä¸€ä¸ªä¸­é—´ä»¶ 1234const multiparty = require(&apos;connect-multiparty&apos;).use(multiparty(&#123;uploadDir:&apos;./linshi&apos;&#125;))var mutipartMiddeware = multiparty();.post(&apos;/sendpost&apos;, mutipartMiddeware, (req, res) =&gt; &#123;&#125;) {uploadDir:â€™./linshiâ€™} é…ç½®äº†è¯¥ä¸­é—´ä»¶æ¥æ”¶åˆ°çš„æ–‡ä»¶å­˜æ”¾çš„ä¸´æ—¶ç›®å½•ã€‚å¹¶ä¸”è¯¥ä¸­é—´ä»¶æ¥æ”¶åˆ°çš„resæœ‰ä»¥ä¸‹å‡ ä¸ªæœ‰ç”¨çš„å‚æ•°ï¼š 1234req.body: è¯·æ±‚ä½“req.files: æ¥æ”¶åˆ°çš„æ–‡ä»¶æ•°ç»„req.files.file.path: ä¸´æ—¶å­˜æ”¾æ–‡ä»¶çš„è·¯å¾„req.files.file.name: æ¥æ”¶åˆ°çš„æ–‡ä»¶åå­— ä¸Šé¢æ³¨æ„åˆ°ï¼Œè¯¥ä¸­é—´ä»¶å­˜æ”¾çš„æ˜¯ä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶ä¸”æ–‡ä»¶åæ˜¯éšæœºå‘½åçš„ï¼ˆreqå±æ€§é‡Œæœ‰çœŸå®çš„æ–‡ä»¶åå­—ï¼‰ï¼Œå¦‚æœæƒ³æ­£å¸¸ä¿å­˜ä¸Šä¼ æ¥çš„æ–‡ä»¶ï¼Œè¿˜æ˜¯éœ€è¦è‡ªå·±æ‰‹åŠ¨å»å¤„ç†ï¼š 12345678var target_path = &apos;./upload/&apos; + req.files.pic.namefs.rename(&apos;./&apos; + req.files.pic.path, target_path, function (err) &#123; if (err) throw err; postObj.images.push(target_path.replace(&apos;.&apos;,&apos;&apos;)) // åˆ é™¤ä¸´æ—¶æ–‡ä»¶å¤¹æ–‡ä»¶, fs.unlink(&apos;./&apos; + req.files.pic.path, function () &#123; if (err) throw err; &#125;); è¿™æ ·ä¸€ä¸ªåŸºæœ¬çš„æ–‡ä»¶ä¸Šä¼ æœåŠ¡å°±å®Œæˆäº†ï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šåˆ¤æ–­éœ€è¦è‡ªå·±æ‰‹åŠ¨å»å®ç°ã€‚è¿™é‡Œæ˜¯ä½¿ç”¨äº† FormData å¯¹è±¡ï¼ŒMDNä¸Šä¹Ÿç»™å‡ºäº†ä¸ä½¿ç”¨è¯¥å¯¹è±¡çš„æ–¹æ³•ã€‚ FromDataä¸Šä¼ æ–‡ä»¶çš„æ–¹æ³• Ajaxåºåˆ—åŒ–åŠæ–‡ä»¶ä¸Šä¼ ","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://summxu.github.io/tags/JavaScript/"},{"name":"Node.js","slug":"Node-js","permalink":"https://summxu.github.io/tags/Node-js/"}],"author":"BoomXu"},{"title":"Vue-resouceæ”¹ä¸ºAxiosä¹‹æ—…","slug":"2018/vue-axios","date":"2018-08-27T16:00:00.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2018/vue-axios/","link":"","permalink":"https://summxu.github.io/2018/vue-axios/","excerpt":"","text":"å°¤é›¨æºªè¯´äº†ï¼Œvue2.0 å°†ä¸å†ç»´æŠ¤è‡ªå·±çš„åŸç”Ÿè¯·æ±‚æ’ä»¶ vue-resource è€Œæ¨èä½¿ç”¨axiosï¼Œæ‰€ä»¥ä»¥åå°±ç”¨axiosæ¥å‘é€vueè¯·æ±‚äº†ã€‚ ä½¿ç”¨ cnpm å®‰è£… axioscnpm install axios --save-dev å®‰è£…å…¶ä»–æ’ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥åœ¨ main.js ä¸­å¼•å…¥å¹¶ Vue.use()ï¼Œä½†æ˜¯ axios å¹¶ä¸èƒ½ useï¼Œåªèƒ½æ¯ä¸ªéœ€è¦å‘é€è¯·æ±‚çš„ç»„ä»¶ä¸­å³æ—¶å¼•å…¥ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰ä¸¤ç§å¼€å‘æ€è·¯ï¼Œä¸€æ˜¯åœ¨å¼•å…¥ axios ä¹‹åï¼Œä¿®æ”¹åŸå‹é“¾ï¼ŒäºŒæ˜¯ç»“åˆ Vuexï¼Œå°è£…ä¸€ä¸ª acitonã€‚è¿™é‡Œåªè¯´ä¿®æ”¹åŸå‹é“¾çš„æ–¹å¼æ”¹å†™åŸå‹é“¾ é¦–å…ˆåœ¨ main.js ä¸­å¼•å…¥ axiosimport axios from &#39;axios&#39; è¿™æ—¶å€™å¦‚æœåœ¨å…¶å®ƒçš„ç»„ä»¶ä¸­ï¼Œæ˜¯æ— æ³•ä½¿ç”¨ axios å‘½ä»¤çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å°† axios æ”¹å†™ä¸º Vue çš„åŸå‹å±æ€§ Vue.prototype.$http= axios åœ¨ main.js ä¸­æ·»åŠ äº†è¿™ä¸¤è¡Œä»£ç ä¹‹åï¼Œå°±èƒ½ç›´æ¥åœ¨ç»„ä»¶çš„ methods ä¸­ä½¿ç”¨ $httpå‘½ä»¤ä¾‹å¦‚ 12345678910methods: &#123; show() &#123; this.$http(&#123; method: &apos;get&apos;, url: &apos;/user&apos;, data: &#123; name: &apos;virus&apos; &#125; &#125;)&#125; é…ç½® axioså®é™…ä¸Šåªæœ‰ url æ˜¯å¿…é¡»çš„ï¼Œå®Œæ•´çš„ api å¯ä»¥å‚è€ƒhttps://link.jianshu.com/?t=https://www.kancloud.cn/yunye/axios/234845 å¯¹äºgetè¯·æ±‚ 12345axios.get(&apos;/user&apos;, &#123; params:&#123; name:&quot;virus&quot; &#125;&#125;) å¯¹äºPOSTè¯·æ±‚ 123axios.post(&apos;/user&apos;,&#123; name:&quot;virus&quot; &#125;) ä¸€æ¬¡å¹¶å‘å¤šä¸ªè¯·æ±‚ 12345678910function getUserAccount()&#123; return axios.get(&apos;/user/12345&apos;);&#125;function getUserPermissions()&#123; return axios.get(&apos;/user/12345/permissions&apos;);&#125;axios.all([getUserAccount(),getUserPermissions()]) .then(axios.spread(function(acct,perms)&#123; //å½“è¿™ä¸¤ä¸ªè¯·æ±‚éƒ½å®Œæˆçš„æ—¶å€™ä¼šè§¦å‘è¿™ä¸ªå‡½æ•°ï¼Œä¸¤ä¸ªå‚æ•°åˆ†åˆ«ä»£è¡¨è¿”å›çš„ç»“æœ &#125;)) axioså¯ä»¥é€šè¿‡é…ç½®ï¼ˆconfigï¼‰æ¥å‘é€è¯·æ±‚ 1234567axios(&#123; method:&quot;POST&quot;, url:&apos;/user/1111&apos;, data:&#123; name:&quot;virus&quot; &#125;&#125;); å®Œæ•´çš„è¯·æ±‚è¿˜åº”å½“åŒ…æ‹¬ .then å’Œ .catch 123456.then(function(res)&#123; console.log(res) &#125;).catch(function(err)&#123; console.log(err) &#125;) å½“è¯·æ±‚æˆåŠŸæ—¶ï¼Œä¼šæ‰§è¡Œ .thenï¼Œå¦åˆ™æ‰§è¡Œ .catchè¿™ä¸¤ä¸ªå›è°ƒå‡½æ•°éƒ½æœ‰å„è‡ªç‹¬ç«‹çš„ä½œç”¨åŸŸï¼Œå¦‚æœç›´æ¥åœ¨é‡Œé¢è®¿é—® thisï¼Œæ— æ³•è®¿é—®åˆ° Vue å®ä¾‹,è¿™æ—¶åªè¦æ·»åŠ ä¸€ä¸ª .bind(this) å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ 123.then(function(res)&#123; console.log(this.data)&#125;.bind(this)) è¯·æ±‚æ–¹å¼çš„åˆ«åï¼Œè¿™é‡Œå¯¹æ‰€æœ‰å·²ç»æ”¯æŒçš„è¯·æ±‚æ–¹å¼éƒ½æä¾›äº†æ–¹ä¾¿çš„åˆ«å12345678910111213axios.request(config);axios.get(url[,config]);axios.delete(url[,config]);axios.head(url[,config]);axios.post(url[,data[,config]]);axios.put(url[,data[,config]])axios.patch(url[,data[,config]])","categories":[],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://summxu.github.io/tags/Vue/"}],"author":"BoomXu"},{"title":"Bootstrapå“åº”å¼è½®æ’­å›¾é—®é¢˜","slug":"2018/mobileweb-bootstrap-slide","date":"2018-08-24T16:00:00.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2018/mobileweb-bootstrap-slide/","link":"","permalink":"https://summxu.github.io/2018/mobileweb-bootstrap-slide/","excerpt":"","text":"bootstrap åŸç”Ÿè½®æ’­å›¾ï¼Œå› ä¸ºè½®æ’­å›¾æ˜¯å›¾ç‰‡ï¼Œæ‰€ä»¥ä¸ºäº†åšå“åº”å¼å°±è¦éº»çƒ¦ä¸€äº›ï¼Œå› ä¸ºè¦æ¶‰åŠåˆ°å›¾ç‰‡çš„å¤§å°è¿˜æœ‰å°å±å¹•çš„æ˜¾ç¤ºæ¯”ä¾‹ï¼ŒæŠŠè¿™æ¬¡é‡åˆ°çš„é—®é¢˜é‡æ–°æ‹ä¸€ä¸‹ ã€‚ ä¸¤ç«™å•ç‹¬è®¾è®¡å› ä¸ºPCç«¯çš„è½®æ’­å›¾æ˜¯å®šé«˜çš„ï¼Œè€Œä¸”å›¾ç‰‡å°ºå¯¸åˆå¤§ï¼Œä½†æ˜¯ç§»åŠ¨ç«¯æ˜¯ç™¾åˆ†æ¯”å¯ç¼©å°çš„ï¼Œå›¾ç‰‡æ˜¯å°å›¾ï¼Œæ‰€ä»¥åªèƒ½æ˜¯ä¸¤ç«™å•ç‹¬è®¾è®¡ï¼Œè¿™æ˜¯ä¸¤ç«™å•ç‹¬çš„CSS: 1234567891011121314.pc_img &#123; display: block; height: 400px; background: no-repeat center; background-size: cover;&#125;.m_img &#123; display: block; width: 100%;&#125;.m_img img&#123; display: block; width: 100%;&#125; è¿™æ ·HTMLçš„ç»“æ„å°±å¯ä»¥è¿™ä¹ˆæ”¾(ç”¨äº†æ¨¡æ¿å¼•æ“ä¹‹å)ï¼Œå¹¶ä¸”ç”¨äº†å“åº”å¼å·¥å…·ä½¿ä¸¤è€…å®ç°ä¸åŒå±å¹•å°ºå¯¸å•ç‹¬æ˜¾ç¤ºï¼Œä¸ä¼šåŒæ—¶æ˜¾ç¤ºå‡ºæ¥ã€‚ã€‚ 1234&lt;div class=&quot;item &#123; &#123; $index ? &apos;&apos; : &apos;active&apos;&#125; &#125;&quot;&gt; &lt;a class=&quot;m_img hidden-lg hidden-md hidden-sm&quot; alt=&quot;&#123; &#123;$index&#125; &#125; slide&quot;&gt;&lt;img src=&quot;&#123; &#123;$value&#125; &#125;&quot; alt=&quot;&quot; srcset=&quot;&quot;&gt;&lt;/a&gt; &lt;a class=&quot;pc_img hidden-xs&quot; alt=&quot;&#123; &#123;$index&#125; &#125; slide&quot; style=&quot;background-image: url(&apos;&#123; &#123;$value&#125; &#125;&apos;);&quot;&gt;&lt;/a&gt;&lt;/div&gt; è¿™æ ·è™½è¯´æ˜¯è§†è§‰ä¸Šçœ‹ä¸å‡ºæ¥æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯åœ¨è¯·æ±‚ä¸­ä¸¤è€…éƒ½ä¼šåŒæ—¶è¯·æ±‚ï¼ŒåŠ è½½çš„å›¾ç‰‡å¤ªå¤šï¼Œè€Œä¸”åªæ˜¯å°å±å¹•çš„è¯ï¼Œä¼šå¤šåŠ è½½å¤§å±å¹•ä¸­çš„å¤§å›¾ç‰‡ã€‚ã€‚ã€‚ ä¸ºäº†ä¼˜åŒ– ä¸å¾—ä¸ç”¨jsåˆ¤æ–­è®¿é—®çš„å±å¹•å¤§å°ã€‚è¿™æ ·ä¸€ç³»åˆ—çš„é—®é¢˜å°±æ¥äº†ã€‚ å±å¹•å¤§å°åˆ¤æ–­å¹¶å•ç‹¬åŠ è½½å› ä¸ºè¦å•ç‹¬åˆ¤æ–­å½“å‰å±å¹•çš„å¤§å°æ¥æŒ‡å®šåˆ°åº•è¦åŠ è½½å“ªç§å›¾ç‰‡ï¼Œä»€ä¹ˆç»“æ„ï¼Œåˆè¦åšå“åº”å¼ï¼Œå°±ä¼šæ¶‰åŠåˆ°ä»¥ä¸‹ä¸¤ç‚¹é—®é¢˜ï¼š åˆ¤æ–­é¡µé¢å¤§å°ï¼Œè¯·æ±‚é¡µé¢æ•°æ®ï¼Œæ¸²æŸ“æ¨¡æ¿å¼•æ“ å“åº”å¼å®æ—¶åˆ¤æ–­é¡µé¢å¤§å°ï¼Œè€Œä¸é‡å¤å‘é€è¯·æ±‚ éš¾ç‚¹åœ¨ç¬¬äºŒç‚¹ï¼Œæˆ‘ä»¬åªéœ€è¦é¡µé¢åœ¨éœ€è¦è¯·æ±‚æ•°æ®çš„æ—¶å€™æ‰ä¸å¾—ä¸è¯·æ±‚ï¼ˆå¦‚æœç°åœ¨æ˜¯å¤§å±å¹•ï¼Œåªè¯·æ±‚å¤§å›¾ç‰‡ï¼Œå¦‚æœæ˜¯å°å±å¹•ï¼Œä¹‹è¯·æ±‚å°å›¾ç‰‡ã€‚å¦‚æœä»å¤§å±å¹•å“åº”å¼åˆ°äº†å°å±å¹•ï¼Œè¿™æ—¶ä¸å¾—ä¸å†å»æ±‚æƒ…ä¸€æ¬¡ï¼‰ åšå“åº”å¼ï¼Œå®æ—¶åˆ¤æ–­é¡µé¢å¤§å°ï¼Œåˆä¸ç”¨æ¯æ¬¡æ”¹å˜å¤§å°æ—¶å»å®æ—¶å‘é€è¯·ã€‚è¿™æ—¶æˆ‘ä»¬å¯ä»¥åœ¨ç‰¹å®šçš„æ—¶å€™æ¥è¯·æ±‚æ•°æ®ï¼Œå¹¶æŠŠæ•°æ®ç¼“å­˜ä¸‹æ¥ï¼Œè¿™é‡Œç”¨çš„æ–¹æ³•æ˜¯ç»‘å®šåˆ° window ä¸Šä¸€ä¸ªå…¨å±€å¯¹è±¡çš„å±æ€§ï¼Œå¹¶ä¸”ç”¨ å›è°ƒå‡½æ•° æŠŠå…¨å±€å¯¹è±¡çš„å±æ€§è¿”å›ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/* åˆ¤æ–­è®¿é—®æ¥æº ï¼Œ ä»¥ä¾¿ä½¿pcå’Œméƒ½åŠ è½½ */$(document).ready(function () &#123; function getData(callback) &#123; /* åˆ¤æ–­ window.data æ˜¯ä¸æ˜¯æœ‰ç¼“å­˜æ•°æ® */ if (window.data) &#123; callback &amp;&amp; callback(window.data) &#125;else &#123; $.ajax(&#123; type: &quot;GET&quot;, url: &quot;./data.json&quot;, dataType: &quot;json&quot;, // async: false, success: function (response) &#123; window.data = response callback &amp;&amp; callback(window.data) &#125; &#125;); &#125; &#125; function render() &#123; /* è¿™é‡Œé€šè¿‡å›è°ƒå‡½æ•°è·å–ä¼ é€’è¿‡æ¥çš„æ•°æ®ï¼Œæ˜¯ä¸ºäº†æ¯æ¬¡è°ƒç”¨ render çš„æ—¶å€™ä¸ajax */ getData(function (response) &#123; var data = &#123;&#125; var iSMobile = window.innerWidth &lt; 750 ? true : false if (iSMobile) &#123; data.type = &apos;m&apos; data.content = response.m var html = template(&apos;carousel-content&apos;,data) $(&apos;.banner .carousel-inner&apos;).html(html) var html = template(&apos;carousel-indicators&apos;,data) $(&apos;.banner .carousel-indicators&apos;).html(html) &#125;else&#123; data.type = &apos;pc&apos; data.content = response.pc var html = template(&apos;carousel-content&apos;,data) $(&apos;.banner .carousel-inner&apos;).html(html) var html = template(&apos;carousel-indicators&apos;,data) $(&apos;.banner .carousel-indicators&apos;).html(html) &#125; &#125;) &#125; /* è¿™é‡Œè¦åšå“åº”å¼ï¼Œæ‰€ä»¥è¦æŠŠæ•°æ®æ¸—é€æˆå…¨å±€å¯¹è±¡ window.data */ $(window).on(&apos;resize&apos;,function () &#123; render() /* é€šè¿‡jsä¸»åŠ¨è§¦å‘äº‹ä»¶ */ &#125;).trigger(&apos;resize&apos;,function ()&#123; render() &#125;) è¿™é‡Œè¦æ³¨æ„ä¸€ç‚¹ï¼Œå°±æ˜¯å½“æ•°æ®è¯·æ±‚å’Œæ²¡è¯·æ±‚çš„ä¸¤ç§çŠ¶æ€ä¸‹ï¼Œéƒ½è¦è¿›è¡Œå›è°ƒå‡½æ•° 1234success: function (response) &#123; window.data = response callback &amp;&amp; callback(window.data)&#125; æœ€åç”¨ jQuery çš„ trigger æ–¹æ³•æ¥ä¸»åŠ¨è°ƒç”¨ä¸€æ¬¡ window.onresize å°±ä¸ç”¨æ‰‹åŠ¨è°ƒç”¨ render() äº†ã€‚ å®ç°ç§»åŠ¨ç«¯æ»‘åŠ¨åŠŸèƒ½123456789101112131415161718192021222324/* åŠ è½½è½®æ’­å›¾æ»‘åŠ¨ æ§åˆ¶ prev å’Œ next */ var startX = 0 var endX = 0 isMove = false $(&apos;#carousel-id&apos;).on(&apos;touchstart&apos;, function (e) &#123; startX = e.originalEvent.touches[0].clientX; &#125;).on(&apos;touchmove&apos;,function(e)&#123; isMove = true /* originalEvent æ˜¯åŸç”Ÿäº‹ä»¶çš„å±æ€§ã€‚ */ endX = e.originalEvent.touches[0].clientX; &#125;).on(&apos;touchend&apos;,function(e)&#123; lr = endX - startX tmp = Math.abs( endX - startX) if (isMove &amp;&amp; tmp &gt; 50) &#123; if (lr &lt; 0) &#123; $(&apos;.carousel&apos;).carousel(&apos;next&apos;) console.log(&apos;next&apos;); &#125;else &#123; $(&apos;.carousel&apos;).carousel(&apos;prev&apos;) console.log(&apos;prev&apos;) &#125; &#125; &#125;);&#125;); å…³äºæ¨¡æ¿å¼•æ“æ¨¡æ¿å¼•æ“æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œåœ¨è·å–åˆ°æ•°æ®ç»‘å®šåˆ°HTMLé¡µé¢ä¸Šçš„æ—¶å€™ï¼Œç”¨DOMæ–¹å¼æ¥æ“ä½œç¡®å®æœ‰ç‚¹éš¾å—ï¼Œè€Œä¸”è¿˜å¼„çš„ååˆ†æ··ä¹±ï¼Œç‰¹åˆ«æ˜¯å½“æ•°æ®æ¯”è¾ƒå¤šçš„æ—¶å€™ã€‚è¿™æ—¶å€™æ¨¡æ¿å¼•æ“èƒ½æ›´å‹å¥½çš„å°†æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼Œç”šè‡³æ¨¡æ¿å¼•æ“æœ¬èº«æä¾›äº†ç®€å•å¥½ç”¨çš„ä¸€äº›æ–¹æ³• è¿™é‡Œä½¿ç”¨çš„æ¨¡æ¿å¼•æ“æ˜¯ Arttemplateå…¶ä»–çš„æ¨¡æ¿å¼•æ“çš„ä½¿ç”¨æ–¹æ³•éƒ½å¤§åŒå°å¼‚ï¼ŒåŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•å¤§æ¦‚æ˜¯è¿™æ ·ï¼šjs: 1234&lt;!-- æ¸²æŸ“htmlç»“æ„ ï¼Œæ”¾åˆ° script æ ‡ç­¾ä¸­--&gt;var html = template(&apos;arttemplate&apos;,&#123;value:data&#125;)&lt;!-- æŠŠæ¸²æŸ“å¥½çš„HTMLæ”¾åˆ°æŒ‡å®šçš„å®¹å™¨ä¸­ --&gt;document.getEmementById(&apos;content&apos;).innerHTML(html) å› ä¸ºscript çš„ type åªè¦æ˜¯ä¸ä¸º text/javascript å°±ä¸ä¼šåˆ«è§£ææˆjsè¯­æ³• æ‰€ä»¥å¾ˆå¤šæ—¶å€™æ–¹ä¾¿å­˜ä¸€äº›æœ‰ç»“æ„å‹çš„æ•°æ®åˆ°scriptæ ‡ç­¾ä¸­ï¼Œæ¨¡æ¿å¼•æ“ä¹Ÿæ˜¯åŸºäºè¿™ä¸ªã€‚ ä½†æ˜¯æ¨¡æ¿å¼•æ“ ä½¿ç”¨ { { } } é‡Œé¢çš„å†…å®¹æ˜¯ å¯ä»¥ç›´æ¥å†™ js ä»£ç çš„html: 1234567891011121314151617181920&lt;script id=&quot;carousel-content&quot; type=&quot;text/x-arttemplate&quot;&gt; &#123; &#123; if $data.type == &apos;m&apos; &#125; &#125; &#123; &#123; each $data.content &#125; &#125; &lt;div class=&quot;item &#123; &#123; $index ? &apos;&apos; : &apos;active&apos;&#125; &#125;&quot;&gt; &lt;a class=&quot;m_img hidden-lg hidden-md hidden-sm&quot; alt=&quot;&#123; &#123;$index&#125; &#125; slide&quot;&gt;&lt;img src=&quot;&#123; &#123;$value&#125; &#125;&quot; alt=&quot;&quot; srcset=&quot;&quot;&gt;&lt;/a&gt; &lt;/div&gt; &#123; &#123; /each &#125; &#125; &#123; &#123; else &#125; &#125; &#123; &#123; each $data.content &#125; &#125; &lt;div class=&quot;item &#123; &#123; $index ? &apos;&apos; : &apos;active&apos;&#125; &#125;&quot;&gt; &lt;a class=&quot;pc_img hidden-xs&quot; alt=&quot;&#123; &#123;$index&#125; &#125; slide&quot; style=&quot;background-image: url(&apos;&#123; &#123;$value&#125; &#125;&apos;);&quot;&gt;&lt;/a&gt; &lt;/div&gt; &#123; &#123; /each &#125; &#125; &#123; &#123; /if &#125; &#125;&lt;/script&gt;&lt;script id=&quot;carousel-indicators&quot; type=&quot;text/x-arttemplate&quot;&gt; &#123; &#123; each $data.content &#125; &#125; &lt;li data-target=&quot;#carousel-id&quot; data-slide-to=&quot;&#123; &#123;$index&#125; &#125;&quot; class=&quot;active&quot;&gt;&lt;/li&gt; &#123; &#123; /each &#125; &#125;&lt;/script&gt; è¿™æ ·é¡µé¢å°±èƒ½æ–¹ä¾¿çš„å¤„ç†æ•°æ®äº†ã€‚","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://summxu.github.io/tags/JavaScript/"},{"name":"Bootstrap","slug":"Bootstrap","permalink":"https://summxu.github.io/tags/Bootstrap/"}],"author":"BoomXu"},{"title":"Overflowå®ç°åœ£æ¯å¸ƒå±€","slug":"2018/grail-layout","date":"2018-08-23T16:00:00.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2018/grail-layout/","link":"","permalink":"https://summxu.github.io/2018/grail-layout/","excerpt":"","text":"å·¥ä½œè¿‡ç¨‹ä¸­é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œä¹Ÿå­¦åˆ°äº†å¾ˆå¤šçŸ¥è¯†ï¼Œè¿™æ¬¡ç”¨Overflowæ¥è§¦å‘BFCä»¥å®ç°åŒé£ç¿¼å¸ƒå±€ï¼Œå¾ˆç®€å•çš„ä¸€ä»¶äº‹ã€‚ä½†ä¸­é—´å´æœ‰ç‚¹å­¦é—®ã€‚ å®ç°åŸç†æ‰€è°“åŸç†å°±æ˜¯ç”¨Overflowæ¥è§¦å‘BFCï¼ˆå—çº§æ ¼å¼åŒ–èŒƒå›´ï¼‰ã€‚ 1.è¿™æ˜¯ W3C CSS 2.1 è§„èŒƒä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œå®ƒå†³å®šäº†å…ƒç´ å¦‚ä½•å¯¹å…¶å†…å®¹è¿›è¡Œå®šä½ï¼Œä»¥åŠä¸å…¶ä»–å…ƒç´ çš„å…³ç³»å’Œç›¸äº’ä½œç”¨ã€‚å½“æ¶‰åŠåˆ°å¯è§†åŒ–å¸ƒå±€çš„æ—¶å€™ï¼ŒBlock Formatting Contextæä¾›äº†ä¸€ä¸ªç¯å¢ƒï¼ŒHTMLå…ƒç´ åœ¨è¿™ä¸ªç¯å¢ƒä¸­æŒ‰ç…§ä¸€å®šè§„åˆ™è¿›è¡Œå¸ƒå±€ã€‚ä¸€ä¸ªç¯å¢ƒä¸­çš„å…ƒç´ ä¸ä¼šå½±å“åˆ°å…¶å®ƒç¯å¢ƒä¸­çš„å¸ƒå±€ã€‚æ¯”å¦‚æµ®åŠ¨å…ƒç´ ä¼šå½¢æˆBFCï¼Œæµ®åŠ¨å…ƒç´ å†…éƒ¨å­å…ƒç´ çš„ä¸»è¦å—è¯¥æµ®åŠ¨å…ƒç´ å½±å“ï¼Œä¸¤ä¸ªæµ®åŠ¨å…ƒç´ ä¹‹é—´æ˜¯äº’ä¸å½±å“çš„ã€‚è¿™é‡Œæœ‰ç‚¹ç±»ä¼¼ä¸€ä¸ªBFCå°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¡Œæ”¿å•ä½çš„æ„æ€ã€‚ä¹Ÿå¯ä»¥è¯´BFCå°±æ˜¯ä¸€ä¸ªä½œç”¨èŒƒå›´ã€‚å¯ä»¥æŠŠå®ƒç†è§£æˆæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å®¹å™¨ï¼Œå¹¶ä¸”è¿™ä¸ªå®¹å™¨çš„é‡Œboxçš„å¸ƒå±€ï¼Œä¸è¿™ä¸ªå®¹å™¨å¤–çš„æ¯«ä¸ç›¸å¹²ã€‚ 2.å¦ä¸€ä¸ªé€šä¿—ç‚¹çš„è§£é‡Šæ˜¯ï¼šåœ¨æ™®é€šæµä¸­çš„ Box(æ¡†) å±äºä¸€ç§ formatting context(æ ¼å¼åŒ–ä¸Šä¸‹æ–‡) ï¼Œç±»å‹å¯ä»¥æ˜¯ block ï¼Œæˆ–è€…æ˜¯ inline ï¼Œä½†ä¸èƒ½åŒæ—¶å±äºè¿™ä¸¤è€…ã€‚å¹¶ä¸”ï¼Œ Block boxes(å—æ¡†) åœ¨ block formatting context(å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡) é‡Œæ ¼å¼åŒ–ï¼Œ Inline boxes(å—å†…æ¡†) åˆ™åœ¨ inline formatting context(è¡Œå†…æ ¼å¼åŒ–ä¸Šä¸‹æ–‡) é‡Œæ ¼å¼åŒ–ã€‚ä»»ä½•è¢«æ¸²æŸ“çš„å…ƒç´ éƒ½å±äºä¸€ä¸ª box ï¼Œå¹¶ä¸”ä¸æ˜¯ block ï¼Œå°±æ˜¯ inline ã€‚å³ä½¿æ˜¯æœªè¢«ä»»ä½•å…ƒç´ åŒ…è£¹çš„æ–‡æœ¬ï¼Œæ ¹æ®ä¸åŒçš„æƒ…å†µï¼Œä¹Ÿä¼šå±äºåŒ¿åçš„ block boxes æˆ–è€… inline boxesã€‚æ‰€ä»¥ä¸Šé¢çš„æè¿°ï¼Œå³æ˜¯æŠŠæ‰€æœ‰çš„å…ƒç´ åˆ’åˆ†åˆ°å¯¹åº”çš„ formatting context é‡Œã€‚ æ€»çš„æ¥è¯´BFCæ˜¯å’Œæµ®åŠ¨åˆ’åˆ†å¼€æ¥ï¼Œä¸¤è€…äº’ä¸å¹²æ‰°ï¼Œæ‰€ä»¥åœ¨center ä¸­é—´çš„å…ƒç´  å®½åº¦ 100 % ä¸ä¼šé“ºæ»¡æ•´ä¸ªçª—å£ å®ç°ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\"&gt; &lt;title&gt;overflow&lt;/title&gt; &lt;style&gt; .left &#123; float: left; width: 100px; height: 100px; background-color: skyblue; &#125; .right &#123; float: right; width: 100px; height: 100px; background-color: skyblue; &#125; .center &#123; overflow: hidden; height: 100px; background-color: pink; line-height: 100px; &#125; .search &#123; height: 50%; width: 100%; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=\"left\"&gt;&lt;/div&gt; &lt;div class=\"right\"&gt;&lt;/div&gt; &lt;div class=\"center\"&gt; &lt;input class=\"search\" type=\"text\"&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; ä½†æ˜¯è¦æ³¨æ„ï¼Œleft center å’Œ right æ ‡ç­¾çš„ä½ç½®é¡ºåºä¸èƒ½æ”¾é”™ã€‚","categories":[],"tags":[{"name":"CSS","slug":"CSS","permalink":"https://summxu.github.io/tags/CSS/"}],"author":"BoomXu"},{"title":"Webpack CSSåˆ†ç±»æ‰“åŒ…å’Œhtml imgä¸æ‰“åŒ…é…ç½®","slug":"2018/webpack-html-withimg","date":"2018-08-23T16:00:00.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2018/webpack-html-withimg/","link":"","permalink":"https://summxu.github.io/2018/webpack-html-withimg/","excerpt":"","text":"ä»‹ç»ä¸¤ä¸ªwebpackæ’ä»¶çš„ä½¿ç”¨ é—®é¢˜è¿˜åŸ åœ¨webpackæ‰“åŒ…ä¹‹åçš„æ–‡ä»¶ï¼Œå¾€å¾€éƒ½ä¼šæ‰“åŒ…åˆ°bundle.jsä¸­ã€‚ä½†æ˜¯ä¸ºäº†ç›®å½•çš„ç»´æŠ¤æ€§ï¼Œé€šå¸¸è¦æŠŠCSSå•ç‹¬åˆ†ç¦»å‡ºæ¥è¿™æ—¶éœ€è¦ extract-text-webpack-pluginnpm install extract-text-webpack-plugin --save-dev é…ç½®ä¸Šé¦–å…ˆå¼•å…¥æ’ä»¶ï¼Œç„¶åå†åˆ›å»ºå¤šä¸ªæ–°çš„ extract å¯¹è±¡ï¼Œå¹¶ä¸”åœ¨ plugins å¼•ç”¨ä»–ä»¬ 123456789101112var Extract = require('extract-text-webpack-plugin')var extractCss = new Extract('css/base.css')var extractLess = new Extract('css/[name].css')var extractScss = new Extract('css/[name].css')var extractStyl = new Extract('css/[name].css')plugins: [ extractCss, extractLess, extractScss, extractStyl], ä¸‹ä¸€æ­¥å°±æ˜¯ä¿®æ”¹åŸæœ¬çš„ rules loaderè§„åˆ™ 12345&#123; test: /\\.css$/, use: extractCss.extract( ['css-loader']) &#125;, // å¤„ç† CSS æ–‡ä»¶çš„ loader&#123; test: /\\.less$/, use: extractLess.extract(['css-loader', 'less-loader']) &#125;, // å¤„ç† less æ–‡ä»¶çš„ loader&#123; test: /\\.scss$/, use: extractScss.extract(['css-loader', 'sass-loader']) &#125;, // å¤„ç† scss æ–‡ä»¶çš„ loader&#123; test: /\\.styl$/, use: extractStyl.extract(['css-loader', 'stylus-loader']) &#125;, // å¤„ç† stylus æ–‡ä»¶çš„ loader&#123; test: /\\.(jpg|png|gif|bmp|jpeg)$/, use: 'url-loader?limit=1024&amp;name=[name].[ext]&amp;outputPath=./images&amp;publicPath=../images'&#125;, // å¤„ç† å›¾ç‰‡è·¯å¾„çš„ loader https://www.npmjs.com/package/extract-text-webpack-plugin è™½ç„¶ä¸Šé¢å¼•å…¥äº† url-loader æ¥è§£æå›¾ç‰‡æ–‡ä»¶ï¼Œä½†æ˜¯htmlå†…çš„imgï¼šsrcå›¾ç‰‡å¹¶ä¸èƒ½é€šè¿‡æ­¤æ–¹å¼æ­£å¸¸è§£æï¼ŒåŸå› æ˜¯å› ä¸ºï¼Œwebpackä¸èƒ½æ­£ç¡®æ‰¾åˆ°å¼•å…¥çš„å›¾ç‰‡ï¼Œè§£å†³æ–¹å¼æœ‰ä¸¤ç§ã€‚ã€ è®©webpackçŸ¥é“å¼•å…¥çš„å›¾ç‰‡è·¯å¾„&lt;img src=&quot;${ require(&#39;..assets/logo.png&#39;) }&quot;&gt; å€ŸåŠ©loader html-withimg-loadernpm install html-withimg-loader --save åœ¨rule ä¸­åŠ å…¥ { test: /\\.(htm|html)$/i, loader: &#39;html-withimg-loader&#39;} //å¤„ç†html img ä¸­çš„å›¾ç‰‡ å®Œäº‹ï¼ https://github.com/wzsxyz/html-withimg-loader","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://summxu.github.io/tags/JavaScript/"}],"author":"BoomXu"},{"title":"Vue-loaderç‰ˆæœ¬é‡åˆ°çš„å‘","slug":"2018/vue-loader-version","date":"2018-07-21T16:00:00.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2018/vue-loader-version/","link":"","permalink":"https://summxu.github.io/2018/vue-loader-version/","excerpt":"","text":"åœ¨å­¦ä¹ Vue.jså’ŒWebpackçš„è·¯ä¸Šé‡åˆ°äº†ä¸å°‘é—®é¢˜,ä¹Ÿæ‰¾åˆ°äº†ç›¸å¯¹çš„è§£å†³åŠæ³•, è¿™æ¬¡è®°å½•ä¸‹åœ¨vue-loaderç‰ˆæœ¬é‡åˆ°çš„é—®é¢˜. vue-loaderç®€ä»‹åœ¨webpackä¸­åŠ è½½ç¬¬ä¸‰æ–¹çš„æ–‡ä»¶æ”¯æŒ,å°±è¦æœ‰ç¬¬ä¸‰æ–¹çš„æ–‡ä»¶è§£æå·¥å…·,åœ¨vueçš„ç»„ä»¶æ¨¡æ¿æ–‡ä»¶ä¸­,è¦æœ‰vue-loaderçš„æ”¯æŒæ‰å¯ä»¥.ä»–å¯ä»¥å°†vueæ–‡ä»¶è½¬æ¢ä¸ºJSæ¨¡å—ï¼› vue-loaderç‰¹æ€§ï¼ˆ1ï¼‰ES2015é»˜è®¤æ”¯æŒï¼ˆ2ï¼‰å…è®¸å¯¹VUEç»„ä»¶çš„ç»„æˆéƒ¨åˆ†ä½¿ç”¨å…¶ä»–webpack loader;æ¯”å¦‚å¯¹&lt; style &gt;ä½¿ç”¨SASSï¼ˆç¼–è¯‘CSSè¯­è¨€ï¼‰ï¼Œå¯¹&lt; template &gt;ä½¿ç”¨JADEï¼ˆjadeæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„æ¨¡æ¿å¼•æ“ï¼Œç”¨JSå®ç°ï¼Œä¹Ÿæœ‰å…¶ä»–è¯­è¨€çš„å®ç°â€”php,scala,yuby,python,javaï¼Œå¯ä»¥ä¾›ç»™nodeä½¿ç”¨ï¼‰ï¼ˆ3ï¼‰.vueæ–‡ä»¶ä¸­å…è®¸è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œç„¶åä½¿ç”¨è‡ªå®šä¹‰çš„loaderå¤„ç†ä»–ä»¬ï¼ˆ4ï¼‰å¯¹&lt; style &gt;&lt; template &gt;ä¸­çš„é™æ€èµ„æºå½“åšæ¨¡å—æ¥å¯¹å¾…ï¼Œå¹¶ä¸”ä½¿ç”¨webpack loadersè¿›è¡Œå¤„ç†ï¼ˆ5ï¼‰å¯¹æ¯ä¸ªç»„ä»¶æ¨¡æ‹Ÿå‡ºCSSä½œç”¨åŸŸï¼ˆ6ï¼‰æ”¯æŒå¼€å‘æœŸç»„ä»¶çš„çƒ­é‡è½½åœ¨ç¼–å†™vueåº”ç”¨ç¨‹åºæ—¶ï¼Œç»„åˆä½¿ç”¨webpackè·Ÿvue-loaderèƒ½å¸¦æ¥ä¸€ä¸ªç°ä»£ã€‚çµæ´»å¹¶ä¸”éå¸¸å¼ºå¤§çš„å‰ç«¯å·¥ä½œæµç¨‹ï¼› vue-loader@14 Versionç‰¹æ€§ä¸Šé¢è¯´äº†,å…è®¸å¯¹VUEç»„ä»¶çš„ç»„æˆéƒ¨åˆ†ä½¿ç”¨å…¶ä»–webpack loader;æ¯”å¦‚å¯¹&lt; style &gt;ä½¿ç”¨SASSï¼ˆç¼–è¯‘CSSè¯­è¨€ï¼‰ï¼Œå¯¹&lt; template &gt;ä½¿ç”¨JADEï¼Œä½†æ˜¯æˆ‘åœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­åœ¨vueç»„ä»¶æ¨¡æ¿æ–‡ä»¶ä¸‹å†™stylusçš„æ ·å¼ä¸€ç›´æŠ¥é”™ æ€»æ˜¯æç¤ºè¯´éœ€è¦è£…ä¸€ä¸ªloaderæ”¯æŒï¼Œä½†æ˜¯æˆ‘å·²ç»è£…äº† è€Œä¸”è¯­æ³•ä¹Ÿæœ‰å†™é”™ è¿™æ˜¯æˆ‘çœ‹åˆ°æŠ¥é”™é‡Œæåˆ°äº†vue-loaderï¼Œæœç„¶æ˜¯vue-loader çš„ç‰ˆæœ¬é—®é¢˜ vue-loader@15 Versionåœ¨æœ€æ–°çš„npmä¸Šè£…çš„æ˜¯vue-loader 15.x ç‰ˆæœ¬ï¼Œä½†æ˜¯ç°åœ¨ç›´æ¥npmè£…çš„æœ€æ–°ç‰ˆæœ¬çš„vue-loader 15 æŠŠè¿™ä¸ªåŠŸèƒ½ç»™å»é™¤äº†,åŒæ—¶åœ¨vue-loader 15é…ç½®çš„æ—¶å€™è¿˜è¦å¼•å…¥ä¸€ä¸ªæ’ä»¶ 1234567815ç‰ˆæœ¬ä»¥ä¸Šçš„vue-loader éœ€è¦æ’ä»¶æ”¯æŒ , æ’ä»¶æ˜¯ä¸ªå¯¹è±¡,è¿™é‡Œå¼•å…¥çš„æ—¶å€™è¦è½¬æ¢æˆå¯¹è±¡æ‰è¡Œconst &#123;VueLoaderPlugin&#125; = require(&apos;vue-loader&apos;)plugins: [ //15ç‰ˆæœ¬ä»¥ä¸Šçš„vue-loader éœ€è¦æ’ä»¶æ”¯æŒ new VueLoaderPlugin()], ä¸ä»…å¦‚æ­¤ï¼Œ15ç‰ˆæœ¬çš„vue-loaderè¿˜ å»é™¤äº† å¯¹&lt; style &gt; ç¼–è¯‘CSSé¢„å¤„ç†çš„æ”¯æŒ ç°åœ¨æš‚æ—¶ä½¿ç”¨14ç‰ˆæœ¬çš„vue-loaderï¼Œ15ç‰ˆæœ¬çš„æ–°ç‰¹æ€§å’Œä½¿ç”¨æ–¹æ³•è¿˜éœ€è¦è¿›ä¸€æ­¥çš„å­¦ä¹ ã€‚ã€‚ã€‚","categories":[],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://summxu.github.io/tags/Vue/"}],"author":"BoomXu"},{"title":"DIVçš„Heightä¸ºä»€ä¹ˆä¸èƒ½100%","slug":"2018/div-height100","date":"2018-05-29T16:00:00.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2018/div-height100/","link":"","permalink":"https://summxu.github.io/2018/div-height100/","excerpt":"","text":"è·Ÿç€ç™¾åº¦IFEçš„åŸºç¡€åšåšï¼Œç¡®å®æ˜¯é‡åˆ°ä¸å°‘é—®é¢˜ï¼Œåœ¨ã€Šä¸‰ç§ç®€å†ã€‹è¿™ä¸€ç« ï¼Œä¾§è¾¹å¯¼èˆªå°±é‡åˆ°äº†é«˜åº¦æ— æ³•é“ºæ»¡çš„é—®é¢˜ã€‚ é‚£ä¸ºä»€ä¹ˆ height:100%; ä¸èµ·ä½œç”¨ åœ¨htmlå¸ƒå±€ä¸­bodyå†…ç¬¬ä¸€ä¸ªdivç›’å­å¯¹è±¡è®¾ç½®100%é«˜åº¦heightæ ·å¼ï¼Œæ˜¯æ— æ³•æˆåŠŸæ˜¾ç¤º100%é«˜åº¦çš„ã€‚è¿™ä¸ªæ˜¯å› ä¸ºbodyé«˜åº¦é»˜è®¤å€¼ä¸ºè‡ªé€‚åº”çš„ï¼Œæ‰€ä»¥åŠæ—¶è®¾ç½®bodyç¬¬ä¸€ä¸ªå¸ƒå±€divé«˜åº¦ä¸ºç™¾åˆ†æ¯”ä¹Ÿæ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºdivè§£æä¸Šçº§é«˜åº¦ä¸º0ï¼Œè‡ªç„¶div height 100%å®é™…é«˜åº¦ä¹Ÿä¸º0ã€‚ æµè§ˆå™¨æ ¹æœ¬å°±ä¸è®¡ç®—å†…å®¹çš„é«˜åº¦ï¼Œé™¤éå†…å®¹è¶…å‡ºäº†è§†çª—èŒƒå›´(å¯¼è‡´æ»šåŠ¨æ¡å‡ºç°)ã€‚æˆ–è€…ä½ ç»™æ•´ä¸ªé¡µé¢è®¾ç½®ä¸€ä¸ªç»å¯¹é«˜åº¦ã€‚å¦åˆ™ï¼Œæµè§ˆå™¨å°±ä¼šç®€å•çš„è®©å†…å®¹å¾€ä¸‹å †ç Œï¼Œé¡µé¢çš„é«˜åº¦æ ¹æœ¬å°±æ— éœ€è€ƒè™‘ã€‚ å› ä¸ºé¡µé¢å¹¶æ²¡æœ‰ç¼ºçœçš„é«˜åº¦å€¼ï¼Œæ‰€ä»¥ï¼Œå½“ä½ è®©ä¸€ä¸ªå…ƒç´ çš„é«˜åº¦è®¾å®šä¸ºç™¾åˆ†æ¯”é«˜åº¦æ—¶ï¼Œæ— æ³•æ ¹æ®è·å–çˆ¶å…ƒç´ çš„é«˜åº¦ï¼Œä¹Ÿå°±æ— æ³•è®¡ç®—è‡ªå·±çš„é«˜åº¦ã€‚æ¢å¥è¯è¯´ï¼Œçˆ¶å…ƒç´ çš„é«˜åº¦åªæ˜¯ä¸€ä¸ªç¼ºçœå€¼ï¼šheight: auto;ã€‚å½“ä½ è¦æ±‚æµè§ˆå™¨æ ¹æ®è¿™æ ·ä¸€ä¸ªç¼ºçœå€¼æ¥è®¡ç®—ç™¾åˆ†æ¯”é«˜åº¦æ—¶ï¼Œåªèƒ½å¾—åˆ°undefinedçš„ç»“æœã€‚ä¹Ÿå°±æ˜¯ä¸€ä¸ªnullå€¼ï¼Œæµè§ˆå™¨ä¸ä¼šå¯¹è¿™ä¸ªå€¼æœ‰ä»»ä½•çš„ååº”ã€‚ å¦‚æœæƒ³è®©ä¸€ä¸ªå…ƒç´ çš„ç™¾åˆ†æ¯”cssé«˜åº¦height: 100%;èµ·ä½œç”¨ï¼Œä½ éœ€è¦ç»™è¿™ä¸ªå…ƒç´ çš„ æ‰€æœ‰çˆ¶å…ƒç´  çš„é«˜åº¦è®¾å®šä¸€ä¸ªæœ‰æ•ˆå€¼ã€‚ è¿™é‡Œçš„ æ‰€æœ‰çˆ¶å…ƒç´  æˆ‘å‘ç°å…¶å®æ˜¯é”™è¯¯çš„ï¼Œåªè¦æ ¹å…ƒç´  &lt; html &gt; çš„é«˜åº¦è®¾ç½®å¥½ï¼Œå…¶ä»–å­å…ƒç´ éƒ½æ˜¯è‡ªåŠ¨ç»§æ‰¿çš„ã€‚ã€‚è€Œçˆ¶å…ƒç´ å—HTMLæœ¬èº«æ˜¯æ²¡æœ‰é«˜åº¦çš„ ä»¥ä¸Šå½“æˆ‘æ²¡è¯´ï¼Œè¿˜æ˜¯å¿…é¡»è¦æ‰€æœ‰çš„çˆ¶å…ƒç´ éƒ½è¦è®¾ç½®ã€‚ 123html,body&#123; height:100%;&#125; è§£å†³æ–¹æ³•æ–¹æ³•ä¸€ä¸º æ ¹å…ƒç´  &lt; html &gt; è®¾ç½®é«˜åº¦ 123html&#123; height:100%;&#125; æ–¹æ³•äºŒæ–¹æ³•äºŒå°±æ˜¯ä½¿ç”¨ç»å¯¹å®šä½ï¼Œä½¿divè„±ç¦»æ ‡å‡†æµï¼Œä¹Ÿå°±æ˜¯è„±ç¦»äº†ä»–çš„æ ¹å…ƒç´  html 123456789.title&#123; float: left; position:absolute; width: 20%; height: 100%; background-color: dodgerblue; font-size: 28px; font-weight: bold;&#125; ç»“æœHeight:100%çš„æ–¹æ³•ï¼Œç¼ºç‚¹ç¼ºéå¸¸æ˜¾è‘—ï¼Œä½ åœ¨divå†…å®šä¹‰ padding æˆ–è€…æ˜¯ margin å°±ä¼šæŠŠé¡µé¢æ’‘å¼€ï¼Œä¹Ÿå°±æ˜¯è¯´è¶…è¿‡äº† 100%ï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªéå¸¸ä¸å®Œç¾çš„æ»šåŠ¨æ¡ã€‚ã€‚ å½“ç„¶ä½ å¯ä»¥ç”¨ overflow: hidden; æº¢å‡ºéšè—ï¼Œä½†æ˜¯è¿™æ ·åªæ˜¯æ©è€³ç›—é“ƒï¼Œæ»šåŠ¨æ¡æ˜¯æ²¡äº†ï¼Œé¡µé¢çš„æ»šåŠ¨å´ä¸å—æ§åˆ¶äº†ã€‚ ç¥å¥‡çš„CSS ã€‚ã€‚","categories":[],"tags":[{"name":"CSS","slug":"CSS","permalink":"https://summxu.github.io/tags/CSS/"}],"author":"BoomXu"},{"title":"Pythonç½‘é¡µè‡ªåŠ¨åŒ–æ“ä½œ","slug":"2018/python-selenium","date":"2018-05-29T16:00:00.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2018/python-selenium/","link":"","permalink":"https://summxu.github.io/2018/python-selenium/","excerpt":"","text":"æœ€è¿‘å‡ å¤©å¿™å¿™ç¢Œç¢Œå´æ„Ÿåˆ°å¿™å‡ºæ¥ä»€ä¹ˆå¥½ç»“æœï¼Œä¸è¿‡æœ€è¿‘å‡ å¤©è¦æŠ“ç´§æ—¶é—´å­¦å­¦è‹±è¯­ã€‚å› ä¸ºæœ€è¿‘æœ‰ä¸€ä¸ªè¡¨éœ€è¦ä¸€ç›´é‡å¤å‘ç½‘é¡µæ·»åŠ ä¿¡æ¯ï¼Œäºæ˜¯å°±å€Ÿæ­¤æœºä¼šç ”ç©¶äº†Pythonçš„ç½‘é¡µè‡ªåŠ¨åŒ–ï¼Œåœ¨æ­¤æ˜¯ç”¨äº†Seleniumæ¡†æ¶ã€‚ã€‚ ä»€ä¹ˆæ˜¯Seleniumselenium æ˜¯ä¸€å¥—å®Œæ•´çš„webåº”ç”¨ç¨‹åºæµ‹è¯•ç³»ç»Ÿï¼ŒåŒ…å«äº†æµ‹è¯•çš„å½•åˆ¶ï¼ˆselenium IDEï¼‰,ç¼–å†™åŠè¿è¡Œï¼ˆSelenium Remote Controlï¼‰å’Œæµ‹è¯•çš„å¹¶è¡Œå¤„ç†ï¼ˆSelenium Gridï¼‰ã€‚Seleniumçš„æ ¸å¿ƒSelenium CoreåŸºäºJsUnitï¼Œå®Œå…¨ç”±JavaScriptç¼–å†™ï¼Œå› æ­¤å¯ä»¥ç”¨äºä»»ä½•æ”¯æŒJavaScriptçš„æµè§ˆå™¨ä¸Šã€‚ seleniumå¯ä»¥æ¨¡æ‹ŸçœŸå®æµè§ˆå™¨ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ï¼Œæ”¯æŒå¤šç§æµè§ˆå™¨ï¼Œçˆ¬è™«ä¸­ä¸»è¦ç”¨æ¥è§£å†³JavaScriptæ¸²æŸ“é—®é¢˜ã€‚ seleniumåŸºæœ¬ä½¿ç”¨åœ¨æ­¤ä¹‹å‰å…ˆä¸Šæ®µä»£ç ï¼š 1234567891011121314browser = webdriver.Chrome()browser.get(&apos;http://sdxy.gov.cn:8888/auth/pub/loginerror&apos;)wait = WebDriverWait(browser, 10, 1.0)browser.set_page_load_timeout(8)browser.set_script_timeout(8)``` ## å£°æ˜æµè§ˆå™¨å¯¹è±¡é¦–å…ˆseleniumæ”¯æŒç»å¤§å¤šæ•°ä¸»æµæµè§ˆå™¨ï¼Œä½†æ˜¯ä¸­é—´è¦æœ‰æµè§ˆå™¨çš„é©±åŠ¨ç¨‹åº åœ¨æ­¤æˆ‘æ˜¯è°ƒç”¨çš„ **[chromedriver](http://npm.taobao.org/mirrors/chromedriver/)** æ”¾åˆ°ç›¸åŒç›®å½•ä¸‹å°±å¯ä»¥è¿è¡Œã€‚`browser = webdriver.Firefox()`è¿™æ˜¯ç«ç‹çš„è°ƒç”¨æ–¹å¼ã€‚## è®¿é—®é¡µé¢ browser.get(â€œhttp://www.baidu.com&quot;)print(browser.page_source)browser.close() 12345ç”¨**rowser.get**æ–¹æ³•å¯ä»¥æ‰“å¼€ç½‘é¡µ**page_source**æ˜¯æå–ç½‘é¡µæºä»£ç ## æŸ¥æ‰¾å…ƒç´ ### å•ä¸ªå…ƒç´ æŸ¥æ‰¾ from selenium import webdriver browser = webdriver.Chrome() browser.get(â€œhttp://www.taobao.com&quot;)input_first = browser.find_element_by_id(â€œqâ€)input_second = browser.find_element_by_css_selector(â€œ#qâ€)input_third = browser.find_element_by_xpath(â€˜//*[@id=â€qâ€]â€™)print(input_first)print(input_second)print(input_third)browser.close() 12345678910111213141516è¿™é‡Œåˆ—ä¸¾ä¸€ä¸‹å¸¸ç”¨çš„æŸ¥æ‰¾å…ƒç´ æ–¹æ³•ï¼šfind_element_by_namefind_element_by_idfind_element_by_xpathfind_element_by_link_textfind_element_by_partial_link_textfind_element_by_tag_namefind_element_by_class_namefind_element_by_css_selectorä¸‹é¢è¿™ç§æ–¹å¼æ˜¯æ¯”è¾ƒé€šç”¨çš„ä¸€ç§æ–¹å¼ï¼šè¿™é‡Œéœ€è¦è®°ä½Byæ¨¡å—æ‰€ä»¥éœ€è¦å¯¼å…¥from selenium.webdriver.common.by import By### å¤šä¸ªå…ƒç´ æŸ¥æ‰¾ from selenium import webdriver browser = webdriver.Chrome()browser.get(â€œhttp://www.taobao.com&quot;)lis = browser.find_elements_by_css_selector(â€˜.service-bd liâ€™)print(lis)browser.close() 123456è¿™æ ·è·å¾—å°±æ˜¯ä¸€ä¸ªåˆ—è¡¨:![from zhaof](https://images2015.cnblogs.com/blog/997599/201706/997599-20170606193737497-369795287.png)## å…ƒç´ äº¤äº’æ“ä½œ from selenium import webdriver import time browser = webdriver.Chrome()browser.get(â€œhttp://www.taobao.com&quot;)input_str = browser.find_element_by_id(â€˜qâ€™)input_str.send_keys(â€œipadâ€)time.sleep(1)input_str.clear()input_str.send_keys(â€œMakBook proâ€)button = browser.find_element_by_class_name(â€˜btn-searchâ€™)button.click() 123456789101112131415161718192021222324è¿è¡Œçš„ç»“æœå¯ä»¥çœ‹å‡ºç¨‹åºä¼šè‡ªåŠ¨æ‰“å¼€Chromeæµè§ˆå™¨å¹¶æ‰“å¼€æ·˜å®è¾“å…¥ipad,ç„¶ååˆ é™¤ï¼Œé‡æ–°è¾“å…¥MakBook proï¼Œå¹¶ç‚¹å‡»æœç´¢Seleniumæ‰€æœ‰çš„apiæ–‡æ¡£ï¼š&lt;http://selenium-python.readthedocs.io/api.html#module-selenium.webdriver.common.action_chains&gt;### äº¤äº’åŠ¨ä½œå°†åŠ¨ä½œé™„åŠ åˆ°åŠ¨ä½œé“¾ä¸­ä¸²è¡Œæ‰§è¡Œfrom selenium import webdriverfrom selenium.webdriver import ActionChainsbrowser = webdriver.Chrome()url = &quot;http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable&quot;browser.get(url)browser.switch_to.frame(&apos;iframeResult&apos;)source = browser.find_element_by_css_selector(&apos;#draggable&apos;)target = browser.find_element_by_css_selector(&apos;#droppable&apos;)actions = ActionChains(browser)actions.drag_and_drop(source, target)actions.perform()## æ‰§è¡ŒJavaScriptè¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„æ–¹æ³•ï¼Œè¿™é‡Œå°±å¯ä»¥ç›´æ¥è°ƒç”¨jsæ–¹æ³•æ¥å®ç°ä¸€äº›æ“ä½œï¼Œä¸‹é¢çš„ä¾‹å­æ˜¯é€šè¿‡ç™»å½•çŸ¥ä¹ç„¶åé€šè¿‡jsç¿»åˆ°é¡µé¢åº•éƒ¨ï¼Œå¹¶å¼¹æ¡†æç¤º from selenium import webdriverbrowser = webdriver.Chrome()browser.get(â€œhttp://www.zhihu.com/explore&quot;)browser.execute_script(â€˜window.scrollTo(0, document.body.scrollHeight)â€™)browser.execute_script(â€˜alert(â€œTo Bottomâ€)â€™) 12345678910111213141516## å…ƒç´ æ“ä½œ å…ƒç´ æ“ä½œ | æ–¹æ³•---------|---------- è·å–å…ƒç´ å±æ€§ | get_attribute(&apos;class&apos;) è·å–æ–‡æœ¬å€¼ | text è·å–ID | id ä½ç½® | location æ ‡ç­¾å | tag_name ## ç­‰å¾…å½“ä½¿ç”¨äº†éšå¼ç­‰å¾…æ‰§è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œå¦‚æœ WebDriveræ²¡æœ‰åœ¨ DOMä¸­æ‰¾åˆ°å…ƒç´ ï¼Œå°†ç»§ç»­ç­‰å¾…ï¼Œè¶…å‡ºè®¾å®šæ—¶é—´ååˆ™æŠ›å‡ºæ‰¾ä¸åˆ°å…ƒç´ çš„å¼‚å¸¸, æ¢å¥è¯è¯´ï¼Œå½“æŸ¥æ‰¾å…ƒç´ æˆ–å…ƒç´ å¹¶æ²¡æœ‰ç«‹å³å‡ºç°çš„æ—¶å€™ï¼Œéšå¼ç­‰å¾…å°†ç­‰å¾…ä¸€æ®µæ—¶é—´å†æŸ¥æ‰¾ DOMï¼Œé»˜è®¤çš„æ—¶é—´æ˜¯0### æ˜¾å¼ç­‰å¾…æŒ‡å®šä¸€ä¸ªç­‰å¾…æ¡ä»¶ï¼Œå¹¶ä¸”æŒ‡å®šä¸€ä¸ªæœ€é•¿ç­‰å¾…æ—¶é—´ï¼Œä¼šåœ¨è¿™ä¸ªæ—¶é—´å†…è¿›è¡Œåˆ¤æ–­æ˜¯å¦æ»¡è¶³ç­‰å¾…æ¡ä»¶ï¼Œå¦‚æœæˆç«‹å°±ä¼šç«‹å³è¿”å›ï¼Œå¦‚æœä¸æˆç«‹ï¼Œå°±ä¼šä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°ç­‰å¾…ä½ æŒ‡å®šçš„æœ€é•¿ç­‰å¾…æ—¶é—´ï¼Œå¦‚æœè¿˜æ˜¯ä¸æ»¡è¶³ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚æœæ»¡è¶³äº†å°±ä¼šæ­£å¸¸è¿”å› from selenium import webdriverfrom selenium.webdriver.common.by import Byfrom selenium.webdriver.support.ui import WebDriverWaitfrom selenium.webdriver.support import expected_conditions as EC browser = webdriver.Chrome()browser.get(â€˜https://www.taobao.com/&#39;)wait = WebDriverWait(browser, 10)input = wait.until(EC.presence_of_element_located((By.ID, â€˜qâ€™)))button = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, â€˜.btn-searchâ€™)))print(input, button) 123### éšå¼ç­‰å¾…åˆ°äº†ä¸€å®šçš„æ—¶é—´å‘ç°å…ƒç´ è¿˜æ²¡æœ‰åŠ è½½ï¼Œåˆ™ç»§ç»­ç­‰å¾…æˆ‘ä»¬æŒ‡å®šçš„æ—¶é—´ï¼Œå¦‚æœè¶…è¿‡äº†æˆ‘ä»¬æŒ‡å®šçš„æ—¶é—´è¿˜æ²¡æœ‰åŠ è½½å°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚æœæ²¡æœ‰éœ€è¦ç­‰å¾…çš„æ—¶å€™å°±å·²ç»åŠ è½½å®Œæ¯•å°±ä¼šç«‹å³æ‰§è¡Œ from selenium import webdriver browser = webdriver.Chrome()browser.implicitly_wait(10)browser.get(â€˜https://www.zhihu.com/explore&#39;)input = browser.find_element_by_class_name(â€˜zu-top-add-questionâ€™)print(input) 12345678910111213141516171819202122232425## æ¡ä»¶åˆ¤æ–­1. title_is æ ‡é¢˜æ˜¯æŸå†…å®¹2. title_contains æ ‡é¢˜åŒ…å«æŸå†…å®¹3. presence_of_element_located å…ƒç´ åŠ è½½å‡ºï¼Œä¼ å…¥å®šä½å…ƒç»„ï¼Œå¦‚(By.ID, &apos;p&apos;)4. visibility_of_element_located å…ƒç´ å¯è§ï¼Œä¼ å…¥å®šä½å…ƒç»„5. visibility_of å¯è§ï¼Œä¼ å…¥å…ƒç´ å¯¹è±¡6. presence_of_all_elements_located æ‰€æœ‰å…ƒç´ åŠ è½½å‡º7. text_to_be_present_in_element æŸä¸ªå…ƒç´ æ–‡æœ¬åŒ…å«æŸæ–‡å­—8. text_to_be_present_in_element_value æŸä¸ªå…ƒç´ å€¼åŒ…å«æŸæ–‡å­—9. frame_to_be_available_and_switch_to_it frameåŠ è½½å¹¶åˆ‡æ¢10. invisibility_of_element_located å…ƒç´ ä¸å¯è§11. element_to_be_clickable å…ƒç´ å¯ç‚¹å‡»12. staleness_of åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦ä»åœ¨DOMï¼Œå¯åˆ¤æ–­é¡µé¢æ˜¯å¦å·²ç»åˆ·æ–°13. element_to_be_selected å…ƒç´ å¯é€‰æ‹©ï¼Œä¼ å…ƒç´ å¯¹è±¡14. element_located_to_be_selected å…ƒç´ å¯é€‰æ‹©ï¼Œä¼ å…¥å®šä½å…ƒç»„15. element_selection_state_to_be ä¼ å…¥å…ƒç´ å¯¹è±¡ä»¥åŠçŠ¶æ€ï¼Œç›¸ç­‰è¿”å›Trueï¼Œå¦åˆ™è¿”å›False16. element_located_selection_state_to_be ä¼ å…¥å®šä½å…ƒç»„ä»¥åŠçŠ¶æ€ï¼Œç›¸ç­‰è¿”å›Trueï¼Œå¦åˆ™è¿”å›False17. alert_is_present æ˜¯å¦å‡ºç°Alert## cookieæ“ä½œget_cookies()delete_all_cookes()add_cookie() from selenium import webdriver browser = webdriver.Chrome()browser.get(â€˜https://www.zhihu.com/explore&#39;)print(browser.get_cookies())browser.add_cookie({â€˜nameâ€™: â€˜nameâ€™, â€˜domainâ€™: â€˜www.zhihu.com&#39;, â€˜valueâ€™: â€˜zhaofanâ€™})print(browser.get_cookies())browser.delete_all_cookies()print(browser.get_cookies()) 12345## é€‰é¡¹å¡ç®¡ç†é€šè¿‡æ‰§è¡Œjså‘½ä»¤å®ç°æ–°å¼€é€‰é¡¹å¡window.open()ä¸åŒçš„é€‰é¡¹å¡æ˜¯å­˜åœ¨åˆ—è¡¨é‡Œbrowser.window_handlesé€šè¿‡browser.window_handles[0]å°±å¯ä»¥æ“ä½œç¬¬ä¸€ä¸ªé€‰é¡¹å¡ import timefrom selenium import webdriver browser = webdriver.Chrome()browser.get(â€˜https://www.baidu.com&#39;)browser.execute_script(â€˜window.open()â€™)print(browser.window_handles)browser.switch_to_window(browser.window_handles[1])browser.get(â€˜https://www.taobao.com&#39;)time.sleep(1)browser.switch_to_window(browser.window_handles[0])browser.get(â€˜https://python.org&#39;)``` è¿˜æœ‰å¾ˆå¤šå¼ºå¤§çš„åŠŸèƒ½æœ‰å¾…ç ”ç©¶","categories":[],"tags":[{"name":"Python","slug":"Python","permalink":"https://summxu.github.io/tags/Python/"}],"author":"BoomXu"},{"title":"åˆæ¬¡å°è¯•Vue Jsx","slug":"2018/vue-jsx","date":"2018-04-23T16:00:00.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2018/vue-jsx/","link":"","permalink":"https://summxu.github.io/2018/vue-jsx/","excerpt":"","text":"Vueå£°æ˜åŠ è½½1234567891011&lt;script&gt;import Header from &apos;./todo/header.vue&apos;import Footer from &apos;./todo/footer.jsx&apos;export default &#123; components:&#123; Header, Footer, &#125;&#125;&lt;/script&gt; è¿™é‡Œç”¨ components æ–¹æ³•æ¥å£°æ˜åŠ è½½è¿‡æ¥çš„å¤–éƒ¨æ–‡ä»¶ã€‚ã€‚ Jsx React ä½¿ç”¨ JSX æ¥æ›¿ä»£å¸¸è§„çš„ JavaScriptã€‚JSX æ˜¯ä¸€ä¸ªçœ‹èµ·æ¥å¾ˆåƒ XML çš„ JavaScript è¯­æ³•æ‰©å±•ã€‚æˆ‘ä»¬ä¸éœ€è¦ä¸€å®šä½¿ç”¨ JSXï¼Œä½†å®ƒæœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼šJSX æ‰§è¡Œæ›´å¿«ï¼Œå› ä¸ºå®ƒåœ¨ç¼–è¯‘ä¸º JavaScript ä»£ç åè¿›è¡Œäº†ä¼˜åŒ–ã€‚å®ƒæ˜¯ç±»å‹å®‰å…¨çš„ï¼Œåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å°±èƒ½å‘ç°é”™è¯¯ã€‚ä½¿ç”¨ JSX ç¼–å†™æ¨¡æ¿æ›´åŠ ç®€å•å¿«é€Ÿã€‚ jsxæ›´å¥½çš„æŠŠjså’Œhtmlç»“åˆèµ·æ¥ï¼Œå¯ä»¥å¾ˆç®€å•çš„åšåˆ°åŸç”Ÿjså¾ˆå¤æ‚çš„æ“ä½œï¼Œä¸‹é¢æ˜¯ä¸€æ®µä»£ç ï¼š 12345678910111213141516import '../assets/styles/footer.styl'export default&#123; data() &#123; return &#123; author: 'BoomXu' &#125; &#125;, render() &#123; return( &lt;div id=\"footer\"&gt; &lt;span&gt;Written by &#123;this.author&#125;&lt;/span&gt; //è¿™é‡Œç”¨äº†thiså¯¹åƒè°ƒç”¨ &lt;/div&gt; ) &#125;&#125; jsxåœ¨ç”Ÿæˆhtmlçš„æ—¶å€™ç”¨äº† render()æ–¹æ³•ï¼Œå…¶å®vueå’Œè¿™ä¸ªä¸€æ ·ï¼Œvueé‡Œçš„ &lt;template&gt;æ ‡ç­¾å…¶å®å°±æ˜¯ç”¨äº†render()æ–¹æ³•æ¥ç”Ÿæˆçš„htmlç»“æ„ã€‚ ä½†æ˜¯jsxä¸å¥½çš„ä¸€ç‚¹åœ¨äºä»–ä¸èƒ½ç›´æ¥å†™ style éœ€è¦å¼•å…¥å¤–éƒ¨æ–‡ä»¶æ‰å¯ä»¥ã€‚ methods{} å£°æ˜æ–¹æ³•","categories":[],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://summxu.github.io/tags/Vue/"}],"author":"BoomXu"},{"title":"åˆæ¬¡å°è¯•Vue","slug":"2018/first-vue","date":"2018-04-22T16:00:00.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2018/first-vue/","link":"","permalink":"https://summxu.github.io/2018/first-vue/","excerpt":"","text":"æˆ‘æ¢äº†ä¸ªJekyll éšæœºè‡ªåŠ¨æ¢å›¾çš„æ¥å£ï¼Œä»¥åä¸ç”¨æ¯æ¬¡éƒ½ä¸Šä¼ å›¾ç‰‡äº† ã€‚ã€‚ https://img.xjh.me/random_img.php?type=bg&amp;ctype=nature&amp;return=302 é€Ÿåº¦è¿˜å¾ˆå¿« å¤©å¤©å¥½å¿ƒæƒ… VUE2ç®€ä»‹æ•°æ®ç»‘å®šçœå»jsæ“ä½œdomï¼ŒåŠ¨æ€çš„æŠŠjsçš„æ•°æ®ç»‘å®šåˆ°htmlï¼Œæ•°æ®ä¸€æ—¦æ”¹å˜ï¼Œhtmlæ•°æ®è·Ÿç€æ”¹å˜ vueæ–‡ä»¶å¼€å‘æ–¹å¼1234567891011&lt;template&gt;&lt;/template&gt;&lt;script&gt;&lt;/script&gt;&lt;style&gt;&lt;/style&gt; ç»„ä»¶åŒ–å¼€å‘ï¼Œå¯ä»¥è‡ªå®šä¹‰æ ‡ç­¾ï¼ŒåŒ…å«htmlã€jsã€css ã€‚ã€‚ åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ç›´æ¥å†™å„ç§ç»„å»ºã€‚ renderæ–¹æ³•ç»„ä»¶æ•°æ®å˜åŒ–æ—¶vueä¼šè‡ªåŠ¨ç”¨renderæ–¹æ³•å»éå†æ„å»º&lt;template&gt;æ ‡ç­¾å†…çš„æ ‡ç­¾èŠ‚ç‚¹ã€‚ APIé‡ç‚¹ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ç»„ä»¶ä»€ä¹ˆæ—¶å€™ç¼–è¯‘ï¼Œä»€ä¹ˆæ—¶å€™ç”Ÿhtmlå…ƒç´ ï¼Œéƒ½æ˜¯æœ‰è§„å®šçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚æ§åˆ¶ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å¯ä»¥æ–¹ä¾¿çš„åœ¨æŸä¸ªåœ°æ–¹è°ƒç”¨æŸç§åŠŸèƒ½ computedæ•°æ®æ”¹å˜çš„æ—¶å€™è°ƒç”¨çš„æ–¹æ³•ï¼Œæ–¹ä¾¿çš„æ§åˆ¶æ•°æ®çš„å˜åŒ– Vueä¹‹å‰è£…çš„packautoprefixerè¿™ä¸ªåŒ…æ˜¯çœå»äº†å†™cssçš„æ—¶å€™å¯¹ç‰¹å®šçš„æµè§ˆå™¨çš„å†™æ³•ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨å¡«è¡¥ä¸Šã€‚ Postcssä¸€ä¸ªcssæ’ä»¶ç³»ç»Ÿ,åæœŸç”¨æ’ä»¶å¤„ç†çš„csså¤„ç†å™¨ å…·ä½“å¯ä»¥çœ‹è¿™ä¸ª https://segmentfault.com/a/1190000011595620 babelç”¨æ¥æ¼”ç¤º vue-jsx çš„æ“ä½œ","categories":[],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://summxu.github.io/tags/Vue/"}],"author":"BoomXu"},{"title":"åˆæ¬¡å°è¯•Webpackæ„å»ºå‰ç«¯","slug":"2018/first-webpack","date":"2018-04-20T16:00:00.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2018/first-webpack/","link":"","permalink":"https://summxu.github.io/2018/first-webpack/","excerpt":"","text":"æœ€è¿‘ä¸€ç›´ç ”ç©¶å‰ç«¯å·¥ç¨‹åŒ–å’Œæ›´é«˜æ•ˆçš„æ„å»ºå·¥å…·ï¼Œç½‘ä¸Šå¾ˆå¤šäººéƒ½è¯´Node.jsèƒ½å¸®åŠ©å‰ç«¯å¼€å‘ï¼Œä»Šå¤©ç»ˆäºäº†è§£äº†ä¸€ä¸‹ï¼ŒåŸæœ‰çš„js,jquery,css,htmléƒ½æ˜¯åŸºç¡€ï¼Œæƒ³è¦åšå‡ºå®Œæ•´çš„å‰ç«¯é¡µé¢è¿˜æ˜¯å¾ˆå¤æ‚ï¼Œè€Œä¸”æ–‡ä»¶ä¹Ÿæ¯”è¾ƒå¤šã€‚åˆæ¬¡æ¥è§¦äº†ä¸‹Webpackï¼Œè¿™çœŸçš„æ˜¯å‰ç«¯ç¦»ä¸å¼€çš„å·¥ç¨‹æ„å»ºå·¥å…·. é¦–å…ˆåœ¨ç”¨è¿™äº›ä¸œè¥¿ä¹‹å‰æœ€å¥½æ˜¯äº†è§£ä»¥ä¸‹: cssåŸºç¡€ JavaScriptåŸºç¡€ ES6 cssé¢„å¤„ç†å™¨(less,sass,stulus) å¯¹è±¡ç¼–ç¨‹é€»è¾‘ ä»€ä¹ˆæ˜¯Webpack æœ¬è´¨ä¸Šï¼Œwebpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨(module bundler)ã€‚å½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šé€’å½’åœ°æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾(dependency graph)ï¼Œå…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundleã€‚ webpackå°±æ˜¯æŠŠç½‘é¡µèµ„æºæ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªjs,åœ¨æ­¤ä¹‹å‰ä½ ç¼–ç¨‹ä¸Šå¯ä»¥ç”¨å¤šç§è¯­è¨€å’Œå¤šç§å·¥å…·,é«˜æ•ˆå¼€å‘.åœ¨è¿è¡Œä¸Šç½‘é¡µé€Ÿåº¦åŠ è½½ä¹Ÿå¾ˆå¿«,å‡å°‘äº†å¤§é‡çš„httpè¯·æ±‚. webpackæœ‰æé«˜çš„é…ç½®åº¦å’Œä¸°å¯Œçš„æ’ä»¶,loaderä»¥åŠwebhttpè°ƒè¯•. Webpack å®‰è£…ç¯å¢ƒ åœ¨è¿™ä¹‹å‰è¦è¯´ä¸‹ Node.js å’Œ NPM Node.jsNode.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒã€‚Node.js ä½¿ç”¨äº†ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ã€éé˜»å¡å¼ I/O çš„æ¨¡å‹ï¼Œä½¿å…¶è½»é‡åˆé«˜æ•ˆã€‚ NPM npm ä¸ºä½ å’Œä½ çš„å›¢é˜Ÿæ‰“å¼€äº†è¿æ¥æ•´ä¸ª JavaScript å¤©æ‰ä¸–ç•Œçš„ä¸€æ‰‡å¤§é—¨ã€‚å®ƒæ˜¯ä¸–ç•Œä¸Šæœ€å¤§çš„è½¯ä»¶æ³¨å†Œè¡¨ï¼Œæ¯æ˜ŸæœŸå¤§çº¦æœ‰ 30 äº¿æ¬¡çš„ä¸‹è½½é‡ï¼ŒåŒ…å«è¶…è¿‡ 600000 ä¸ª åŒ…ï¼ˆpackageï¼‰ ï¼ˆå³ï¼Œä»£ç æ¨¡å—ï¼‰ã€‚æ¥è‡ªå„å¤§æ´²çš„å¼€æºè½¯ä»¶å¼€å‘è€…ä½¿ç”¨ npm äº’ç›¸åˆ†äº«å’Œå€Ÿé‰´ã€‚åŒ…çš„ç»“æ„ä½¿æ‚¨èƒ½å¤Ÿè½»æ¾è·Ÿè¸ªä¾èµ–é¡¹å’Œç‰ˆæœ¬ã€‚ NPMåŒ…ç®¡ç†å·¥å…·å¼‚å¸¸å¼ºå¤§,ä»–å¯ä»¥æŠŠå¾ˆå¤šä¸ªåŒ…çš„ä¸œè¥¿éƒ½å…³è”èµ·æ¥.æˆ‘ä»¬æ­å»ºæœ¬æ¬¡webpackä½¿ç”¨äº†ä»¥ä¸‹çš„å„ç§åŒ…: â€œcross-envâ€: â€œ^5.1.4â€, â€œcss-loaderâ€: â€œ^0.28.11â€, â€œfile-loaderâ€: â€œ^1.1.11â€, â€œhtml-webpack-pluginâ€: â€œ^3.2.0â€, â€œstyle-loaderâ€: â€œ^0.21.0â€, â€œstylusâ€: â€œ^0.54.5â€, â€œstylus-loaderâ€: â€œ^3.0.2â€, â€œurl-loaderâ€: â€œ^1.0.1â€, â€œvueâ€: â€œ^2.5.16â€, â€œvue-loaderâ€: â€œ^14.2.2â€, â€œvue-template-compilerâ€: â€œ^2.5.16â€, â€œwebpackâ€: â€œ^4.6.0â€, â€œwebpack-dev-serverâ€: â€œ^3.1.3â€ Webpack åœ¨æˆ‘ä»¬è¿™é‡Œä¹Ÿæ˜¯ä¸€ç§åŒ… å…¶å®‰è£…æ–¹æ³•å¦‚ä¸‹: npm install webpack NPM package.jsonæ–‡ä»¶ æ¯ä¸ªé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹é¢ï¼Œä¸€èˆ¬éƒ½æœ‰ä¸€ä¸ªpackage.jsonæ–‡ä»¶ï¼Œå®šä¹‰äº†è¿™ä¸ªé¡¹ç›®æ‰€éœ€è¦çš„å„ç§æ¨¡å—ï¼Œä»¥åŠé¡¹ç›®çš„é…ç½®ä¿¡æ¯ï¼ˆæ¯”å¦‚åç§°ã€ç‰ˆæœ¬ã€è®¸å¯è¯ç­‰å…ƒæ•°æ®ï¼‰ã€‚npm installå‘½ä»¤æ ¹æ®è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œè‡ªåŠ¨ä¸‹è½½æ‰€éœ€çš„æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯é…ç½®é¡¹ç›®æ‰€éœ€çš„è¿è¡Œå’Œå¼€å‘ç¯å¢ƒã€‚ å…¶å®å°±æ˜¯ä¸€ä¸ªjsonæ ¼å¼çš„åŒ…ç®¡ç†æ–‡ä»¶,ä»¥åŠè¿™ç§å‘½ä»¤æ“ä½œé…ç½®,è¿™ä¸ªæ–‡ä»¶é…ç½®å¾ˆçµæ´»,æˆ‘ä»¬ä¹Ÿè¦ç»å¸¸æ·»åŠ å„ç§é…ç½®. ä»¥ä¸‹æ˜¯æˆ‘çš„æ–‡ä»¶é…ç½® : 12345678910111213141516171819202122232425262728293031&#123; \"name\": \"vuewebpacke\", \"version\": \"1.0.0\", \"description\": \"test\", \"main\": \"index.js\", \"scripts\": &#123; \"test\": \"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\", \"build\": \"cross-env NODE_ENV=production webpack --config webpack.config.js\", \"dev\": \"cross-env NODE_ENV=development webpack-dev-server --mode development --config webpack.config.js\" &#125;, \"author\": \"\", \"license\": \"ISC\", \"dependencies\": &#123; \"cross-env\": \"^5.1.4\", \"css-loader\": \"^0.28.11\", \"file-loader\": \"^1.1.11\", \"html-webpack-plugin\": \"^3.2.0\", \"style-loader\": \"^0.21.0\", \"stylus\": \"^0.54.5\", \"stylus-loader\": \"^3.0.2\", \"url-loader\": \"^1.0.1\", \"vue\": \"^2.5.16\", \"vue-loader\": \"^14.2.2\", \"vue-template-compiler\": \"^2.5.16\", \"webpack\": \"^4.6.0\", \"webpack-dev-server\": \"^3.1.3\" &#125;, \"devDependencies\": &#123; \"webpack-cli\": \"^2.0.14\" &#125;&#125; è¿™å°±æ˜¯æ²¡æœ‰é…ç½®loaderé€ æˆçš„å¯¹.vueæ–‡ä»¶ä¸è¯†åˆ« Webpack ç›®å½•ç»“æ„Webpack.config.js package-lock.jsonæ˜¯å½“ node_modules æˆ– package.json å‘ç”Ÿå˜åŒ–æ—¶è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶ä¸»è¦åŠŸèƒ½æ˜¯ç¡®å®šå½“å‰å®‰è£…çš„åŒ…çš„ä¾èµ–ï¼Œä»¥ä¾¿åç»­é‡æ–°å®‰è£…çš„æ—¶å€™ç”Ÿæˆç›¸åŒçš„ä¾èµ–ï¼Œè€Œå¿½ç•¥é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­æœ‰äº›ä¾èµ–å·²ç»å‘ç”Ÿçš„æ›´æ–°ã€‚ è¿™æ˜¯é»˜è®¤æ–‡ä»¶,æˆ‘ä»¬ä¸å¿…åŠ¨è¿™ä¸ª webpack.config.jsè¿™æ˜¯webpackçš„é…ç½®æ–‡ä»¶,ä»–æ˜¯åœ¨è¿è¡Œçš„æ—¶å€™åŠ è½½çš„ä¸€ç§æ–‡ä»¶æ ¼å¼,å±äºnode.jsçš„æ¨¡å—æˆ‘ä»¬ç”¨äº†es6æ¥ç¼–è¾‘å’Œé…ç½®è¿™ä¸ªæ–‡ä»¶é‡Œçš„å„ä¸ªå‚æ•°å’Œå€¼,ä¸‹é¢æ˜¯æ–‡ä»¶å†…å®¹,æˆ‘ä»¬ä¸€ä¸€æ¥è§£é‡Š: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576//é¦–å…ˆè½½å…¥ç”¨çš„åˆ°çš„node.jsåº“æ–‡ä»¶ const path = require(&apos;path&apos;) //path node.js è‡ªå¸¦çš„æ¨¡å—ç”¨æ¥ç”Ÿæˆå‡ºå£æ–‡ä»¶const HTMLPlugin = require(&apos;html-webpack-plugin&apos;) //html-webpack-plugin æ˜¯ç”Ÿæˆhtmlå…¥å£é¡µé¢çš„æ’ä»¶const webpack = require(&apos;webpack&apos;)const isDev = process.env.NODE_ENV === &apos;development&apos;const config = &#123; target: &apos;web&apos;, entry: path.join(__dirname,&apos;src/index.js&apos;), //å…¥å£æ–‡ä»¶ output:&#123; filename: &apos;bundle.js&apos;, path: path.join(__dirname,&apos;dist&apos;) //__dirnameæ˜¯node.jså…¨å±€å˜é‡,æ˜¯æ–‡ä»¶ç›®å½• &#125;, //ç”Ÿæˆå‡ºå£æ–‡ä»¶ module: &#123; rules: [ &#123; test: /\\.vue$/, //æ­£åˆ™è¡¨è¾¾å¼ loader: &apos;vue-loader&apos; &#125;, &#123; test: /\\.css$/, use: [ &apos;style-loader&apos;, &apos;css-loader&apos; ] &#125;, &#123; test: /\\.styl/, use:[ &apos;style-loader&apos;, &apos;css-loader&apos;, &apos;stylus-loader&apos; ] &#125;, &#123; test: /\\.(gif|png|jpeg|jpg|svg)$/, use: [ &#123; loader: &apos;url-loader&apos;, options: &#123; limit: 1024, //url-loaderé…ç½®,å›¾ç‰‡å°äº1024ä½¿ç”¨base64ç¼–ç  name: &apos;[name]-xu.[ext]&apos; //è¾“å‡ºå›¾ç‰‡åå­—æ ¼å¼ &#125; &#125; ] &#125; ] &#125;, //å„ç§loaderå£°æ˜æ–¹å¼ plugins: [ new webpack.DefinePlugin(&#123; &apos;process.env&apos;:&#123; NODE_ENV: isDev ? &apos;&quot;development&quot;&apos; : &apos;&quot;production&quot;&apos; &#125; &#125;), //åŠ¨æ€æŒ‡å®šæ‰“åŒ…æ¨¡å¼development or production new HTMLPlugin() ] //æ’ä»¶æ•°ç»„,ç”¨åˆ°çš„æ’ä»¶éƒ½éœ€è¦ç”¨newå£°æ˜&#125;if (isDev) &#123; config.devtool = &apos;#cheap-module-eval-source-map&apos; config.devServer = &#123; port: 8000, host: &apos;0.0.0.0&apos;, overlay: &#123; errors: true, &#125;, hot: true &#125; config.plugins.push( new webpack.HotModuleReplacementPlugin(), new webpack.NoEmitOnErrorsPlugin() )&#125;module.exports = config //é…ç½®åŠ è½½å¯¹è±¡åŒ– åœ¨æ­¤è´´ä¸Šwebpackæ›´å…·ä½“çš„ç”¨æ³• www.webpackjs.com/concepts è¿è¡Œwebpacknpm run build or dev 12&quot;build&quot;: &quot;cross-env NODE_ENV=production webpack --config webpack.config.js&quot;,&quot;dev&quot;: &quot;cross-env NODE_ENV=development webpack-dev-server --mode development --config webpack.config.js&quot; ä¹‹åè¿˜è¦åœ¨ç»§ç»­çœ‹çœ‹ stylus,es6,vue","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://summxu.github.io/tags/JavaScript/"},{"name":"Node.js","slug":"Node-js","permalink":"https://summxu.github.io/tags/Node-js/"}],"author":"BoomXu"},{"title":"ä¸‰å¤©æ•™ä½ Apache CGIä»å…¥é—¨åˆ°æ”¾å¼ƒ","slug":"2018/apache-cgi-abandon","date":"2018-04-15T16:00:00.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2018/apache-cgi-abandon/","link":"","permalink":"https://summxu.github.io/2018/apache-cgi-abandon/","excerpt":"","text":"åƒä¸‡ä¸è¦ç”¨è¢«æ·˜æ±°çš„æŠ€æœ¯äº§å“ï¼ï¼åƒä¸‡ä¸è¦ç”¨è¢«æ·˜æ±°çš„æŠ€æœ¯äº§å“ï¼ï¼åƒä¸‡ä¸è¦ç”¨è¢«æ·˜æ±°çš„æŠ€æœ¯äº§å“ï¼ï¼ ä¸ºä»€ä¹ˆè¦æŠ›å¼ƒéº»çƒ¦ï¼ ä¸ºä»€ä¹ˆCGIéº»çƒ¦1.é…ç½®ä¸ŠCGIçš„apacheé…ç½®å€’æ˜¯ä¸å¤ªç¹çï¼Œä½†æ˜¯ç»å¯¹æ²¡æœ‰PHPæ¥çš„æ›´å¿«ï¼Œæ›´å…¼å®¹ 2.æ ¼å¼ä¸ŠCGIçš„å˜æˆæ ¼å¼çœ‹ä¸Šå»å°±ä¸å¤ªé«˜æ•ˆï¼Œä¸ä»…è¦è®©ç¨‹åºè¾“å‡ºhtmlæ ¼å¼çš„ç½‘é¡µå¤´è¿˜è¦åœ¨æ–‡ä»¶å¤´éƒ¨å‡†ç¡®çš„å®šä¹‰CGIç¨‹åºçš„æ‰“å¼€ä½ç½®ï¼Œä¸è¿‡è¿™éƒ½ä¸æ˜¯é‡ç‚¹ 3.é‡ç‚¹æ˜¯è°ƒè¯•ä¸ŠCGIå‡†ç¡®çš„æ¥è¯´ï¼Œæ˜¯ç”¨Apacheä¸ºç¯å¢ƒæ¥è¾“å‡ºå‡ºæ¥ï¼Œè¿™æ ·åœ¨è°ƒè¯•çš„æ—¶å€™ç›¸å½“å¤æ‚ï¼Œåœ¨æœ¬åœ°ç¯å¢ƒè°ƒè¯•å¥½çš„ç¨‹åºæ”¾ä¸Šå»å¹¶ä¸èƒ½ç›´æ¥è¿è¡Œï¼Œ è¿˜è¦è°ƒè¯•å„ç§å„æ ·çš„é—®é¢˜ã€‚åŠ ä¸ŠPythonçš„ä¸¤ä¸ªç‰ˆæœ¬çš„ä¸å…¼å®¹ï¼Œæ•´ä¸ªé¡¹ç›®çš„ç¼–å†™ä¼šç”¨80%çš„æ—¶é—´æ¥è¿›è¡Œè°ƒè¯•ã€‚æ‰€ä»¥æœæ–­å¼ƒä¹‹ã€‚ ä¸‹é¢httpçš„æ¥å£è°ƒç”¨éƒ¨åˆ†è¿˜æ˜¯ç”¨å…ˆè¿›çš„PHPæ¥å®ŒæˆæŠŠï¼ŒPythonåªåœ¨å›ºå®šæ—¶é—´å†…åœ¨åå°æŠ“æŠ“æ•°æ®å°±å®Œäº‹äº†ã€‚","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://summxu.github.io/tags/Linux/"},{"name":"Python","slug":"Python","permalink":"https://summxu.github.io/tags/Python/"}],"author":"BoomXu"},{"title":"Apahceçš„CGIæ“ä½œ - Python","slug":"2018/apache-cgi","date":"2018-04-12T16:00:00.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2018/apache-cgi/","link":"","permalink":"https://summxu.github.io/2018/apache-cgi/","excerpt":"","text":"æœ€è¿‘åœ¨ç ”ç©¶Podcastæ³›åšå®¢çš„è®¢é˜…åœ°å€ï¼Œåœ¨å›½å†…çš„å‡ å¤§Podcastå¹³å°åŸºæœ¬éƒ½æä¾›RSSè®¢é˜…æºåœ°å€ï¼Œä½†è¿˜æ˜¯æœ‰å¾ˆå¤šä¸“è¾‘æ²¡æœ‰è¢«åˆ†äº«è®¢é˜…åœ°å€å‡ºæ¥ï¼Œç¢°å·§æœ€è¿‘åœ¨ç ”ç©¶Pythonï¼Œæ‰“ç®—ç”¨Pythonåšçˆ¬è™«ï¼Œåˆ†æå‡ºæ¥å„å¤§èŠ‚ç›®çš„å¹¿æ’­åœ°å€å¹¶ç”Ÿæˆè®¢é˜…æºå¤´ã€‚å¦‚æœç”¨å‰å°å»è°ƒç”¨åå°æ¥å£å¤§éƒ¨åˆ†çš„æ–¹å¼éƒ½æ˜¯ç”¨PHPå’ŒApacheçš„æ–¹æ³•ï¼Œä¸ºäº†ä¸æƒ³å†æ¶‰åŠåˆ°PHPï¼Œä¸‹é¢å°±ç”¨è¿™ç§å¤è€çš„CGIçš„æ–¹å¼æ¥è§£å†³ã€‚ ä»€ä¹ˆæ˜¯ CGICGI æ˜¯Web æœåŠ¡å™¨è¿è¡Œæ—¶å¤–éƒ¨ç¨‹åºçš„è§„èŒƒ,æŒ‰CGI ç¼–å†™çš„ç¨‹åºå¯ä»¥æ‰©å±•æœåŠ¡å™¨åŠŸèƒ½ã€‚CGI åº”ç”¨ç¨‹åºèƒ½ä¸æµè§ˆå™¨è¿›è¡Œäº¤äº’,è¿˜å¯é€šè¿‡æ•°æ®åº“API ä¸æ•°æ®åº“æœåŠ¡å™¨ç­‰å¤–éƒ¨æ•°æ®æºè¿›è¡Œé€šä¿¡,ä»æ•°æ®åº“æœåŠ¡å™¨ä¸­è·å–æ•°æ®ã€‚æ ¼å¼åŒ–ä¸ºHTMLæ–‡æ¡£åï¼Œå‘é€ç»™æµè§ˆå™¨ï¼Œä¹Ÿå¯ä»¥å°†ä»æµè§ˆå™¨è·å¾—çš„æ•°æ®æ”¾åˆ°æ•°æ®åº“ä¸­ã€‚å‡ ä¹æ‰€æœ‰æœåŠ¡å™¨éƒ½æ”¯æŒCGI,å¯ç”¨ä»»ä½•è¯­è¨€ç¼–å†™CGI,åŒ…æ‹¬æµè¡Œçš„Cã€C ++ã€VB å’ŒDelphi ç­‰ã€‚CGI åˆ†ä¸ºæ ‡å‡†CGI å’Œé—´æ¥CGIä¸¤ç§ã€‚æ ‡å‡†CGI ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°æˆ–ç¯å¢ƒå˜é‡è¡¨ç¤ºæœåŠ¡å™¨çš„è¯¦ç»†è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¸æµè§ˆå™¨é€šä¿¡é‡‡ç”¨æ ‡å‡†è¾“å…¥è¾“å‡ºæ–¹å¼ã€‚é—´æ¥CGI åˆç§°ç¼“å†²CGI,åœ¨CGI ç¨‹åºå’ŒCGI æ¥å£ä¹‹é—´æ’å…¥ä¸€ä¸ªç¼“å†²ç¨‹åºï¼Œç¼“å†²ç¨‹åºä¸CGI æ¥å£é—´ç”¨æ ‡å‡†è¾“å…¥è¾“å‡ºè¿›è¡Œé€šä¿¡ã€‚ æ€ä¹ˆç”¨Apacheæ¥è°ƒç”¨æŒ‡å®šCGIå…¶å®è°ƒç”¨åŸç†å¾ˆç®€å•,æ— éå°±æ˜¯é…ç½®apacheçš„cgiæ”¯æŒã€è®¾ç½®cgiçš„è¿è¡Œç›®å½•å’Œè¿è¡Œcgiçš„åç¼€ é…ç½®å¯¹CGIçš„æ”¯æŒLoadModule cgi_module modules/mod_cgi.so å®šä¹‰CGIçš„ç›®å½•12345678910111213ScriptAlias /cgi-bin/ &quot;/var/www/cgi-bin/&quot;## &quot;/var/www/cgi-bin&quot; should be changed to whatever your ScriptAliased# CGI directory exists, if you have that configured.#&lt;Directory &quot;/var/www/cgi-bin&quot;&gt; Options Indexes FollowSymLinks MultiViews +ExecCGI AllowOverride None Options None Order allow,deny Allow from all&lt;/Directory&gt; å®šä¹‰CGIæ”¯æŒçš„æ–‡ä»¶åç¼€AddHandler cgi-script .cgi .py .sh ç¼–å†™Pythonè„šæœ¬çš„CGI1234567891011#!/usr/bin/env python# -*- coding: UTF-8 -*-import cgiimport cgitbprint &quot;Content-type:text/html&quot;printform = cgi.FieldStorage()name = form.getvalue(&apos;name&apos;)print name è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ apache è°ƒç”¨cgiçš„æ—¶å€™å¿…é¡»è¦è¾“å‡ºçš„è¿™ä¸€å¥ ï¼š 12print &quot;Content-type:text/html&quot;print è¿™ä¸ªåº”è¯¥æ˜¯å›ºå®šæ ¼å¼ï¼Œå…·ä½“çš„åŸå› çš„è¯æ²¡å†æ·±å…¥ç ”ç©¶","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://summxu.github.io/tags/Linux/"},{"name":"Python","slug":"Python","permalink":"https://summxu.github.io/tags/Python/"}],"author":"BoomXu"},{"title":"åšå®¢å¤§æ”¹ä¹‹Ajaxã€Cookieã€PHP","slug":"2018/ajax-cookie-php","date":"2018-03-24T16:00:00.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2018/ajax-cookie-php/","link":"","permalink":"https://summxu.github.io/2018/ajax-cookie-php/","excerpt":"","text":"æœ€è¿‘ä¸€ä¸ªæ˜ŸæœŸå†…ï¼Œæˆ‘ä¸€ç›´åœ¨ä¿®æ”¹æˆ‘çš„åšå®¢ï¼Œç›´åˆ°ä»Šå¤©ï¼Œæ‰ç®—æ˜¯åŸºæœ¬å®Œå‹ã€‚ä¸­é—´ä¿®æ”¹äº†å¾ˆå¤šåœ°æ–¹ï¼Œä¹Ÿå­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ï¼Œåœ¨è¿™ç¯‡åšå®¢é‡Œå°±ä¸€èµ·å›é¡¾ä¸‹è¿™æ¬¡åšå®¢ä¿®æ”¹é‡åˆ°çš„å„ç§é—®é¢˜å§ï¼ å› ä¸ºä¸­é—´éš”å¾—å¤©æ•°å®åœ¨æ˜¯å¤ªå¤šï¼Œæˆ‘ä¹Ÿæ²¡æœ‰æ—¶é—´å½“æ—¶å°±å»æ•´ç†ä¸€ç•ªï¼Œç°åœ¨å†æ€»ç»“çš„è¯ï¼Œä¸­é—´è‚¯å®šä¼šæœ‰å¾ˆå¤šé—æ¼çš„åœ°æ–¹ï¼Œ æ‰€ä»¥è¯´ä»¥åæ¯å¤©é‡åˆ°çš„æ–°çš„æŠ€æœ¯é—®é¢˜ä¸€å®šè¦åŠæ—¶è®°å½•ä¸‹æ¥ã€‚ Jekyllåœ¨ä¸€å¼€å§‹æˆ‘å…ˆæ ¹æ®Jekyllçš„å†…éƒ¨åŠŸèƒ½æ¥æ·»åŠ æ—¥è®°ï¼Œå…¶ä¸­ä¸»è¦è¿ç”¨äº†Jekyllçš„æ–‡ç« åˆ†ç±»åŠŸèƒ½ categories æˆ‘ä¸€ç›´ä»¥ä¸ºJekyll æ²¡æœ‰è¿™ç§åŠŸèƒ½ï¼Œ è€Œä¸”åœ¨ç½‘ä¸ŠæŸ¥æ‰¾èµ„æ–™éƒ½è¯´å¾—è¦è¿™ä¹ˆå®ç°å¾ˆå¤æ‚ï¼Œè¿˜æœ‰è¯´è¦ä¿®æ”¹Jekyllçš„gemæ–‡ç« éå†çš„æ’ä»¶ï¼Œå…¶å®å¹¶æ²¡æœ‰è¿™ä¹ˆå¤æ‚ï¼Œåªéœ€åœ¨æ–‡ç« å¤´éƒ¨æ·»åŠ æ–‡ç« æ ‡ç­¾å°±è¡Œäº†ï¼Œå…³äºJekyll çš„æ›´å¤šç”¨æ³•ï¼Œä»¥ä¸‹è¿™ç¯‡åšå®¢å·²ç»è¯´å¾—å¾ˆå®Œç¾äº†ã€‚ http://ju.outofmemory.cn/entry/149459 Cookieæˆ‘ä½¿ç”¨äº†Jqueryçš„cookieæ’ä»¶ï¼Œå…¶ä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œè¯•ç”¨cookieçš„åŸå› ä¸»è¦æ˜¯ä¸ç”¨æ¯ç¯‡æ—¥è®°æˆ–è€…è¯´æ˜¯æ¯æ¬¡æ‰“å¼€çš„æ—¶å€™éƒ½ä¼šè¿›è¡Œå¯†ç éªŒè¯ã€‚ä¸€å¼€å§‹æƒ³çš„æ˜¯ç›´æ¥æŠŠå¯†ç ä»æœåŠ¡ç«¯å–å‡ºæ¥ç„¶ååœ¨æœ¬åœ°åˆ¤æ–­ï¼Œè¿™æ ·è¿˜çœå»äº†æ¯æ¬¡éƒ½å‘æœåŠ¡å™¨ç«¯å‘é€å±€çš„éº»çƒ¦ã€‚ä½†æ˜¯è¿™æ ·è¡Œä¸é€šï¼Œå› ä¸ºå¯†ç ä¸€æ—¦åšæœ¬åœ°åˆ¤æ–­ï¼Œå°±ä¸å®‰å…¨ã€‚ 1.å†™å…¥Cookie1234567891011$.cookie(&quot;å†™å…¥çš„cookieå&quot;,&quot;å†™å…¥çš„cookieå€¼&quot;,&#123;expires:7, //å«ä¹‰ï¼šæœ‰æ•ˆæœŸï¼Œå•ä½ï¼šå¤©ï¼Œå¯å†™å€¼ï¼šæ•°å­—ã€æ—¥æœŸå¯¹è±¡ï¼Œé»˜è®¤ï¼šå¦‚æœä¸å†™æˆ–å†™nullåˆ™æµè§ˆå™¨å…³é—­åcookieåˆ é™¤path:&quot;/&quot;, //è·¯å¾„ï¼Œé»˜è®¤æ˜¯åˆ›å»ºè¯¥cookieçš„é¡µé¢è·¯å¾„domain:&quot;åœ°å€&quot;, //åŸŸåå±æ€§ï¼Œé»˜è®¤æ˜¯åˆ›å»ºè¯¥cookieçš„é¡µé¢åŸŸåsecure:true //å¦‚æœä¸ºtrueï¼Œé‚£ä¹ˆæ­¤cookieçš„ä¼ è¾“ä¼šè¦æ±‚ä¸€ä¸ªå®‰å…¨åè®®ï¼Œä¾‹å¦‚https&#125;); 2.è¯»å–cookiejQueryçš„è¯»å–cookieå¾ˆç®€å•ï¼š $.cookie(&quot;è¯»å–çš„cookieå&quot;) 3.åˆ é™¤cookieå†™æ³•ï¼š$.cookie(&quot;åˆ é™¤çš„cookieå&quot;,null) //å‚æ•°nullï¼šä»£è¡¨åˆ é™¤æ­¤cookie cookieä¸€å¼€å§‹ä¸€ç›´æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ¯ä¸€é¡µçš„éªŒè¯å¥½åƒéƒ½æ˜¯ä¸€ä¸ªcookieï¼Œæ‰¾åˆ°èµ„æ–™å‘ç°æ˜¯å› ä¸ºæ²¡æœ‰é…ç½® path å¦‚æœè¦æƒ³å…¨ç«™cookieï¼Œåªè¦åŠ ä¸Š path:â€/â€œ å°±å¥½äº†ã€‚ä¸‹é¢å†ç»§ç»­è¯´ä¸‹Ajaxã€‚ Ajaxå…¶å®åœ¨å¼€å§‹ç ”ç©¶å­¦ä¹ ajaxä¹‹å‰ï¼Œæˆ‘æ„Ÿè§‰è¿™æ˜¯ä¸€ç§å¾ˆéº»çƒ¦åŠ¨ä¸œè¥¿ï¼Œä½†æ˜¯ä»”ç»†ç ”ç©¶å‘ç°ajaxå¹¶ä¸æ˜¯è¿™ä¹ˆéš¾ï¼Œåªæ˜¯æœ‰æ—¶å€™ä¼šå‡ºç°è«åå…¶å¦™çš„é—®é¢˜ã€‚çœ‹çœ‹ä»£ç å’Œå†™æ³•ï¼š 1234567891011121314151617$.ajax(&#123; type: \"GET\", url: \"http://192.168.1.112/check.php\", data: &#123;pass : $(\"#pass\").val()&#125;, //å‘é€å‡ºå»çš„æ•°æ® dataType : \"json\", //è¿”å›çš„æ•°æ®æ ¼å¼ async : false, //åŒæ­¥è¯·æ±‚ success: function (data) &#123; if(data.status == 1)&#123; alert(data.status); &#125;else&#123; alert(data.status); &#125; &#125;, // æˆåŠŸåä¹‹æ‰§è¡Œ error: function()&#123; alert('äº§ç”Ÿäº†è«åå…¶å¦™çš„é”™è¯¯ï¼'); &#125; // å¤±è´¥åæ‰§è¡Œ &#125;); ajaxæ™®é€šçš„ä¼ é€’,è¿™å‡ ä¸ªå‚æ•°è¿˜æ˜¯å¾ˆ ç®€å•çš„ã€‚ç¬¬ä¸€ä¸ªé‡åˆ°çš„é—®é¢˜å°±æ˜¯ï¼š 2018.8.28 å›æ¥çœ‹åˆ°ä¹‹å‰çš„è¿™ä¸ªåšå®¢é‚£æ—¶å€™çš„æŠ€æœ¯è¿˜æ˜¯å¤ªæµ…äº†ï¼Œ å½“æ—¶åªæ¶‰åŠåˆ°jQueryçš„ajaxå°è£…å‡½æ•°ï¼Œè¿˜ä¸çŸ¥é“JavaScriptçš„ajaxçš„è¯·æ±‚è¿‡ç¨‹ã€‚ç°åœ¨æƒ³æƒ³ï¼Œajaxå°±æ˜¯åˆ›å»ºä¸€ä¸ªxmlhttprequestå¯¹è±¡ï¼Œå†ä½¿ç”¨openå»ºç«‹è¿æ¥ï¼Œç„¶åå‘é€è¯·æ±‚ç›´è‡³æ¥å—è¯·æ±‚ã€‚è¿™æ—¶å¯èƒ½æ¶‰åŠåˆ°è¯·æ±‚è¿‡ç¨‹ä¸­çš„4ç§çŠ¶æ€ç ï¼š 0ï¼šåˆå§‹åŒ–ï¼ŒXMLHttpRequestå¯¹è±¡è¿˜æ²¡æœ‰å®Œæˆåˆå§‹åŒ–1ï¼šè½½å…¥ï¼ŒXMLHttpRequestå¯¹è±¡å¼€å§‹å‘é€è¯·æ±‚2ï¼šè½½å…¥å®Œæˆï¼ŒXMLHttpRequestå¯¹è±¡çš„è¯·æ±‚å‘é€å®Œæˆ3ï¼šè§£æï¼ŒXMLHttpRequestå¯¹è±¡å¼€å§‹è¯»å–æœåŠ¡å™¨çš„å“åº”4ï¼šå®Œæˆï¼ŒXMLHttpRequestå¯¹è±¡è¯»å–æœåŠ¡å™¨å“åº”ç»“æŸ 1234var xhr = new XMLHtttpRequest ()xhr.open(&apos;GET&apos;,&apos;./data.json&apos;,true)xhr.send()xhr.load()&#123;&#125; è·¨åŸŸè¯·æ±‚é—®é¢˜ æœ¬åœ°æµ‹è¯•æ˜¯å¯ä»¥æ­£å¸¸ä¼ è¾“ï¼Œä½†æ˜¯Githubä¸Šæ˜¯ä¸æ”¯æŒä»»ä½•æœåŠ¡å™¨å¯æ‰§è¡Œçš„è„šæœ¬çš„ï¼Œæ‰€ä»¥æˆ‘å¿…é¡»ç”¨å¦ä¸€ä¸ªå¯æ‰§è¡Œåå°çš„æœåŠ¡å™¨æ¥è¿›è¡Œå¯†ç éªŒè¯ï¼Œè¿™æ ·å°±è¦æ¶‰åŠåˆ°è·¨åŸŸè¯·æ±‚ã€‚æˆ‘åœ¨ç½‘ç»œä¸Šæ”¶é›†äº†å„ç§è§£å†³æ–¹æ³•ï¼Œå…¶ä¸­æœ‰ç”¨ jasonpã€åŠ headerå¤´ è¿˜æœ‰å„ç§å¾ˆå¤æ‚çš„æ–¹æ³•ï¼Œä½†æ˜¯åœ¨è¿™å…¶ä¸­headerå¤´æ˜¯æœ€ç®€å•çš„ã€‚åªéœ€è¦åœ¨åå°PHPé‡ŒåŠ ä¸Šè¿™ä¹ˆä¸€å¥ï¼šheader(&#39;Access-Control-Allow-Origin:*&#39;); å¼‚æ­¥è¯·æ±‚é—®é¢˜ ajaxä¸­æœ‰ä¸€ä¸ªå‚æ•°å°±æ˜¯ async : false å°±æ˜¯æ˜¯å¦å¼‚æ­¥è¯·æ±‚ï¼Œé»˜è®¤æ˜¯å¼‚æ­¥çš„ï¼Œè¿™ä¸ªæ„æ€å°±æ˜¯ ajaxè¿è¡Œçš„æ—¶å€™èƒ½åŒæ—¶è¿è¡Œå…¶ä»–çš„ä¸œè¥¿ å°±åƒæ˜¯å¤šçº¿ç¨‹ä¸€æ · ä½†æ˜¯åœ¨å®é™…ç”¨çš„æ—¶å€™ï¼Œæˆ‘å‘ç°è·¨åŸŸç”¨å¼‚æ­¥è¯·æ±‚çš„è¯ä¼šå¾ˆå¤§å‡ ç‡å‡ºç°è¯·æ±‚ä¸æˆåŠŸçš„æƒ…å†µï¼Œæˆ‘ä¸çŸ¥é“æ˜¯ä¸ºä»€ä¹ˆã€‚ PHPåå°æ¥å£PHPæˆ‘ä¹‹å‰å°è¯•ç€åšè¿‡ï¼Œä½†æ˜¯ä¸€ç›´æ²¡æœ‰æ€ä¹ˆå­¦ï¼Œä¹Ÿæ²¡æœ‰å®é™…çš„é¡¹ç›®èƒ½ç”¨ä¸Šphpï¼Œç°åœ¨å¯ä»¥äº†ï¼Œæˆ‘å®Œå…¨å¯ä»¥ç”¨PHPåšä¸€ä¸ªåç«¯åˆ¤æ–­çš„æ¥å£ã€‚PHPä»£ç å¾ˆç®€å•ï¼Œä½†æ˜¯æœ‰è¿™ä¹ˆä¸¤ç‚¹æ³¨æ„çš„åœ°æ–¹ï¼š 1.åšæ¥å£ä¸€å®šè¦åŠ ä¸Š `error_reporting(E_ERROR);`æˆ‘ä¹‹å‰è§è¿‡åˆ«äººçš„æ¥å£å°±æ˜¯åŠ ä¸Šäº†è¿™ä¸ªï¼Œè¿™å¥è¯çš„æ„æ€æ˜¯ä¸è®©PHPè¾“å‡ºé”™è¯¯æç¤ºï¼Œæœ‰æ—¶å€™è¾“å‡ºæ¥é”™è¯¯æç¤ºè¿”å›å‡ºæ¥çš„æ•°æ®å°±ä¸æ˜¯æ ‡å‡†çš„æ ¼å¼äº†ã€‚ 2.å°±æ˜¯è·¨åŸŸè¯·æ±‚çš„headerå¤´ã€‚123456789101112131415161718&lt;?php // /*éªŒå¯†ç ç æ˜¯å¦æ­£ç¡®*/ error_reporting(E_ERROR); header(&apos;Access-Control-Allow-Origin:*&apos;); $code = trim($_GET[&apos;pass&apos;]);//æ¥æ”¶å‰ç«¯ä¼ æ¥çš„æ•°æ® $raw_success = array(&apos;status&apos; =&gt; 1 , &apos;word&apos; =&gt; $code); $res_success = json_encode($raw_success); $raw_fail = array(&apos;status&apos; =&gt; 0); $res_fail = json_encode($raw_fail); if ($code == &quot;æƒ³ä»€ä¹ˆå‘¢&quot;) &#123; echo $res_success; &#125; else &#123; echo $res_fail; &#125;?&gt;","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://summxu.github.io/tags/JavaScript/"}],"author":"BoomXu"},{"title":"åˆå…¥è‚¡å¸‚æ–°ä½“éªŒ-å¼€æˆ·å’Œç¬¬ä¸€è‚¡","slug":"2018/stock-first","date":"2018-03-14T16:00:00.000Z","updated":"2023-08-29T09:51:35.293Z","comments":true,"path":"2018/stock-first/","link":"","permalink":"https://summxu.github.io/2018/stock-first/","excerpt":"","text":"æ—¶éš”ä¸€æ®µæ—¶é—´ï¼Œé‡åˆ°äº†å¾ˆå¤šäº‹æ²¡è®°å½•ï¼Œä¸­é—´æ²‰è¿·æ¸¸æˆ ã€‚ç°åœ¨è½¬çœ¼åˆ°äº†å¤§ä¸‰ä¸‹å­¦æœŸï¼Œå´è¿˜æ²¡æœ‰æ‹¿åˆ°è¯ä¹¦ä»€ä¹ˆçš„ã€‚æˆ‘æ‰“ç®—å¼€å§‹å­¦ä¹ ï¼Œä½†æ˜¯åœ¨æ­¤æœŸé—´ï¼Œæˆ‘æƒ³å»å­¦ä¹ é‡‘èï¼Œä¹Ÿå°±æ˜¯ä»è‚¡å¸‚å¼€å§‹ã€‚ã€‚ 2018å¹´3æœˆ12æ—¥ æˆåŠŸåœ¨ã€Šä¸­æ³°è¯åˆ¸ã€‹å¼€æˆ·2018å¹´3æœˆ13æ—¥ å­˜å…¥5700å…ƒ å¹¶è´­ä¹°äº†ä»¥ä¸‹ä¸¤è‚¡ 002012 å‡¯æ©è‚¡ä»½ 7.98 ä¹°å…¥ 400è‚¡ 000806 é“¶æ²³ç”Ÿç‰© 8.20 ä¹°å…¥ 300è‚¡ 2018å¹´3æœˆ14æ—¥ 7.69 å–å‡ºé“¶æ²³ç”Ÿç‰© äºæŸ1552018å¹´3æœˆ15æ—¥ 1.89 å–å‡ºå‡¯æ©è‚¡ä»½ äºæŸ50 éšå³ä¹°å…¥ 601996 ä¸°æ—é›†å›¢ç›®å‰äºæŸ23 å…¶ä¸­ é“¶æ²³ç”Ÿç‰© ä¸°æ—é›†å›¢ éƒ½æ˜¯é«˜ä»·å–äº†ç„¶åè·Œï¼Œå‡¯æ©è‚¡ä»½æ˜¯å¹³ä»·ä¹°çš„ï¼Œç„¶åè·Œäº†å°±å–äº†ï¼Œç„¶ååˆæ¶¨ä¸Šæ¥äº†ã€‚ æˆ‘è®¤ä¸ºåœ¨æˆ‘æ“ä½œä¸­è¿˜å­˜åœ¨è®¸å¤šé—®é¢˜ï¼š 1ã€åˆ†æ—¶ä¹°çš„æ—¶å€™æ‰¾ä¸åˆ°æœ€ä½ç‚¹ 2ã€åˆ†æ—¶å–çš„æ—¶å€™æ‰¾ä¸åˆ°æœ€é«˜ç‚¹ï¼Œä¸çŸ¥é“æ˜¯å¦è¿˜ä¼šåå¼¹ã€‚ 3ã€æ²¡æœ‰è‰¯å¥½çš„å¿ƒé‡Œå‡†å¤‡ï¼Œç›²ç›®è´­ä¹°ä¸è¿‡æœ€è¿‘æˆ‘ä¹Ÿåœ¨çœ‹è§†é¢‘æˆ–è€…çŸ¥ä¹å¤§ç¥çš„æ–¹æ³•çš„æ—¶å€™äº†è§£äº†äº›çŸ¥è¯†ï¼š çœ‹åˆ†æ—¶æœ€é«˜ç‚¹ï¼š åœ¨èµ°åŠ¿ç¬¬ä¸€æ³¢å†²é«˜çš„æ—¶å€™ä¸è¦ç€æ€¥ï¼Œç­‰å›è½åçœ‹ç¬¬äºŒæ³¢å†²é«˜ï¼Œå¦‚æœç¬¬ä¸€æ³¢å†²é«˜çš„é‡å’Œç¬¬äºŒæ³¢çš„é‡å·®è·ä¸å¤§ï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½ä¼šæœ‰ç¬¬ä¸‰æ³¢å†²é«˜ã€‚å¦‚æœè¯´ç¬¬ä¸€æ³¢å†²é«˜çš„é‡æ˜æ˜¾å¤§äºç¬¬äºŒæ³¢çš„é‡ï¼Œé‚£ä¹ˆåˆ™å¾ˆæœ‰å¯èƒ½é«˜ç‚¹è¯ç”Ÿã€‚ ä¸‹è·Œåå¼¹ï¼š çœ‹äº†å´æµ…çš„è‚¡ç¥¨ä¹å›­ï¼Œä»–è¯´ä¸‹è·Œåˆ†ä¸ºæ€¥è·Œå’Œç¼“è·Œä¸¤ç§ï¼Œç¼“è·Œä¸€å®šè¦å‡ºå±€ï¼Œæ€¥è·Œç¬é—´æ‹‰èµ·æ¥å°±å¯ä»¥å†ç­‰ç­‰çœ‹ã€‚ æ€»çš„æ¥è¯´æœ€ä¸ºä¸€ä¸ªæ–°æ‰‹æˆ‘è¿˜ä»€ä¹ˆéƒ½ä¸çŸ¥é“ ä½†æ˜¯ä¸‹ä¸€ä¸ªè¦å­¦ä¹ çš„æŠ€æœ¯æ˜¯è¦è®¾ç½®æ­¢æŸä½ ã€‚ 2018å¹´3æœˆ15æ—¥17ç‚¹00åˆ†","categories":[],"tags":[{"name":"ç”Ÿæ´»åˆ†äº«","slug":"ç”Ÿæ´»åˆ†äº«","permalink":"https://summxu.github.io/tags/ç”Ÿæ´»åˆ†äº«/"}],"author":"BoomXu"},{"title":"è¥¿æ¸¸è®°ä¸­æœ‰ä»€ä¹ˆå¯æ‚²çš„ç»†èŠ‚ï¼Ÿ","slug":"2017/xiyouji-kebei","date":"2017-06-30T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/xiyouji-kebei/","link":"","permalink":"https://summxu.github.io/2017/xiyouji-kebei/","excerpt":"","text":"æœ€å¯æ‚²ï¼Œæœ€è®©äººå¿ƒé…¸çš„è«è¿‡äºé»„ç‹®ç²¾ã€‚ è¦è¯´è¥¿æ¸¸è®°é‡Œæœ€å–„è‰¯æœ€è€å®çš„å¦–æ€ªæ˜¯è°ï¼Œè«è¿‡äºé»„ç‹®ç²¾å’Œä»–æ‰‹ä¸‹çš„å°å¦–ã€‚ å­™æ‚Ÿç©ºå»è¿½æŸ¥å…µå™¨æ—¶é‡åˆ°é»„ç‹®ç²¾æ‰‹ä¸‹çš„ä¸¤ä¸ªç‹¼å¤´æ€ªï¼Œä»–ä»¬åœ¨è¯´ä»€ä¹ˆå‘¢ï¼Ÿ â€œæˆ‘ä»¬ä¹Ÿæœ‰äº›ä¾¥å¹¸ã€‚æ‹¿è¿™äºŒåä¸¤é“¶å­ä¹°çŒªç¾Šå»ï¼Œå¦‚ä»Šåˆ°äº†å‰æ–¹é›†ä¸Šï¼Œå…ˆåƒå‡ å£¶é…’å„¿ï¼ŒæŠŠä¸œ è¥¿å¼€ä¸ªèŠ±å¸å„¿ï¼Œè½ä»–äºŒä¸‰ä¸¤é“¶å­ï¼Œä¹°ä»¶ç»µè¡£è¿‡å¯’ï¼Œå´ä¸æ˜¯å¥½ï¼Ÿâ€ä¸¤ä¸ªæ€ªè¯´è¯´ç¬‘ç¬‘çš„ï¼Œä¸Šå¤§è·¯æ€¥èµ°å¦‚é£ã€‚ èƒ½åƒä¸Šå‡ å£¶ï¼Œè¿˜èƒ½ä¹°ä¸Šä»¶æ£‰è¡£ä»¥åå†¬å¤©ä¸ç”¨æŒ¨å†»å°±èƒ½è®©ä»–ä»¬æ¬£å–œçš„æœ‰è¯´æœ‰ç¬‘ï¼Œé«˜å…´çš„éƒ½å¿«é£èµ·æ¥ã€‚è¿™æ ·è€å®æœ¬åˆ†çš„è‹¦é€¼æ—¥å­ï¼Œæ˜¯é‚£äº›åŠ¨ä¸åŠ¨æ‰ä¸ªäººæ¥åƒçš„å¦–æ€ªèƒ½æƒ³è±¡çš„å—ï¼Ÿ å­™æ‚Ÿç©ºå®šä½äº†ä¸¤ä¸ªå°å¦–ï¼Œå–èµ°äº†å¸¦ç»™ä»–ä¿©æ— é™æ¬£å–œçš„äºŒåä¸¤é“¶å­ï¼Œè·ŸçŒªå…«æˆ’å˜ä½œå°å¦–æ¨¡æ ·ï¼Œè®©æ²™åƒ§åŒ–å¦†æˆå–çŒªç¾Šçš„ï¼Œè·Ÿä»–ä»¬å›å»ç»™é»„ç‹®ç²¾è¯´ï¼Œè¿˜æ¬ ä»–äº”ä¸¤é“¶å­ã€‚ å¦–ç‹å¬è¯´ï¼Œå³å”¤ï¼šâ€œå°çš„ä»¬ï¼Œå–äº”ä¸¤é“¶å­ï¼Œæ‰“å‘ä»–å»ã€‚â€ æ¢æˆåˆ«çš„å¦–ç²¾ï¼Œæ—©å°±ä¸€å£æŠŠä»–åäº†ï¼Œè¿˜æƒ³è¦é“¶å­ï¼Ÿä½†é»„ç‹®ç²¾ç«‹é©¬å°±ç»™ï¼Œè¿ä¸ªä»·éƒ½ä¸è¿˜ï¼Œè€å®å·´äº¤åˆ°è¿™ç§ç¨‹åº¦ã€‚ ç„¶åå­™æ‚Ÿç©ºè¯´çŒªç¾Šè´©å­è¦çœ‹é‚£å‡ ä»¶å…µå™¨ï¼Œé»„ç‹®ç²¾åšè´¼å¿ƒè™šï¼Œæ€•ç‰åå·ç‹å­â€ä¸€æ—¶æ¥è®¿æ±‚â€ï¼Œè‡ªå·±è¯´ä¸è¿‡å»ï¼Œä¸æ•¢è®©çœ‹ã€‚ä½†ç»ä¸ä½å­™æ‚Ÿç©ºåŠï¼Œä»–è¿˜æ˜¯ç­”åº”è®©çœ‹äº†ã€‚ çœ‹åˆ°è¿™é‡Œï¼Œ86 ç‰ˆè¥¿æ¸¸è®°ç¼–å‰§éƒ½çœ‹ä¸ä¸‹å»äº†ã€‚è¦æ˜¯æŒ‰åŸè‘—ä¸­æ‹å‡ºæ¥ï¼Œè¿™å¦–æ€ªä¹Ÿå¤ªæœ¬åˆ†å¥½è¯´è¯äº†å§ï¼Œè¿™æ ·ä¸€ä¸ªå¦–æ€ªè¢«å­™æ‚Ÿç©ºæ‰“æ­»å¹¶åˆ†å°¸ï¼Œä¹Ÿå¤ªæŸå­™æ‚Ÿç©ºé™¤æš´å®‰è‰¯çš„å½¢è±¡äº†ã€‚äºæ˜¯æ”¹æˆäº†ï¼Œä»¥ç™½é€é¸­å­ä½œä¸ºäº¤æ¢æ¡ä»¶æ¥çœ‹å…µå™¨ã€‚ å¯å®é™…ä¸Šä¸ä»…é“¶å­ç…§ç»™ï¼Œè¿˜ç™½ç®¡ä¸€é¡¿é…’é¥­ã€‚ è¯´ä¸äº†ï¼Œæœ‰ä¸€å°å¦–ï¼Œå–äº†äº”ä¸¤é“¶å­ï¼Œé€’ä¸è¡Œ è€…ã€‚è¡Œè€…å°†é“¶å­é€’ä¸æ²™åƒ§é“ï¼šâ€œå®¢äººï¼Œæ”¶äº†é“¶å­ï¼Œæˆ‘ä¸ä½ è¿›åé¢å»åƒäº›é¥­æ¥ã€‚â€ é»„ç‹®ç²¾åªæ˜¯å˜±å’ é‚£æ€ªç‹éšåè·Ÿç€é“ï¼šâ€œå®¢äººï¼Œé‚£ä¸­é—´æ”¾å…‰äº®çš„å°±æ˜¯é’‰é’¯ã€‚ä½ çœ‹ä¾¿çœ‹ï¼Œåªæ˜¯å‡º å»ï¼Œåƒä¸‡è«ä¸äººè¯´ã€‚â€ æ¢äº†åˆ«çš„å¦–æ€ªæ—©æ€äº†ç­å£äº†å§ã€‚ å·äº†ä¸‰ä»¶å…µå™¨æ˜¯çŠ¯äº†ç›—çªƒç½ªï¼Œå…³ä¸Šä¸‰äº”å¹´ä¹Ÿå°±å·®ä¸å¤šäº†ï¼Œåå¹´ä¹Ÿå°±é¡¶å¤©äº†å§ã€‚å¯æ˜¯ç»ˆèº«ç›‘ç¦å­™æ‚Ÿç©ºéƒ½ä¸æ„¿æ„ï¼Œæ€äº†é»„ç‹®ç²¾ï¼Œè¿˜ç­äº†ä»–æ»¡é—¨ï¼Œå¹¶ä¸”æŠŠé»„ç‹®ç²¾åˆ†å°¸åƒäº†ã€‚ è¾›è¾›è‹¦è‹¦èµšæ¥çš„å®¶å½“ï¼Œå°±è¿™æ ·è¢«å­™æ‚Ÿç©ºçƒ§äº†ï¼Œå…¨å®¶çš„è€å°è¢«ç­äº†ã€‚å´æ‰¿æ©å¯¹é»„ç‹®ç²¾çš„æ‚²ç—›æ¯«ä¸åå•¬ç¬”å¢¨ã€‚ é‚£å¦–ç²¾é—»è¨€ï¼Œæ­¢ä¸ä½æ³ªå¦‚æ³‰æ¶Œï¼ŒåŒè„šé½è·Œï¼Œå–Šå£°æŒ¯å¤©ï¼Œæ¨é“ï¼šâ€œé‚£ç§ƒå®ï¼ååˆ†ä½œæ¶ï¼æ€ ä¹ˆå¹²å‡ºè¿™èˆ¬æ¯’äº‹ï¼ŒæŠŠæˆ‘æ´åºœçƒ§å°½ï¼Œç¾äººçƒ§æ­»ï¼Œå®¶å½“è€å°ä¸€ç©ºï¼æ°”æ€æˆ‘ä¹Ÿï¼Œæ°”æ€æˆ‘ä¹Ÿï¼â€ 1 åœ¨ç­é¡¶çš„æ‰“å‡»ä¹‹ä¸‹ï¼Œé»„ç‹®ç²¾å´©æºƒäº†ï¼Œç”šè‡³éƒ½ä¸æƒ³å»æŠ¥ä»‡ï¼Œåªæƒ³æ’å¢™è‡ªæ€ã€‚ â€œè€çˆ·ï¼æˆ‘é‚£ä»¬ä¸ªå±±åœºï¼Œéä¸€æ—¥æ²»çš„ï¼Œä»Šè¢«è¿™ç§ƒå®å°½æ¯ï¼Œæˆ‘å´è¦æ­¤å‘½åšç”šçš„ï¼â€æŒ£èµ·æ¥ï¼Œå¾€çŸ³å´–ä¸Šæ’å¤´ç£•è„‘ï¼Œè¢«é›ªç‹®ã€çŒ± ç‹®ç­‰è‹¦åŠæ–¹æ­¢ã€‚ ä¸€ä¸ªä¸è‚¯ä¼¤å¤©å®³ç†ï¼Œè€å®æœ¬åˆ†ï¼Œä¹°å–å…¬å¹³ï¼Œä¸äººä¸ºå–„çš„é»„ç‹®ç²¾è€å°è¢«ç­äº†ï¼Œè‡ªå·±è¢«æ€ï¼Œç„¶åå°¸ä½“è¢«åˆ†åƒäº†ã€‚ é‚£ä¸ªåƒäº†ä¸€åŸäººçš„å¤§é¹ï¼Œä½œäº†å¦‚æ¥çš„æŠ¤æ³•ã€‚ é‡‘é±¼ç²¾æ¯å¹´åƒä¸€å¯¹ç«¥ç”·ç«¥å¥³ï¼Œæ‘æ°‘ä»¬è¿˜å¤§æ‹œé‡‘é±¼ç²¾çš„ä¸»äººã€‚ é»„è¢æ€ªåƒäººéšä¾¿ï¼Œåªè¢«ç½šä¿¸å‡ å¤©ã€‚ èœˆèš£ç²¾æ¯’ç¿»å¤šå°‘è·¯äººï¼Œä½œäº†æŠ¤æ³•å¤§ç¥ã€‚ è¿™å°±æ˜¯åè‘—ï¼Œä¸åƒä¸‰æµå°è¯´ä¸€æ ·ï¼Œä¸»è§’ä¸æ˜¯é«˜å¤§ä¸Šåšä»€ä¹ˆéƒ½æ˜¯æ­£ä¹‰çš„ï¼Œä¸»è§’çš„å¯¹æ‰‹ä¹Ÿä¸ä¸€å®šæ˜¯è¯¥æ­»çš„åäººï¼Œæœ€åæ¶äººä¹Ÿä¸ä¸€å®šå¾—æ¶æŠ¥ï¼ŒçœŸå®åœ°æç»˜äº†è¿™ä¸ªå¤æ‚çš„ä¸–ç•Œã€‚ è½¬è‡ªçŸ¥ä¹ å¾…æˆ‘æ–½ä¸ºåœ°ç…å˜çš„å›ç­”ï¼šhttps://www.zhihu.com/question/51682490","categories":[],"tags":[{"name":"æ–‡å­¦åˆ†äº«","slug":"æ–‡å­¦åˆ†äº«","permalink":"https://summxu.github.io/tags/æ–‡å­¦åˆ†äº«/"}],"author":"BoomXu"},{"title":"ä¼˜é›…çš„ä½¿ç”¨Emailå’ŒRssä»¥ä¾¿è®©ç”Ÿæ´»äº•äº•æœ‰åº","slug":"2017/email-rss-xiantan","date":"2017-06-27T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/email-rss-xiantan/","link":"","permalink":"https://summxu.github.io/2017/email-rss-xiantan/","excerpt":"","text":"é«˜é€¼æ ¼çš„ç”Ÿæ´»æ–¹å¼ä¾ç„¶ä¸èƒ½ç¦»å¼€Email. æœ‰è´¨é‡çš„å†…å®¹ä¾ç„¶ä¼šç”¨Rssè®¢é˜…. Emailé‚®ä»¶å‡ æˆ·è´¯ç©¿æ•´ä¸ªäº’è”ç½‘å²çš„å‘å±•ï¼Œç›´åˆ°ç°åœ¨ä¸€äº›å¾ˆæ­£å¼çš„åœºåˆä¾ç„¶ç”¨Emailæ¥é€šä¿¡ï¼Œå„ç§ä¼ä¸šä¹‹é—´çš„å•†åŠ¡äº¤æµç­‰ç­‰ã€‚ ä½†æ˜¯éšç€äº’è”ç½‘çš„å‘å±•å¾ˆå¿«å°±æœ‰äº†å„ç§äº§å“æ¥æ›¿ä»£Email,æ¯”å¦‚IMå³æ—¶é€šä¿¡çš„æµè¡Œå„ç§å„æ ·çš„èŠå¤©è½¯ä»¶ã€‚ Emailåœ¨ä¸­å›½å¯ä»¥è¯´ä¸å¤ªæµè¡Œï¼Œå”¯ä¸€èƒ½è®©æ‰€æœ‰äººéƒ½æ‹¥æœ‰ä¸€ä¸ªé‚®ç®±çš„ä¼°è®¡è¿˜æ˜¯QQé‚®ç®±ï¼Œè¦ä¸æ˜¯è…¾è®¯ï¼Œæˆ–è®¸å¤§éƒ¨åˆ†çš„äººéƒ½ä¸ä¼šå»æ³¨å†Œä¸€ä¸ªé‚®ç®±ã€‚ä¸è¿‡å¦‚æœä½ è¦æ˜¯è§‰å¾—Emailåªèƒ½å’Œæœ‹å‹å’Œä¸€äº›é™Œç”Ÿçš„äººå‘äº›é‚®ä»¶æ¥é€šä¿¡ï¼Œé‚£ä½ å°±OUTäº†ã€‚Emailçš„åŠŸèƒ½è¿œä¸æ­¢å¦‚æ­¤ã€‚ è¿™é‡Œæˆ‘è¯´è¯´Emailçš„å„ç§ç”¨æ³•æˆ–è®¸ä¼šè®©æˆ‘ä»¬æ–¹ä¾¿ä¸å°‘ã€‚ å®¢æˆ·ç«¯å’ŒæœåŠ¡å•†Emailæ˜¯è¦æœ‰å®¢æˆ·ç«¯çš„æ”¯æŒ(ç°åœ¨çš„é‚®ä»¶æœåŠ¡å•†éƒ½æä¾›äº†ç½‘é¡µç‰ˆ)ï¼Œæ— è®ºä½ ç”¨çš„å“ªå®¶çš„EmailæœåŠ¡ï¼Œéƒ½å¯ä»¥ç”¨å„ç§å®¢æˆ·ç«¯å»åŒæ­¥ä½ çš„é‚®ä»¶ã€‚ç°åœ¨åŸºæœ¬çš„çš„é‚®ä»¶æœåŠ¡æœ‰å¾ˆå¤šå®¶ï¼Œå…¶ä¸­æ¯”è¾ƒå¸¸è§çš„ï¼š QQé‚®ç®± QQé‚®ç®±æ˜¯è…¾è®¯å…¬å¸åœ¨2002å¹´æ¨å‡ºçš„é‚®ç®±æœåŠ¡ã€‚2005å¹´3æœˆï¼Œè…¾è®¯æ”¶è´­Foxmailï¼Œå¼ å°é¾™åŠç ”å‘å›¢é˜Ÿ20ä½™äººä¸ä¹…åè¿›å…¥è…¾è®¯ã€‚ è™½ç„¶QQçš„é‚®ç®±åŸŸæ˜¾å¾—ä¸å¤ªæ­£å¼ï¼Œä½†æ˜¯ä¸çš„ä¸è¯´QQé‚®ç®±æ˜¯è®©æˆ‘ä»¬å¤§éƒ¨åˆ†äººæ‹¥æœ‰çš„ç¬¬ä¸€ä¸ªé‚®ç®±ã€‚ ç½‘æ˜“é‚®ç®± ç½‘æ˜“çš„é‚®ç®±æœ‰ï¼š163ã€126å’Œyeah.net ç›®å‰æ˜¯å›½å†…çš„ä¸»æµé‚®ç®±æœåŠ¡ä¹‹ä¸€ã€‚åœ¨å›½å†…éå¸¸æµè¡Œä¹Ÿæ˜¯å›½å†…é‚®ç®±çš„é¦–é€‰å“ç‰Œã€‚ç›®å‰å®˜æ–¹å®£ç§°ç”¨æˆ·æ€»æ•°çªç ´5äº¿ã€‚ æˆ‘æ²¡ç”¨è¿‡ç½‘æ˜“çš„é‚®ç®±ï¼Œæ„Ÿè§‰å¹¿å‘Šå¤ªå¤šäº†ã€‚ é›…è™é‚®ç®± é›…è™é‚®ç®±æ˜¯ä¸–ç•Œé‚®ç®±æœåŠ¡å•†ä¹‹ä¸€ï¼Œè§„æ¨¡éå¸¸å¤§ï¼Œäº1997å¹´10æœˆ8æ—¥æ¿€æ´»ã€‚ä¸è¿‡å¥½åƒæ˜¯ä¸å¯¹å›½å†…ç”¨æˆ·å¼€æ”¾ï¼Œæˆ–è€…ä¹‹å‰å¼€æ”¾è¿‡åæ¥åœäº†ã€‚ Outlook Outlookæ˜¯éå¸¸è€ç‰Œçš„é‚®ç®±æœåŠ¡å•†äº†ï¼Œä»–æœ‰è‡ªå·±çš„é‚®ä»¶å®¢æˆ·ç«¯ï¼Œç•Œé¢ä¹Ÿæ¯”è¾ƒç®€æ´åŠŸèƒ½ä¹Ÿå¾ˆå¤šã€‚å›½å†…ä¹Ÿå¯ä»¥ç”¨ã€‚ Gmail è‡ªæˆ‘æ„Ÿè§‰æ˜¯æœ€å¥½ç”¨çš„é‚®ç®±ï¼Œä½†æ˜¯å› ä¸ºè°·æ­Œæ¨å‡ºäº†ä¸­å›½å¸‚åœºå¯¼è‡´å…¶æ‰€æœ‰æœåŠ¡å…¨éƒ¨ä¸èƒ½ç”¨ã€‚æ‰€ä»¥ï¼Œæ²¡æœ‰ä»€ä¹ˆåŠæ³•ã€‚æ— å¥ˆä¹‹ä¸‹åªå¥½æš‚æ—¶æ”¾å¼ƒ æ— è®ºæ˜¯åœ¨Androidã€IOSã€windowsä¸Šéƒ½æ”¯æŒé‚®ä»¶ä¹Ÿæœ‰è‡ªå¸¦çš„é‚®ä»¶å®¢æˆ·ç«¯ã€‚ ä»‹ç»äº†å‡ å¤§æœåŠ¡å•†ï¼Œä¸‹é¢è¯´è¯´åŠŸèƒ½ã€‚ é‚®ä»¶æœåŠ¡ç”µå­é‚®ä»¶æ˜¯æ•´ä¸ªç½‘ç»œé—´ä»¥è‡³æ‰€æœ‰å…¶ä»–ç½‘ç»œç³»ç»Ÿä¸­ç›´æ¥é¢å‘äººä¸äººä¹‹é—´ä¿¡æ¯äº¤æµçš„ç³»ç»Ÿï¼Œå®ƒçš„æ•°æ®å‘é€æ–¹å’Œæ¥æ”¶æ–¹éƒ½æ˜¯äººï¼Œæ‰€ä»¥æå¤§åœ°æ»¡è¶³äº†å¤§é‡å­˜åœ¨çš„äººä¸äººä¹‹é—´çš„é€šä¿¡éœ€æ±‚ã€‚ ç”µå­é‚®ä»¶æŒ‡ç”¨ç”µå­æ‰‹æ®µä¼ é€ä¿¡ä»¶ã€å•æ®ã€èµ„æ–™ç­‰ä¿¡æ¯çš„é€šä¿¡æ–¹æ³•ã€‚ç”µå­é‚®ä»¶ç»¼åˆäº†ç”µè¯é€šä¿¡å’Œé‚®æ”¿ä¿¡ä»¶çš„ç‰¹ç‚¹ï¼Œå®ƒä¼ é€ä¿¡æ¯çš„é€Ÿåº¦å’Œç”µè¯ä¸€æ ·å¿«ï¼Œåˆèƒ½åƒä¿¡ä»¶ä¸€æ ·ä½¿æ”¶ä¿¡è€…åœ¨æ¥æ”¶ç«¯æ”¶åˆ°æ–‡å­—è®°å½•ã€‚ç”µå­é‚®ä»¶ç³»ç»Ÿåˆç§°åŸºäºè®¡ç®—æœºçš„é‚®ä»¶æŠ¥æ–‡ç³»ç»Ÿã€‚å®ƒå‚ä¸äº†ä»é‚®ä»¶è¿›å…¥ç³»ç»Ÿåˆ°é‚®ä»¶åˆ°è¾¾ç›®çš„åœ°ä¸ºæ­¢çš„å…¨éƒ¨å¤„ç†è¿‡ç¨‹ã€‚ç”µå­é‚®ä»¶ä¸ä»…å¯åˆ©ç”¨ç”µè¯ç½‘ç»œï¼Œè€Œä¸”å¯åˆ©ç”¨å…¶å®ƒä»»ä½•é€šä¿¡ç½‘ä¼ é€ã€‚åœ¨åˆ©ç”¨ç”µè¯ç½‘ç»œæ—¶,è¿˜å¯åœ¨å…¶éé«˜å³°æœŸé—´ä¼ é€ä¿¡æ¯ï¼Œè¿™å¯¹äºå•†ä¸šé‚®ä»¶å…·æœ‰ç‰¹æ®Šä»·å€¼ã€‚ç”±ä¸­å¤®è®¡ç®—æœºå’Œå°å‹è®¡ç®—æœºæ§åˆ¶çš„é¢å‘æœ‰é™ç”¨æˆ·çš„ç”µå­ç³»ç»Ÿå¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§è®¡ç®—æœºä¼šè®®ç³»ç»Ÿã€‚ç”µå­é‚®ä»¶é‡‡ç”¨å‚¨å­˜-è½¬å‘æ–¹å¼åœ¨ç½‘ç»œä¸Šé€æ­¥ä¼ é€’ä¿¡æ¯ï¼Œä¸åƒç”µè¯é‚£æ ·ç›´æ¥ã€åŠæ—¶ï¼Œä½†è´¹ç”¨ä½å»‰ã€‚ è”ç³»äººåŒæ­¥è¿™æ˜¯æˆ‘è®¤ä¸ºé™¤äº†å‘é‚®ä»¶æœ€é‡è¦çš„ä¸€ä¸ªåŠŸèƒ½äº†ï¼Œä¹Ÿç‰¹åˆ«å¥½ç”¨ã€‚ è¿™å¯ä»¥è§£å†³ä½ çš„å¾ˆå¤šé—®é¢˜ï¼š æ¢æ‰‹æœºäº†è”ç³»äººè¿˜è¦å¯¼å…¥åˆ°SIMå¡é‡Œåœ¨å¯¼å‡ºæ¥ï¼Ÿ åœ¨ç”µè„‘ä¸Šä¸èƒ½æŸ¥çœ‹è‡ªå·±çš„è”ç³»äººï¼Ÿ æœ‰äº†æœªæ¥æ¥ç”µä¿¡æ¯ä¸èƒ½å¤šç«¯åŒæ­¥ï¼Ÿ é‚®ç®±å¯ä»¥ç»™ä½ è§£å†³è¿™äº›é—®é¢˜ã€‚ ä½ åªéœ€è¦åœ¨æ‰‹æœºä¸Šç™»å½•ä¸Šé‚®ç®±è´¦æˆ·ï¼Œæ·»åŠ è”ç³»äººæ—¶é€‰æ‹©æ·»åŠ åˆ°é‚®ç®±è´¦æˆ·å³å¯ï¼Œä¹Ÿå¯ä»¥æŠŠè”ç³»äººå¯¼å‡ºæˆCVSæ ¼å¼çš„ä¿¡æ¯å¯¼å…¥åˆ°é‚®ç®±é‡Œï¼Œä»¥ä¸Šä»‹ç»çš„å„å¤§é‚®ç®±æœåŠ¡å•†éƒ½æ”¯æŒè”ç³»äººå¯¼å…¥ã€‚ æ‰‹æœºä¸Šï¼š å›¾ç‰‡1 ç”µè„‘ä¸Šï¼š img2 æ—¥å†åŒæ­¥é‚®ç®±å¯ä»¥åŒæ­¥ä½ çš„æ—¥å†ï¼Œæ— è®ºæ˜¯åœ¨ç”µè„‘ä¸Šè¿˜æ˜¯æ‰‹æœºä¸Šï¼Œä½ çš„æ—¥ç¨‹å®‰æ’éƒ½å¯ä»¥å®æ—¶çš„åŒæ­¥èµ·æ¥ï¼Œå¹¶ä¸”è¿˜èƒ½å¾ˆå¤šè®¾å¤‡éƒ½åŒæ­¥æé†’ã€‚ æ‰‹æœºä¸Šï¼š IMG6 ç”µè„‘ä¸Šï¼š img8 é™¤æ­¤ä¹‹å¤–ï¼Œä½ è¿˜èƒ½å»è®¢é˜…ä¸€äº›å¤©æ°”æ—¥å†èŠ‚å‡æ—¥ï¼Œåœ¨OUTLOOKä¸Šè¿˜èƒ½çœ‹åˆ°ä¸€äº›æœ‰è¶£çš„æ—¥å†è®¢é˜…ã€‚ img3 img4 æ›´å¤šåŠŸèƒ½å¯ä»¥çœ‹åˆ°ï¼Œä»¥OUTLOOKä¸ºä¾‹è¿˜æœ‰å¾ˆå¤šå¯ä»¥åŒæ­¥çš„åŠŸèƒ½ï¼š img9 é‚®ç®±çš„ä¾¿æ·æ€§ä¸æ­¢äºå‘é‚®ä»¶ï¼Œå¸Œæœ›è¿™äº›èƒ½è®©æˆ‘ä»¬çš„ç”Ÿæ´»ä¹ æƒ¯æ›´å¥½ã€‚ Rssä»€ä¹ˆæ˜¯Rss RSSæ˜¯åœ¨çº¿å…±äº«å†…å®¹çš„ä¸€ç§ç®€æ˜“æ–¹å¼ï¼ˆä¹Ÿå«èšåˆå†…å®¹ï¼Œå…¨ç§°Really Simple Syndicationï¼‰ã€‚ä½¿ç”¨RSSè®¢é˜…èƒ½æ›´å¿«åœ°é€Ÿè·å–ä¿¡æ¯å’Œè·å–ç½‘ç«™å†…å®¹çš„æœ€æ–°æ›´æ–°ã€‚æ›´ç›´ç™½çš„è¯´ï¼Œä½ å¯ä»¥ä¸ç”¨å†ä¸€ä¸€æ‰“å¼€å„ä¸ªç½‘ç«™é¡µé¢ï¼Œè€Œæ˜¯é€šè¿‡é˜…è¯»å™¨ä¸€æ¬¡ä¸€èµ·é˜…è¯»æ‰€æœ‰ä½ è®¢é˜…äº†çš„ç½‘ç«™çš„æœ€æ–°å†…å®¹ã€‚ è®¢é˜…RSSæœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ åŠ è½½é€Ÿåº¦å¿«ï¼Œä¸€æ¬¡é˜…è¯»æ‰€æœ‰è®¢é˜…çš„ç½‘ç«™ï¼› é˜…è¯»å™¨é˜…è¯»é€šå¸¸éƒ½éå¸¸ç®€æ´ï¼Œç½‘ç«™ä¸Šçš„å¹¿å‘Šç­‰éƒ½ä¸ä¼šæœ‰ï¼› ä¸å—åŠŸå¤«ç½‘çš„å½±å“ï¼Œèƒ½å¤Ÿç»§ç»­é€šè¿‡RSSè®¢é˜…é˜…è¯»æœ€æ–°æ–‡ç« ï¼› åŠæ—¶æ›´æ–°ï¼Œè‹¥æºç½‘ç«™æœ‰å‘è¡¨æ–°æ–‡ç« ï¼Œé©¬ä¸Šå°±å¯ä»¥é˜…è¯»åˆ°ï¼› å…¨éƒ¨ä¿¡æ¯éƒ½èƒ½åœ¨RSSé˜…è¯»å™¨å†…è¯»å®Œï¼Œä¸å†éœ€è¦ä¸€ä¸ªä¸€ä¸ªåœ°åˆ·æ–°å„ä¸ªç½‘ç«™é¡µé¢ã€‚ å¦‚ä½•è®¢é˜…RSSï¼Ÿ ä½¿ç”¨RSSé˜…è¯»å™¨ ä¸»è¦æœ‰åœ¨çº¿é˜…è¯»å™¨å’Œç¦»çº¿é˜…è¯»å™¨ä¸¤ç§ã€‚å¼¥ç¼æ²¡ç”¨è¿‡ç¦»çº¿é˜…è¯»å™¨ï¼Œæ‰€ä»¥è¿™å„¿å°±ä¸åšæ¨èï¼Œè€Œä¸”å¼¥ç¼æ¨èä½¿ç”¨æ›´åŠ æ–¹ä¾¿çš„åœ¨çº¿é˜…è¯»å™¨ï¼Œæ¯”å¦‚è¯´Google Readerã€æŠ“è™¾ã€é²œæœã€QQé˜…è¯»ã€æœ‰é“é˜…è¯»ã€è±†ç“£ä¹ç‚¹å’Œä¸€äº›ä¸ªæ€§åŒ–ä¸»é¡µï¼ˆNetvibesï¼‰ç­‰ç­‰ã€‚ åœ¨çº¿é˜…è¯»çš„å¥½å¤„åœ¨äºä½ å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ï¼ˆä½¿ç”¨æ‰‹æœº/ç”µè„‘ç­‰ï¼‰é€šè¿‡ç™»å½•å¸å·æ¥é˜…è¯»ä½ è®¢é˜…çš„ä¿¡æ¯ï¼Œè€Œç¦»çº¿é˜…è¯»å™¨æ˜¯ä¸è¡Œçš„ã€‚ å¦‚æœä½ æ¯”è¾ƒåå¥½Googleå¯ä»¥ä½¿ç”¨Google Readerï¼Œåªéœ€ä½¿ç”¨ä½ çš„Gmailå¸å·ç™»å½•å³å¯ã€‚ ä½¿ç”¨Email å¯ä»¥é€šè¿‡EmailæœåŠ¡å•†æ¥åœ¨çº¿è®¢é˜…Rssï¼Œå¦‚æœæœ‰æ›´æ–°ä¼šé€šè¿‡é‚®ä»¶çš„æ–¹å¼å‘ç»™ä½ ã€‚ç°åœ¨åŸºæœ¬çš„é‚®ä»¶æœåŠ¡å•†éƒ½æ”¯æŒå¡«å†™Rssè®¢é˜…åœ°å€ã€‚ è®¢é˜…BoomXuæœ¬åšå®¢çš„è®¢é˜…åœ°å€ https://www.BoomXu.com/feed.xml æˆ–è€…å¯ä»¥ç‚¹å‡»ç½‘ç«™ä¸‹ä¸‹æ–¹çš„è®¢é˜…æŒ‰é’®æ¥è·å–Rssåœ°å€ï¼š æ¨èçš„è®¢é˜…æºçŸ¥ä¹æ¯æ—¥ç²¾é€‰ï¼ˆå¼ºçƒˆæ¨èï¼‰ çŸ¥ä¹æ—¥æŠ¥ï¼ˆéå¸¸å®è´µçš„æºï¼‰ nhzyèµ„è®¯ï¼ˆå¥åº·ç”Ÿæ´»ï¼‰ æœå£³ç½‘ï¼ˆç§‘æ™®ç”Ÿæ´»ï¼‰ ç§‘å­¦æ¾é¼ ä¼šï¼ˆç§‘æ™®ï¼‰ ç§‘å­¦å…¬å›­ï¼ˆåˆ†æå„ç§è¯¯åŒºï¼‰ æ³›ç§‘å­¦ï¼ˆå°æ¹¾çš„ç§‘æ™®èµ„è®¯ï¼‰ Matrix67ï¼ˆæ•°å­¦çˆ±å¥½è€…ï¼‰ æˆ˜éš¼çš„å­¦ä¹ æ¢ç´¢ï¼ˆæ•ˆç‡ç”Ÿæ´»ï¼‰ æ›´å¤šçš„æºå¯ä»¥å»ä»”ç»†çœ‹è¿™ç¯‡å›ç­”ï¼šä½ å¿…è¯»çš„ RSS è®¢é˜…æºæœ‰å“ªäº›ï¼Ÿ ENDè€å¥—çš„ä¸œè¥¿å¹¶ä¸æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œéœ€è¦ä½ ç”¨ä¸€åŒå‘ç°ç¾çš„çœ¼ç›å»æ¬£èµå®ƒï¼Œæˆ–è®¸ä»–ä¼šä½¿ä½ çš„ç”Ÿæ´»æ›´åŠ ç¾å¥½ã€‚ç§‘æŠ€å¦‚æ­¤ï¼Œå…¶ä»–æ›´æ˜¯å¦‚æ­¤ã€‚","categories":[],"tags":[{"name":"æŠ€æœ¯åˆ†äº«","slug":"æŠ€æœ¯åˆ†äº«","permalink":"https://summxu.github.io/tags/æŠ€æœ¯åˆ†äº«/"}],"author":"BoomXu"},{"title":"Linuxä¸‹Shellå­¦ä¹  --åŸºç¡€1","slug":"2017/linux-shell-1","date":"2017-06-26T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/linux-shell-1/","link":"","permalink":"https://summxu.github.io/2017/linux-shell-1/","excerpt":"","text":"ä»Šå¤©å­¦ä¹ ä¸‹Shell,å‘ç°éå¸¸ç®€å•ï¼Œè¯­æ³•ä¹Ÿå¾ˆæ˜¯éšæ„ï¼Œåœ¨æ­¤è®°å½•ä¸‹å­¦ä¹ è¿‡ç¨‹ã€‚ Shellä»‹ç»Shellå’ŒShellè„šæœ¬Shell æ˜¯ä¸€ä¸ªç”¨ C è¯­è¨€ç¼–å†™çš„ç¨‹åºï¼Œå®ƒæ˜¯ç”¨æˆ·ä½¿ç”¨ Linux çš„æ¡¥æ¢ã€‚Shell æ—¢æ˜¯ä¸€ç§å‘½ä»¤è¯­è¨€ï¼Œåˆæ˜¯ä¸€ç§ç¨‹åºè®¾è®¡è¯­è¨€ã€‚Shell æ˜¯æŒ‡ä¸€ç§åº”ç”¨ç¨‹åºï¼Œè¿™ä¸ªåº”ç”¨ç¨‹åºæä¾›äº†ä¸€ä¸ªç•Œé¢ï¼Œç”¨æˆ·é€šè¿‡è¿™ä¸ªç•Œé¢è®¿é—®æ“ä½œç³»ç»Ÿå†…æ ¸çš„æœåŠ¡ã€‚Ken Thompson çš„ sh æ˜¯ç¬¬ä¸€ç§ Unix Shellï¼ŒWindows Explorer æ˜¯ä¸€ä¸ªå…¸å‹çš„å›¾å½¢ç•Œé¢ Shellã€‚ Shell è„šæœ¬ï¼ˆshell scriptï¼‰ï¼Œæ˜¯ä¸€ç§ä¸º shell ç¼–å†™çš„è„šæœ¬ç¨‹åºã€‚ä¸šç•Œæ‰€è¯´çš„ shell é€šå¸¸éƒ½æ˜¯æŒ‡ shell è„šæœ¬ï¼Œä½†è¯»è€…æœ‹å‹è¦çŸ¥é“ï¼Œshell å’Œ shell script æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µã€‚ç”±äºä¹ æƒ¯çš„åŸå› ï¼Œç®€æ´èµ·è§ï¼Œæœ¬æ–‡å‡ºç°çš„ â€œshellç¼–ç¨‹â€ éƒ½æ˜¯æŒ‡ shell è„šæœ¬ç¼–ç¨‹ï¼Œä¸æ˜¯æŒ‡å¼€å‘ shell è‡ªèº«ã€‚ Shell ç¯å¢ƒShell ç¼–ç¨‹è·Ÿ javaã€php ç¼–ç¨‹ä¸€æ ·ï¼Œåªè¦æœ‰ä¸€ä¸ªèƒ½ç¼–å†™ä»£ç çš„æ–‡æœ¬ç¼–è¾‘å™¨å’Œä¸€ä¸ªèƒ½è§£é‡Šæ‰§è¡Œçš„è„šæœ¬è§£é‡Šå™¨å°±å¯ä»¥äº†ã€‚ Linux çš„ Shell ç§ç±»ä¼—å¤šï¼Œå¸¸è§çš„æœ‰ï¼š Bourne Shellï¼ˆ/usr/bin/shæˆ–/bin/shï¼‰ Bourne Again Shellï¼ˆ/bin/bashï¼‰ C Shellï¼ˆ/usr/bin/cshï¼‰ K Shellï¼ˆ/usr/bin/kshï¼‰ Shell for Rootï¼ˆ/sbin/shï¼‰ â€¦â€¦ åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œäººä»¬å¹¶ä¸åŒºåˆ† Bourne Shell å’Œ Bourne Again Shellï¼Œæ‰€ä»¥ï¼Œåƒ #!/bin/shï¼Œå®ƒåŒæ ·ä¹Ÿå¯ä»¥æ”¹ä¸º #!/bin/bashã€‚ #! å‘Šè¯‰ç³»ç»Ÿå…¶åè·¯å¾„æ‰€æŒ‡å®šçš„ç¨‹åºå³æ˜¯è§£é‡Šæ­¤è„šæœ¬æ–‡ä»¶çš„ Shell ç¨‹åºã€‚ Hello world12#!/bin/bashecho &quot;Hello world&quot; å˜é‡åŠæ•°ç»„12345678910111213141516171819202122#!/bin/bashonly=&quot;æˆ‘æ˜¯åªè¯»å˜é‡&quot;readonly only#only=&quot;æˆ‘ä¸æ˜¯åªè¯»å˜é‡&quot;del=&quot;æˆ‘è¢«åˆ é™¤äº†&quot;unset dela=&apos;é™ˆæ—­&apos;str=&quot;hello,$&#123;a&#125;&quot;array=(é™ˆæ—­ ç¥è¿˜å¥— æ¢èˆªå®‡)echo &quot;ni hao a wo shi $a heihei &quot;echo $onlyecho $delecho $strecho &quot;å­—ç¬¦ä¸²é•¿åº¦ä¸ºï¼š$&#123;#str&#125;&quot;echo &quot;æå–å­—ç¬¦ä¸²é™ˆæ—­ï¼š$&#123;str:6:4&#125;&quot;echo $array $&#123;array[1]&#125; $&#123;array[2]&#125;echo &quot;æ•°ç»„é•¿åº¦æ˜¯ï¼š$&#123;#array[*]&#125;&quot;echo &quot;æ•°ç»„æ‰€æœ‰å…ƒç´ ï¼š$&#123;array[*]&#125;&quot; å‚æ•°ä¼ é€’123456789101112#!/bin/bashecho &quot;Shell ä¼ é€’å‚æ•°å®ä¾‹ï¼&quot;;echo &quot;æ‰§è¡Œçš„æ–‡ä»¶åï¼š$0&quot;;echo &quot;ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºï¼š$1&quot;;echo &quot;ç¬¬äºŒä¸ªå‚æ•°ä¸ºï¼š$2&quot;;echo &quot;ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºï¼š$3&quot;;echo &quot;å‚æ•°ä¸ªæ•° $#&quot;echo &quot;å‚æ•°å­—ç¬¦ä¸² $*&quot;echo &quot;è¿è¡ŒIDå· $$&quot; è¿ç®—ç¬¦è¡¨è¾¾å¼12345678910111213141516#!/bin/basha=10b=22add=`expr $a + $b`quyu=`expr $b % $a`cheng=`expr $a \\* $b`echo &quot;A+B=ï¼š$add&quot;echo &quot;å–ä½™ï¼š$quyu&quot;echo &quot;Aä¹˜Bï¼š$cheng&quot;if [ $a == $b ]thenecho &quot;Aå¤§äºB&quot;fiecho &quot;Bå¤§äºA&quot; å…³ç³»è¿ç®—ç¬¦å…³ç³»è¿ç®—ç¬¦åªæ”¯æŒæ•°å­—ï¼Œä¸æ”¯æŒå­—ç¬¦ä¸²ï¼Œé™¤éå­—ç¬¦ä¸²çš„å€¼æ˜¯æ•°å­—ã€‚ä¸‹è¡¨åˆ—å‡ºäº†å¸¸ç”¨çš„å…³ç³»è¿ç®—ç¬¦ï¼Œå‡å®šå˜é‡ a ä¸º 10ï¼Œå˜é‡ b ä¸º 20ï¼š è¿ç®—ç¬¦ è¯´æ˜ ä¸¾ä¾‹ -eq æ£€æµ‹ä¸¤ä¸ªæ•°æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰è¿”å› trueã€‚ [ $a -eq $b ] è¿”å› falseã€‚ -ne æ£€æµ‹ä¸¤ä¸ªæ•°æ˜¯å¦ç›¸ç­‰ï¼Œä¸ç›¸ç­‰è¿”å› trueã€‚ [ $a -ne $b ] è¿”å› trueã€‚ -gt æ£€æµ‹å·¦è¾¹çš„æ•°æ˜¯å¦å¤§äºå³è¾¹çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ $a -gt $b ] è¿”å› falseã€‚ -lt æ£€æµ‹å·¦è¾¹çš„æ•°æ˜¯å¦å°äºå³è¾¹çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ $a -lt $b ] è¿”å› trueã€‚ -ge æ£€æµ‹å·¦è¾¹çš„æ•°æ˜¯å¦å¤§äºç­‰äºå³è¾¹çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ $a -ge $b ] è¿”å› falseã€‚ -le æ£€æµ‹å·¦è¾¹çš„æ•°æ˜¯å¦å°äºç­‰äºå³è¾¹çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ $a -le $b ] è¿”å› trueã€‚","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://summxu.github.io/tags/Linux/"},{"name":"Shell","slug":"Shell","permalink":"https://summxu.github.io/tags/Shell/"}],"author":"BoomXu"},{"title":"Linuxä¸‹Shellå­¦ä¹  --åŸºç¡€2","slug":"2017/linux-shell-2","date":"2017-06-26T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/linux-shell-2/","link":"","permalink":"https://summxu.github.io/2017/linux-shell-2/","excerpt":"","text":"ä»Šå¤©å­¦ä¹ ä¸‹Shell,å‘ç°éå¸¸ç®€å•ï¼Œè¯­æ³•ä¹Ÿå¾ˆæ˜¯éšæ„ï¼Œåœ¨æ­¤è®°å½•ä¸‹å­¦ä¹ è¿‡ç¨‹ã€‚ echoecho å‘½ä»¤ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨è¿™é‡Œè®°ä¸‹å‡ ä¸ªä¸å¸¸ç”¨åˆ°çš„ã€‚ æ˜¾ç¤ºå‘½ä»¤æ‰§è¡Œç»“æœ1echo `date` æ˜¾ç¤ºä¸æ¢è¡Œ123#!/bin/shecho -e &quot;OK! \\c&quot; # -e å¼€å¯è½¬ä¹‰ \\c ä¸æ¢è¡Œecho &quot;It is a test&quot; æ˜¾ç¤ºæ¢è¡Œ12echo -e &quot;OK! \\n&quot; # -e å¼€å¯è½¬ä¹‰echo &quot;It it a test&quot; testæ–‡ä»¶æµ‹è¯• å‚æ•° è¯´æ˜ -e æ–‡ä»¶å å¦‚æœæ–‡ä»¶å­˜åœ¨åˆ™ä¸ºçœŸ -r æ–‡ä»¶å å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”å¯è¯»åˆ™ä¸ºçœŸ -w æ–‡ä»¶å å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”å¯å†™åˆ™ä¸ºçœŸ -x æ–‡ä»¶å å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”å¯æ‰§è¡Œåˆ™ä¸ºçœŸ -s æ–‡ä»¶å å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”è‡³å°‘æœ‰ä¸€ä¸ªå­—ç¬¦åˆ™ä¸ºçœŸ -d æ–‡ä»¶å å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”ä¸ºç›®å½•åˆ™ä¸ºçœŸ -f æ–‡ä»¶å å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”ä¸ºæ™®é€šæ–‡ä»¶åˆ™ä¸ºçœŸ -c æ–‡ä»¶å å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”ä¸ºå­—ç¬¦å‹ç‰¹æ®Šæ–‡ä»¶åˆ™ä¸ºçœŸ -b æ–‡ä»¶å å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”ä¸ºå—ç‰¹æ®Šæ–‡ä»¶åˆ™ä¸ºçœŸ åˆ†æ”¯è¯­æ³•12345678910#!/bin/bashnum1=$[2*3]num2=$[1+5]if test $[num1] -eq $[num2]then echo &apos;ä¸¤ä¸ªæ•°å­—ç›¸ç­‰!&apos;else echo &apos;ä¸¤ä¸ªæ•°å­—ä¸ç›¸ç­‰!&apos;fi å¾ªç¯è¯­æ³•Shellçš„å¾ªç¯æ–¹å¼æ¯”è¾ƒå¤šï¼Œä¸€å¼€å§‹ä¸å¤ªå¥½ç”¨ï¼Œ æˆ‘é€‰æ‹©äº†åŸºæœ¬å’ŒCè¯­è¨€æ–¹æ³•ç›¸åŒçš„è¯­æ³•ï¼Œç°åœ¨ç†è§£æ˜¯åŸºæœ¬ç”¨æ³•éƒ½å·®ä¸å¤šã€‚ Cè¯­è¨€æ–¹å¼123456789101112131415161718192021#!/bin/bashnum1=$[2*3]num2=$[1+5]if test $[num1] -eq $[num2]then echo &apos;ä¸¤ä¸ªæ•°å­—ç›¸ç­‰!&apos;else echo &apos;ä¸¤ä¸ªæ•°å­—ä¸ç›¸ç­‰!&apos;fiecho `expr 100 % 3`#100ä»¥å†…å¯ä»¥è¢«3æ•´é™¤for ((i=1;i&lt;100;i++))doif [ `expr $i % 3` == 0 ]thenecho $ifidone for in1234567for var in item1 item2 ... itemNdo command1 command2 ... commandNdone ä¾‹å­ï¼š 1234for loop in 1 2 3 4 5do echo &quot;The value is: $loop&quot;done while è¯­å¥1234while conditiondo commanddone case123456789101112131415echo &apos;è¾“å…¥ 1 åˆ° 4 ä¹‹é—´çš„æ•°å­—:&apos;echo &apos;ä½ è¾“å…¥çš„æ•°å­—ä¸º:&apos;read aNumcase $aNum in 1) echo &apos;ä½ é€‰æ‹©äº† 1&apos; ;; 2) echo &apos;ä½ é€‰æ‹©äº† 2&apos; ;; 3) echo &apos;ä½ é€‰æ‹©äº† 3&apos; ;; 4) echo &apos;ä½ é€‰æ‹©äº† 4&apos; ;; *) echo &apos;ä½ æ²¡æœ‰è¾“å…¥ 1 åˆ° 4 ä¹‹é—´çš„æ•°å­—&apos; ;;esac è·³å‡ºå¾ªç¯breakå‘½ä»¤breakå‘½ä»¤å…è®¸è·³å‡ºæ‰€æœ‰å¾ªç¯ï¼ˆç»ˆæ­¢æ‰§è¡Œåé¢çš„æ‰€æœ‰å¾ªç¯ï¼‰ã€‚ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œè„šæœ¬è¿›å…¥æ­»å¾ªç¯ç›´è‡³ç”¨æˆ·è¾“å…¥æ•°å­—å¤§äº5ã€‚è¦è·³å‡ºè¿™ä¸ªå¾ªç¯ï¼Œè¿”å›åˆ°shellæç¤ºç¬¦ä¸‹ï¼Œéœ€è¦ä½¿ç”¨breakå‘½ä»¤ã€‚ 12345678910111213#!/bin/bashwhile :do echo -n &quot;è¾“å…¥ 1 åˆ° 5 ä¹‹é—´çš„æ•°å­—:&quot; read aNum case $aNum in 1|2|3|4|5) echo &quot;ä½ è¾“å…¥çš„æ•°å­—ä¸º $aNum!&quot; ;; *) echo &quot;ä½ è¾“å…¥çš„æ•°å­—ä¸æ˜¯ 1 åˆ° 5 ä¹‹é—´çš„! æ¸¸æˆç»“æŸ&quot; break ;; esacdone continuecontinueå‘½ä»¤ä¸breakå‘½ä»¤ç±»ä¼¼ï¼Œåªæœ‰ä¸€ç‚¹å·®åˆ«ï¼Œå®ƒä¸ä¼šè·³å‡ºæ‰€æœ‰å¾ªç¯ï¼Œä»…ä»…è·³å‡ºå½“å‰å¾ªç¯ã€‚å¯¹ä¸Šé¢çš„ä¾‹å­è¿›è¡Œä¿®æ”¹ï¼š 1234567891011121314#!/bin/bashwhile :do echo -n &quot;è¾“å…¥ 1 åˆ° 5 ä¹‹é—´çš„æ•°å­—: &quot; read aNum case $aNum in 1|2|3|4|5) echo &quot;ä½ è¾“å…¥çš„æ•°å­—ä¸º $aNum!&quot; ;; *) echo &quot;ä½ è¾“å…¥çš„æ•°å­—ä¸æ˜¯ 1 åˆ° 5 ä¹‹é—´çš„!&quot; continue echo &quot;æ¸¸æˆç»“æŸ&quot; ;; esacdone å‡½æ•°12345678910111213#!/bin/bashfunWithReturn()&#123; echo &quot;è¿™ä¸ªå‡½æ•°ä¼šå¯¹è¾“å…¥çš„ä¸¤ä¸ªæ•°å­—è¿›è¡Œç›¸åŠ è¿ç®—...&quot; echo &quot;è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—: &quot; read aNum echo &quot;è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—: &quot; read anotherNum echo &quot;ä¸¤ä¸ªæ•°å­—åˆ†åˆ«ä¸º $aNum å’Œ $anotherNum !&quot; return $(($aNum+$anotherNum))&#125;funWithReturnecho &quot;è¾“å…¥çš„ä¸¤ä¸ªæ•°å­—ä¹‹å’Œä¸º $? !&quot; å‡½æ•°å‚æ•°123456789101112#!/bin/bashfunWithParam()&#123; echo &quot;ç¬¬ä¸€ä¸ªå‚æ•°ä¸º $1 !&quot; echo &quot;ç¬¬äºŒä¸ªå‚æ•°ä¸º $2 !&quot; echo &quot;ç¬¬åä¸ªå‚æ•°ä¸º $10 !&quot; echo &quot;ç¬¬åä¸ªå‚æ•°ä¸º $&#123;10&#125; !&quot; echo &quot;ç¬¬åä¸€ä¸ªå‚æ•°ä¸º $&#123;11&#125; !&quot; echo &quot;å‚æ•°æ€»æ•°æœ‰ $# ä¸ª!&quot; echo &quot;ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²è¾“å‡ºæ‰€æœ‰å‚æ•° $* !&quot;&#125;funWithParam 1 2 3 4 5 6 7 8 9 34 73 å‚æ•°å¤„ç† è¯´æ˜ $# ä¼ é€’åˆ°è„šæœ¬çš„å‚æ•°ä¸ªæ•° $* ä»¥ä¸€ä¸ªå•å­—ç¬¦ä¸²æ˜¾ç¤ºæ‰€æœ‰å‘è„šæœ¬ä¼ é€’çš„å‚æ•° $$ è„šæœ¬è¿è¡Œçš„å½“å‰è¿›ç¨‹IDå· $! åå°è¿è¡Œçš„æœ€åä¸€ä¸ªè¿›ç¨‹çš„IDå· $@ ä¸$*ç›¸åŒï¼Œä½†æ˜¯ä½¿ç”¨æ—¶åŠ å¼•å·ï¼Œå¹¶åœ¨å¼•å·ä¸­è¿”å›æ¯ä¸ªå‚æ•°ã€‚ $- æ˜¾ç¤ºShellä½¿ç”¨çš„å½“å‰é€‰é¡¹ï¼Œä¸setå‘½ä»¤åŠŸèƒ½ç›¸åŒã€‚ $? æ˜¾ç¤ºæœ€åå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ã€‚0è¡¨ç¤ºæ²¡æœ‰é”™è¯¯ï¼Œå…¶ä»–ä»»ä½•å€¼è¡¨æ˜æœ‰é”™è¯¯ã€‚ æ±‚ç´ æ•°DEMO12345678910111213141516171819#!/bin/bash#æ±‚100ä»¥å†…çš„æ‰€æœ‰ç´ æ•°for((i=2;i&lt;100;i++))do k=1 for((j=2;j&lt;i;j++)) do if((`expr $i % $j` == 0)) then k=0 break fi done if [ $k == 1 ] then echo $i fidone","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://summxu.github.io/tags/Linux/"},{"name":"Shell","slug":"Shell","permalink":"https://summxu.github.io/tags/Shell/"}],"author":"BoomXu"},{"title":"Linxuä¸‹å®‰è£…Node.js","slug":"2017/nodejs-install-linux","date":"2017-06-25T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/nodejs-install-linux/","link":"","permalink":"https://summxu.github.io/2017/nodejs-install-linux/","excerpt":"","text":"ç³»ç»Ÿç¯å¢ƒï¼šUbuntu 32ä½ ä¸‹è½½Node.jsé¦–å…ˆå»å®˜ç½‘å¤åˆ¶ä¸‹Node.jsçš„Source CodeåŒ…åœ°å€ 1 ç„¶åç”¨ weget æ¥ä¸‹è½½ç¼–è¯‘åŒ…ã€‚ 2 å®‰è£…Node.jså…ˆè§£å‹åŒ… 12tar -xf node-v6.11.0.tar.gzcd node-v6.11.0 é…ç½®å¹¶ç¼–è¯‘ 12./configuremake 5 å®‰è£… 1sudo make install æ£€æŸ¥å®‰è£…12node -vnpm -v 7 åˆ›å»ºnodejsé¡¹ç›®ç›®å½• mkdir -p /usr/local/nodejs/ åˆ›å»ºhello.jsæ–‡ä»¶ vi /usr/local/nodejs/hello.js å†…å®¹å¦‚ä¸‹ï¼š 123456789var http = require(\"http\");http.createServer(function(request, response) &#123; response.writeHead(200, &#123; \"Content-Type\" : \"text/plain\" // è¾“å‡ºç±»å‹ &#125;); response.write(\"Hello BoomXu\");// é¡µé¢è¾“å‡º response.end();&#125;).listen(8100); // ç›‘å¬ç«¯å£å·console.log(\"nodejs start listen 8100 port!\"); å¼€å¯nodejsæœåŠ¡ node hello.js 8 æµè§ˆå™¨è®¿é—® http://127.0.0.1:8100/ 6","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://summxu.github.io/tags/Linux/"},{"name":"Node.js","slug":"Node-js","permalink":"https://summxu.github.io/tags/Node-js/"}],"author":"BoomXu"},{"title":"Linuxä¸‹Cè¯­è¨€å®ç°Socketé€šä¿¡","slug":"2017/linux-socket-c","date":"2017-06-24T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/linux-socket-c/","link":"","permalink":"https://summxu.github.io/2017/linux-socket-c/","excerpt":"","text":"ç½‘ç»œåè®®ä¸åˆ†æè®©åšä¸€ä¸ªåˆ©ç”¨Socket(å¥—æ¥å­—)æ¥å®ç°åŒæ–¹çš„å³æ—¶é€šä¿¡åŠŸèƒ½ï¼Œå‚è€ƒç½‘ç»œçš„æºä»£ç å’Œä»‹ç»å¹¶å®ç°Linuxä¸‹çš„Cè¯­è¨€ç¼–ç¨‹ã€‚ 1ã€ç½‘ç»œä¸­è¿›ç¨‹ä¹‹é—´å¦‚ä½•é€šä¿¡ï¼Ÿ 2ã€Socketæ˜¯ä»€ä¹ˆï¼Ÿ 3ã€socketçš„åŸºæœ¬æ“ä½œ 3.1ã€socket()å‡½æ•° 3.2ã€bind()å‡½æ•° 3.3ã€listen()ã€connect()å‡½æ•° 3.4ã€accept()å‡½æ•° 3.5ã€read()ã€write()å‡½æ•°ç­‰ 3.6ã€close()å‡½æ•° 4ã€socketä¸­TCPçš„ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥è¯¦è§£ 5ã€socketä¸­TCPçš„å››æ¬¡æ¡æ‰‹é‡Šæ”¾è¿æ¥è¯¦è§£ 6ã€ä»£ç å®ç° 7ã€è¿è¡Œç»“æœ 1ã€ç½‘ç»œä¸­è¿›ç¨‹ä¹‹é—´å¦‚ä½•é€šä¿¡ï¼Ÿæœ¬åœ°çš„è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰æœ‰å¾ˆå¤šç§æ–¹å¼ï¼Œä½†å¯ä»¥æ€»ç»“ä¸ºä¸‹é¢4ç±»ï¼š æ¶ˆæ¯ä¼ é€’ï¼ˆç®¡é“ã€FIFOã€æ¶ˆæ¯é˜Ÿåˆ—ï¼‰ åŒæ­¥ï¼ˆäº’æ–¥é‡ã€æ¡ä»¶å˜é‡ã€è¯»å†™é”ã€æ–‡ä»¶å’Œå†™è®°å½•é”ã€ä¿¡å·é‡ï¼‰ å…±äº«å†…å­˜ï¼ˆåŒ¿åçš„å’Œå…·åçš„ï¼‰ è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆSolarisé—¨å’ŒSun RPCï¼‰ ä½†è¿™äº›éƒ½ä¸æ˜¯æœ¬æ–‡çš„ä¸»é¢˜ï¼æˆ‘ä»¬è¦è®¨è®ºçš„æ˜¯ç½‘ç»œä¸­è¿›ç¨‹ä¹‹é—´å¦‚ä½•é€šä¿¡ï¼Ÿé¦–è¦è§£å†³çš„é—®é¢˜æ˜¯å¦‚ä½•å”¯ä¸€æ ‡è¯†ä¸€ä¸ªè¿›ç¨‹ï¼Œå¦åˆ™é€šä¿¡æ— ä»è°ˆèµ·ï¼åœ¨æœ¬åœ°å¯ä»¥é€šè¿‡è¿›ç¨‹PIDæ¥å”¯ä¸€æ ‡è¯†ä¸€ä¸ªè¿›ç¨‹ï¼Œä½†æ˜¯åœ¨ç½‘ç»œä¸­è¿™æ˜¯è¡Œä¸é€šçš„ã€‚å…¶å®TCP/IPåè®®æ—å·²ç»å¸®æˆ‘ä»¬è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œç½‘ç»œå±‚çš„â€œipåœ°å€â€å¯ä»¥å”¯ä¸€æ ‡è¯†ç½‘ç»œä¸­çš„ä¸»æœºï¼Œè€Œä¼ è¾“å±‚çš„â€œåè®®+ç«¯å£â€å¯ä»¥å”¯ä¸€æ ‡è¯†ä¸»æœºä¸­çš„åº”ç”¨ç¨‹åºï¼ˆè¿›ç¨‹ï¼‰ã€‚è¿™æ ·åˆ©ç”¨ä¸‰å…ƒç»„ï¼ˆipåœ°å€ï¼Œåè®®ï¼Œç«¯å£ï¼‰å°±å¯ä»¥æ ‡è¯†ç½‘ç»œçš„è¿›ç¨‹äº†ï¼Œç½‘ç»œä¸­çš„è¿›ç¨‹é€šä¿¡å°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ ‡å¿—ä¸å…¶å®ƒè¿›ç¨‹è¿›è¡Œäº¤äº’ã€‚ ä½¿ç”¨TCP/IPåè®®çš„åº”ç”¨ç¨‹åºé€šå¸¸é‡‡ç”¨åº”ç”¨ç¼–ç¨‹æ¥å£ï¼šUNIX BSDçš„å¥—æ¥å­—ï¼ˆsocketï¼‰å’ŒUNIX System Vçš„TLIï¼ˆå·²ç»è¢«æ·˜æ±°ï¼‰ï¼Œæ¥å®ç°ç½‘ç»œè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚å°±ç›®å‰è€Œè¨€ï¼Œå‡ ä¹æ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½æ˜¯é‡‡ç”¨socketï¼Œè€Œç°åœ¨åˆæ˜¯ç½‘ç»œæ—¶ä»£ï¼Œç½‘ç»œä¸­è¿›ç¨‹é€šä¿¡æ˜¯æ— å¤„ä¸åœ¨ï¼Œè¿™å°±æ˜¯æˆ‘ä¸ºä»€ä¹ˆè¯´â€œä¸€åˆ‡çš†socketâ€ã€‚ 2ã€Socketæ˜¯ä»€ä¹ˆï¼Ÿä¸Šé¢æˆ‘ä»¬å·²ç»çŸ¥é“ç½‘ç»œä¸­çš„è¿›ç¨‹æ˜¯é€šè¿‡socketæ¥é€šä¿¡çš„ï¼Œé‚£ä»€ä¹ˆæ˜¯socketå‘¢ï¼Ÿsocketèµ·æºäºUnixï¼Œè€ŒUnix/LinuxåŸºæœ¬å“²å­¦ä¹‹ä¸€å°±æ˜¯â€œä¸€åˆ‡çš†æ–‡ä»¶â€ï¼Œéƒ½å¯ä»¥ç”¨â€œæ‰“å¼€open â€“&gt; è¯»å†™write/read â€“&gt; å…³é—­closeâ€æ¨¡å¼æ¥æ“ä½œã€‚æˆ‘çš„ç†è§£å°±æ˜¯Socketå°±æ˜¯è¯¥æ¨¡å¼çš„ä¸€ä¸ªå®ç°ï¼Œsocketå³æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶ï¼Œä¸€äº›socketå‡½æ•°å°±æ˜¯å¯¹å…¶è¿›è¡Œçš„æ“ä½œï¼ˆè¯»/å†™IOã€æ‰“å¼€ã€å…³é—­ï¼‰ï¼Œè¿™äº›å‡½æ•°æˆ‘ä»¬åœ¨åé¢è¿›è¡Œä»‹ç»ã€‚ åœ¨ç»„ç½‘é¢†åŸŸçš„é¦–æ¬¡ä½¿ç”¨æ˜¯åœ¨1970å¹´2æœˆ12æ—¥å‘å¸ƒçš„æ–‡çŒ®IETF RFC33ä¸­å‘ç°çš„ï¼Œæ’°å†™è€…ä¸ºStephen Carrã€Steve Crockerå’ŒVint Cerfã€‚æ ¹æ®ç¾å›½è®¡ç®—æœºå†å²åšç‰©é¦†çš„è®°è½½ï¼ŒCrokerå†™é“ï¼šâ€œå‘½åç©ºé—´çš„å…ƒç´ éƒ½å¯ç§°ä¸ºå¥—æ¥å­—æ¥å£ã€‚ä¸€ä¸ªå¥—æ¥å­—æ¥å£æ„æˆä¸€ä¸ªè¿æ¥çš„ä¸€ç«¯ï¼Œè€Œä¸€ä¸ªè¿æ¥å¯å®Œå…¨ç”±ä¸€å¯¹å¥—æ¥å­—æ¥å£è§„å®šã€‚â€è®¡ç®—æœºå†å²åšç‰©é¦†è¡¥å……é“ï¼šâ€œè¿™æ¯”BSDçš„å¥—æ¥å­—æ¥å£å®šä¹‰æ—©äº†å¤§çº¦12å¹´ã€‚â€ 3ã€socketçš„åŸºæœ¬æ“ä½œæ—¢ç„¶socketæ˜¯â€œopenâ€”write/readâ€”closeâ€æ¨¡å¼çš„ä¸€ç§å®ç°ï¼Œé‚£ä¹ˆsocketå°±æä¾›äº†è¿™äº›æ“ä½œå¯¹åº”çš„å‡½æ•°æ¥å£ã€‚ä¸‹é¢ä»¥TCPä¸ºä¾‹ï¼Œä»‹ç»å‡ ä¸ªåŸºæœ¬çš„socketæ¥å£å‡½æ•°ã€‚ 3.1ã€socket()å‡½æ•° int socket(int domain, int type, int protocol);socketå‡½æ•°å¯¹åº”äºæ™®é€šæ–‡ä»¶çš„æ‰“å¼€æ“ä½œã€‚æ™®é€šæ–‡ä»¶çš„æ‰“å¼€æ“ä½œè¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°å­—ï¼Œè€Œsocket()ç”¨äºåˆ›å»ºä¸€ä¸ªsocketæè¿°ç¬¦ï¼ˆsocket descriptorï¼‰ï¼Œå®ƒå”¯ä¸€æ ‡è¯†ä¸€ä¸ªsocketã€‚è¿™ä¸ªsocketæè¿°å­—è·Ÿæ–‡ä»¶æè¿°å­—ä¸€æ ·ï¼Œåç»­çš„æ“ä½œéƒ½æœ‰ç”¨åˆ°å®ƒï¼ŒæŠŠå®ƒä½œä¸ºå‚æ•°ï¼Œé€šè¿‡å®ƒæ¥è¿›è¡Œä¸€äº›è¯»å†™æ“ä½œã€‚ æ­£å¦‚å¯ä»¥ç»™fopençš„ä¼ å…¥ä¸åŒå‚æ•°å€¼ï¼Œä»¥æ‰“å¼€ä¸åŒçš„æ–‡ä»¶ã€‚åˆ›å»ºsocketçš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸åŒçš„å‚æ•°åˆ›å»ºä¸åŒçš„socketæè¿°ç¬¦ï¼Œsocketå‡½æ•°çš„ä¸‰ä¸ªå‚æ•°åˆ†åˆ«ä¸ºï¼š domainï¼šå³åè®®åŸŸï¼Œåˆç§°ä¸ºåè®®æ—ï¼ˆfamilyï¼‰ã€‚å¸¸ç”¨çš„åè®®æ—æœ‰ï¼ŒAF_INETã€AF_INET6ã€AF_LOCALï¼ˆæˆ–ç§°AF_UNIXï¼ŒUnixåŸŸsocketï¼‰ã€AF_ROUTEç­‰ç­‰ã€‚åè®®æ—å†³å®šäº†socketçš„åœ°å€ç±»å‹ï¼Œåœ¨é€šä¿¡ä¸­å¿…é¡»é‡‡ç”¨å¯¹åº”çš„åœ°å€ï¼Œå¦‚AF_INETå†³å®šäº†è¦ç”¨ipv4åœ°å€ï¼ˆ32ä½çš„ï¼‰ä¸ç«¯å£å·ï¼ˆ16ä½çš„ï¼‰çš„ç»„åˆã€AF_UNIXå†³å®šäº†è¦ç”¨ä¸€ä¸ªç»å¯¹è·¯å¾„åä½œä¸ºåœ°å€ã€‚ typeï¼šæŒ‡å®šsocketç±»å‹ã€‚å¸¸ç”¨çš„socketç±»å‹æœ‰ï¼ŒSOCK_STREAMã€SOCK_DGRAMã€SOCK_RAWã€SOCK_PACKETã€SOCK_SEQPACKETç­‰ç­‰ï¼ˆsocketçš„ç±»å‹æœ‰å“ªäº›ï¼Ÿï¼‰ã€‚ protocolï¼šæ•…åæ€æ„ï¼Œå°±æ˜¯æŒ‡å®šåè®®ã€‚å¸¸ç”¨çš„åè®®æœ‰ï¼ŒIPPROTO_TCPã€IPPTOTO_UDPã€IPPROTO_SCTPã€IPPROTO_TIPCç­‰ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”TCPä¼ è¾“åè®®ã€UDPä¼ è¾“åè®®ã€STCPä¼ è¾“åè®®ã€TIPCä¼ è¾“åè®®ï¼ˆè¿™ä¸ªåè®®æˆ‘å°†ä¼šå•ç‹¬å¼€ç¯‡è®¨è®ºï¼ï¼‰ã€‚ æ³¨æ„ï¼šå¹¶ä¸æ˜¯ä¸Šé¢çš„typeå’Œprotocolå¯ä»¥éšæ„ç»„åˆçš„ï¼Œå¦‚SOCK_STREAMä¸å¯ä»¥è·ŸIPPROTO_UDPç»„åˆã€‚å½“protocolä¸º0æ—¶ï¼Œä¼šè‡ªåŠ¨é€‰æ‹©typeç±»å‹å¯¹åº”çš„é»˜è®¤åè®®ã€‚ å½“æˆ‘ä»¬è°ƒç”¨socketåˆ›å»ºä¸€ä¸ªsocketæ—¶ï¼Œè¿”å›çš„socketæè¿°å­—å®ƒå­˜åœ¨äºåè®®æ—ï¼ˆaddress familyï¼ŒAF_XXXï¼‰ç©ºé—´ä¸­ï¼Œä½†æ²¡æœ‰ä¸€ä¸ªå…·ä½“çš„åœ°å€ã€‚å¦‚æœæƒ³è¦ç»™å®ƒèµ‹å€¼ä¸€ä¸ªåœ°å€ï¼Œå°±å¿…é¡»è°ƒç”¨bind()å‡½æ•°ï¼Œå¦åˆ™å°±å½“è°ƒç”¨connect()ã€listen()æ—¶ç³»ç»Ÿä¼šè‡ªåŠ¨éšæœºåˆ†é…ä¸€ä¸ªç«¯å£ã€‚ 3.2ã€bind()å‡½æ•°æ­£å¦‚ä¸Šé¢æ‰€è¯´bind()å‡½æ•°æŠŠä¸€ä¸ªåœ°å€æ—ä¸­çš„ç‰¹å®šåœ°å€èµ‹ç»™socketã€‚ä¾‹å¦‚å¯¹åº”AF_INETã€AF_INET6å°±æ˜¯æŠŠä¸€ä¸ªipv4æˆ–ipv6åœ°å€å’Œç«¯å£å·ç»„åˆèµ‹ç»™socketã€‚ int bind(int sockfd, const struct sockaddr *addr, socklen_t addrlen); å‡½æ•°çš„ä¸‰ä¸ªå‚æ•°åˆ†åˆ«ä¸ºï¼š sockfdï¼šå³socketæè¿°å­—ï¼Œå®ƒæ˜¯é€šè¿‡socket()å‡½æ•°åˆ›å»ºäº†ï¼Œå”¯ä¸€æ ‡è¯†ä¸€ä¸ªsocketã€‚bind()å‡½æ•°å°±æ˜¯å°†ç»™è¿™ä¸ªæè¿°å­—ç»‘å®šä¸€ä¸ªåå­—ã€‚ addrï¼šä¸€ä¸ªconst struct sockaddr *æŒ‡é’ˆï¼ŒæŒ‡å‘è¦ç»‘å®šç»™sockfdçš„åè®®åœ°å€ã€‚ addrlenï¼šå¯¹åº”çš„æ˜¯åœ°å€çš„é•¿åº¦ã€‚ é€šå¸¸æœåŠ¡å™¨åœ¨å¯åŠ¨çš„æ—¶å€™éƒ½ä¼šç»‘å®šä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„åœ°å€ï¼ˆå¦‚ipåœ°å€+ç«¯å£å·ï¼‰ï¼Œç”¨äºæä¾›æœåŠ¡ï¼Œå®¢æˆ·å°±å¯ä»¥é€šè¿‡å®ƒæ¥æ¥è¿æœåŠ¡å™¨ï¼›è€Œå®¢æˆ·ç«¯å°±ä¸ç”¨æŒ‡å®šï¼Œæœ‰ç³»ç»Ÿè‡ªåŠ¨åˆ†é…ä¸€ä¸ªç«¯å£å·å’Œè‡ªèº«çš„ipåœ°å€ç»„åˆã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆé€šå¸¸æœåŠ¡å™¨ç«¯åœ¨listenä¹‹å‰ä¼šè°ƒç”¨bind()ï¼Œè€Œå®¢æˆ·ç«¯å°±ä¸ä¼šè°ƒç”¨ï¼Œè€Œæ˜¯åœ¨connect()æ—¶ç”±ç³»ç»Ÿéšæœºç”Ÿæˆä¸€ä¸ªã€‚ ä¸»æœºå­—èŠ‚åºå°±æ˜¯æˆ‘ä»¬å¹³å¸¸è¯´çš„å¤§ç«¯å’Œå°ç«¯æ¨¡å¼ï¼šä¸åŒçš„CPUæœ‰ä¸åŒçš„å­—èŠ‚åºç±»å‹ï¼Œè¿™äº›å­—èŠ‚åºæ˜¯æŒ‡æ•´æ•°åœ¨å†…å­˜ä¸­ä¿å­˜çš„é¡ºåºï¼Œè¿™ä¸ªå«åšä¸»æœºåºã€‚å¼•ç”¨æ ‡å‡†çš„Big-Endianå’ŒLittle-Endiançš„å®šä¹‰å¦‚ä¸‹ï¼š a) Little-Endianå°±æ˜¯ä½ä½å­—èŠ‚æ’æ”¾åœ¨å†…å­˜çš„ä½åœ°å€ç«¯ï¼Œé«˜ä½å­—èŠ‚æ’æ”¾åœ¨å†…å­˜çš„é«˜åœ°å€ç«¯ã€‚ b) Big-Endianå°±æ˜¯é«˜ä½å­—èŠ‚æ’æ”¾åœ¨å†…å­˜çš„ä½åœ°å€ç«¯ï¼Œä½ä½å­—èŠ‚æ’æ”¾åœ¨å†…å­˜çš„é«˜åœ°å€ç«¯ã€‚ ç½‘ç»œå­—èŠ‚åºï¼š4ä¸ªå­—èŠ‚çš„32 bitå€¼ä»¥ä¸‹é¢çš„æ¬¡åºä¼ è¾“ï¼šé¦–å…ˆæ˜¯0ï½7bitï¼Œå…¶æ¬¡8ï½15bitï¼Œç„¶å16ï½23bitï¼Œæœ€åæ˜¯24~31bitã€‚è¿™ç§ä¼ è¾“æ¬¡åºç§°ä½œå¤§ç«¯å­—èŠ‚åºã€‚ç”±äºTCP/IPé¦–éƒ¨ä¸­æ‰€æœ‰çš„äºŒè¿›åˆ¶æ•´æ•°åœ¨ç½‘ç»œä¸­ä¼ è¾“æ—¶éƒ½è¦æ±‚ä»¥è¿™ç§æ¬¡åºï¼Œå› æ­¤å®ƒåˆç§°ä½œç½‘ç»œå­—èŠ‚åºã€‚å­—èŠ‚åºï¼Œé¡¾åæ€ä¹‰å­—èŠ‚çš„é¡ºåºï¼Œå°±æ˜¯å¤§äºä¸€ä¸ªå­—èŠ‚ç±»å‹çš„æ•°æ®åœ¨å†…å­˜ä¸­çš„å­˜æ”¾é¡ºåºï¼Œä¸€ä¸ªå­—èŠ‚çš„æ•°æ®æ²¡æœ‰é¡ºåºçš„é—®é¢˜äº†ã€‚ æ‰€ä»¥ï¼šåœ¨å°†ä¸€ä¸ªåœ°å€ç»‘å®šåˆ°socketçš„æ—¶å€™ï¼Œè¯·å…ˆå°†ä¸»æœºå­—èŠ‚åºè½¬æ¢æˆä¸ºç½‘ç»œå­—èŠ‚åºï¼Œè€Œä¸è¦å‡å®šä¸»æœºå­—èŠ‚åºè·Ÿç½‘ç»œå­—èŠ‚åºä¸€æ ·ä½¿ç”¨çš„æ˜¯Big-Endianã€‚ç”±äºè¿™ä¸ªé—®é¢˜æ›¾å¼•å‘è¿‡è¡€æ¡ˆï¼å…¬å¸é¡¹ç›®ä»£ç ä¸­ç”±äºå­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Œå¯¼è‡´äº†å¾ˆå¤šè«åå…¶å¦™çš„é—®é¢˜ï¼Œæ‰€ä»¥è¯·è°¨è®°å¯¹ä¸»æœºå­—èŠ‚åºä¸è¦åšä»»ä½•å‡å®šï¼ŒåŠ¡å¿…å°†å…¶è½¬åŒ–ä¸ºç½‘ç»œå­—èŠ‚åºå†èµ‹ç»™socketã€‚ 3.3ã€listen()ã€connect()å‡½æ•°å¦‚æœä½œä¸ºä¸€ä¸ªæœåŠ¡å™¨ï¼Œåœ¨è°ƒç”¨socket()ã€bind()ä¹‹åå°±ä¼šè°ƒç”¨listen()æ¥ç›‘å¬è¿™ä¸ªsocketï¼Œå¦‚æœå®¢æˆ·ç«¯è¿™æ—¶è°ƒç”¨connect()å‘å‡ºè¿æ¥è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç«¯å°±ä¼šæ¥æ”¶åˆ°è¿™ä¸ªè¯·æ±‚ã€‚ int listen(int sockfd, int backlog); int connect(int sockfd, const struct sockaddr *addr, socklen_t addrlen); listenå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å³ä¸ºè¦ç›‘å¬çš„socketæè¿°å­—ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºç›¸åº”socketå¯ä»¥æ’é˜Ÿçš„æœ€å¤§è¿æ¥ä¸ªæ•°ã€‚socket()å‡½æ•°åˆ›å»ºçš„socketé»˜è®¤æ˜¯ä¸€ä¸ªä¸»åŠ¨ç±»å‹çš„ï¼Œlistenå‡½æ•°å°†socketå˜ä¸ºè¢«åŠ¨ç±»å‹çš„ï¼Œç­‰å¾…å®¢æˆ·çš„è¿æ¥è¯·æ±‚ã€‚ connectå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å³ä¸ºå®¢æˆ·ç«¯çš„socketæè¿°å­—ï¼Œç¬¬äºŒå‚æ•°ä¸ºæœåŠ¡å™¨çš„socketåœ°å€ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºsocketåœ°å€çš„é•¿åº¦ã€‚å®¢æˆ·ç«¯é€šè¿‡è°ƒç”¨connectå‡½æ•°æ¥å»ºç«‹ä¸TCPæœåŠ¡å™¨çš„è¿æ¥ã€‚ 3.4ã€accept()å‡½æ•°TCPæœåŠ¡å™¨ç«¯ä¾æ¬¡è°ƒç”¨socket()ã€bind()ã€listen()ä¹‹åï¼Œå°±ä¼šç›‘å¬æŒ‡å®šçš„socketåœ°å€äº†ã€‚TCPå®¢æˆ·ç«¯ä¾æ¬¡è°ƒç”¨socket()ã€connect()ä¹‹åå°±æƒ³TCPæœåŠ¡å™¨å‘é€äº†ä¸€ä¸ªè¿æ¥è¯·æ±‚ã€‚TCPæœåŠ¡å™¨ç›‘å¬åˆ°è¿™ä¸ªè¯·æ±‚ä¹‹åï¼Œå°±ä¼šè°ƒç”¨accept()å‡½æ•°å–æ¥æ”¶è¯·æ±‚ï¼Œè¿™æ ·è¿æ¥å°±å»ºç«‹å¥½äº†ã€‚ä¹‹åå°±å¯ä»¥å¼€å§‹ç½‘ç»œI/Oæ“ä½œäº†ï¼Œå³ç±»åŒäºæ™®é€šæ–‡ä»¶çš„è¯»å†™I/Oæ“ä½œã€‚ int accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen); acceptå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæœåŠ¡å™¨çš„socketæè¿°å­—ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæŒ‡å‘struct sockaddr *çš„æŒ‡é’ˆï¼Œç”¨äºè¿”å›å®¢æˆ·ç«¯çš„åè®®åœ°å€ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºåè®®åœ°å€çš„é•¿åº¦ã€‚å¦‚æœaccpetæˆåŠŸï¼Œé‚£ä¹ˆå…¶è¿”å›å€¼æ˜¯ç”±å†…æ ¸è‡ªåŠ¨ç”Ÿæˆçš„ä¸€ä¸ªå…¨æ–°çš„æè¿°å­—ï¼Œä»£è¡¨ä¸è¿”å›å®¢æˆ·çš„TCPè¿æ¥ã€‚ æ³¨æ„ï¼šacceptçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæœåŠ¡å™¨çš„socketæè¿°å­—ï¼Œæ˜¯æœåŠ¡å™¨å¼€å§‹è°ƒç”¨socket()å‡½æ•°ç”Ÿæˆçš„ï¼Œç§°ä¸ºç›‘å¬socketæè¿°å­—ï¼›è€Œacceptå‡½æ•°è¿”å›çš„æ˜¯å·²è¿æ¥çš„socketæè¿°å­—ã€‚ä¸€ä¸ªæœåŠ¡å™¨é€šå¸¸é€šå¸¸ä»…ä»…åªåˆ›å»ºä¸€ä¸ªç›‘å¬socketæè¿°å­—ï¼Œå®ƒåœ¨è¯¥æœåŠ¡å™¨çš„ç”Ÿå‘½å‘¨æœŸå†…ä¸€ç›´å­˜åœ¨ã€‚å†…æ ¸ä¸ºæ¯ä¸ªç”±æœåŠ¡å™¨è¿›ç¨‹æ¥å—çš„å®¢æˆ·è¿æ¥åˆ›å»ºäº†ä¸€ä¸ªå·²è¿æ¥socketæè¿°å­—ï¼Œå½“æœåŠ¡å™¨å®Œæˆäº†å¯¹æŸä¸ªå®¢æˆ·çš„æœåŠ¡ï¼Œç›¸åº”çš„å·²è¿æ¥socketæè¿°å­—å°±è¢«å…³é—­ã€‚ 3.5ã€read()ã€write()å‡½æ•°ç­‰ä¸‡äº‹å…·å¤‡åªæ¬ ä¸œé£ï¼Œè‡³æ­¤æœåŠ¡å™¨ä¸å®¢æˆ·å·²ç»å»ºç«‹å¥½è¿æ¥äº†ã€‚å¯ä»¥è°ƒç”¨ç½‘ç»œI/Oè¿›è¡Œè¯»å†™æ“ä½œäº†ï¼Œå³å®ç°äº†ç½‘å’¯ä¸­ä¸åŒè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼ç½‘ç»œI/Oæ“ä½œæœ‰ä¸‹é¢å‡ ç»„ï¼š read()/write() recv()/send() readv()/writev() recvmsg()/sendmsg() recvfrom()/sendto() readå‡½æ•°æ˜¯è´Ÿè´£ä»fdä¸­è¯»å–å†…å®¹.å½“è¯»æˆåŠŸæ—¶ï¼Œreadè¿”å›å®é™…æ‰€è¯»çš„å­—èŠ‚æ•°ï¼Œå¦‚æœè¿”å›çš„å€¼æ˜¯0è¡¨ç¤ºå·²ç»è¯»åˆ°æ–‡ä»¶çš„ç»“æŸäº†ï¼Œå°äº0è¡¨ç¤ºå‡ºç°äº†é”™è¯¯ã€‚å¦‚æœé”™è¯¯ä¸ºEINTRè¯´æ˜è¯»æ˜¯ç”±ä¸­æ–­å¼•èµ·çš„ï¼Œå¦‚æœæ˜¯ECONNRESTè¡¨ç¤ºç½‘ç»œè¿æ¥å‡ºäº†é—®é¢˜ã€‚ writeå‡½æ•°å°†bufä¸­çš„nbyteså­—èŠ‚å†…å®¹å†™å…¥æ–‡ä»¶æè¿°ç¬¦fd.æˆåŠŸæ—¶è¿”å›å†™çš„å­—èŠ‚æ•°ã€‚å¤±è´¥æ—¶è¿”å›-1ï¼Œå¹¶è®¾ç½®errnoå˜é‡ã€‚ åœ¨ç½‘ç»œç¨‹åºä¸­ï¼Œå½“æˆ‘ä»¬å‘å¥—æ¥å­—æ–‡ä»¶æè¿°ç¬¦å†™æ—¶æœ‰ä¿©ç§å¯èƒ½ã€‚1)writeçš„è¿”å›å€¼å¤§äº0ï¼Œè¡¨ç¤ºå†™äº†éƒ¨åˆ†æˆ–è€…æ˜¯å…¨éƒ¨çš„æ•°æ®ã€‚2)è¿”å›çš„å€¼å°äº0ï¼Œæ­¤æ—¶å‡ºç°äº†é”™è¯¯ã€‚æˆ‘ä»¬è¦æ ¹æ®é”™è¯¯ç±»å‹æ¥å¤„ç†ã€‚å¦‚æœé”™è¯¯ä¸ºEINTRè¡¨ç¤ºåœ¨å†™çš„æ—¶å€™å‡ºç°äº†ä¸­æ–­é”™è¯¯ã€‚å¦‚æœä¸ºEPIPEè¡¨ç¤ºç½‘ç»œè¿æ¥å‡ºç°äº†é—®é¢˜(å¯¹æ–¹å·²ç»å…³é—­äº†è¿æ¥)ã€‚ å…¶å®ƒçš„æˆ‘å°±ä¸ä¸€ä¸€ä»‹ç»è¿™å‡ å¯¹I/Oå‡½æ•°äº†ï¼Œå…·ä½“å‚è§manæ–‡æ¡£æˆ–è€…baiduã€Googleï¼Œä¸‹é¢çš„ä¾‹å­ä¸­å°†ä½¿ç”¨åˆ°send/recvã€‚ 3.6ã€close()å‡½æ•°åœ¨æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯å»ºç«‹è¿æ¥ä¹‹åï¼Œä¼šè¿›è¡Œä¸€äº›è¯»å†™æ“ä½œï¼Œå®Œæˆäº†è¯»å†™æ“ä½œå°±è¦å…³é—­ç›¸åº”çš„socketæè¿°å­—ï¼Œå¥½æ¯”æ“ä½œå®Œæ‰“å¼€çš„æ–‡ä»¶è¦è°ƒç”¨fcloseå…³é—­æ‰“å¼€çš„æ–‡ä»¶ã€‚ #include &lt;unistd.h&gt; int close(int fd); closeä¸€ä¸ªTCP socketçš„ç¼ºçœè¡Œä¸ºæ—¶æŠŠè¯¥socketæ ‡è®°ä¸ºä»¥å…³é—­ï¼Œç„¶åç«‹å³è¿”å›åˆ°è°ƒç”¨è¿›ç¨‹ã€‚è¯¥æè¿°å­—ä¸èƒ½å†ç”±è°ƒç”¨è¿›ç¨‹ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸èƒ½å†ä½œä¸ºreadæˆ–writeçš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚ æ³¨æ„ï¼šcloseæ“ä½œåªæ˜¯ä½¿ç›¸åº”socketæè¿°å­—çš„å¼•ç”¨è®¡æ•°-1ï¼Œåªæœ‰å½“å¼•ç”¨è®¡æ•°ä¸º0çš„æ—¶å€™ï¼Œæ‰ä¼šè§¦å‘TCPå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ç»ˆæ­¢è¿æ¥è¯·æ±‚ã€‚ 4ã€socketä¸­TCPçš„ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥è¯¦è§£æˆ‘ä»¬çŸ¥é“tcpå»ºç«‹è¿æ¥è¦è¿›è¡Œâ€œä¸‰æ¬¡æ¡æ‰‹â€ï¼Œå³äº¤æ¢ä¸‰ä¸ªåˆ†ç»„ã€‚å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªSYN J æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å“åº”ä¸€ä¸ªSYN Kï¼Œå¹¶å¯¹SYN Jè¿›è¡Œç¡®è®¤ACK J+1 å®¢æˆ·ç«¯å†æƒ³æœåŠ¡å™¨å‘ä¸€ä¸ªç¡®è®¤ACK K+1 åªæœ‰å°±å®Œäº†ä¸‰æ¬¡æ¡æ‰‹ï¼Œä½†æ˜¯è¿™ä¸ªä¸‰æ¬¡æ¡æ‰‹å‘ç”Ÿåœ¨socketçš„é‚£å‡ ä¸ªå‡½æ•°ä¸­å‘¢ï¼Ÿè¯·çœ‹ä¸‹å›¾ï¼š 1 ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œå½“å®¢æˆ·ç«¯è°ƒç”¨connectæ—¶ï¼Œè§¦å‘äº†è¿æ¥è¯·æ±‚ï¼Œå‘æœåŠ¡å™¨å‘é€äº†SYN JåŒ…ï¼Œè¿™æ—¶connectè¿›å…¥é˜»å¡çŠ¶æ€ï¼›æœåŠ¡å™¨ç›‘å¬åˆ°è¿æ¥è¯·æ±‚ï¼Œå³æ”¶åˆ°SYN JåŒ…ï¼Œè°ƒç”¨acceptå‡½æ•°æ¥æ”¶è¯·æ±‚å‘å®¢æˆ·ç«¯å‘é€SYN K ï¼ŒACK J+1ï¼Œè¿™æ—¶acceptè¿›å…¥é˜»å¡çŠ¶æ€ï¼›å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„SYN K ï¼ŒACK J+1ä¹‹åï¼Œè¿™æ—¶connectè¿”å›ï¼Œå¹¶å¯¹SYN Kè¿›è¡Œç¡®è®¤ï¼›æœåŠ¡å™¨æ”¶åˆ°ACK K+1æ—¶ï¼Œacceptè¿”å›ï¼Œè‡³æ­¤ä¸‰æ¬¡æ¡æ‰‹å®Œæ¯•ï¼Œè¿æ¥å»ºç«‹ã€‚ æ€»ç»“ï¼šå®¢æˆ·ç«¯çš„connectåœ¨ä¸‰æ¬¡æ¡æ‰‹çš„ç¬¬äºŒä¸ªæ¬¡è¿”å›ï¼Œè€ŒæœåŠ¡å™¨ç«¯çš„acceptåœ¨ä¸‰æ¬¡æ¡æ‰‹çš„ç¬¬ä¸‰æ¬¡è¿”å›ã€‚ 5ã€socketä¸­TCPçš„å››æ¬¡æ¡æ‰‹é‡Šæ”¾è¿æ¥è¯¦è§£ä¸Šé¢ä»‹ç»äº†socketä¸­TCPçš„ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿‡ç¨‹ï¼ŒåŠå…¶æ¶‰åŠçš„socketå‡½æ•°ã€‚ç°åœ¨æˆ‘ä»¬ä»‹ç»socketä¸­çš„å››æ¬¡æ¡æ‰‹é‡Šæ”¾è¿æ¥çš„è¿‡ç¨‹ï¼Œè¯·çœ‹ä¸‹å›¾ï¼š å›¾ç¤ºè¿‡ç¨‹å¦‚ä¸‹ï¼š 2 æŸä¸ªåº”ç”¨è¿›ç¨‹é¦–å…ˆè°ƒç”¨closeä¸»åŠ¨å…³é—­è¿æ¥ï¼Œè¿™æ—¶TCPå‘é€ä¸€ä¸ªFIN Mï¼› å¦ä¸€ç«¯æ¥æ”¶åˆ°FIN Mä¹‹åï¼Œæ‰§è¡Œè¢«åŠ¨å…³é—­ï¼Œå¯¹è¿™ä¸ªFINè¿›è¡Œç¡®è®¤ã€‚å®ƒçš„æ¥æ”¶ä¹Ÿä½œä¸ºæ–‡ä»¶ç»“æŸç¬¦ä¼ é€’ç»™åº”ç”¨è¿›ç¨‹ï¼Œå› ä¸ºFINçš„æ¥æ”¶æ„å‘³ç€åº”ç”¨è¿›ç¨‹åœ¨ç›¸åº”çš„è¿æ¥ä¸Šå†ä¹Ÿæ¥æ”¶ä¸åˆ°é¢å¤–æ•°æ®ï¼› ä¸€æ®µæ—¶é—´ä¹‹åï¼Œæ¥æ”¶åˆ°æ–‡ä»¶ç»“æŸç¬¦çš„åº”ç”¨è¿›ç¨‹è°ƒç”¨closeå…³é—­å®ƒçš„socketã€‚è¿™å¯¼è‡´å®ƒçš„TCPä¹Ÿå‘é€ä¸€ä¸ªFIN Nï¼› æ¥æ”¶åˆ°è¿™ä¸ªFINçš„æºå‘é€ç«¯TCPå¯¹å®ƒè¿›è¡Œç¡®è®¤ã€‚ è¿™æ ·æ¯ä¸ªæ–¹å‘ä¸Šéƒ½æœ‰ä¸€ä¸ªFINå’ŒACKã€‚ 6ã€ä»£ç å®ç°æœåŠ¡å™¨ç«¯ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;strings.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;#include &lt;memory.h&gt;#include &lt;unistd.h&gt;//#include &lt;linux/in.h&gt;#include &lt;netinet/in.h&gt;//#include &lt;linux/inet_diag.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;signal.h&gt;#define PORT 11910 //å®šä¹‰é€šä¿¡ç«¯å£#define BACKLOG 5 //å®šä¹‰ä¾¦å¬é˜Ÿåˆ—é•¿åº¦#define buflen 1024void process_conn_server(int s);void sig_pipe(int signo);int ss,sc; //ssä¸ºæœåŠ¡å™¨socketæè¿°ç¬¦ï¼Œscä¸ºæŸä¸€å®¢æˆ·ç«¯é€šä¿¡socketæè¿°ç¬¦int main(int argc,char *argv[])&#123; struct sockaddr_in server_addr; //å­˜å‚¨æœåŠ¡å™¨ç«¯socketåœ°å€ç»“æ„ struct sockaddr_in client_addr; //å­˜å‚¨å®¢æˆ·ç«¯ socketåœ°å€ç»“æ„ int err; //è¿”å›å€¼ pid_t pid; //åˆ†å‰è¿›è¡Œçš„ID /*****************socket()***************/ ss = socket(AF_INET,SOCK_STREAM,0); //å»ºç«‹ä¸€ä¸ªåºåˆ—åŒ–çš„ï¼Œå¯é çš„ï¼ŒåŒå‘è¿æ¥çš„çš„å­—èŠ‚æµ if(ss&lt;0) &#123; printf(&quot;server : server socket create error\\n&quot;); return -1; &#125; //æ³¨å†Œä¿¡å· sighandler_t ret; ret = signal(SIGTSTP,sig_pipe); if(SIG_ERR == ret) &#123; printf(&quot;ä¿¡å·æŒ‚æ¥å¤±è´¥\\n&quot;); return -1; &#125; else printf(&quot;ä¿¡å·æŒ‚æ¥æˆåŠŸ\\n&quot;); /******************bind()****************/ //åˆå§‹åŒ–åœ°å€ç»“æ„ memset(&amp;server_addr,0,sizeof(server_addr)); server_addr.sin_family = AF_INET; //åè®®æ— server_addr.sin_addr.s_addr = htonl(INADDR_ANY); //æœ¬åœ°åœ°å€ server_addr.sin_port = htons(PORT); err = bind(ss,(struct sockaddr *)&amp;server_addr,sizeof(sockaddr)); if(err&lt;0) &#123; printf(&quot;server : bind error\\n&quot;); return -1; &#125; /*****************listen()***************/ err = listen(ss,BACKLOG); //è®¾ç½®ç›‘å¬çš„é˜Ÿåˆ—å¤§å° if(err &lt; 0) &#123; printf(&quot;server : listen error\\n&quot;); return -1; &#125; /****************accept()***************/ /** ä¸ºç±»æ–¹ä¾¿å¤„ç†ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸¤ä¸ªè¿›ç¨‹åˆ†åˆ«ç®¡ç†ä¸¤ä¸ªå¤„ç†ï¼š 1ï¼ŒæœåŠ¡å™¨ç›‘å¬æ–°çš„è¿æ¥è¯·æ±‚;2,ä»¥å»ºç«‹è¿æ¥çš„C/Så®ç°é€šä¿¡ è¿™ä¸¤ä¸ªä»»åŠ¡åˆ†åˆ«æ”¾åœ¨ä¸¤ä¸ªè¿›ç¨‹ä¸­å¤„ç†ï¼Œä¸ºäº†é˜²æ­¢å¤±è¯¯æ“ä½œ åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­å…³é—­ ä¾¦å¬å¥—æ¥å­—æè¿°ç¬¦ å¦ä¸€è¿›ç¨‹ä¸­å…³é—­ å®¢æˆ·ç«¯è¿æ¥å¥—æ¥å­—æè¿°ç¬¦ã€‚æ³¨åªæœ‰å½“æ‰€æœ‰å¥—æ¥å­—å…¨éƒ½å…³é—­æ—¶ å½“å‰è¿æ¥æ‰èƒ½å…³é—­ï¼Œforkè°ƒç”¨çš„æ—¶å€™çˆ¶è¿›ç¨‹ä¸å­è¿›ç¨‹æœ‰ç›¸åŒçš„ å¥—æ¥å­—ï¼Œæ€»å…±ä¸¤å¥—ï¼Œä¸¤å¥—éƒ½å…³é—­æ‰æ‰èƒ½å…³é—­è¿™ä¸ªå¥—æ¥å­— */ for(;;) &#123; socklen_t addrlen = sizeof(client_addr); //acceptè¿”å›å®¢æˆ·ç«¯å¥—æ¥å­—æè¿°ç¬¦ sc = accept(ss,(struct sockaddr *)&amp;client_addr,&amp;addrlen); //æ³¨ï¼Œæ­¤å¤„ä¸ºäº†è·å–è¿”å›å€¼ä½¿ç”¨ æŒ‡é’ˆåšå‚æ•° if(sc &lt; 0) //å‡ºé”™ &#123; continue; //ç»“æŸæ­¤æ¬¡å¾ªç¯ &#125; else &#123; printf(&quot;server : connected\\n&quot;); &#125; //åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹ï¼Œç”¨äºä¸å®¢æˆ·ç«¯é€šä¿¡ pid = fork(); //fork è°ƒç”¨è¯´æ˜ï¼šå­è¿›ç¨‹è¿”å› 0 ï¼›çˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹ ID if(pid == 0) //å­è¿›ç¨‹ï¼Œä¸å®¢æˆ·ç«¯é€šä¿¡ &#123; close(ss); process_conn_server(sc); &#125; else &#123; close(sc); &#125; &#125;&#125;/** æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯è¿æ¥å¤„ç†è¿‡ç¨‹ï¼›å…ˆè¯»å–ä»å®¢æˆ·ç«¯å‘é€æ¥çš„æ•°æ®ï¼Œ ç„¶åå°†æ¥æ”¶åˆ°çš„æ•°æ®çš„å­—èŠ‚çš„ä¸ªæ•°å‘é€åˆ°å®¢æˆ·ç«¯ *///é€šè¿‡å¥—æ¥å­— s ä¸å®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡void process_conn_server(int s)&#123; ssize_t size = 0; char buffer[buflen]; //å®šä¹‰æ•°æ®ç¼“å†²åŒº for(;;) &#123; //ç­‰å¾…è¯» for(size = 0;size == 0 ;size = read(s,buffer,buflen)); //è¾“å‡ºä»å®¢æˆ·ç«¯æ¥æ”¶åˆ°çš„æ•°æ® printf(&quot;%s&quot;,buffer); //ç»“æŸå¤„ç† if(strcmp(buffer,&quot;quit&quot;) == 0) &#123; close(s); //æˆåŠŸè¿”å›0ï¼Œå¤±è´¥è¿”å›-1 return ; &#125; sprintf(buffer,&quot;%d bytes altogether\\n&quot;,size); write(s,buffer,strlen(buffer)+1); &#125;&#125;void sig_pipe(int signo)&#123; printf(&quot;catch a signal\\n&quot;); if(signo == SIGTSTP) &#123; printf(&quot;æ¥æ”¶åˆ° SIGTSTP ä¿¡å·\\n&quot;); int ret1 = close(ss); int ret2 = close(sc); int ret = ret1&gt;ret2?ret1:ret2; if(ret == 0) printf(&quot;æˆåŠŸ : å…³é—­å¥—æ¥å­—\\n&quot;); else if(ret ==-1 ) printf(&quot;å¤±è´¥ : æœªå…³é—­å¥—æ¥å­—\\n&quot;); exit(1); &#125;&#125; å®¢æˆ·ç«¯ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243#include &lt;stdio.h&gt;#include &lt;strings.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;//#include &lt;linux/in.h&gt;#include &lt;stdlib.h&gt;#include &lt;memory.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;netinet/in.h&gt;#include &lt;signal.h&gt; //æ·»åŠ ä¿¡å·å¤„ç† é˜²æ­¢å‘å·²æ–­å¼€çš„è¿æ¥é€šä¿¡/** ä¿¡å·å¤„ç†é¡ºåºè¯´æ˜ï¼šåœ¨Linuxæ“ä½œç³»ç»Ÿä¸­æŸäº›çŠ¶å†µå‘ç”Ÿæ—¶ï¼Œç³»ç»Ÿä¼šå‘ç›¸å…³è¿›ç¨‹å‘é€ä¿¡å·ï¼Œ ä¿¡å·å¤„ç†æ–¹å¼æ˜¯ï¼š1ï¼Œç³»ç»Ÿé¦–å…ˆè°ƒç”¨ç”¨æˆ·åœ¨è¿›ç¨‹ä¸­æ³¨å†Œçš„å‡½æ•°ï¼Œ2ï¼Œç„¶åè°ƒç”¨ç³»ç»Ÿçš„é»˜è®¤ å“åº”æ–¹å¼,æ­¤å¤„æˆ‘ä»¬å¯ä»¥æ³¨å†Œè‡ªå·±çš„ä¿¡å·å¤„ç†å‡½æ•°ï¼Œåœ¨è¿æ¥æ–­å¼€æ—¶æ‰§è¡Œ */#define PORT 11910#define Buflen 1024void process_conn_client(int s);void sig_pipe(int signo); //ç”¨æˆ·æ³¨å†Œçš„ä¿¡å·å‡½æ•°,æ¥æ”¶çš„æ˜¯ä¿¡å·å€¼int s; //å…¨å±€å˜é‡ ï¼Œ å­˜å‚¨å¥—æ¥å­—æè¿°ç¬¦int main(int argc,char *argv[])&#123; sockaddr_in server_addr; int err; sighandler_t ret; char server_ip[50] = &quot;&quot;; /********************socket()*********************/ s= socket(AF_INET,SOCK_STREAM,0); if(s&lt;0) &#123; printf(&quot;client : create socket error\\n&quot;); return 1; &#125; //ä¿¡å·å¤„ç†å‡½æ•° SIGINT æ˜¯å½“ç”¨æˆ·æŒ‰ä¸€ä¸ª Ctrl-C å»ºæ—¶å‘é€çš„ä¿¡å· ret = signal(SIGTSTP,sig_pipe); if(SIG_ERR == ret) &#123; printf(&quot;ä¿¡å·æŒ‚æ¥å¤±è´¥\\n&quot;); return -1; &#125; else printf(&quot;ä¿¡å·æŒ‚æ¥æˆåŠŸ\\n&quot;) ; /*******************connect()*********************/ //è®¾ç½®æœåŠ¡å™¨åœ°å€ç»“æ„ï¼Œå‡†å¤‡è¿æ¥åˆ°æœåŠ¡å™¨ memset(&amp;server_addr,0,sizeof(server_addr)); server_addr.sin_family = AF_INET; server_addr.sin_port = htons(PORT); server_addr.sin_addr.s_addr = htonl(INADDR_ANY); /*å°†ç”¨æˆ·æ•°å…¥å¯¹é¢å­—ç¬¦ä¸²ç±»å‹çš„IPæ ¼å¼è½¬åŒ–ä¸ºæ•´å‹æ•°æ®*/ //inet_pton(AF_INET,argv[1],&amp;server_addr.sin_addr.s_addr); printf(&quot;please input server ip address : \\n&quot;); read(0,server_ip,50); //err = inet_pton(AF_INET,server_ip,&amp;server_addr.sin_addr.s_addr); server_addr.sin_addr.s_addr = inet_addr(server_ip); err = connect(s,(struct sockaddr *)&amp;server_addr,sizeof(sockaddr)); if(err == 0) &#123; printf(&quot;client : connect to server\\n&quot;); &#125; else &#123; printf(&quot;client : connect error\\n&quot;); return -1; &#125; //ä¸æœåŠ¡å™¨ç«¯è¿›è¡Œé€šä¿¡ process_conn_client(s); close(s);&#125;void process_conn_client(int s)&#123; ssize_t size = 0; char buffer[Buflen]; for(;;) &#123; memset(buffer,&apos;\\0&apos;,Buflen); /*ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–æ•°æ®æ”¾åˆ°ç¼“å†²åŒºbufferä¸­*/ size = read(0,buffer,Buflen); // 0ï¼Œè¢«é»˜è®¤çš„åˆ†é…åˆ°æ ‡å‡†è¾“å…¥ 1ï¼Œæ ‡å‡†è¾“å‡º 2ï¼Œerror if(size &gt; 0) &#123; //å½“å‘æœåŠ¡å™¨å‘é€ â€œquitâ€ å‘½ä»¤æ—¶ï¼ŒæœåŠ¡å™¨é¦–å…ˆæ–­å¼€è¿æ¥ write(s,buffer,strlen(buffer)+1); //å‘æœåŠ¡å™¨ç«¯å†™ //ç­‰å¾…è¯»å–åˆ°æ•°æ® for(size = 0 ; size == 0 ; size = read(s,buffer,Buflen) ); write(1,buffer,strlen(buffer)+1); //å‘æ ‡å‡†è¾“å‡ºå†™ &#125; &#125;&#125;void sig_pipe(int signo) //ä¼ å…¥å¥—æ¥å­—æè¿°ç¬¦&#123; printf(&quot;Catch a signal\\n&quot;); if(signo == SIGTSTP) &#123; printf(&quot;æ¥æ”¶åˆ° SIGTSTP ä¿¡å·\\n&quot;); int ret = close(s); if(ret == 0) printf(&quot;æˆåŠŸ : å…³é—­å¥—æ¥å­—\\n&quot;); else if(ret ==-1 ) printf(&quot;å¤±è´¥ : æœªå…³é—­å¥—æ¥å­—\\n&quot;); exit(1); &#125;&#125; è¿è¡Œç»“æœ 21 22","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://summxu.github.io/tags/Linux/"},{"name":"Cè¯­è¨€","slug":"Cè¯­è¨€","permalink":"https://summxu.github.io/tags/Cè¯­è¨€/"}],"author":"BoomXu"},{"title":"é€šè¿‡CSSæ·»åŠ ç½‘é¡µçš„åŠ¨ç”»æ•ˆæœ","slug":"2017/add-css-effect","date":"2017-06-16T06:03:56.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/add-css-effect/","link":"","permalink":"https://summxu.github.io/2017/add-css-effect/","excerpt":"","text":"æ˜¨å¤©å†™äº†é€šè¿‡jQueryæ·»åŠ ç½‘é¡µçš„åŠ¨ç”»æ•ˆæœæ¥ç¾åŒ–äº†ä¸€ä¸‹åšå®¢ï¼Œå‘ç°jQueryçš„åŠ¨ç”»æ•ˆæœå¡å‡ºç¿”ï¼Œåˆ«è¯´ç¾è§‚äº†ï¼Œç”¨æˆ·ä½“éªŒéƒ½æ²¡ä¿è¯ï¼Œä»Šå¤©æ›´æ–°ä¸‹ç”¨CSSæ·»åŠ ç½‘é¡µç‰¹æ•ˆï¼Œé¡ºä¾¿è®°å½•ä¸‹è‡ªå·±çš„CSSçš„å­¦ä¹ ï¼›ã€‚ åœ¨ç½‘ä¸ŠæŸ¥é˜…ç›¸å…³CSSåŠ¨ç”»ç‰¹æ•ˆçš„èµ„æ–™ï¼Œå‘ç°äº†ä¸€ä¸ªCSSæ ·å¼åº“ï¼šAninmate.cssè¿™æ¬¡ä¸»è¦æ˜¯å¯¹è¿™ä¸ªæ ·å¼åº“è¿›è¡Œä»‹ç»ï¼Œé‡Œé¢æœ‰å¾ˆå¤šå¥½çœ‹çš„åŠ¨ç”»æ ·å¼ã€‚ Aninmate.cssè¿™é‡Œæœ‰ä¸ªAninmateæ ·å¼çš„å„ä¸ªæ•ˆæœé¢„è§ˆï¼šç‚¹æˆ‘æŸ¥çœ‹ æˆ‘æ‰“åŒ…äº†Aninmate.cssçš„å¼•å…¥æ–‡ä»¶å‡ Demoï¼šåœ¨æ­¤ä¸‹è½½ ç®€ä»‹animate.css æ˜¯ä¸€ä¸ªæ¥è‡ªå›½å¤–çš„ CSS3 åŠ¨ç”»åº“ï¼Œå®ƒé¢„è®¾äº†æŠ–åŠ¨ï¼ˆshakeï¼‰ã€é—ªçƒï¼ˆflashï¼‰ã€å¼¹è·³ï¼ˆbounceï¼‰ã€ç¿»è½¬ï¼ˆflipï¼‰ã€æ—‹è½¬ï¼ˆrotateIn/rotateOutï¼‰ã€æ·¡å…¥æ·¡å‡ºï¼ˆfadeIn/fadeOutï¼‰ç­‰å¤šè¾¾ 60 å¤šç§åŠ¨ç”»æ•ˆæœ ï¼Œå‡ ä¹åŒ…å«äº†æ‰€æœ‰å¸¸è§çš„åŠ¨ç”»æ•ˆæœã€‚ è™½ç„¶å€ŸåŠ© animate.css èƒ½å¤Ÿå¾ˆæ–¹ä¾¿ã€å¿«é€Ÿçš„åˆ¶ä½œ CSS3 åŠ¨ç”»æ•ˆæœï¼Œä½†è¿˜æ˜¯ å»ºè®®çœ‹çœ‹ animate.css çš„ä»£ç ï¼Œä¹Ÿè®¸ä½ èƒ½ä»ä¸­å­¦åˆ°ä¸€äº›ä¸œè¥¿ã€‚ å…¼å®¹æµè§ˆå™¨å…¼å®¹ï¼šå½“ç„¶æ˜¯åªå…¼å®¹æ”¯æŒ CSS3 animate å±æ€§çš„æµè§ˆå™¨ï¼Œä»–ä»¬åˆ†åˆ«æ˜¯ï¼šIE10+ã€Firefoxã€Chromeã€Operaã€Safariã€‚ ä½¿ç”¨æ–¹æ³• å½“ç„¶é¦–å…ˆè¦å¼•å…¥æ ·å¼æ–‡ä»¶ 1&lt;link rel=&quot;stylesheet&quot; href=&quot;animate.min.css&quot;&gt; HTML åŠä½¿ç”¨ 1&lt;div class=&quot;animated bounce&quot; id=&quot;dowebok&quot;&gt;&lt;/div&gt; ç»™å…ƒç´ åŠ ä¸Š class åï¼Œåˆ·æ–°é¡µé¢ï¼Œå°±èƒ½çœ‹åˆ°åŠ¨ç”»æ•ˆæœäº†ã€‚animated ç±»ä¼¼äºå…¨å±€å˜é‡ï¼Œå®ƒå®šä¹‰äº†åŠ¨ç”»çš„æŒç»­æ—¶é—´ï¼›bounce æ˜¯åŠ¨ç”»å…·ä½“çš„åŠ¨ç”»æ•ˆæœçš„åç§°ï¼Œä½ å¯ä»¥é€‰æ‹©ä»»æ„çš„æ•ˆæœã€‚ å¦‚æœåŠ¨ç”»æ˜¯æ— é™æ’­æ”¾çš„ï¼Œå¯ä»¥æ·»åŠ  class infiniteã€‚ ä½ ä¹Ÿå¯ä»¥é€šè¿‡ JavaScript æˆ– jQuery ç»™å…ƒç´ æ·»åŠ è¿™äº› classï¼Œæ¯”å¦‚ï¼š 123$(function()&#123; $(&apos;#dowebok&apos;).addClass(&apos;animated bounce&apos;);&#125;); æœ‰äº›åŠ¨ç”»æ•ˆæœæœ€åä¼šè®©å…ƒç´ ä¸å¯è§ï¼Œæ¯”å¦‚æ·¡å‡ºã€å‘å·¦æ»‘åŠ¨ç­‰ç­‰ï¼Œå¯èƒ½ä½ åˆéœ€è¦å°† class åˆ é™¤ï¼Œæ¯”å¦‚ï¼š 123456$(function()&#123; $(&apos;#dowebok&apos;).addClass(&apos;animated bounce&apos;); setTimeout(function()&#123; $(&apos;#dowebok&apos;).removeClass(&apos;bounce&apos;); &#125;, 1000);&#125;); animate.css çš„é»˜è®¤è®¾ç½®ä¹Ÿè®¸æœ‰äº›æ—¶å€™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥é‡æ–°è®¾ç½®ï¼Œæ¯”å¦‚ï¼š 12345#dowebok &#123; animate-duration: 2s; //åŠ¨ç”»æŒç»­æ—¶é—´ animate-delay: 1s; //åŠ¨ç”»å»¶è¿Ÿæ—¶é—´ animate-iteration-count: 2; //åŠ¨ç”»æ‰§è¡Œæ¬¡æ•°&#125; Githubåœ°å€ https://github.com/daneden/animate.css æˆ‘çš„å¼•ç”¨ä»£ç æœ¬æ¬¡å¼•ç”¨äº†ä¸¤ä¸ªé¡µé¢ï¼Œä¸€ä¸ªæ–‡ç« Posté¡µï¼Œä¸€ä¸ªæ˜¯åšå®¢é¦–é¡µï¼š posté¡µï¼š 123&lt;a class=&quot;tag animated bounceInDown&quot; href=&quot;&#123; &#123; site.baseurl &#125; &#125;/tags/#&#123; &#123; tag &#125; &#125;&quot; title=&quot;&#123; &#123; tag &#125; &#125;&quot;&gt;&#123; &#123; tag &#125; &#125;&lt;/a&gt;&lt;h1 class=&quot;animated rotateInDownLeft&quot;&gt;&#123; &#123; page.title &#125; &#125;&lt;/h1&gt;&lt;h2 class=&quot;subheading animated rotateInUpRight&quot;&gt;&#123; &#123; page.subtitle &#125; &#125;&lt;/h2&gt; é¦–é¡µï¼š 12&lt;h1 class=&quot;animated flipInX&quot;&gt;&#123;% if page.title %&#125;&#123; &#123; page.title &#125; &#125;&#123;% else %&#125;&#123; &#123; site.title &#125; &#125;&#123;% endif %&#125;&lt;/h1&gt;&lt;span class=&quot;subheading animated flipInY&quot;&gt;&#123; &#123; page.description &#125; &#125;&lt;/span&gt; ä¸ºä»€ä¹ˆjQueryä¼šå¡é¡¿?è®©æˆ‘ä»¬ä»åŸºæœ¬å¼€å§‹è¯´èµ·ï¼š Javascript å’Œ jQuery ä¸¤è€…ä¸èƒ½æ··ä¸ºä¸€è°ˆã€‚Javascript åŠ¨ç”»å¾ˆå¿«ï¼Œè€Œ jQuery åŠ¨ç”»å¾ˆæ…¢ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºå°½ç®¡ jQuery å¼‚å¸¸å¼ºå¤§ï¼Œä½†æ˜¯å®ƒçš„è®¾è®¡ç›®æ ‡å¹¶ä¸æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„åŠ¨ç”»å¼•æ“ï¼š jQuery ä¸èƒ½é¿å… layout thrashing ï¼ˆæœ‰äººå–œæ¬¢å°†å…¶ç¿»è¯‘ä¸ºâ€œå¸ƒå±€é¢ ç°¸â€ï¼Œä¼šå¯¼è‡´å¤šä½™relayout/reflowï¼‰ï¼Œå› ä¸ºå®ƒçš„ä»£ç ä¸ä»…ä»…ç”¨äºåŠ¨ç”»ï¼Œå®ƒè¿˜ç”¨äºå¾ˆå¤šå…¶ä»–åœºæ™¯ã€‚ jQueryçš„å†…å­˜æ¶ˆè€—è¾ƒå¤§ï¼Œç»å¸¸ä¼šè§¦å‘åƒåœ¾å›æ”¶ã€‚è€Œåƒåœ¾å›æ”¶è§¦å‘æ—¶å¾ˆå®¹æ˜“è®©åŠ¨ç”»å¡ä½ã€‚ jQueryä½¿ç”¨äº†setIntervalè€Œä¸æ˜¯ reqeustAnimationFrame(RAF)ï¼Œå› ä¸º RAF ä¼šåœ¨çª—å£å¤±å»ç„¦ç‚¹æ—¶åœæ­¢è§¦å‘ï¼Œè¿™ä¼šå¯¼è‡´jQueryçš„bugã€‚ï¼ˆç›®å‰jQueryå·²ç»ä½¿ç”¨äº†RAFï¼‰ æ³¨æ„ layout thrashing ä¼šå¯¼è‡´åŠ¨ç”»åœ¨å¼€å§‹çš„æ—¶å€™å¡é¡¿ï¼Œåƒåœ¾å›æ”¶çš„è§¦å‘ä¼šå¯¼è‡´åŠ¨ç”»è¿è¡Œè¿‡ç¨‹ä¸­çš„å¡é¡¿ï¼Œä¸ä½¿ç”¨ RAF åˆ™ä¼šå¯¼è‡´åŠ¨ç”»å¸§ç‡ä½ã€‚ æ€»ç»“CSS3ä¹Ÿæ˜¯ä¸ªå¾ˆå¼ºå¤§çš„ä¸œè¥¿ï¼Œå‰ç«¯çš„èµ„æºçœŸçš„æ˜¯å¾ˆå¤šå¾ˆå¤šã€‚æ²¡æƒ³åˆ°è¿˜æœ‰ä¸“é—¨çš„åŠ¨ç”»æ•ˆæœCSSåº“ï¼Œåœ¨ä»¥åè¿˜ä¼šæ›´åŠ çµæ´»çš„å»è¿ç”¨å…¶ä»–ç¬¬ä¸‰æ–¹çš„åº“ã€‚","categories":[],"tags":[{"name":"CSS","slug":"CSS","permalink":"https://summxu.github.io/tags/CSS/"}],"author":"BoomXu"},{"title":"Gitçš„å¸¸ç”¨æ“ä½œ","slug":"2017/git-usually-opera","date":"2017-06-15T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/git-usually-opera/","link":"","permalink":"https://summxu.github.io/2017/git-usually-opera/","excerpt":"","text":"Gitæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”¨ä»¥æœ‰æ•ˆã€é«˜é€Ÿçš„å¤„ç†ä»å¾ˆå°åˆ°éå¸¸å¤§çš„é¡¹ç›®ç‰ˆæœ¬ç®¡ç†ã€‚ *Git æ˜¯ Linus Torvalds *ä¸ºäº†å¸®åŠ©ç®¡ç† Linux å†…æ ¸å¼€å‘è€Œå¼€å‘çš„ä¸€ä¸ªå¼€æ”¾æºç çš„ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ã€‚ å¸¸ç”¨æ“ä½œæŸ¥çœ‹ã€æ·»åŠ ã€æäº¤ã€åˆ é™¤ã€æ‰¾å›ï¼Œé‡ç½®ä¿®æ”¹æ–‡ä»¶git help # æ˜¾ç¤ºcommandçš„help git show # æ˜¾ç¤ºæŸæ¬¡æäº¤çš„å†…å®¹ git show $id git co â€“ # æŠ›å¼ƒå·¥ä½œåŒºä¿®æ”¹ git co . # æŠ›å¼ƒå·¥ä½œåŒºä¿®æ”¹ git add # å°†å·¥ä½œæ–‡ä»¶ä¿®æ”¹æäº¤åˆ°æœ¬åœ°æš‚å­˜åŒº git add . # å°†æ‰€æœ‰ä¿®æ”¹è¿‡çš„å·¥ä½œæ–‡ä»¶æäº¤æš‚å­˜åŒº git rm # ä»ç‰ˆæœ¬åº“ä¸­åˆ é™¤æ–‡ä»¶ git rm â€“cached # ä»ç‰ˆæœ¬åº“ä¸­åˆ é™¤æ–‡ä»¶ï¼Œä½†ä¸åˆ é™¤æ–‡ä»¶ git reset # ä»æš‚å­˜åŒºæ¢å¤åˆ°å·¥ä½œæ–‡ä»¶ git reset â€“ . # ä»æš‚å­˜åŒºæ¢å¤åˆ°å·¥ä½œæ–‡ä»¶ git reset â€“hard # æ¢å¤æœ€è¿‘ä¸€æ¬¡æäº¤è¿‡çš„çŠ¶æ€ï¼Œå³æ”¾å¼ƒä¸Šæ¬¡æäº¤åçš„æ‰€æœ‰æœ¬æ¬¡ä¿®æ”¹ git ci git ci . git ci -a # å°†git add, git rmå’Œgit ciç­‰æ“ä½œéƒ½åˆå¹¶åœ¨ä¸€èµ·åš git ci â€“amend # ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤è®°å½• git revert &lt;$id&gt; # æ¢å¤æŸæ¬¡æäº¤çš„çŠ¶æ€ï¼Œæ¢å¤åŠ¨ä½œæœ¬èº«ä¹Ÿåˆ›å»ºæ¬¡æäº¤å¯¹è±¡ git revert HEAD # æ¢å¤æœ€åä¸€æ¬¡æäº¤çš„çŠ¶æ€ æŸ¥çœ‹æ–‡ä»¶diffgit diff # æ¯”è¾ƒå½“å‰æ–‡ä»¶å’Œæš‚å­˜åŒºæ–‡ä»¶å·®å¼‚ git diff git diff # æ¯”è¾ƒä¸¤æ¬¡æäº¤ä¹‹é—´çš„å·®å¼‚ git diff .. # åœ¨ä¸¤ä¸ªåˆ†æ”¯ä¹‹é—´æ¯”è¾ƒ git diff â€“staged # æ¯”è¾ƒæš‚å­˜åŒºå’Œç‰ˆæœ¬åº“å·®å¼‚ git diff â€“cached # æ¯”è¾ƒæš‚å­˜åŒºå’Œç‰ˆæœ¬åº“å·®å¼‚ git diff â€“stat # ä»…ä»…æ¯”è¾ƒç»Ÿè®¡ä¿¡æ¯ æŸ¥çœ‹æäº¤è®°å½•git log git log # æŸ¥çœ‹è¯¥æ–‡ä»¶æ¯æ¬¡æäº¤è®°å½• git log -p # æŸ¥çœ‹æ¯æ¬¡è¯¦ç»†ä¿®æ”¹å†…å®¹çš„diff git log -p -2 # æŸ¥çœ‹æœ€è¿‘ä¸¤æ¬¡è¯¦ç»†ä¿®æ”¹å†…å®¹çš„diff git log â€“stat #æŸ¥çœ‹æäº¤ç»Ÿè®¡ä¿¡æ¯ tig Macä¸Šå¯ä»¥ä½¿ç”¨tigä»£æ›¿diffå’Œlogï¼Œbrew install tig Git æœ¬åœ°åˆ†æ”¯ç®¡ç†æŸ¥çœ‹ã€åˆ‡æ¢ã€åˆ›å»ºå’Œåˆ é™¤åˆ†æ”¯git br -r # æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ git br # åˆ›å»ºæ–°çš„åˆ†æ”¯ git br -v # æŸ¥çœ‹å„ä¸ªåˆ†æ”¯æœ€åæäº¤ä¿¡æ¯ git br â€“merged # æŸ¥çœ‹å·²ç»è¢«åˆå¹¶åˆ°å½“å‰åˆ†æ”¯çš„åˆ†æ”¯ git br â€“no-merged # æŸ¥çœ‹å°šæœªè¢«åˆå¹¶åˆ°å½“å‰åˆ†æ”¯çš„åˆ†æ”¯ git co # åˆ‡æ¢åˆ°æŸä¸ªåˆ†æ”¯ git co -b # åˆ›å»ºæ–°çš„åˆ†æ”¯ï¼Œå¹¶ä¸”åˆ‡æ¢è¿‡å» git co -b # åŸºäºbranchåˆ›å»ºæ–°çš„new_branch git co $id # æŠŠæŸæ¬¡å†å²æäº¤è®°å½•checkoutå‡ºæ¥ï¼Œä½†æ— åˆ†æ”¯ä¿¡æ¯ï¼Œåˆ‡æ¢åˆ°å…¶ä»–åˆ†æ”¯ä¼šè‡ªåŠ¨åˆ é™¤ git co $id -b # æŠŠæŸæ¬¡å†å²æäº¤è®°å½•checkoutå‡ºæ¥ï¼Œåˆ›å»ºæˆä¸€ä¸ªåˆ†æ”¯ git br -d # åˆ é™¤æŸä¸ªåˆ†æ”¯ git br -D # å¼ºåˆ¶åˆ é™¤æŸä¸ªåˆ†æ”¯ (æœªè¢«åˆå¹¶çš„åˆ†æ”¯è¢«åˆ é™¤çš„æ—¶å€™éœ€è¦å¼ºåˆ¶) åˆ†æ”¯åˆå¹¶å’Œrebasegit merge # å°†branchåˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ git merge origin/master â€“no-ff # ä¸è¦Fast-Fowardåˆå¹¶ï¼Œè¿™æ ·å¯ä»¥ç”Ÿæˆmergeæäº¤ git rebase master # å°†master rebaseåˆ°branchï¼Œç›¸å½“äºï¼š git co &amp;&amp; git rebase master &amp;&amp; git co master &amp;&amp; git merge Gitè¡¥ä¸ç®¡ç†(æ–¹ä¾¿åœ¨å¤šå°æœºå™¨ä¸Šå¼€å‘åŒæ­¥æ—¶ç”¨)git diff &gt; ../sync.patch # ç”Ÿæˆè¡¥ä¸ git apply ../sync.patch # æ‰“è¡¥ä¸ git apply â€“check ../sync.patch #æµ‹è¯•è¡¥ä¸èƒ½å¦æˆåŠŸ Gitæš‚å­˜ç®¡ç†git stash # æš‚å­˜ git stash list # åˆ—æ‰€æœ‰stash git stash apply # æ¢å¤æš‚å­˜çš„å†…å®¹ git stash drop # åˆ é™¤æš‚å­˜åŒº Gitè¿œç¨‹åˆ†æ”¯ç®¡ç†git pull # æŠ“å–è¿œç¨‹ä»“åº“æ‰€æœ‰åˆ†æ”¯æ›´æ–°å¹¶åˆå¹¶åˆ°æœ¬åœ° git pull â€“no-ff # æŠ“å–è¿œç¨‹ä»“åº“æ‰€æœ‰åˆ†æ”¯æ›´æ–°å¹¶åˆå¹¶åˆ°æœ¬åœ°ï¼Œä¸è¦å¿«è¿›åˆå¹¶ git fetch origin # æŠ“å–è¿œç¨‹ä»“åº“æ›´æ–° git merge origin/master # å°†è¿œç¨‹ä¸»åˆ†æ”¯åˆå¹¶åˆ°æœ¬åœ°å½“å‰åˆ†æ”¯ git co â€“track origin/branch # è·Ÿè¸ªæŸä¸ªè¿œç¨‹åˆ†æ”¯åˆ›å»ºç›¸åº”çš„æœ¬åœ°åˆ†æ”¯ git co -b origin/ # åŸºäºè¿œç¨‹åˆ†æ”¯åˆ›å»ºæœ¬åœ°åˆ†æ”¯ï¼ŒåŠŸèƒ½åŒä¸Š git push # pushæ‰€æœ‰åˆ†æ”¯ git push origin master # å°†æœ¬åœ°ä¸»åˆ†æ”¯æ¨åˆ°è¿œç¨‹ä¸»åˆ†æ”¯ git push -u origin master # å°†æœ¬åœ°ä¸»åˆ†æ”¯æ¨åˆ°è¿œç¨‹(å¦‚æ— è¿œç¨‹ä¸»åˆ†æ”¯åˆ™åˆ›å»ºï¼Œç”¨äºåˆå§‹åŒ–è¿œç¨‹ä»“åº“) git push origin # åˆ›å»ºè¿œç¨‹åˆ†æ”¯ï¼Œ originæ˜¯è¿œç¨‹ä»“åº“å git push origin : # åˆ›å»ºè¿œç¨‹åˆ†æ”¯ git push origin : #å…ˆåˆ é™¤æœ¬åœ°åˆ†æ”¯(git br -d )ï¼Œç„¶åå†pushåˆ é™¤è¿œç¨‹åˆ†æ”¯ Gitè¿œç¨‹ä»“åº“ç®¡ç†GitHub git remote -v # æŸ¥çœ‹è¿œç¨‹æœåŠ¡å™¨åœ°å€å’Œä»“åº“åç§° git remote show origin # æŸ¥çœ‹è¿œç¨‹æœåŠ¡å™¨ä»“åº“çŠ¶æ€ git remote add origin git@ github:robbin/robbin_site.git # æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€ git remote set-url origin git@ github.com:robbin/robbin_site.git # è®¾ç½®è¿œç¨‹ä»“åº“åœ°å€(ç”¨äºä¿®æ”¹è¿œç¨‹ä»“åº“åœ°å€) git remote rm # åˆ é™¤è¿œç¨‹ä»“åº“ åˆ›å»ºè¿œç¨‹ä»“åº“ git clone â€“bare robbin_site robbin_site.git # ç”¨å¸¦ç‰ˆæœ¬çš„é¡¹ç›®åˆ›å»ºçº¯ç‰ˆæœ¬ä»“åº“ scp -r my_project.git git@ git.csdn.net:~ # å°†çº¯ä»“åº“ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Š mkdir robbin_site.git &amp;&amp; cd robbin_site.git &amp;&amp; git â€“bare init # åœ¨æœåŠ¡å™¨åˆ›å»ºçº¯ä»“åº“ git remote add origin git@ github.com:robbin/robbin_site.git # è®¾ç½®è¿œç¨‹ä»“åº“åœ°å€ git push -u origin master # å®¢æˆ·ç«¯é¦–æ¬¡æäº¤ git push -u origin develop # é¦–æ¬¡å°†æœ¬åœ°developåˆ†æ”¯æäº¤åˆ°è¿œç¨‹developåˆ†æ”¯ï¼Œå¹¶ä¸”track git remote set-head origin master # è®¾ç½®è¿œç¨‹ä»“åº“çš„HEADæŒ‡å‘masteråˆ†æ”¯ ä¹Ÿå¯ä»¥å‘½ä»¤è®¾ç½®è·Ÿè¸ªè¿œç¨‹åº“å’Œæœ¬åœ°åº“ git branch â€“set-upstream master origin/master git branch â€“set-upstream develop origin/develop","categories":[],"tags":[{"name":"Git","slug":"Git","permalink":"https://summxu.github.io/tags/Git/"}],"author":"BoomXu"},{"title":"é€šè¿‡jQueryæ·»åŠ ç½‘é¡µçš„åŠ¨ç”»æ•ˆæœ","slug":"2017/add-jquery-effect","date":"2017-06-14T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/add-jquery-effect/","link":"","permalink":"https://summxu.github.io/2017/add-jquery-effect/","excerpt":"","text":"çœ‹äº†ä¸‹åŒå­¦çš„Hexoåšå®¢ï¼ŒNextçš„åŠ¨æ€ä¸»é¢˜ç®€ç›´å¸…ç‚¸ï¼Œä¸æœæ°”ï¼Œæˆ‘çš„Jekyllä¹Ÿå¯ä»¥åšåˆ°ã€‚åˆšä¼šç‚¹jQueryæ­£å¥½é¡ºä¾¿ç ”ç©¶ä¸€ä¸‹åŠ¨ç”»æ•ˆæœã€‚éšä¾¿å¼„å¼„ä¹ŸèŠ±è´¹äº†2ä¸ªå°æ—¶ï¼Œä¸è¿‡å­¦åˆ°äº†å¾ˆå¤šã€‚ jQuery æ•ˆæœå‡½æ•°ç”±äºæ–°æ‰‹æ‰€ä»¥åªå¼„äº†jQueryæä¾›çš„é»˜è®¤åŠ¨ç”»ï¼ˆæ„Ÿè§‰å·²ç»å¾ˆå¥½çœ‹äº†ï¼‰ã€‚æŸ¥é˜…ç›¸å…³èµ„æ–™ï¼š æ–¹æ³• æè¿° animate() å¯¹è¢«é€‰å…ƒç´ åº”ç”¨â€œè‡ªå®šä¹‰â€çš„åŠ¨ç”» clearQueue() å¯¹è¢«é€‰å…ƒç´ ç§»é™¤æ‰€æœ‰æ’é˜Ÿçš„å‡½æ•°ï¼ˆä»æœªè¿è¡Œçš„ï¼‰ delay() å¯¹è¢«é€‰å…ƒç´ çš„æ‰€æœ‰æ’é˜Ÿå‡½æ•°ï¼ˆä»æœªè¿è¡Œï¼‰è®¾ç½®å»¶è¿Ÿ dequeue() è¿è¡Œè¢«é€‰å…ƒç´ çš„ä¸‹ä¸€ä¸ªæ’é˜Ÿå‡½æ•° fadeIn() é€æ¸æ”¹å˜è¢«é€‰å…ƒç´ çš„ä¸é€æ˜åº¦ï¼Œä»éšè—åˆ°å¯è§ fadeOut() é€æ¸æ”¹å˜è¢«é€‰å…ƒç´ çš„ä¸é€æ˜åº¦ï¼Œä»å¯è§åˆ°éšè— fadeTo() æŠŠè¢«é€‰å…ƒç´ é€æ¸æ”¹å˜è‡³ç»™å®šçš„ä¸é€æ˜åº¦ hide() éšè—è¢«é€‰çš„å…ƒç´  queue() æ˜¾ç¤ºè¢«é€‰å…ƒç´ çš„æ’é˜Ÿå‡½æ•° show() æ˜¾ç¤ºè¢«é€‰çš„å…ƒç´  slideDown() é€šè¿‡è°ƒæ•´é«˜åº¦æ¥æ»‘åŠ¨æ˜¾ç¤ºè¢«é€‰å…ƒç´  slideToggle() å¯¹è¢«é€‰å…ƒç´ è¿›è¡Œæ»‘åŠ¨éšè—å’Œæ»‘åŠ¨æ˜¾ç¤ºçš„åˆ‡æ¢ slideUp() é€šè¿‡è°ƒæ•´é«˜åº¦æ¥æ»‘åŠ¨éšè—è¢«é€‰å…ƒç´  stop() åœæ­¢åœ¨è¢«é€‰å…ƒç´ ä¸Šè¿è¡ŒåŠ¨ç”» toggle() å¯¹è¢«é€‰å…ƒç´ è¿›è¡Œéšè—å’Œæ˜¾ç¤ºçš„åˆ‡æ¢ è¿™æ˜¯jQueryæä¾›çš„æ•ˆæœå‡½æ•°ï¼Œå‘ç°å¯ä»¥ç”¨åˆ°çš„é»˜è®¤çš„å…¶å®åªæœ‰ä¸¤ä¸ªï¼šfadeIn() ã€ slideToggle() ä»£ç å› ä¸ºfadeIn() ã€ slideToggle() å‡½æ•°éƒ½æ˜¯åœ¨å…ƒç´ ä¸ºéšè—çš„æƒ…å†µä¸‹æ‰èƒ½æ˜¾ç¤ºæ•ˆæœï¼Œæ‰€ä»¥è¦å…ˆåœ¨æ ·å¼é‡ŒæŠŠdivç»™éšè—æ‰ï¼Œä¸ºäº†ä¸å‡ºé”™ï¼Œæˆ‘å…ˆå†™äº†ä¸€ä¸ªå°ä¾‹å­ï¼š å¯ä»¥ç‚¹å‡»æ­¤å¤„é¢„è§ˆä¸‹æ•ˆæœ 123456789101112131415161718192021222324252627282930313233343536373839404142434445&lt;style&gt; .demo&#123; display:none; &#125; .demo1&#123; display:none; &#125; &lt;/style&gt; &lt;script&gt; $(document).ready(function () &#123; $(\".demo1\").slideToggle(1500); $(\"#effect1\").slideToggle(1500); $(\"#effect2\").fadeIn(\"slow\"); $(\"#effect3\").slideDown(1500); &#125;); $(function()&#123; $(\"#ok\").click(function()&#123; $(\"#effect4\").animate(&#123;left: \"500px\"&#125;,3000) .animate(&#123;height:\"200px\"&#125;,1000); &#125;);&#125;) &lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=\"effect1\" class=\"demo\"&gt; &lt;p&gt;æˆ‘æ˜¯é€æ¸ä¸‹æ‹‰çš„æ•ˆæœ&lt;/p&gt; &lt;p&gt;æˆ–è®¸ä¸¤è¡Œæ‰èƒ½æ›´å¥½çš„ä½“ç°&lt;/p&gt; &lt;/div&gt; &lt;div id=\"effect2\" class=\"demo\"&gt; &lt;p&gt;æˆ‘æ˜¯æ·¡å…¥æ·¡å‡ºçš„æ•ˆæœ&lt;/p&gt; &lt;p&gt;æˆ–è®¸ä¸¤è¡Œæ‰èƒ½æ›´å¥½çš„ä½“ç°&lt;/p&gt; &lt;/div&gt; &lt;div id=\"effect3\" class=\"demo\"&gt; &lt;p&gt;æˆ‘æ˜¯å‘ä¸‹æ»‘åŠ¨çš„æ•ˆæœ&lt;/p&gt; &lt;p&gt;æˆ–è®¸ä¸¤è¡Œæ‰èƒ½æ›´å¥½çš„ä½“ç°&lt;/p&gt; &lt;/div&gt; &lt;div id=\"effect4\"&gt; &lt;p&gt;æˆ‘æ˜¯å‘ä¸Šæ»‘åŠ¨çš„æ•ˆæœ&lt;/p&gt; &lt;p&gt;æˆ–è®¸ä¸¤è¡Œæ‰èƒ½æ›´å¥½çš„ä½“ç°&lt;/p&gt; &lt;/div&gt; &lt;div class=\"demo1\"&gt; &lt;p&gt;æˆ‘æ²¡æœ‰id&lt;/p&gt; &lt;/div&gt; &lt;input id=\"ok\" type=\"button\" value=\"ç‚¹æˆ‘è¯•è¯•\"&gt;&lt;/body&gt; ç„¶åå†™åˆ°äº†Jekyll _posté‡Œ: 1234567891011121314151617181920212223242526&lt;style type=&quot;text/css&quot;&gt; .tags&#123; display: none; &#125; .title&#123; display: none; &#125; .effect&#123; display: none; &#125;&lt;/style&gt;&lt;div class=&quot;tags&quot;&gt; &#123;% for tag in page.tags %&#125; &lt;a class=&quot;tag&quot; href=&quot;&#123; &#123; site.baseurl &#125; &#125;/tags/#&#123; &#123; tag &#125; &#125;&quot; title=&quot;&#123; &#123; tag &#125; &#125;&quot;&gt;&#123; &#123; tag &#125; &#125;&lt;/a&gt; &#123;% endfor %&#125;&lt;/div&gt; &lt;h1 class=&quot;title&quot;&gt;&#123; &#123; page.title &#125; &#125;&lt;/h1&gt; &lt;div class=&quot;effect&quot;&gt; &#123;% comment %&#125; &#123;% endcomment %&#125; &#123;% comment %&#125; if page.subtitle &#123;% endcomment %&#125; &lt;h2 class=&quot;subheading&quot;&gt;&#123; &#123; page.subtitle &#125; &#125;&lt;/h2&gt; &#123;% comment %&#125; endif &#123;% endcomment %&#125; &lt;span class=&quot;meta&quot;&gt;Posted by &#123;% if page.author %&#125;&#123; &#123; page.author &#125; &#125;&#123;% else %&#125;&#123; &#123; site.title &#125; &#125;&#123;% endif %&#125; on &#123; &#123; page.date | date: &quot;%B %-d, %Y&quot; &#125; &#125;&lt;/span&gt;&lt;/div&gt; é‡åˆ°çš„é—®é¢˜å…¶å®ä»£ç å¾ˆç®€å•ï¼Œä½†æ˜¯æˆ‘ç¼ºèŠ±äº†è¿‘ä¸€å°æ—¶çš„æ—¶é—´å»å¯»æ‰¾é”™è¯¯ï¼ˆä¸€å¼€å§‹ä»£ç å†™ä¸Šä¸èƒ½æ­£å¸¸æ˜¾ç¤ºï¼‰ã€‚å…ˆæ˜¯æ›´æ¢æœ¬åœ°jQueryç„¶åæœ‰æ¢è¿œç¨‹jQueryå¼•ç”¨ ï¼Œå´ä¸€ç›´æ²¡æœ‰æˆåŠŸã€‚ æœ€åå‘ç°ï¼ŒjQueryè¦æ”¾åˆ°é¡µé¢çš„å¤´éƒ¨ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ ä¸ºä»€ä¹ˆå’Œæˆ‘å­¦çš„ä¸å¤ªä¸€æ ·ï¼Ÿï¼Ÿï¼Ÿä¸æ˜¯å¼•ç”¨æ–‡ä»¶æ”¾åˆ°å“ªéƒ½å¯ä»¥å—ï¼Ÿ nm","categories":[],"tags":[{"name":"jQuery","slug":"jQuery","permalink":"https://summxu.github.io/tags/jQuery/"}],"author":"BoomXu"},{"title":"CSSæ§åˆ¶èƒŒæ™¯å›¾ç‰‡äº®åº¦","slug":"2017/css-image-lightness","date":"2017-06-14T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/css-image-lightness/","link":"","permalink":"https://summxu.github.io/2017/css-image-lightness/","excerpt":"","text":"ä¸ç¾è§‚å¼•å‘çš„æŠ€æœ¯æ€è€ƒå³å®ç°ã€‚ã€‚ å‰è¨€æ‰“å¼€åšå®¢ï¼Œç»†ç»†çš„çœ‹äº†çœ‹è‡ªå·±å†™çš„å°ä¸œè¥¿ï¼Œè™½è¯´ä¸å¥½ä½†å´æ˜¯è‡ªå·±ä¸€ç‚¹ä¸€ç‚¹çš„å°ç»éªŒã€‚ä½†æ˜¯ï¼Œç§æ„Ÿè§‰æœ‰ä»€ä¹ˆæ€ªæ€ªçš„ã€‚ã€‚ 1 ä»”ç»†çœ‹çœ‹ï¼š 2 å§æ§½ã€‚ã€‚å‘ç°æ–‡å­—é¢œè‰²ä¸ºä»€ä¹ˆå’Œå›¾ç‰‡èä¸ºä¸€ä½“äº†ï¼Ÿï¼Ÿï¼Ÿï¼Ÿæˆ‘æ˜¯çäº†å—è¿™ä¹ˆä¹…éƒ½æ²¡çœ‹å‡ºæ¥ï¼ï¼ï¼ï¼å¾—èµ¶ç´§æƒ³æƒ³åŠæ³• æƒ³æ³•ï¼šopacityé¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯ï¼Œè°ƒæš—å›¾ç‰‡é¢œè‰² è®°å¾—å¯ä»¥ä½¿ç”¨ï¼šcss3çš„opacity:xè°ƒæ•´å›¾ç‰‡é€æ˜åº¦ï¼Œä¸Šé¢å¼„ä¸Šå…¨é»‘èƒŒæ™¯ï¼Œå› ä¸ºç”¨çš„jekyllï¼Œæ‰€ä»¥ç›´æ¥æ”¹ä»£ç ã€‚ã€‚ã€‚ æ‰¾åˆ°post.html çœ‹äº†çœ‹å¤´éƒ¨å‘ç°ä»£ç å¦‚ä¸‹ï¼š 123header.intro-header&#123; background-image: url(&apos;&#123;% if page.header-img %&#125;&#123; &#123; page.header-img &#125; &#125;&#123;% else %&#125;&#123; &#123; site.header-img &#125; &#125;&#123;% endif %&#125;&apos;);&#125; å¾ˆç®€å•ï¼Œç›´æ¥å°±ä¸€ä¸ª background-image ç„¶åç›´æ¥åŠ ä¸Šè¦†ç›–ä¸Šä¸€ä¸ªcssè¯•è¯•ã€‚ 1234header.intro-header&#123; background-image: url(&apos;&#123;% if page.header-img %&#125;&#123; &#123; page.header-img &#125; &#125;&#123;% else %&#125;&#123; &#123; site.header-img &#125; &#125;&#123;% endif %&#125;&apos;); opacity: 1;&#125; 3 å‘ç°å¯ä»¥é€æ˜äº†ï¼Œä½†æ˜¯æ•´ä¸ªæ–‡å­—ä¹Ÿé€æ˜äº†ï¼Œè¿™ä¸ç¬¦åˆè¦æ±‚å•Šã€‚ã€‚ã€‚ç™¾åº¦äº†ä¸‹ï¼ŒåŸæ¥ç”¨ opacity æ˜¯ä¸ç¬¦åˆè¦æ±‚çš„ã€‚ å®ç°é€æ˜çš„cssæ–¹æ³•é€šå¸¸æœ‰ä»¥ä¸‹3ç§æ–¹å¼ï¼Œä»¥ä¸‹æ˜¯ä¸é€æ˜åº¦éƒ½ä¸º80%çš„å†™æ³• css3çš„opacity:xï¼Œx çš„å–å€¼ä» 0 åˆ° 1ï¼Œå¦‚opacity: 0.8 css3çš„rgba(red, green, blue, alpha)ï¼Œalphaçš„å–å€¼ä» 0 åˆ° 1ï¼Œå¦‚rgba(255,255,255,0.8) IEä¸“å±æ»¤é•œ filter:Alpha(opacity=x)ï¼Œx çš„å–å€¼ä» 0 åˆ° 100ï¼Œå¦‚filter:Alpha(opacity=80) ä½¿ç”¨è¯´æ˜ï¼šè®¾ç½®opacityå…ƒç´ çš„æ‰€æœ‰åä»£å…ƒç´ ä¼šéšç€ä¸€èµ·å…·æœ‰é€æ˜æ€§ï¼Œä¸€èˆ¬ç”¨äºè°ƒæ•´å›¾ç‰‡æˆ–è€…æ¨¡å—çš„æ•´ä½“ä¸é€æ˜åº¦..é‚£ä¹ˆä½¿ç”¨opacityå®ç°ã€ŠèƒŒæ™¯é€æ˜ï¼Œæ–‡å­—ä¸é€æ˜ã€‹æ˜¯ä¸å¯å–çš„ã€‚ *opacity *ä»£ç ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;title&gt;css3çš„rgba&lt;/title&gt;&lt;style&gt;*&#123; padding: 0; margin: 0;&#125;body&#123; padding: 50px; background: url(img/bg.png) 0 0 repeat;&#125;.demo&#123; padding: 25px; background-color:#000000;/* IE6å’Œéƒ¨åˆ†IE7å†…æ ¸çš„æµè§ˆå™¨(å¦‚QQæµè§ˆå™¨)ä¸‹é¢œè‰²è¢«è¦†ç›– */ background-color:rgba(0,0,0,0.2); /* IE6å’Œéƒ¨åˆ†IE7å†…æ ¸çš„æµè§ˆå™¨(å¦‚QQæµè§ˆå™¨)ä¼šè¯»æ‡‚ï¼Œä½†è§£æä¸ºé€æ˜ */&#125;.demo p&#123; color: #FFFFFF;&#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=&quot;demo&quot;&gt; &lt;p&gt;èƒŒæ™¯é€æ˜ï¼Œæ–‡å­—ä¹Ÿé€æ˜&lt;/p&gt;&lt;/div&gt;&lt;/html&gt; rgba å¾ˆå¥‡è‘©çš„æ˜¯ï¼ŒIE6å’Œéƒ¨åˆ†IE7å†…æ ¸çš„æµè§ˆå™¨(å¦‚QQæµè§ˆå™¨)ä¼šè¯»æ‡‚rgbaï¼Œè§£æåé¢œè‰²ä¸ºé€æ˜ï¼Œå…¶å®åº”è¯¥æ˜¯null. ç®¡ä¸äº†è¿™ä¹ˆå¤šäº†ï¼ŒIEè¿™ç§è¢«æ—¶ä»£æŠ›å¼ƒçš„ä¸œè¥¿ï¼Œæˆ‘æ‰ä¸è€ƒè™‘ã€‚. çœ‹äº†ä¸‹ç¤ºä¾‹ä»£ç ï¼š 12345678910111213141516171819202122232425262728293031&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;title&gt;css3çš„rgba&lt;/title&gt;&lt;style&gt;*&#123; padding: 0; margin: 0;&#125;body&#123; padding: 50px; background: url(img/bg.png) 0 0 repeat;&#125;.demo&#123; padding: 25px; background-color:#000000;/* IE6å’Œéƒ¨åˆ†IE7å†…æ ¸çš„æµè§ˆå™¨(å¦‚QQæµè§ˆå™¨)ä¸‹é¢œè‰²è¢«è¦†ç›– */ background-color:rgba(0,0,0,0.2); /* IE6å’Œéƒ¨åˆ†IE7å†…æ ¸çš„æµè§ˆå™¨(å¦‚QQæµè§ˆå™¨)ä¼šè¯»æ‡‚ï¼Œä½†è§£æä¸ºé€æ˜ */&#125;.demo p&#123; color: #FFFFFF;&#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=&quot;demo&quot;&gt; &lt;p&gt;èƒŒæ™¯é€æ˜ï¼Œæ–‡å­—ä¹Ÿé€æ˜&lt;/p&gt;&lt;/div&gt;&lt;/html&gt; åŠ åˆ°æˆ‘çš„Jekyll post é‡Œçœ‹çœ‹æ•ˆæœï¼š 4 12345678910&lt;style type=&quot;text/css&quot;&gt; .mengban&#123; background-color:#000000; background-color:rgba(0,0,0,0.2); &#125; header.intro-header&#123; background-image: url(&apos;&#123;% if page.header-img %&#125;&#123; &#123; page.header-img &#125; &#125;&#123;% else %&#125;&#123; &#123; site.header-img &#125; &#125;&#123;% endif %&#125;&apos;); opacity: 1; &#125;&lt;/style&gt; å¯ä»¥äº†ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ç‚¹ç™½ ï¼Œ è°ƒæ•´ä¸‹å‚æ•°ã€‚ã€‚å®Œç¾è§£å†³ã€‚ã€‚ 5 ä¸è¿‡æ—¢ç„¶å†™åˆ°è¿™äº†ï¼Œåœ¨è¯´ä¸‹IEçš„: IEä¸“å±æ»¤é•œ filter:Alphaä½¿ç”¨è¯´æ˜ï¼šIEæµè§ˆå™¨ä¸“å±ï¼Œé—®é¢˜å¤šå¤šï¼Œæœ¬æ–‡ä»¥è®¾ç½®èƒŒæ™¯é€æ˜ä¸ºä¾‹å­ï¼Œå¦‚ä¸‹ï¼š ä»…æ”¯æŒIE6ã€7ã€8ã€9ï¼Œåœ¨IE10ç‰ˆæœ¬è¢«åºŸé™¤ åœ¨IE6ã€7ä¸­ï¼Œéœ€è¦æ¿€æ´»IEçš„haslayoutå±æ€§(å¦‚ï¼šzoom:1æˆ–è€…overflow:hidden)ï¼Œè®©å®ƒè¯»æ‡‚filter:Alpha åœ¨IE6ã€7ã€8ä¸­ï¼Œè®¾ç½®äº†filter:Alphaçš„å…ƒç´ ï¼Œçˆ¶å…ƒç´ è®¾ç½®position:static(é»˜è®¤å±æ€§)ï¼Œå…¶å­å…ƒç´ ä¸ºç›¸å¯¹å®šä½ï¼Œå¯è®©å­å…ƒç´ ä¸é€æ˜ ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;title&gt;opacity&lt;/title&gt;&lt;style&gt;*&#123; padding: 0; margin: 0;&#125;body&#123; padding: 50px; background: url(img/bg.png) 0 0 repeat;&#125;.demo&#123; padding: 25px; background: #000000; filter:Alpha(opacity=50);/* åªæ”¯æŒIE6ã€7ã€8ã€9 */ position:static; /* IE6ã€7ã€8åªèƒ½è®¾ç½®position:static(é»˜è®¤å±æ€§) ï¼Œå¦åˆ™ä¼šå¯¼è‡´å­å…ƒç´ ç»§æ‰¿Alphaå€¼ */ *zoom:1; /* æ¿€æ´»IE6ã€7çš„haslayoutå±æ€§ï¼Œè®©å®ƒè¯»æ‡‚Alpha */&#125;.demo p&#123; color: #FFFFFF; position: relative;/* è®¾ç½®å­å…ƒç´ ä¸ºç›¸å¯¹å®šä½ï¼Œå¯è®©å­å…ƒç´ ä¸ç»§æ‰¿Alphaå€¼ï¼Œä¿è¯å­—ä½“é¢œè‰²ä¸é€æ˜ */&#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=&quot;demo&quot;&gt; &lt;p&gt;èƒŒæ™¯é€æ˜ï¼Œæ–‡å­—ä¸é€æ˜&lt;/p&gt;&lt;/div&gt; æœ¬æ–‡éƒ¨åˆ†æ–‡ç« å‡ºå¤„ï¼šhttp://peunzhang.cnblogs.com/","categories":[],"tags":[{"name":"CSS","slug":"CSS","permalink":"https://summxu.github.io/tags/CSS/"},{"name":"HTML","slug":"HTML","permalink":"https://summxu.github.io/tags/HTML/"}],"author":"BoomXu"},{"title":"å¦‚ä½•åœ¨Windowsä¸‹å®‰è£…Jekyll","slug":"2017/windows-install-jekyll","date":"2017-06-13T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/windows-install-jekyll/","link":"","permalink":"https://summxu.github.io/2017/windows-install-jekyll/","excerpt":"","text":"windowsç¯å¢ƒä¸‹å®‰è£…1. å®‰è£… Rubyå®˜ç½‘ï¼šhttp://rubyinstaller.org/downloads/ æµ‹è¯•ï¼š Rubyæ˜¯å¦å®‰è£…æˆåŠŸï¼Œæ‰§è¡Œå‘½ä»¤ruby -v æ³¨æ„ï¼šå‹¾é€‰ â€œAdd Ruby executables to your PATHâ€ï¼Œå®‰è£…è·¯å¾„ä¸èƒ½åŒ…å«ç©ºæ ¼ 2. å®‰è£… DevKitå®˜ç½‘ï¼šhttp://rubyinstaller.org/downloads/ æ­¥éª¤ï¼š åœ¨å‘½ä»¤çª—å£ä¸‹åˆ‡æ¢åˆ°å®‰è£…ç›®å½•ï¼Œå¹¶æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ 12ruby dk.rb initruby dk.rb install æµ‹è¯•ï¼š gemæ˜¯å¦å®‰è£…æˆåŠŸï¼Œæ‰§è¡Œå‘½ä»¤gem -v æ³¨æ„ï¼šRubyä¸DevKitç‰ˆæœ¬è¦å¯¹åº” 3. å®‰è£… Jekyllæ­¥éª¤ï¼š åœ¨å‘½ä»¤çª—å£ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ 123456789101112//æ›´æ¢gemæºgem sources --remove https://rubygems.org/gem sources -a https://ruby.taobao.org///æŸ¥çœ‹gemæºgem sources -l//æ›´æ–°gemgem update --system//å®‰è£…jekyllgem install jekyll 4. å®‰è£… Python ç›¸å…³ç¯å¢ƒa. å®‰è£… Pythonå®˜ç½‘ï¼šhttp://www.python.org/download/ æµ‹è¯•ï¼š pythonæ˜¯å¦å®‰è£…æˆåŠŸï¼Œæ‰§è¡Œå‘½ä»¤python -V æ³¨æ„ï¼šä¸‹è½½Python 2å®‰è£…ï¼Œå¦‚æœå®‰è£…Python 3 å¯èƒ½ä¸ä¼šæ­£å¸¸å·¥ä½œã€‚å®‰è£…åæ·»åŠ ç¯å¢ƒå˜é‡ã€‚ b. å®‰è£… Easy Install æç¤ºï¼š*éœ€è¦ä¸‹è½½ez_setup.py) æ­¥éª¤ï¼š æ‰§è¡Œcmdå‘½ä»¤ python â€œD:\\software\\Jekyll\\ez_setup.pyâ€(è¿™é‡Œè¦æ”¹ä¸ºä½ è‡ªå·±çš„ç›®å½•ï¼‰ æµ‹è¯•ï¼š Easy Install æ˜¯å¦å®‰è£…æˆåŠŸï¼Œæ‰§è¡Œå‘½ä»¤easy_install â€“version æ³¨æ„ï¼šæ·»åŠ  Python Scripts è·¯å¾„åˆ°ç¯å¢ƒå˜é‡ c. å®‰è£… Pygmentsæ­¥éª¤ï¼š æ‰§è¡Œå‘½ä»¤easy_install Pygments 5. Jekyllå¯åŠ¨ä¸è°ƒè¯•æ­¥éª¤ï¼š æ‰“å¼€å‘½ä»¤è¡Œçª—å£ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ 123456//åˆ›å»ºjekyllå·¥ç¨‹ç›®å½•jekyll new myblog//åˆ‡æ¢åˆ°å·¥ç¨‹ç›®å½•ï¼Œå¹¶å¼€å¯æœåŠ¡cd myblogjekyll serve æµ‹è¯•ï¼š Jekyllæ˜¯å¦æ­£å¸¸å¼€å¯ï¼Œè®¿é—®localhost:4000 æœ€åï¼šé™„ä»¶é™„ä»¶ä¸ªè‡ªåŠ¨å®‰è£…è„šæœ¬ï¼ŒåŒå‡»install.batå³å¯ï¼šç‚¹æ­¤ä¸‹è½½","categories":[],"tags":[{"name":"æŠ€æœ¯åˆ†äº«","slug":"æŠ€æœ¯åˆ†äº«","permalink":"https://summxu.github.io/tags/æŠ€æœ¯åˆ†äº«/"}],"author":"BoomXu"},{"title":"åˆå­¦BootStrap --Form Demo","slug":"2017/bootsrp-form-demo","date":"2017-06-11T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/bootsrp-form-demo/","link":"","permalink":"https://summxu.github.io/2017/bootsrp-form-demo/","excerpt":"","text":"æ ¹æ®MOOCä¸Šçš„æ•™ç¨‹åšäº†ä¸€ä¸ªå°å°çš„demoã€‚ä¹Ÿä»ç°åœ¨å¼€å§‹åˆ›å»ºä¸€ä¸ªå¯ä»¥ç›´æ¥é¢„è§ˆçš„æ•ˆæœã€‚ ç‚¹æ­¤é¢„è§ˆ123456789101112131415161718192021222324252627282930313233343536373839404142&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\"&gt; &lt;title&gt;è¡¨å•å’Œviewportä¾‹å­&lt;/title&gt; &lt;link rel=\"stylesheet\" href=\"bootstrap.min.css\"&gt; &lt;script src=\"jquery.min.js\"&gt;&lt;/script&gt; &lt;script src=\"bootstrap.min.js\"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;p class=\"text-center\"&gt;è¯·æ³¨å†Œæ‚¨çš„è´¦å·ï¼š&lt;/p&gt; &lt;form&gt; &lt;div class=\"form-group has-error\"&gt; &lt;input type=\"text\" class=\"form-control\" placeholder=\"è¯·è¾“å…¥æ‚¨çš„æ‰‹æœºå·ç \"&gt; &lt;/div&gt; &lt;div class=\"form-group has-success\"&gt; &lt;label for=\"\"&gt;è¯·é€‰æ‹©æ‚¨çš„åŸå¸‚ï¼š&lt;/label&gt; &lt;select class=\"form-control\"&gt; &lt;option value=\"\"&gt;åŒ—äº¬&lt;/option&gt; &lt;option value=\"\"&gt;ä¸Šæµ·&lt;/option&gt; &lt;option value=\"\"&gt;æµå—&lt;/option&gt; &lt;option value=\"\"&gt;æˆéƒ½&lt;/option&gt; &lt;option value=\"\"&gt;é‡åº†&lt;/option&gt; &lt;/select&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;input type=\"button\" class=\"\" value=\"ç¡®å®šæ³¨å†Œ\"&gt; &lt;input type=\"button\" class=\"btn btn-block\" value=\"ç¡®å®šæ³¨å†Œ\"&gt; &lt;input type=\"button\" class=\"btn-success active\" value=\"ç¡®å®šæ³¨å†Œ\"&gt; &lt;input type=\"button\" class=\"btn-primary\" disabled=\"disabled\" value=\"ç¡®å®šæ³¨å†Œ\"&gt; &lt;input type=\"button\" class=\"btn-info\" value=\"ç¡®å®šæ³¨å†Œ\"&gt; &lt;input type=\"button\" class=\"btn-warning\" value=\"ç¡®å®šæ³¨å†Œ\"&gt; &lt;input type=\"button\" class=\"btn-danger btn-sm\" value=\"ç¡®å®šæ³¨å†Œ\"&gt; &lt;input type=\"button\" class=\"btn-default btn-lg\" value=\"ç¡®å®šæ³¨å†Œ\"&gt; &lt;input type=\"button\" class=\"btn-link\" value=\"ç¡®å®šæ³¨å†Œ\"&gt; &lt;/div&gt; &lt;a href=\"\" class=\"btn btn-default btn-lg\"&gt;è¿™æ˜¯ç”¨aæ ‡ç­¾çš„æŒ‰é’®æ•ˆæœ&lt;/a&gt; &lt;/form&gt;&lt;/body&gt;&lt;/html&gt;","categories":[],"tags":[{"name":"jQuery","slug":"jQuery","permalink":"https://summxu.github.io/tags/jQuery/"},{"name":"BootStrap","slug":"BootStrap","permalink":"https://summxu.github.io/tags/BootStrap/"}],"author":"BoomXu"},{"title":"é€šè¿‡JSä»£ç æäº¤è¿æ¥åˆ°ç™¾åº¦","slug":"2017/atao-up-link-baidu","date":"2017-06-10T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/atao-up-link-baidu/","link":"","permalink":"https://summxu.github.io/2017/atao-up-link-baidu/","excerpt":"","text":"ä¸ºäº†åŠ å¿«ç™¾åº¦å¯¹åšå®¢æ–‡ç« çš„æ”¶å½•ï¼Œç«™é•¿ä»¬æœ€å¥½æäº¤ç½‘ç«™æ–‡ç« çš„è¿æ¥åˆ°ç™¾åº¦ï¼Œç™¾åº¦æä¾›äº†å››ç§æ–¹å¼ï¼š ä¸»åŠ¨æ¨é€(å®æ—¶)ç™¾åº¦å®˜æ–¹è¯´è¿™æ˜¯æœ€å¥½çš„æ¨é€æ–¹å¼ï¼Œä½†æ˜¯è¿™ç§é™æ€åšå®¢ä¸æ”¯æŒï¼ŒåƒPHPçš„åšå®¢wordprasså¯ä»¥åªç”¨è¿™ç§æ–¹å¼ï¼Œç™¾åº¦ä¹Ÿç»™å‡ºäº†å‡ ä¸ªæäº¤ä¾‹å­ï¼š initiative sitemapä»¥ç«™ç‚¹åœ°å›¾çš„å½¢å¼æ¥æäº¤ç½‘ç«™ï¼Œç«™ç‚¹åœ°å›¾ä¸­å¯ä»¥å¡«å…¥ä½ ç½‘ç«™æ‰€æœ‰çš„è¿æ¥ï¼Œæˆ‘è®¤ä¸ºè¿™é€‚ç”¨ä¸ä¸€äº›æ¯”è¾ƒå¤§çš„ç½‘ç«™ä¸”æ˜¯ç¬¬ä¸€æ¬¡æäº¤è¿æ¥ã€‚ sitmao æ‰‹åŠ¨æäº¤æŠŠè¿æ¥é€æ¡å¡«å†™åˆ°ç½‘ç«™ä¸­æäº¤ï¼Œå¦‚æœè¿æ¥è¿‡å¤šçš„æƒ…å†µä¸‹æŒºéº»çƒ¦çš„ã€‚ manual è‡ªåŠ¨æ¨é€è‡ªåŠ¨æ¨é€æ˜¯ç™¾åº¦ç«™é•¿å¹³å°ä¸ºæé«˜ç«™ç‚¹æ–°å¢ç½‘é¡µå‘ç°é€Ÿåº¦æ¨å‡ºçš„å·¥å…·ï¼Œå®‰è£…è‡ªåŠ¨æ¨é€JSä»£ç çš„ç½‘é¡µï¼Œåœ¨é¡µé¢è¢«è®¿é—®æ—¶ï¼Œé¡µé¢URLå°†ç«‹å³è¢«æ¨é€ç»™ç™¾åº¦ã€‚ aoto å…¶ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516&lt;!-- ç™¾åº¦å®æ—¶ç½‘é¡µæ¨é€ --&gt; &lt;script&gt;(function()&#123; var bp = document.createElement('script'); var curProtocol = window.location.protocol.split(':')[0]; if (curProtocol === 'https')&#123; bp.src = 'https://zz.bdstatic.com/linksubmit/push.js'; &#125; else&#123; bp.src = 'http://push.zhanzhang.baidu.com/push.js'; &#125; var s = document.getElementsByTagName(\"script\")[0]; s.parentNode.insertBefore(bp, s);&#125;)();&lt;/script&gt;&lt;!-- ç™¾åº¦å®æ—¶ç½‘é¡µæ¨é€ END--&gt; æœ¬ç«™æ˜¯é‡‡ç”¨è‡ªåŠ¨æäº¤çš„JavaScriptä»£ç æ¥æäº¤ç½‘ç«™è¿æ¥ã€‚","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://summxu.github.io/tags/JavaScript/"}],"author":"BoomXu"},{"title":"HTTPSè‡ªåŠ¨è·³è½¬JSä»£ç ","slug":"2017/coding-301-baidu-spider","date":"2017-06-10T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/coding-301-baidu-spider/","link":"","permalink":"https://summxu.github.io/2017/coding-301-baidu-spider/","excerpt":"","text":"å‰è¨€ å› ä¸ºæŸç§åŸå› ï¼Œæœ¬ç«™çš„åšå®¢éƒ¨ç½²åœ¨äº† Coding Pages ã€‚å…¶å¾ˆå¤§åŸå› ä¸»è¦æ˜¯ä¸ºäº†å…¼é¡¾ç™¾åº¦çš„æ”¶å½•é—®é¢˜ï¼ˆGitHubåœæ­¢äº†ç™¾åº¦æ”¶å½•ï¼‰ï¼Œä½†æ˜¯å´é‡åˆ°äº†é‡é‡å›°éš¾ã€‚ Coding pageså¼€å¯äº†https https enble å¦‚æœå¯ç”¨äº†å¼ºåˆ¶HTTPSè®¿é—®ï¼Œç™¾åº¦æŠ“å–å°±ä¼š å‡ºç°ä¸€ä¸‹é”™è¯¯ï¼š error ä¸Šé¢æç¤ºå¼‚å¸¸ä¿¡æ¯ï¼šè¿æ¥é‡å®šå‘æ¬¡æ•°è¶…è¿‡5æ¬¡çš„ä¸Šé™ã€‚è¿™é‡Œå°±æœ‰ä¸¤ä¸ªç–‘é—®ï¼š æˆ‘æ˜¯hrtpsçš„ç«™ç‚¹ï¼ŒæŠ“å–çš„æ—¶å€™ç¡®å®httpï¼Ÿ æˆ‘ç¡®å®åšäº†å¼ºè¡Œ301åˆ°httpsï¼ˆåˆšæ‰codingä¸Šé‚£ä¸ªé€‰é¡¹ï¼‰ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¯´é‡å®šå‘è¶…è¿‡5æ¬¡ï¼Ÿ æˆ‘æ„Ÿè§‰è¿™æ¬¡æŠ“å–çš„ç»“æœå¯ä»¥é‡ä¸‰ä¸ªæ–¹é¢åˆ†æï¼š æˆ‘æ˜¯hrtpsçš„ç«™ç‚¹ï¼ŒæŠ“å–çš„æ—¶å€™ç¡®å®httpï¼Ÿ é¦–å…ˆè¿™ä¸ªåŸå› ï¼Œæš‚ä¸”è®¤ä¸ºç™¾åº¦æŠ“å–åªä¼šæŠ“HTTPçš„é¡µé¢å¹¶ä¸ä¼šæŠ“HTTPSï¼Œè¿™ä¸ªåŸå› ç›´æ¥å¯¼è‡´äº†æŠ“å–httpå‡ºç°æœ‰è·³è½¬çš„æƒ…å†µã€‚(ä½†æ˜¯æƒ³äº†æƒ³å¯èƒ½åˆä¸æ˜¯è¿™æ ·ï¼Œç™¾åº¦æœç´¢å¼•æ“æ˜¯ä¸å¯èƒ½è¿ä¸€ä¸ªHTTPSéƒ½ä¸æŠ“çš„ã€‚ä¸è¿‡ä»æŠ“å–ç»“æœä¸Šæ¥çœ‹ï¼Œå®ƒç¡®å®åªæ˜¯æŠ“å–çš„http) ä¸ºä»€ä¹ˆè¯´é‡å®šå‘è¶…è¿‡5æ¬¡ï¼Ÿ æœ‰å¯èƒ½æ˜¯å› ä¸ºCoding.Codingçš„å¼ºåˆ¶è·³è½¬åˆ°HTTPSæ˜¯ä¸æ˜¯å°±è·³è½¬äº†ä¸€æ¬¡ï¼Œè¿˜ä¸­é—´åšäº†å…¶ä»–çš„é¡µé¢ï¼Ÿ ç™¾åº¦æŠ“å–é—®é¢˜ã€‚ æ‰€ä»¥è¯´è¿™ä¸ªé—®é¢˜è‡³ä»Šéƒ½å¾ˆå¥‡æ€ªï¼Œé™¤äº†ç™¾åº¦ï¼Œå…¶ä»–æ‰€æœ‰çš„æœç´¢å¼•æ“éƒ½å¯ä»¥æˆåŠŸå»æŠ“å–ã€‚ ç´¢æ€§å…³æ‰CodingPagesçš„301åŠŸèƒ½æ¥ç”¨JavaScriptä»£ç è¯•ä¸‹ã€‚ ä»£ç å®ç°æ£€æµ‹æ¥è‡ªç™¾åº¦èœ˜è››å¹¶è·³è½¬12345678910111213&lt;!-- åˆ¤æ–­ç™¾åº¦çˆ¬è™« --&gt;&lt;script&gt; $(function()&#123; var s=document.referrer; //è·å–æ¥æºåœ°å€ var targetProtocol = \"https:\"; if(s.indexOf(\"baidu\")&gt;0)&#123; if (window.location.protocol != targetProtocol)&#123; window.location.href = targetProtocol + window.location.href.substring(window.location.protocol.length); //è·³è½¬åˆ°HTTPs &#125; &#125; &#125;);&lt;/script&gt;&lt;!-- åˆ¤æ–­ç™¾åº¦çˆ¬è™«END --&gt; è¿™æ®µä»£ç å…¶å®æ˜¯æ£€æµ‹ç™¾åº¦æŠ“å–è€Œä¸æ˜¯å…¶ä»–å¼•æ“æˆ–è€…ç”¨æˆ·æ­£å¸¸è®¿é—®æ¥åšçš„è·³è½¬ï¼Œå…¶ä¸­ï¼š document.referrer //è·å–æ¥æºåœ°å€window.location.href //åªèº«è·³è½¬ï¼Œå¯ä¼ é€’æœç´¢å¼•æ“æƒé‡å¹¶ä¸ä¼šå¼•èµ·å„ç§æµè§ˆå™¨å±è”½indexOf() // æ–¹æ³•å¯è¿”å›æŸä¸ªæŒ‡å®šçš„å­—ç¬¦ä¸²å€¼åœ¨å­—ç¬¦ä¸²ä¸­é¦–æ¬¡å‡ºç°çš„ä½ç½®ã€‚ ç›´æ¥HTTPåˆ°httpsè·³è½¬123456&lt;script&gt; var targetProtocol = \"https:\"; if (window.location.protocol != targetProtocol)&#123; window.location.href = targetProtocol + window.location.href.substring(window.location.protocol.length); //è·³è½¬åˆ°HTTPs &#125; &lt;/script&gt; window.location.protocol //æ£€æµ‹å½“å‰è®¿é—®æ˜¯ä¸æ˜¯HTTP ç»“æœ rithg ç™¾åº¦èƒ½æ­£å¸¸æŠ“å–äº†ï¼Œçœ‹æ ·å­æ˜¯httpçš„é¡µé¢ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼ŒçœŸçš„æ˜¯å¥½ä¹±ï¼Œè€Œä¸”JSè·³è½¬çœŸçš„æ˜¯ä¸å…¥ç›´æ¥301.å”‰ï¼Œä¸ºäº†ç™¾åº¦çš„ç´¢å¼•ã€‚ æ›´æ–°ä¸‹ï¼Œå·²ç»æœ‰é¡µé¢æŠ“å–åˆ°äº†ã€‚ end å…ˆè¿™ä¹ˆæ»´æŠŠã€‚","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://summxu.github.io/tags/JavaScript/"}],"author":"BoomXu"},{"title":"å·§ç”¨VScodeâ€œç”¨æˆ·ä»£ç ç‰‡æ®µâ€æ¥æé«˜æ•ˆç‡","slug":"2017/vscode-snippet","date":"2017-06-09T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/vscode-snippet/","link":"","permalink":"https://summxu.github.io/2017/vscode-snippet/","excerpt":"","text":"å‰è¨€åˆšå­¦å‰ç«¯ï¼Œç”¨VS codeå†™ä»£ç å¾ˆçˆ½ï¼Œè€Œä¸”è¿˜æ”¯æŒgitã€markdownå¯ä»¥ç›´æ¥ä¸Šä¼ åˆšå†™å®Œçš„åšå®¢ã€‚è€Œç”¨æ¥å†™HTMLã€JavaScriptä¹Ÿæ˜¯ç›¸å½“æ–¹ä¾¿ã€‚æœ€è¿‘åœ¨å­¦ä¹ bootstrapï¼Œæ€»æ„Ÿè§‰æ¯æ¬¡å¼•å…¥jsæˆ–è€…æ ·å¼æ–‡ä»¶éå¸¸éº»çƒ¦ï¼Œä½†å‘ç°VS codeæœ‰ä»£ç ç‰‡æ®µåŠŸèƒ½ï¼Œåœ¨æ­¤è®°å½•ä¸‹ã€‚ ä½¿ç”¨æ‰¾åˆ°å…¥å£è¿™é‡Œæä¾›äº†ä¸¤ç§æ–¹æ³•ï¼š æŒ‰ã€ŒAltã€é”®åˆ‡æ¢èœå•æ ï¼Œé€šè¿‡æ–‡ä»¶ &gt; é¦–é€‰é¡¹ &gt; ç”¨æˆ·ä»£ç ç‰‡æ®µï¼Œé€‰æ‹©è¿›å…¥ç›®çš„è¯­è¨€çš„ä»£ç æ®µè®¾ç½®æ–‡ä»¶ï¼› é€šè¿‡å¿«æ·é”®ã€ŒCtrl + Shift + Pã€æ‰“å¼€å‘½ä»¤çª—å£ï¼ˆall command windowï¼‰ï¼Œè¾“å…¥ã€Œsnippetã€ï¼Œé€šè¿‡å€™é€‰æ ä¸­çš„é€‰é¡¹è¿›å…¥ç›®çš„è¯­è¨€çš„ä»£ç æ®µè®¾ç½®æ–‡ä»¶ã€‚ VSCode ä¸­ snippet çš„æ–‡æ³•12345678910111213// Place your snippets for C here. Each snippet is defined under a snippet name and has a prefix, body and // description. The prefix is what is used to trigger the snippet and the body will be expanded and inserted. Possible variables are: // $1, $2 for tab stops, $0 for the final cursor position, and $&#123;1:label&#125;, $&#123;2:another&#125; for placeholders. Placeholders with the // same ids are connected. // Example: &quot;Print to console&quot;: &#123; &quot;prefix&quot;: &quot;log&quot;,, &quot;body&quot;: [ &quot;console.log(&apos;$1&apos;);&quot;, &quot;$2&quot; ], &quot;description&quot;: &quot;Log output to console&quot;&#125; snippet å„å‚æ•°ä»‹ç»snippet ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š prefixï¼šå‰ç¼€ï¼Œå®šä¹‰äº† snippets ä» IntelliSense ä¸­å‘¼å‡ºçš„å…³é”®å­—; bodyï¼š ä¸»ä½“ï¼Œå³æ¨¡æ¿çš„ä¸»ä½“å†…å®¹ï¼Œå…¶ä¸­æ¯ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºä¸€è¡Œ; descriptionï¼šè¯´æ˜ï¼Œä¼šåœ¨ IntelliSense å€™é€‰æ ä¸­å‡ºç°ã€‚æœªå®šä¹‰çš„æƒ…å†µä¸‹ç›´æ¥æ˜¾ç¤ºå¯¹è±¡åï¼Œä¸Šä¾‹ä¸­å°†ä¼šæ˜¾ç¤º Print to consoleã€‚ å…¶ä¸­ body éƒ¨åˆ†å¯ä»¥ä½¿ç”¨ç‰¹æ®Šç»“æ„æ¥æ§åˆ¶å…‰æ ‡å’Œè¦æ’å…¥çš„æ–‡æœ¬ã€‚ æ”¯æŒçš„åŠŸèƒ½åŠå…¶æ–‡æ³•å¦‚ä¸‹ï¼š Tabstopsï¼šåˆ¶è¡¨ç¬¦ç”¨ã€ŒTabstopsã€å¯ä»¥è®©ç¼–è¾‘å™¨çš„æŒ‡é’ˆåœ¨ snippet å†…è·³è½¬ã€‚ä½¿ç”¨ $1ï¼Œ$2 etc. æŒ‡å®šå…‰æ ‡ä½ç½®ã€‚è¿™äº›æ•°å­—æŒ‡å®šäº†Tabstopså°†è¢«è®¿é—®çš„é¡ºåºï¼Œç‰¹åˆ«åœ°ï¼Œ$0è¡¨ç¤ºæœ€ç»ˆå…‰æ ‡ä½ç½®ã€‚ç›¸åŒåºå·çš„ã€ŒTabstopsã€è¢«é“¾æ¥åœ¨ä¸€èµ·ï¼Œå°†ä¼šåŒæ­¥æ›´æ–°ï¼Œæ¯”å¦‚ä¸‹åˆ—ç”¨äºç”Ÿæˆå¤´æ–‡ä»¶å°è£…çš„ snippet è¢«æ›¿æ¢åˆ°ç¼–è¾‘å™¨ä¸Šæ—¶ï¼Œå…‰æ ‡å°±å°†åŒæ—¶å‡ºç°åœ¨æ‰€æœ‰$1ä½ç½®ã€‚ 123&quot;#ifndef $1&quot;&quot;#define $1&quot;&quot;#end // $1&quot; Placeholdersï¼šå ä½ç¬¦ã€Œplaceholderã€æ˜¯å¸¦æœ‰é»˜è®¤å€¼çš„ã€ŒTabstopsã€ï¼Œå¦‚ ${1ï¼šfoo}ã€‚ã€Œplaceholderã€æ–‡æœ¬å°†è¢«æ’å…¥ã€ŒTabstopsã€ä½ç½®ï¼Œå¹¶åœ¨è·³è½¬æ—¶è¢«å…¨é€‰ï¼Œä»¥æ–¹ä¾¿ä¿®æ”¹ã€‚å ä½ç¬¦è¿˜å¯ä»¥åµŒå¥—ï¼Œä¾‹å¦‚ : struct ${1:name_t} {\\n\\t$2\\n}; Variablesï¼šå˜é‡ä½¿ç”¨$nameæˆ–${name:default}å¯ä»¥æ’å…¥å˜é‡çš„å€¼ã€‚ å½“æœªè®¾ç½®å˜é‡æ—¶ï¼Œå°†æ’å…¥å…¶ç¼ºçœå€¼æˆ–ç©ºå­—ç¬¦ä¸²ã€‚ å½“varibaleæœªçŸ¥ï¼ˆå³ï¼Œå…¶åç§°æœªå®šä¹‰ï¼‰æ—¶ï¼Œå°†æ’å…¥å˜é‡çš„åç§°ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºã€Œplaceholderã€ã€‚ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ã€ŒVariableã€ï¼š TM_SELECTED_TEXTï¼šå½“å‰é€‰å®šçš„æ–‡æœ¬æˆ–ç©ºå­—ç¬¦ä¸² TM_CURRENT_LINEï¼šå½“å‰è¡Œçš„å†…å®¹ TM_CURRENT_WORDï¼šå…‰æ ‡ä¸‹çš„å•è¯çš„å†…å®¹æˆ–ç©ºå­—ç¬¦ä¸² TM_LINE_INDEXï¼šåŸºäºé›¶ç´¢å¼•çš„è¡Œå· TM_LINE_NUMBERï¼šåŸºäºä¸€ç´¢å¼•çš„è¡Œå· TM_FILENAMEï¼šå½“å‰æ–‡æ¡£çš„æ–‡ä»¶å TM_DIRECTORYï¼šå½“å‰æ–‡æ¡£çš„ç›®å½• TM_FILEPATHï¼šå½“å‰æ–‡æ¡£çš„å®Œæ•´æ–‡ä»¶è·¯å¾„ å¼•å…¥æ–‡ä»¶çš„å†™å…¥çŸ¥é“äº†å¦‚ä¸Šæ”¯æŒï¼Œæˆ‘å°±å¼€å§‹ç€æ‰‹å†™bootstrapçš„å¼•å…¥æ–‡ä»¶äº†ï¼š 123456789\"Print to console\": &#123; \"prefix\": \"bootstrap\", \"body\": [ \"&lt;link rel=\\\"stylesheet\\\" href=\\\"http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css\\\"&gt;\", \"&lt;script src=\\\"http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js\\\"&gt;&lt;/script&gt;\", \"&lt;script src=\\\"http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js\\\"&gt;&lt;/script&gt;\" ], \"description\": \"This Jquery &amp; BootStrap quate\" &#125; å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šæ–‡ä»¶æ˜¯ä»¥jsonçš„ä¹¦å†™æ ¼å¼æ¥çš„ï¼Œè€Œå¼•å·åœ¨å…¶ä¸­è¦ç”¨è½¬ä¹‰å­—ç¬¦ï¼Œç›´æ¥è¾“å…¥å¼•å·çš„è¯ï¼Œæ˜¯ä¼šäº§ç”Ÿé”™è¯¯çš„ã€‚ jsonå­—ç¬¦è½¬ä¹‰å®˜ç½‘ä¹Ÿç»™å‡ºäº† snippet çš„ EBNF èŒƒå¼çš„æ­£åˆ™æ–‡æ³•ï¼Œæ³¨æ„ï¼Œä½¿ç”¨\\ï¼ˆåæ–œæ ï¼‰è½¬ä¹‰$, ,, }å’Œ\\ã€‚ 1234567any ::= tabstop | placeholder | variable | text tabstop ::= &apos;$&apos; int | &apos;$&#123;&apos; int &apos;&#125;&apos; placeholder ::= &apos;$&#123;&apos; int &apos;:&apos; any &apos;&#125;&apos; variable ::= &apos;$&apos; var | &apos;$&#123;&apos; var &#125;&apos; | &apos;$&#123;&apos; var &apos;:&apos; any &apos;&#125;&apos; var ::= [_a-zA-Z] [_a-zA-Z0-9]* int ::= [0-9]+ text ::= .* è€Œåœ¨ä»£ç é‡Œæˆ‘ä»¬çš„å¼•å·æ¢æˆäº†ï¼š &quot; ç»“æœ jg1 jg2","categories":[],"tags":[{"name":"æŠ€æœ¯åˆ†äº«","slug":"æŠ€æœ¯åˆ†äº«","permalink":"https://summxu.github.io/tags/æŠ€æœ¯åˆ†äº«/"},{"name":"BootStrap","slug":"BootStrap","permalink":"https://summxu.github.io/tags/BootStrap/"},{"name":"HTML","slug":"HTML","permalink":"https://summxu.github.io/tags/HTML/"}],"author":"BoomXu"},{"title":"åˆå­¦BootStrap --å¼•å…¥æ¨¡æ¿","slug":"2017/html-jquery-bootstrap-temp","date":"2017-06-08T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/html-jquery-bootstrap-temp/","link":"","permalink":"https://summxu.github.io/2017/html-jquery-bootstrap-temp/","excerpt":"","text":"åœ¨æ­¤è®°å½•ä¸‹è‡ªå·±ä¸€æ­¥æ­¥å­¦ä¹ å‰ç«¯çš„è¿‡ç¨‹ï¼ 12345678910111213&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;link rel=\"stylesheet\" href=\"https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css\"&gt; &lt;script src=\"https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js\"&gt;&lt;/script&gt; &lt;script src=\"https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js\"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;/body&gt;&lt;/html&gt; ä»¥ä¸Šæ˜¯å¼•ç”¨JQeryå’ŒBootStrapçš„htmlæ¨¡æ¿ã€‚","categories":[],"tags":[{"name":"BootStrap","slug":"BootStrap","permalink":"https://summxu.github.io/tags/BootStrap/"}],"author":"BoomXu"},{"title":"å…³é—­Linuxå¼ºè¡Œæ€æ‰è¿›ç¨‹æœåŠ¡","slug":"2017/linux-oom-kill","date":"2017-06-07T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/linux-oom-kill/","link":"","permalink":"https://summxu.github.io/2017/linux-oom-kill/","excerpt":"","text":"æœ¬äººæ­å»ºäº†ä¸ªMinecraftçš„æœåŠ¡å™¨è¿è¡Œåœ¨äº†Centosä¸Šï¼Œæœ¬èº«æœºå™¨å†…å­˜ä¸º1Gï¼Œæˆ‘è®¾ç½®çš„Java *Xms700m -Xmx700m *. é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘çš„ä¸–ç•Œç©ç€çš„æ—¶å€™ç»å¸¸æ–­å¼€ï¼Œè€Œä¸”æœåŠ¡å™¨ä¹Ÿè¿æ¥ä¸ä¸Šäº†ï¼Ÿ Minecraft ä»”ç»†æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—å‘ç°ï¼š kill java ç«Ÿç„¶å› ä¸ºå†…å­˜å ç”¨è¿‡å¤šè¢«ç³»ç»Ÿç›´æ¥Killæ‰äº†ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒLinuxç³»ç»Ÿä¸ºäº†ä¿æŠ¤ç³»ç»Ÿè¿è¡Œï¼Œä¼šæŠŠå†…å­˜å ç”¨è¿‡é«˜çš„ç¨‹åºæ€æ‰ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿›ç¨‹å°±æ˜¯ OOM_killer OOM_killerOOM_killeræ˜¯Linuxè‡ªæˆ‘ä¿æŠ¤çš„æ–¹å¼ï¼Œå½“å†…å­˜ä¸è¶³æ—¶ä¸è‡³äºå‡ºç°å¤ªä¸¥é‡é—®é¢˜ï¼Œæœ‰ç‚¹å£®å£«æ–­è…•çš„æ„å‘³åœ¨kernel 2.6ï¼Œå†…å­˜ä¸è¶³å°†å”¤é†’oom_killerï¼ŒæŒ‘å‡º/proc//oom_scoreæœ€å¤§è€…å¹¶å°†ä¹‹killæ‰ ä¸ºäº†ä¿æŠ¤é‡è¦è¿›ç¨‹ä¸è¢«oom-killeræ‰ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š 1echo -17 &gt; /proc/&lt;pid&gt;/oom_adj,-17è¡¨ç¤ºç¦ç”¨OOM æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹æŠŠæ•´ä¸ªç³»ç»Ÿçš„OOMç»™ç¦ç”¨æ‰ï¼š 12sysctl -w vm.panic_on_oom=1 ï¼ˆé»˜è®¤ä¸º0ï¼Œè¡¨ç¤ºå¼€å¯ï¼‰sysctl -p å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæœ‰äº›æ—¶å€™ free -m æ—¶è¿˜æœ‰å‰©ä½™å†…å­˜ï¼Œä½†è¿˜æ˜¯ä¼šè§¦å‘OOM-killerï¼Œå¯èƒ½æ˜¯å› ä¸ºè¿›ç¨‹å ç”¨äº†ç‰¹æ®Šå†…å­˜åœ°å€ å¹³æ—¶æˆ‘ä»¬åº”è¯¥ç•™æ„ä¸‹æ–°è¿›æ¥çš„è¿›ç¨‹å†…å­˜ä½¿ç”¨é‡ï¼Œå…å¾—ç³»ç»Ÿé‡è¦çš„ä¸šåŠ¡è¿›ç¨‹è¢«æ— è¾œç‰µè¿å¯ç”¨ top M æŸ¥çœ‹æœ€æ¶ˆè€—å†…å­˜çš„è¿›ç¨‹ï¼Œä½†ä¹Ÿä¸æ˜¯è¿›ç¨‹ä¸€è¶…è¿‡å°±ä¼šè§¦å‘oom_killerå‚æ•°/proc/sys/vm/overcommit_memoryå¯ä»¥æ§åˆ¶è¿›ç¨‹å¯¹å†…å­˜è¿‡é‡ä½¿ç”¨çš„åº”å¯¹ç­–ç•¥ 123å½“overcommit_memory=0 å…è®¸è¿›ç¨‹è½»å¾®è¿‡é‡ä½¿ç”¨å†…å­˜ï¼Œä½†å¯¹äºå¤§é‡è¿‡è½½è¯·æ±‚åˆ™ä¸å…è®¸(é»˜è®¤ï¼‰å½“overcommit_memory=1 æ°¸è¿œå…è®¸è¿›ç¨‹overcommitå½“overcommit_memory=2 æ°¸è¿œç¦æ­¢overcommit OK äº†ï¼Œæœç„¶æ²¡åœ¨å‡ºç°æ‰çº¿çš„æƒ…å†µäº†ï¼Œä¸è¿‡è¿™ä¸ªæ–¹å¼è¿˜æ˜¯ä¼šå­˜åœ¨é—®é¢˜ï¼Œå°±æ˜¯å½“å†…å­˜å®åœ¨æ˜¯è¿‡å¤§çš„æ—¶å€™ï¼Œä¼šç ´åç³»ç»Ÿçš„æ•´ä½“ç¨³å®šæ€§ï¼Œæå¤§å¯èƒ½ä¼šå®•æœºï¼ 22ï¼š54æ›´æ–° å®•æœºäº†ï¼ï¼ï¼é‡å¯åå‘ç°ï¼š error è¿™å°±æ‚²å‰§äº†ï¼ï¼ï¼ çœ‹æ¥è¿˜æ˜¯è€è€å®å®çš„ Java *Xms256m -Xmx256m * è¿™æ ·ç¡®å®ä¸å‡ºç°è¿æ¥é—®é¢˜ï¼Œä½†æ˜¯è¿™æ ·ä¼šæŸå¤±ä¸€ç‚¹æ¸¸æˆçš„æµç•…æ€§(æ¯”å¦‚åœ¨é“è·¯ä¸Šåšå¾ˆé•¿è·ç¦»çš„çŸ¿è½¦ï¼Œä¼šå¡æˆç‹—ã€‚ã€‚) ä»€ä¹ˆï¼Ÿï¼Ÿï¼Ÿæƒ³å®Œç¾è§£å†³ï¼Ÿ è¿˜æ˜¯ ï¼š ç»™æœåŠ¡å™¨åŠ å¤§å†…å­˜æŠŠ@ï¼ï¼@ï¼","categories":[],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://summxu.github.io/tags/Linux/"},{"name":"æ¸¸æˆ","slug":"æ¸¸æˆ","permalink":"https://summxu.github.io/tags/æ¸¸æˆ/"}],"author":"BoomXu"},{"title":"ç²¾ç®€å®ç”¨çš„VScodeå‰ç«¯æ‰©å±•","slug":"2017/vscode-extended-html","date":"2017-06-07T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/vscode-extended-html/","link":"","permalink":"https://summxu.github.io/2017/vscode-extended-html/","excerpt":"","text":"å‰è¨€vscodeæ˜¯ä¸€æ¬¾è·¨å¹³å°çš„ä»£ç ç¼–è¾‘å™¨ï¼Œå¥¹è½»é‡ã€ç¾è§‚ã€ä¸€è‡´ã€åŠŸèƒ½å®Œæ•´ï¼Œè‡ªå¸¦å®Œç¾gitæ”¯æŒï¼Œéå¸¸é€‚åˆå‰ç«¯åŒå­¦ä½¿ç”¨ã€‚ä¸‹é¢æ€»ç»“ä¸‹æˆ‘å¯¹äºè¿™ä¸ªè½¯ä»¶çš„ä½¿ç”¨æŠ€å·§ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©ã€‚ å¿«æ·é”®æ³¨æ„ï¼šå½“ä¸‹åˆ—å¿«æ·é”®ä¸èµ·ä½œç”¨æ—¶ï¼Œè¯·è€ƒè™‘æ˜¯å¦æ˜¯å…¶ä»–è½¯ä»¶å·²ç»å ç”¨äº†å¿«æ·é”®ï¼Œå¦‚è¾“å…¥æ³•ã€èŠå¤©è½¯ä»¶ç­‰ vscodeå†…ç½®äº†emmetï¼Œä½¿ç”¨tabé”®å¯å¿«é€Ÿç¼–å†™html/cssç­‰ï¼Œå…·ä½“è¯·æŸ¥è¯¢emmetè¯­æ³•è¯´æ˜ å¿«æ·é”® å¤‡æ³¨ Ctrl + N æ–°å»ºæ–‡ä»¶ Ctrl + S ä¿å­˜æ–‡ä»¶ Ctrl + F åœ¨å½“å‰æ–‡ä»¶å†…æŸ¥æ‰¾ Ctrl + H åœ¨å½“å‰æ–‡ä»¶å†…æ›¿æ¢ Ctrl + Shift + F åœ¨æ–‡ä»¶å†…æŸ¥æ‰¾ Ctrl + Shift + H åœ¨æ–‡ä»¶å†…æ›¿æ¢ Ctrl + Tab åˆ‡æ¢æ–‡æ¡£ Ctrl + PgUp/PgDn å‘å‰/å‘ååˆ‡æ¢æ–‡æ¡£ Ctrl + 1/2/3 åˆ‡æ¢åˆ†æ  Ctrl + P è½¬åˆ°æ–‡ä»¶ Ctrl + P è½¬åˆ°æ–‡ä»¶ Ctrl + G è½¬åˆ°è¡Œï¼Œè¾“å…¥è¡Œå·ï¼Œè½¬åˆ°è¯¥è¡Œå·å¤„ Ctrl + é¼ æ ‡æ»šè½® ç¼©æ”¾ç¼–è¾‘å™¨æ˜¾ç¤ºæ¯”ä¾‹ Ctrl + F1 åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€å½“å‰æ­£åœ¨ç¼–è¾‘çš„htmlæ–‡ä»¶ï¼Œè¿™ä¸ªåŠŸèƒ½éœ€è¦æ’ä»¶æ”¯æŒï¼Œå®‰è£…æ’ä»¶ï¼šView In Browser F12 è½¬åˆ°å®šä¹‰ï¼Œå¯è·³è½¬åˆ°å˜é‡å®šä¹‰å¤„ï¼Œå®šä¹‰è¾ƒä¸ºå¤æ‚æ—¶ï¼Œä¼šæ‰¾ä¸åˆ° F1 æ‰“å¼€å‘½ä»¤è¾“å…¥æ¡† Shift + Alt + F æ ¼å¼åŒ–ä»£ç  Ctrl + Alt + Up/Down/Left/Right æŒ‰åŒºåŸŸé€‰ä¸­ä»£ç ï¼Œå¹¶ç¼–è¾‘ Alt + Up/Down ç§»åŠ¨å…‰æ ‡æ‰€åœ¨è¡Œæˆ–è€…å…‰æ ‡é€‰ä¸­ä»£ç çš„ä½ç½® Alt + Left/Right å‰è¿›æˆ–åé€€æ“ä½œå†å²ï¼Œè¿™ä¸ªå†å²ä¸æ˜¯ç¼–è¾‘å†å²ï¼ˆCtrl + Z/Yæ“ä½œçš„æ˜¯ç¼–è¾‘å†å²ï¼‰ï¼Œå®ƒåŒ…å«å¦‚ï¼šç¬¬ä¸€æ­¥ï¼Œå…‰æ ‡åœ¨12è¡Œ6åˆ—å¤„ï¼›ç¬¬äºŒæ­¥ï¼Œå…‰æ ‡åœ¨20è¡Œ10åˆ—å¤„ï¼›ç¬¬ä¸‰æ­¥ï¼Œæ‰“å¼€å¦å¤–ä¸€ä¸ªæ–‡ä»¶ã€‚ Shift + Alt + Up/Down å¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œè‡³ä¸Šä¸€è¡Œæˆ–ä¸‹ä¸€è¡Œ Alt + å…‰æ ‡é€‰ä¸­ å…‰æ ‡å¤šé€‰ï¼ŒåŒæ—¶ç¼–è¾‘ æ‰©å±•/æ’ä»¶vscodeæ”¯æŒæ‰©å±•ï¼Œå®˜æ–¹å•†åº—é‡Œæœ‰å¾ˆå¤šæ‰©å±•ï¼Œç½‘å€ï¼šhttps://marketplace.visualstuâ€¦å®‰è£…æ–¹å¼ï¼šç‚¹å‡»ç¼–è¾‘å™¨å·¦ä¾§çš„ã€æ‰©å±•ã€‘æŒ‰é’®ï¼Œåœ¨æœç´¢æ¡†ä¸­è¾“å…¥ä½ æƒ³è¦å®‰è£…çš„æ’ä»¶ï¼Œç‚¹å‡»å®‰è£…å³å¯ã€‚ æ¨èæ’ä»¶ é“¾æ¥ åç§° å¤‡æ³¨ æŸ¥çœ‹ Path Intellisense åœ¨ç¼–è¾‘å™¨ä¸­è¾“å…¥è·¯å¾„æ—¶ï¼Œè‡ªåŠ¨è¡¥å…¨ æŸ¥çœ‹ Auto Close Tag è‡ªåŠ¨è¡¥å…¨htmlæ ‡ç­¾ï¼Œå¦‚è¾“å…¥å°†è‡ªåŠ¨è¡¥å…¨ æŸ¥çœ‹ Auto Rename Tag è‡ªåŠ¨é‡å‘½åhtmlæ ‡ç­¾ï¼Œå¦‚ä¿®æ”¹ä¸ºï¼Œå°†è‡ªåŠ¨ä¿®æ”¹ç»“å°¾æ ‡ç­¾ä¸º æŸ¥çœ‹ REST Client åœ¨ç¼–è¾‘å™¨ä¸­å‘é€httpè¯·æ±‚ï¼Œå¯ç›´æ¥å¾—åˆ°ç»“æœï¼Œæµ‹è¯•æ¥å£æ—¶å¾ˆæœ‰ç”¨å¤„ï¼Œç”¨æ³•è¯·çœ‹æ’ä»¶è¯¦æƒ… æŸ¥çœ‹ Easy LESS è‡ªåŠ¨ç¼–è¯‘lessæ–‡ä»¶ï¼ˆæ–‡ä»¶ä¿å­˜åè‡ªåŠ¨å˜ä¸ºä¸ºåŒå.cssæ–‡ä»¶ï¼‰ï¼Œå¦‚æœä½ åªæ˜¯æƒ³ç”¨lessï¼Œè€Œåˆä¸æƒ³é…ç½®gruntç­‰å·¥å…·æ¥ä½¿ç”¨å®ƒæ—¶ï¼Œè¯·ä½¿ç”¨è¿™ä¸ªæ’ä»¶ï¼Œä»–ç»å¯¹æ˜¯æ›´æ•ˆç‡çš„ æŸ¥çœ‹ View In Browser æŒ‰Ctrl + F1åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æ­£åœ¨ç¼–è¾‘çš„htmlæ–‡ä»¶ æŸ¥çœ‹ vscode-icons ä¸ºæ–‡ä»¶æ·»åŠ ç‚«é…·çš„å›¾æ ‡ï¼Œå›¾æ ‡ç§ç±»å¾ˆå…¨ï¼ŒåŒ…æ‹¬å„ç§é…ç½®æ–‡ä»¶ã€å¸¸è§è¯­è¨€ã€å¸¸è§jsæ¡†æ¶ç­‰ï¼Œä½ å€¼å¾—æ‹¥æœ‰ï¼›å®‰è£…åï¼Œéœ€è¦ä½¿ç”¨ç®¡ç†å‘˜æƒé™å¯åŠ¨vscodeï¼Œå¹¶æ‰“å¼€å‘½ä»¤è¾“å…¥æ¡†(F1æˆ–è€…Ctrl+Shift+P)æ‰§è¡ŒIcons Enable å¦‚æœ‰ä»»ä½•é—®é¢˜å¯ä»¥åœ¨ä¸‹æ–¹ç•™è¨€æˆ–è€…ç»™æˆ‘é‚®ä»¶ã€‚","categories":[],"tags":[{"name":"æŠ€æœ¯åˆ†äº«","slug":"æŠ€æœ¯åˆ†äº«","permalink":"https://summxu.github.io/tags/æŠ€æœ¯åˆ†äº«/"}],"author":"BoomXu"},{"title":"æ— éœ€åå°çš„é›†æˆå¼è¯„è®ºç³»ç»Ÿ","slug":"2017/choose-Comments","date":"2017-06-01T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/choose-Comments/","link":"","permalink":"https://summxu.github.io/2017/choose-Comments/","excerpt":"","text":"ç„¶è€Œå›¾ç‰‡å’Œæ­¤æ–‡ç« æ²¡æœ‰ä¸€ç‚¹æ¯›å…³ç³»ï¼Œåªæ˜¯ä¸ºäº†å¥½çœ‹ã€‚ å‰è¨€ï¼šä½œä¸ºä¸€ä¸ªåšå®¢ç³»ç»Ÿï¼Œè¯„è®ºç³»ç»Ÿå‡ ä¹æ˜¯å¿…å¤‡çš„ã€‚è€Œå¾ˆå¤šé™æ€åšå®¢åƒJekyllå‡ ä¹æ²¡æœ‰è‡ªå·±å¼€å‘è¯„è®ºç³»ç»Ÿçš„å¯èƒ½æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ä»‹ç»ä¸‹æ¯”è¾ƒå¸¸ç”¨çš„å‡ å®¶è¯„è®ºç³»ç»Ÿï¼Œå’Œè‡ªå·±å»æ­å»ºè¯„è®ºç³»ç»Ÿã€‚ å›½å†…è¯„è®ºç³»ç»Ÿ å¤šè¯´â€”â€”-(å·²å…³é—­)å¤šè¯´ç®—æ˜¯å›½å†…æœ€å¥½ç”¨çš„è¯„è®ºç³»ç»Ÿäº†ï¼Œä½†æ˜¯å¤šè¯´å®£å¸ƒä¸2017å¹´6æœˆ1æ—¥å…³é—­ã€‚ å‹è¨€ä¸æ”¯æŒHTTPSï¼Œå‹è¨€åœ¨è¯„è®ºç®¡ç†æ–¹é¢æ¯”è¾ƒå…¨é¢ï¼Œå…è®¸ç®¡ç†å‘˜è‡ªä¸»çµæ´»è®¾ç½®åŒ¿åè¯„è®ºåŠŸèƒ½ï¼Œå¹¶ä¸”è¿˜æ”¯æŒæ•°é‡æœ€å¤šçš„11ç§å»ºç«™å¹³å°å®‰è£…æ–¹å¼ï¼Œä½†æ˜¯å‹è¨€åœ¨è¯„è®ºæ–¹å¼ä¸Šè¡¨ç°è¾ƒä¸ºä¸è¶³ã€‚ ç½‘æ˜“äº‘è·Ÿå¸–æ€»ä½“è€Œè¨€ï¼Œç½‘æ˜“äº‘è·Ÿè´´åœ¨ç”¨æˆ·è¯„ä»·æ–¹é¢è¡¨ç°ä¹Ÿè¾ƒä¸ºå…¨é¢ï¼Œä½†æ˜¯è´¦å·ç™»å½•æ–¹å¼ä¹Ÿè¾ƒå°‘ï¼Œåœ¨è¯„è®ºç®¡ç†æ–¹é¢æœ€ä¸ºä¸è¶³ã€‚ ç•…è¨€æ€»ä½“è€Œè¨€ï¼Œç•…è¨€è¡¨ç°æœ€ä¸ºå…¨é¢ï¼Œä¸”å”¯ä¸€æ”¯æŒç®¡ç†å‘˜åˆ†æƒç®¡ç†ï¼Œä½†æ˜¯ç•…è¨€è´¦å·çš„ç™»å½•æ–¹å¼è¾ƒå°‘ï¼Œæ”¯æŒPCç«¯å®‰è£…çš„å»ºç«™å¹³å°æ•°é‡ä¹Ÿè¾ƒå°‘ã€‚æœ¬ç«™ä¹Ÿæ˜¯æ­£åœ¨ä½¿ç”¨ç•…è¨€ã€‚ å›½å¤–è¯„è®ºç³»ç»Ÿ Disqus Disqusæ˜¯å›½å¤–çš„è¯„è®ºæ’ä»¶ï¼Œè‡ªä»å¤šè¯´å…³é—­åä¹Ÿæ˜¯ç°åœ¨å¾ˆå¤šç«™é•¿éƒ½åœ¨ä½¿ç”¨çš„è¯„è®ºç³»ç»Ÿï¼Œå…¶ç•Œé¢ç¾è§‚ç®€å•ã€‚ä½†æ˜¯ï¼Œè¢«å¢™äº†ã€‚ã€‚ã€‚ æ­å»ºè‡ªå·±çš„è¯„è®ºç³»ç»ŸissoIssoæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ç±»ä¼¼Disqusç¬¬ä¸‰æ–¹è¯„è®ºç³»ç»Ÿï¼Œå®ƒå…è®¸åŒ¿åè¯„è®ºã€æ³¨å†Œè¯„è®ºã€å›å¤é‚®ä»¶é€šçŸ¥ä»¥åŠè‡ªå®šä¹‰å¤–è§‚ç­‰åŠŸèƒ½ã€‚å®ƒçš„æ¥å£è®¾è®¡å’ŒDisqusé«˜åº¦ç›¸ä¼¼ï¼Œæ‰€ä»¥è¦é›†æˆè¿™ä¸ªè¯„è®ºç³»ç»Ÿåªéœ€è¦åœ¨Disqusæ¥å£ä¸Šæ”¹å‡ ä¸ªå•è¯ï¼Œéå¸¸ç®€å•ã€‚ Issoæ˜¯åŸºäºPythonå†™çš„å¼€æºè½¯ä»¶ï¼Œä½ å¯ä»¥éšæ„ä¿®æ”¹è¯„è®ºæ¡†å¤–è§‚ã€‚ isso æˆ‘åœ¨è¿™é‡Œè¯´ä¸‹æˆ‘çœ‹åˆ°çš„Dockerå®¹å™¨çš„ISSOçš„å®‰è£…æ–¹æ³•ï¼Œæ¯”è¾ƒç®€å•ï¼Œä¸ç”¨å»é…ç½®å¤æ‚çš„pythonç¯å¢ƒã€‚ ç”¨dockerä½ é¦–å…ˆè¦å®‰è£…dockerç¯å¢ƒ å’Œ Compose ã€‚ä¸¤ä¸ªå·¥å…·çš„å®‰è£…åœ¨æ­¤ä¸å¤šèµ˜è¿°ã€‚ã€‚ ä¸‹è½½Dockeré•œåƒ åœ¨dockerä¸Šæœ‰äººåšå‡ºæ¥äº†ä¸€ä¸ªdockeråŒ…ï¼Œç›´æ¥pullä¸‹æ¥å°±å¯ä»¥ï¼Œåœ°å€åœ¨è¿™ï¼šhttps://hub.docker.com/r/wonderfall/isso/ é…ç½®ISSO æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹åä¸ºconfigï¼Œåœ¨é‡Œé¢æ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶isso.confï¼š 12345[general]dbpath = /db/comments.dbhost = https://www.BoomXu.com[server]listen = http://0.0.0.0:8080/ ä¸‹é¢æ˜¯ä¸€ä¸ªComposeé…ç½®æ–‡ä»¶ï¼š123456789101112version: &apos;2&apos;services: isso: image: wonderfall/isso environment: - GID=1000 - UID=1000 volumes: - ./config:/config - ./db:/db ports: - &quot;8080:8080&quot; ä¿å­˜ä¸ºdocker-compose.ymlç„¶åæ‰§è¡Œï¼š1dokcer-compose up -d æå®šä¹‹åå°±å¯ä»¥é€šè¿‡8080ç«¯å£çš„æ¥å£ä½¿ç”¨Issoè¯„è®ºç³»ç»Ÿäº†ã€‚ å¯åŠ¨åç›®å½•åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š12345678.â”œâ”€â”€ configâ”‚ â””â”€â”€ isso.confâ”œâ”€â”€ dbâ”‚ â””â”€â”€ comments.dbâ””â”€â”€ docker-compose.yml2 directories, 3 files è®¾ç½® IssoæœåŠ¡å·²ç»è¿è¡Œäº†ï¼Œå½“ç„¶ç›´æ¥è®¿é—®8080ç«¯å£æ˜¯æ²¡æœ‰ä»€ä¹ˆç•Œé¢çš„ï¼Œåªæœ‰ä¸€ä¸ªAPIæ¥å£ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¦åœ¨é™æ€åšå®¢ä¸­é›†æˆè¿™ä¸ªè¯„è®ºç³»ç»Ÿã€‚ å¦‚æœä½ ä½¿ç”¨çš„ä¸»é¢˜æ˜¯çº¯HTMLï¼Œé‚£ä¹ˆåµŒå…¥ä¸‹é¢ä¸¤å¥å³å¯ï¼š 1234&lt;script data-isso=&quot;//comments.example.tld/&quot; src=&quot;//comments.example.tld/js/embed.min.js&quot;&gt;&lt;/script&gt;&lt;section id=&quot;isso-thread&quot;&gt;&lt;/section&gt; å¦‚æœä½ æ˜¯Jadeæˆ–è€…Ejsç­‰æ¨¡æ¿å¼•æ“ï¼Œé‚£ä¹ˆå¤åˆ¶ä¸€ä¸‹Disqusçš„ä»£ç ï¼Œæ›¿æ¢ä¸ºIssoå³å¯ï¼Œä¾‹å¦‚Jadeæ ¼å¼ã€‚ ä¸‹é¢æ˜¯Disqusçš„Jadeæ¨¡æ¿ï¼š1234567891011121314if theme.disqus a#comments #disqus_thread script. var disqus_shortname = &apos;#&#123;theme.disqus&#125;&apos;; var disqus_identifier = &apos;#&#123;page.path&#125;&apos;; var disqus_title = &apos;#&#123;page.title&#125;&apos;; var disqus_url = &apos;#&#123;config.url&#125;/#&#123;page.path&#125;&apos;; (function() &#123; var dsq = document.createElement(&apos;script&apos;); dsq.type = &apos;text/javascript&apos;; dsq.async = true; dsq.src = &apos;//&apos; + disqus_shortname + &apos;.disqus.com/embed.js&apos;; (document.getElementsByTagName(&apos;head&apos;)[0] || document.getElementsByTagName(&apos;body&apos;)[0]).appendChild(dsq); &#125;)(); script(id=&apos;dsq-count-scr&apos; src=&apos;//#&#123;theme.disqus&#125;.disqus.com/count.js&apos; async) ç°åœ¨æ”¹å†™ä¸ºIssoè¯„è®ºç³»ç»Ÿï¼ˆç±»ä¼¼ï¼‰ï¼š12345678910111213if theme.isso a#comments .isso-thread script. var isso-path = &#123;short_name:\"#&#123;theme.isso&#125;\"&#125;; (function() &#123; var isso = document.createElement('script'); isso.type = 'text/javascript';ds.async = true; isso.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//example.com/isso/js/embed.js'; ds.charset = 'UTF-8'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds); &#125;)(); è¯„è®ºè®¡æ•° å¦‚ä½•åœ¨é¦–é¡µä¸­æ˜¾ç¤ºæ–‡ç« è®¡æ•°ï¼Ÿ åŠ å…¥ä¸‹é¢ä¸€å¥åˆ°é¡µé¢ä¸­ï¼š 1&lt;a href=&quot;/my-uri.html#isso-thread&quot;&gt;Comments&lt;/a&gt;","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://summxu.github.io/tags/JavaScript/"}],"author":"BoomXu"},{"title":"å…è´¹æ­å»ºåšå®¢Github+Jekyll","slug":"2017/how-free-blog-pages","date":"2017-05-26T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/how-free-blog-pages/","link":"","permalink":"https://summxu.github.io/2017/how-free-blog-pages/","excerpt":"","text":"è¿™ç¯‡åšå®¢å°†ä¼šä¸ºå¤§å®¶ä»0å¼€å§‹è¯¦ç»†çš„è®²è§£ä¸‹æ€ä¹ˆåˆ©ç”¨Github Pagesæ¥å…è´¹çš„æ­å»ºè‡ªå·±çš„åšå®¢ï¼Œå¦‚æœä½ è‡ªå·±æœ‰ç©ºé—´æˆ–è€…æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥æ¢æˆè‡ªå·±çš„ã€‚å¦‚æœä½ èƒ½çœ‹ä¸‹å»å°±ä¸€å®šå¯ä»¥æ­å»ºçš„å‡ºæ¥ã€‚è¿™ç¯‡æ–‡ç« è™½è¯´æ˜¯æ•™ç¨‹å‘ï¼Œä½†æ˜¯å¯¹æˆ‘è‡ªå·±æ¥è¯´æ›´æ˜¯ä¸€ä¸ªè‡ªå·±ç ”ç©¶æ­å»ºåšå®¢çš„è¿‡ç¨‹è®°å½•ï¼Œæˆ‘å¸Œæœ›è¿™ä¸ªæ•™ç¨‹èƒ½å¸®åŠ©åˆ°å¤§å®¶æ›´èƒ½å¸®åŠ©åˆ°æˆ‘è‡ªå·±ã€‚æœ¬äººæ˜¯ç¬¬ä¸€æ¬¡å†™åšå®¢ï¼Œ éš¾å…æœ‰äº›æ¿€åŠ¨ã€‚å¦‚æœæˆ‘æœ‰ä»€ä¹ˆä¸å¯¹çš„åœ°æ–¹å’Œä¸€äº›ç–å¿½æ‰çš„åœ°æ–¹ï¼Œè¿˜è¯·å¤§å®¶åˆ°åšå®¢ä¸‹é¢æµè§ˆï¼Œæˆ–è€…å¯ä»¥åœ¨å³è¾¹çš„å°Abouté‡Œç‚¹å‡»é‚®ä»¶å›¾æ ‡ç»™æˆ‘å‘é‚®ä»¶ã€‚ åºŸè¯å°‘è¯´ï¼Œå°±æ˜¯å¹²ï¼ä¸è¿‡åœ¨è¿™ä¹‹å‰å…ˆä»‹ç»ä¸‹å’±ä»¬çš„Leading roles: Github Git Jekyll Freenom Markdown å°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œå°±å¯ä»¥è½»è€Œæ˜“ä¸¾çš„å»å®Œæˆæˆ‘ä»¬çš„å·¥ä½œï¼Œä¸‹é¢è¿›å…¥æ­£æ–‡ï¼ æ³¨å†Œå¹¶ä½¿ç”¨Githubå¯¹äºGithubè¿™ä¸ªç¤¾åŒºæˆ‘æƒ³ä½œä¸ºä¸€ä¸ªä»£ç äº¤æµè€…æˆ–è®¸æ— äººä¸çŸ¥ï¼Œå³ä½¿ç°åœ¨æ²¡æœ‰åŠ å…¥Githubï¼Œä½†æ˜¯å¦‚æœä½ æƒ³ç»§ç»­ä½ çš„ä»£ç äº‹ä¸šï¼Œæ³¨å†Œä¸ªGithubæ˜¯æ—©å®Œçš„äº‹ï¼Œè€Œä¸”è¿™æ˜¯å¿…é¡»çš„ã€‚åœ¨è¿™é‡Œæˆ‘ä¸ä¸è°ˆè®ºè¿™ä¸ªç¤¾åŒºçš„å†å²ã€ä½œç”¨ï¼Œå¦‚æœä½ æƒ³äº†è§£ï¼Œæˆ‘æ¨èä½ çœ‹æœ¬PDFï¼Œå†…å®¹ä¸å¤šï¼Œä½†æ˜¯å¾ˆæœ‰ç”¨ã€‚ï¼ˆä»0å¼€å§‹å­¦Githubï¼‰æˆ‘ä»¬åªè¯´æ€ä¹ˆä½¿ç”¨ä»–çš„PagesåŠŸèƒ½ï¼Œè¿™é‡Œæ˜¯Githubçš„æ³¨å†Œåœ°å€ã€‚Github æ³¨å†Œ åˆ›å»ºrepository è¿›å…¥Githubåç›´æ¥ç‚¹å¼€å§‹ä¸€ä¸ªé¡¹ç›® é¡¹ç›®åå­—è¿™ä¹ˆè¾“å…¥ï¼Œå‰é¢ä¸€å®šæ˜¯ä½ åœ¨Githubçš„åå­—ï¼ˆä¸è¦è¾“å…¥æˆæˆ‘çš„å•Šã€‚ï¼‰ï¼ŒDescriptionå¯ä»¥è¾“å…¥æˆè‡ªå·±å–œæ¬¢çš„ï¼Œå¦‚ï¼šæˆ‘çš„ä¸ªäººåšå®¢ ğŸ˜†?? å‡ºç°è¿™ä¸ªé¡µé¢ä»£è¡¨ä½ çš„Githubä»“åº“å·²ç»åˆ›å»ºæˆåŠŸäº†ï¼Œè¿™ä¹Ÿä»£è¡¨è¿™ï¼Œä½ åœ¨Githubä¸Šçš„å·¥ä½œå°±å…ˆå‘Šä¸€æ®µè½äº†ã€‚ **è¿™ä¸ªä»“åº“ä¹Ÿå¯ä»¥å½“ä½œæ˜¯ä¸€ä¸ªè™šæ‹Ÿç©ºé—´ï¼Œä½ å¯ä»¥åœ¨åˆ›å»ºçš„æ—¶å€™å‹¾é€‰ä¸Šåˆ›å»ºREADMEå°±èƒ½ä»¥ç½‘é¡µä¸Šçš„å½¢å¼å»ä¸Šä¼ ã€ä¿®æ”¹ã€ä¸‹è½½ä»£ç ã€‚ä½†æ˜¯è¿™ä¸æ˜¯Githubçš„æ­£ç¡®ç”¨æ³•,ä¸‹é¢æ‰æ˜¯æˆ‘ä»¬çš„æ­£ç¡®çš„ç”¨æ³•GIT! ç°åœ¨è¿™ä¸ªä»“åº“æ˜¯ç©ºçš„ï¼Œä¸‹é¢æˆ‘ä»¬è¦ç”¨GIT çš„æ–¹æ³•å»é‡Œé¢æ·»åŠ æ–‡ä»¶ï¼š** ä½¿ç”¨GitGitæ˜¯ä¸ªå¤æ‚çš„ä¸œè¥¿ï¼Œä»–å¯ä»¥ç†è§£æˆä¸€ç§å¤šäººå…±äº«å»ç®¡ç†ä»“åº“çš„æ–¹æ³•ã€‚å¦‚æœä½ æ²¡æœ‰åŸºç¡€çš„GitçŸ¥è¯†ï¼Œè·Ÿç€æˆ‘åšä¹Ÿå¯ä»¥è¾¾åˆ°ç›®æ ‡ï¼Œä½†æ˜¯ä½ å¦‚æœæƒ³ç†è§£ä»€ä¹ˆæ˜¯Gitï¼Œé‡Œé¢çš„è¯­å¥æ€ä¹ˆç”¨ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘çš„è¿™ç¯‡åšå®¢ã€‚ gitå¸¸ç”¨æ“ä½œ å¦‚æœä½ æƒ³ä½¿ç”¨GithubPagesï¼Œå°±å¿…é¡»è¦äº†è§£ç›¸å…³çš„GitçŸ¥è¯†.æ­£å¦‚ä¸Šé¢æ‰€è¯´çš„ï¼Œä½ å¯ä»¥çœ‹çœ‹ è¿™æœ¬PDF","categories":[],"tags":[{"name":"æŠ€æœ¯åˆ†äº«","slug":"æŠ€æœ¯åˆ†äº«","permalink":"https://summxu.github.io/tags/æŠ€æœ¯åˆ†äº«/"},{"name":"Git","slug":"Git","permalink":"https://summxu.github.io/tags/Git/"}],"author":"BoomXu"},{"title":"Jekyllæ–‡ç« çš„æ ¼å¼å’Œå†™æ³•","slug":"2017/Jekyll-word-wirtd","date":"2017-05-23T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/Jekyll-word-wirtd/","link":"","permalink":"https://summxu.github.io/2017/Jekyll-word-wirtd/","excerpt":"","text":"Jekyllæ–‡ç« Markdownè¯­æ³• Jekyllæ–‡ç« å®Œå…¨ä½¿ç”¨Markdownçš„è¯­æ³•è§„åˆ™ã€‚Markdown æ˜¯ä¸€ç§ã€Œç”µå­é‚®ä»¶ã€é£æ ¼çš„ã€Œæ ‡è®°è¯­è¨€ã€ã€‚ çº¯æ–‡æœ¬ï¼Œæ‰€ä»¥å…¼å®¹æ€§æå¼ºï¼Œå¯ä»¥ç”¨æ‰€æœ‰æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ã€‚ è®©ä½ ä¸“æ³¨äºæ–‡å­—è€Œä¸æ˜¯æ’ç‰ˆã€‚ æ ¼å¼è½¬æ¢æ–¹ä¾¿ï¼ŒMarkdown çš„æ–‡æœ¬ä½ å¯ä»¥è½»æ¾è½¬æ¢ä¸º htmlã€ç”µå­ä¹¦ç­‰ã€‚ Markdown çš„æ ‡è®°è¯­æ³•æœ‰æå¥½çš„å¯è¯»æ€§ã€‚ Jekyllæ–‡ç« æ ¼å¼123456789101112---layout: posttitle: &quot;Jekyllæ–‡ç« çš„æ ¼å¼å’Œå†™æ³•&quot;subtitle: &quot;åˆå…¥Jekyll,åŸºäºMarkdownè¯­æ³•çš„ä¸ªäººåšå®¢.&quot;date: 2017-5-24author: &quot;BoomXu&quot;header-img: &quot;123123.jpg&quot;tags: - Jekyll - Markdown - åšå®¢--- ä»¥ä¸‹æ˜¯Noteé…ç½®ä»‹ç» 123456789101112---layout: keynotetitle: &quot;Example Post using Keynote Layout&quot;subtitle: &quot;Keynote: JavaScript Modularization Journey&quot;iframe: &quot;http://huangxuan.me/js-module-7day/&quot;date: 2015-07-09author: &quot;Hux&quot;header-img: &quot;img/post-bg-js-version.jpg&quot;tags: - å‰ç«¯å¼€å‘ - JavaScript--- Jekyllå’ŒMarkdownçš„ç›¸å…³é“¾æ¥Github LessOrMore æ¨¡æ¿ çŒ®ç»™å†™ä½œè€…çš„ Markdown æ–°æ‰‹æŒ‡å— â€“ç®€ä¹¦","categories":[],"tags":[{"name":"æŠ€æœ¯åˆ†äº«","slug":"æŠ€æœ¯åˆ†äº«","permalink":"https://summxu.github.io/tags/æŠ€æœ¯åˆ†äº«/"}],"author":"BoomXu"},{"title":"ä¸ºè‡ªå®šä¹‰çš„åŸŸåæ·»åŠ å…è´¹SSL","slug":"2017/free-cloudflare-ssl-for-github-pages","date":"2017-05-23T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/free-cloudflare-ssl-for-github-pages/","link":"","permalink":"https://summxu.github.io/2017/free-cloudflare-ssl-for-github-pages/","excerpt":"","text":"åŸæ–‡è¿æ¥ ä¸ºè‡ªå®šä¹‰åŸŸåçš„GitHub Pagesæ·»åŠ SSL å®Œæ•´æ–¹æ¡ˆ ç®€å•æ€»ç»“ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼š åœ¨ github page çš„è®¾ç½®ä¸­å¡«å…¥ custom domain å»ä½ çš„åŸŸåæ³¨å†Œå•†æ›´æ”¹ dns server æˆ cloudflare æ‰€æä¾›çš„ åœ¨ cloudflare è®¾ç½® A record ï¼Œå‚ç…§ åœ¨ cloudflare é…ç½® crypto ï¼Œé€‰æ‹© flexiable ï¼ˆè¿™ä¸€æ­¥è¦ä¸€æ®µæ—¶é—´æ‰èƒ½èµ·æ•ˆï¼‰ åœ¨ cloudflare é…ç½® page rule ï¼Œä¸€ä¸ªæ˜¯ always use https ï¼Œä¸€ä¸ªæ˜¯ redirect http åˆ° https æ¯ä¸€æ­¥çš„æ“ä½œå¯èƒ½éœ€è¦ 5-30 åˆ†é’Ÿæ‰èƒ½èµ·æ•ˆ ä¸ºä»€ä¹ˆä½¿ç”¨Cloudflareæä¾›çš„å…è´¹SSLæ”¶è´¹çš„SSLæœåŠ¡æ€»æ˜¯æ¯”å…è´¹çš„æ›´åŠ å‘¨åˆ°ï¼Œä¸€èˆ¬æ”¶è´¹çš„SSLéƒ½ä¼šæä¾›ç«¯åˆ°ç«¯çš„åŠ å¯†ã€‚ä½†æ˜¯ä»·æ ¼ä¸è²ï¼Œå¯¹äºä¸ªäººåšå®¢æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ç¬”ä¸å¿…è¦çš„å¼€é”€ã€‚æˆ‘åªæ˜¯éœ€è¦çœ‹åˆ°ç½‘ç«™åœ°å€æ æœ‰ç»¿è‰²çš„é”å¤´ï¼Œé‚£å°±è¯æ˜æˆ‘ä»¬çš„ç½‘ç«™ç›¸å¯¹å®‰å…¨äº†ã€‚ æ­¤å¤–ï¼Œä½¿ç”¨httpsä¹‹åï¼Œè°·æ­Œã€ç™¾åº¦ç­‰æœç´¢æ’åæƒå€¼ï¼ˆPRç­‰ï¼‰ä¹Ÿä¼šæœ‰ç›¸å¯¹æå‡ã€‚è¿˜æœ‰å…¶ä»–çš„ä¸€äº›ï¼Œä¾‹å¦‚Cloudflareè¿˜æä¾›å…è´¹çš„CDNå’Œç¼“å­˜æŠ€æœ¯ï¼Œè®©æµè§ˆè€…æœ‰æ›´å¥½çš„ä½“éªŒ~~ å¥½äº†ï¼Œè¯´äº†é‚£ä¹ˆå¤šï¼Œç›´æ¥çœ‹æ•™ç¨‹~~ åˆ›å»ºCloudFlareå¸æˆ·ï¼Œå¹¶æ·»åŠ ç½‘ç«™é¦–å…ˆä½ å·²ç»æœ‰è‡ªå·±çš„è‡ªå®šä¹‰åŸŸåçš„GitHub Pages ï¼Œæˆ‘çš„ GitHub Pages cnameæ–‡ä»¶å†™çš„æ˜¯ yicodes.com å®ç°ç›®æ ‡ï¼š å½“è®¿å®¢è¾“å…¥ yicodes.com å¼ºåˆ¶è·³è½¬ä½¿ç”¨httpsï¼Œè®¿é—®wwww ä¹Ÿä¼šè·³è½¬åˆ°https://www.yicodes.com å¦‚æœä½ è¿˜æ²¡æœ‰Cloudflareè´¦å·ï¼Œç‚¹å‡»æ³¨å†Œ ç™»é™†åï¼Œç‚¹å‡»è¿™é‡Œ å¢åŠ ä½ çš„åŸŸåï¼Œå¦‚ä¸‹å›¾ï¼Œè¾“å…¥ä½ çš„åŸŸåï¼Œä¾‹å¦‚ yicodes.com *å¹¶ç‚¹å‡» *Begin Scan æ³¨æ„ä¸è¦å†™WWWå‰ç¼€ï¼Œå¤§çº¦60ç§’å³å¯å®ŒæˆåŸŸåè§£ææ‰«æã€‚å®Œæˆåç‚¹å‡» Continue Setup ç»§ç»­ä¸‹ä¸€æ­¥ ä½ çœ‹åˆ°DNSè®°å½•ï¼ˆåŒ…æ‹¬å­åŸŸï¼‰åˆ—è¡¨ä¹‹åï¼ŒæŒ‰ç…§ä¸‹å›¾æç¤ºè®¾ç½®åï¼Œå…¶ä¸­cnameæ˜¯ä¸ºäº†é‡å®šå‘wwwå‡†å¤‡çš„ï¼Œç‚¹å‡» Continue ä¸‹ä¸€æ­¥ é€‰æ‹©å…è´¹è®¡åˆ’ï¼Œç„¶åä¸‹ä¸€æ­¥~ åˆ°ä½ åŸŸåæ§åˆ¶é¢æ¿ä¿®æ”¹cloudflareç»™å‡ºçš„åŸŸåæœåŠ¡å™¨ï¼Œæˆ‘è¿™é‡Œä»¥ Godaddy ä¸ºä¾‹ æ³¨ï¼šå®˜æ–¹è¯´æ˜ï¼ŒåŸŸåæœåŠ¡å™¨ä¿®æ”¹æœ€é•¿éœ€è¦72å°æ—¶ç”Ÿæ•ˆ ï¼Œç”¨äº†ä¸¤ä¸ªåŸŸåæµ‹è¯•ï¼Œå¤§çº¦éœ€è¦ 5~30 åˆ†é’Ÿï¼Œçœ‹åˆ° Status: Active å³å¯ è®¾ç½®SSL ç‚¹å‡» crypto èœå• , ç„¶åè®¾ç½® Flexible SSL ï¼Œå¦‚ä¸‹å›¾ æ·»åŠ wwwé‡å®šå‘åˆ°https://www.yicodes.com æ·»åŠ è‡ªåŠ¨é‡å®šå‘åˆ° SSLé¡µé¢ æ·»åŠ SSLçš„æ•™ç¨‹å°±æ­¤å®Œæˆï¼Œä¸€èˆ¬éœ€è¦5~30åˆ†é’Ÿç”Ÿæ•ˆï¼ï¼ï¼ å¦‚æœä½ æœ‰ç–‘é—®ï¼Œæ¬¢è¿åˆ°æˆ‘åšå®¢ç•™è¨€","categories":[],"tags":[{"name":"æŠ€æœ¯åˆ†äº«","slug":"æŠ€æœ¯åˆ†äº«","permalink":"https://summxu.github.io/tags/æŠ€æœ¯åˆ†äº«/"}],"author":"BoomXu"},{"title":"å¦‚ä½•åœ¨ç½‘é¡µé‡Œæ’å…¥å…¨å±€æ–°çª—å£æ‰“å¼€è¶…é“¾æ¥","slug":"2017/how-links-blank","date":"2017-05-23T16:00:00.000Z","updated":"2023-08-29T09:51:35.289Z","comments":true,"path":"2017/how-links-blank/","link":"","permalink":"https://summxu.github.io/2017/how-links-blank/","excerpt":"","text":"å¾ˆå¤šç«™é•¿æœ‹å‹éƒ½é‡åˆ°äº†è‡ªå·±å†™çš„æ–‡ç« æˆ–è€…ç½‘ç«™é‡Œçš„ä¸€äº›é¡µé¢æ‰“å¼€çš„æ—¶å€™éƒ½æ˜¯ä»¥_myselfçš„æ–¹å¼æ‰“å¼€çš„ï¼Œè¿™æ ·å¾ˆå¤šé˜…è¯»è€…å°±ä¼šé‡åˆ°æƒ³çœ‹ç€è‡ªå·±å†™çš„æ•™ç¨‹è€Œåˆç‚¹å¼€æ“é“¾æ¥éƒ½æ˜¯ç›´æ¥åœ¨æœ¬é¡µé¢ä¸Šæ‰“å¼€ï¼Œè¿™æ ·æˆ‘ä»¬å°±ç›´æ¥ç”¨ä¸€ç‚¹å°æŠ€æœ¯å¯ä»¥è§£å†³ JavaScriptä»£ç å®ç°æ‰€æœ‰è¶…é“¾æ¥ä»¥_blankæ–¹å¼æ‰“å¼€12345678910&lt;!--æŠŠä¸€ä¸‹jsä»£ç æ”¾åˆ°é¡µé¢çš„å°¾éƒ¨ï¼Œä¹Ÿå°±æ˜¯&lt;/body&gt;æ ‡ç­¾çš„ä¸Šé¢--&gt;&lt;script language=\"JavaScript\" type=\"text/javascript\"&gt; &lt;!-- var a = document.getElementsByTagName(\"A\"); for(var i = 0;i &lt; a.length;i++)&#123; a[i].target = \"_blank\"; &#125; //--&gt;&lt;/script&gt; å®Œå…¨å¯ä»¥æŠŠä»¥ä¸Šä»£ç ç²˜è´´åˆ°HTMLçš„bodyå†…å°±å¯ä»¥å®ç°å…¨å±€è¶…é“¾æ¥äº†ï¼ï¼ğŸ˜€æ˜¯ä¸æ˜¯å¾ˆå¼€å¿ƒï¼ï¼ï¼ï¼Jekyllåšå®¢æ¨¡æ¿å¯ä»¥ä»¥ä¸‹ï¼š å…¨å±€åŒ…æ‹¬åœ¨é¦–é¡µä¸Šçš„æ‰€æœ‰è¿æ¥ï¼ŒæŠŠä»£ç å¤åˆ¶åˆ°â€œ_inclouds/footer.htmlâ€çš„æœ«å°¾ æ–‡ç« å†…ä¸Šçš„æ‰€æœ‰è¿æ¥ï¼Œï¼ŒæŠŠä»£ç å¤åˆ¶åˆ°â€œ_layouts/post.htmlâ€ï¼ˆæ ¹æ®è‡ªå·±çš„æ¨¡æ¿æ¥ï¼Œé»˜è®¤æ˜¯postï¼‰çš„æœ«å°¾ ä»¥ä¸Šå°±æ˜¯ç°æ‰€æœ‰è¶…é“¾æ¥ä»¥_blankæ–¹å¼æ‰“å¼€çš„æ–¹æ³•ï¼Œå¸Œæœ›å°ä¼™ä¼´ä»¬èƒ½æˆåŠŸ å¦‚æœå„ä½å–œæ¬¢æˆ‘çš„åšå®¢å†…å®¹æˆ–è€…æœ‰ä»€ç–‘é—®å¯ä»¥åœ¨æˆ‘çš„åšå®¢ä¸‹æ–¹ç•™è¨€ï¼Œæˆ–è€…ç»™æˆ‘å‘é‚®ä»¶ï¼ï¼ enjoyï¼ ###åè®°ï¼š åˆšåˆšå‘ç°äº†ç‚¹é—®é¢˜ï¼Œæˆ‘æƒ³æŠŠæˆ‘çš„æ–‡ç« é¡µé¢å¼„æˆ_blankæ–¹å¼æ‰“å¼€ï¼Œä½†æ˜¯ä¸åŒ…æ‹¬ä¸‹é¢è¿™ä¸ªâ€œä¸Šä¸€ç¯‡åšæ–‡â€å’Œâ€œä¸‹ä¸€ç¯‡åšæ–‡â€è¿™æ ·ï¼Œä½†æ˜¯ä¸€ä½†åŠ å…¥åˆ°æœ€åº•éƒ¨æ•´ä¸ªæ–‡ç« é¡µé¢çš„è¶…é“¾æ¥éƒ½æ˜¯ä¼šä»¥_blankçš„æ–¹å¼æ‰“å¼€ç½‘é¡µï¼Œè¿™æ€ä¹ˆåŠå‘¢ï¼Œå…¶å®åªéœ€ä»”ç»†åˆ†æä¸‹è¿™ä¸ªJSçš„è¿è¡ŒåŸç†ï¼š 12345678&lt;script language=\"JavaScript\" type=\"text/javascript\"&gt; &lt;!-- var a = document.getElementsByTagName(\"A\"); //é‡è¦çš„æ˜¯è¿™ä¸€æ­¥ for(var i = 0;i &lt; a.length;i++)&#123; a[i].target = \"_blank\"; &#125; //--&gt;&lt;/script&gt; è¿™ä¸ª â€œgetElementsByTagName()â€ åˆ°åº•æ˜¯ä»€ä¹ˆä½œç”¨å‘¢ï¼š å¦‚æœæŠŠç‰¹æ®Šå­—ç¬¦ä¸² â€œ*â€ ä¼ é€’ç»™ getElementsByTagName() æ–¹æ³•ï¼Œå®ƒå°†è¿”å›æ–‡æ¡£ä¸­æ‰€æœ‰å…ƒç´ çš„åˆ—è¡¨ï¼Œå…ƒç´ æ’åˆ—çš„é¡ºåºå°±æ˜¯å®ƒä»¬åœ¨æ–‡æ¡£ä¸­çš„é¡ºåºã€‚ ä¹Ÿå°±æ˜¯è¯´è¿™æ®µJSæ˜¯ä»¥ä»£ç ä»¥ä¸Šçš„è¶…é“¾æ¥æ•°æ¥è®¡ç®—çš„ã€‚è¿™æ ·å°±å¥½åŠäº†ï¼ŒæŠŠç¨‹åºä»£ç æ®µæ”¾åˆ°æŒ‰é’®å‰é¢ï¼Œæå®šï¼ 2017.06.02æ›´æ–° å‡ å¤©æ—¶é—´å†…ä¸€ç›´åœ¨å¼„åªä¿®æ”¹{ {â€“contentâ€“} }å˜é‡å†…çš„aæ ‡ç­¾çš„targetå€¼ï¼Œåæ¥è¿˜æ˜¯é€šè¿‡jQueryå¯»æ‰¾divçš„aæ ‡ç­¾æ¥å®ç°äº†ï¼Œåœ¨è¿™é‡Œè°¢è°¢KeJunå¤§ç¥ ä¸‹é¢çœ‹çœ‹ä»£ç ï¼š 1234567&lt;script&gt;$(function()&#123; $('article').find(\"#content\").find('a').on('click',function()&#123; $(this).attr(\"target\",\"_blank\") &#125;)&#125;)&lt;/script&gt; å…¶ä¸­éœ€è¦æ³¨æ„çš„æ˜¯ jQueryçš„é€‰æ‹©å™¨ï¼Œâ€œ#â€ æ˜¯é€‰æ‹©ID â€œ.â€æ˜¯é€‰æ‹©class æ€»ç®—æ˜¯å¼„å®Œäº†ï¼Œä¸‹é¢å¼€å§‹å¼„è‡ªå·±æ­å»ºissoè¯„è®ºç³»ç»Ÿï¼Œè¿˜æœ‰å¥½å¤šäº‹æƒ…åšï¼Œè¿™é‡Œendï¼","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://summxu.github.io/tags/JavaScript/"},{"name":"HTML","slug":"HTML","permalink":"https://summxu.github.io/tags/HTML/"}],"author":"BoomXu"}]}